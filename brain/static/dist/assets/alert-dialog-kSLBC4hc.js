import{c as H,u as W,a as Y,j as t,r as l,d as b,e as B,b as d}from"./index-C0SreyDh.js";import{u as h,a as y,h as m,m as D,R as U,W as V,n as X,o as J,p as Z,q as j,r as ee,O as te,s as ae,t as _}from"./layout-BdwS39hY.js";import{C as se,a as re,b as oe,c as ne}from"./card-Ch4rIBan.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=H("circle",le);function Ie(){const e=W(),{toast:a}=Y(),{data:s=[],isLoading:o}=h({queryKey:["planner","queue"],queryFn:m.planner.getQueue}),{data:n}=h({queryKey:["planner","settings"],queryFn:m.planner.getSettings}),u=y({mutationFn:m.planner.generate,onSuccess:r=>{a({title:"Tasks generated",description:`${r.tasks_created} review tasks created`}),e.invalidateQueries({queryKey:["planner","queue"]})},onError:r=>{a({title:"Generation failed",description:r.message,variant:"destructive"})}}),p=y({mutationFn:r=>m.planner.updateTask(r,{status:"completed"}),onSuccess:()=>{e.invalidateQueries({queryKey:["planner","queue"]})}}),x=y({mutationFn:r=>m.planner.updateTask(r,{status:"deferred"}),onSuccess:()=>{e.invalidateQueries({queryKey:["planner","queue"]})}}),f=y({mutationFn:r=>m.planner.updateSettings(r),onSuccess:()=>{e.invalidateQueries({queryKey:["planner","settings"]}),a({title:"Settings saved"})}}),c=new Date().toISOString().slice(0,10),v=s.filter(r=>r.scheduled_date&&r.scheduled_date<=c),N=s.filter(r=>!r.scheduled_date||r.scheduled_date>c);return t.jsxs(se,{className:"bg-black/40 border-2 border-primary rounded-none",children:[t.jsx(re,{className:"border-b border-primary/50 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(oe,{className:"font-arcade text-sm flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-primary inline-block"}),"NEXT_ACTIONS"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-terminal text-xs text-muted-foreground",children:["Source: ",n?.calendar_source==="google"?"Google":"Local"]}),t.jsx("button",{onClick:()=>f.mutate({calendar_source:n?.calendar_source==="google"?"local":"google"}),className:"px-2 py-1 border border-primary/30 text-xs font-arcade text-muted-foreground hover:text-white rounded-none",children:"TOGGLE"}),t.jsx("button",{onClick:()=>u.mutate(),disabled:u.isPending,className:"px-3 py-1 bg-primary text-black font-arcade text-xs rounded-none hover:bg-primary/80 disabled:opacity-50",children:u.isPending?"...":"GENERATE"})]})]})}),t.jsxs(ne,{className:"p-4 space-y-4",children:[o&&t.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:"Loading queue..."}),!o&&s.length===0&&t.jsx("div",{className:"font-terminal text-xs text-muted-foreground text-center py-4",children:"No pending tasks. Click GENERATE to create review tasks from weak anchors."}),v.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"font-arcade text-xs text-primary mb-2",children:["TODAY (",v.length,")"]}),t.jsx("div",{className:"space-y-2",children:v.map(r=>t.jsx(A,{task:r,onComplete:()=>p.mutate(r.id),onDefer:()=>x.mutate(r.id)},r.id))})]}),N.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"font-arcade text-xs text-muted-foreground mb-2",children:["UPCOMING (",N.length,")"]}),t.jsx("div",{className:"space-y-2",children:N.slice(0,10).map(r=>t.jsx(A,{task:r,onComplete:()=>p.mutate(r.id),onDefer:()=>x.mutate(r.id)},r.id))})]})]})]})}function A({task:e,onComplete:a,onDefer:s}){return t.jsxs("div",{className:"flex items-center justify-between border border-primary/20 bg-black/30 p-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"font-terminal text-xs text-white truncate",children:[e.review_number?`R${e.review_number}`:""," ",e.anchor_text||e.notes||"Untitled"]}),t.jsxs("div",{className:"font-terminal text-xs text-muted-foreground flex gap-3",children:[e.course_name&&t.jsx("span",{children:e.course_name}),e.scheduled_date&&t.jsx("span",{children:e.scheduled_date}),e.planned_minutes&&t.jsxs("span",{children:[e.planned_minutes,"m"]})]})]}),t.jsxs("div",{className:"flex gap-1 ml-2",children:[t.jsx("button",{onClick:a,className:"px-2 py-1 text-xs font-arcade bg-green-900/50 text-green-400 border border-green-500/30 hover:bg-green-900 rounded-none",children:"DONE"}),t.jsx("button",{onClick:s,className:"px-2 py-1 text-xs font-arcade bg-yellow-900/50 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-900 rounded-none",children:"DEFER"})]})]})}function ie(e,a,{checkForDefaultPrevented:s=!0}={}){return function(n){if(e?.(n),s===!1||!n.defaultPrevented)return a?.(n)}}var ce=Symbol("radix.slottable");function de(e){const a=({children:s})=>t.jsx(t.Fragment,{children:s});return a.displayName=`${e}.Slottable`,a.__radixId=ce,a}var C="AlertDialog",[ue]=B(C,[D]),i=D(),w=e=>{const{__scopeAlertDialog:a,...s}=e,o=i(a);return t.jsx(U,{...o,...s,modal:!0})};w.displayName=C;var pe="AlertDialogTrigger",me=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,n=i(s);return t.jsx(ae,{...n,...o,ref:a})});me.displayName=pe;var ge="AlertDialogPortal",E=e=>{const{__scopeAlertDialog:a,...s}=e,o=i(a);return t.jsx(ee,{...o,...s})};E.displayName=ge;var xe="AlertDialogOverlay",R=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,n=i(s);return t.jsx(te,{...n,...o,ref:a})});R.displayName=xe;var g="AlertDialogContent",[fe,ye]=ue(g),ve=de("AlertDialogContent"),S=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,children:o,...n}=e,u=i(s),p=l.useRef(null),x=b(a,p),f=l.useRef(null);return t.jsx(V,{contentName:g,titleName:T,docsSlug:"alert-dialog",children:t.jsx(fe,{scope:s,cancelRef:f,children:t.jsxs(X,{role:"alertdialog",...u,...n,ref:x,onOpenAutoFocus:ie(n.onOpenAutoFocus,c=>{c.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[t.jsx(ve,{children:o}),t.jsx(he,{contentRef:p})]})})})});S.displayName=g;var T="AlertDialogTitle",O=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,n=i(s);return t.jsx(J,{...n,...o,ref:a})});O.displayName=T;var P="AlertDialogDescription",q=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,n=i(s);return t.jsx(Z,{...n,...o,ref:a})});q.displayName=P;var Ne="AlertDialogAction",I=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,n=i(s);return t.jsx(j,{...n,...o,ref:a})});I.displayName=Ne;var M="AlertDialogCancel",$=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...o}=e,{cancelRef:n}=ye(M,s),u=i(s),p=b(a,n);return t.jsx(j,{...u,...o,ref:p})});$.displayName=M;var he=({contentRef:e})=>{const a=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${P}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},Ae=w,be=E,F=R,L=S,G=I,k=$,Q=O,K=q;const Me=Ae,De=({children:e})=>t.jsx(be,{container:typeof document<"u"?document.body:void 0,children:e}),z=l.forwardRef(({className:e,...a},s)=>t.jsx(F,{className:d("fixed inset-0 z-[100004] bg-black/80 opacity-100 pointer-events-none data-[state=open]:opacity-100 data-[state=closed]:opacity-0 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));z.displayName=F.displayName;const je=l.forwardRef(({className:e,...a},s)=>t.jsxs(De,{children:[t.jsx(z,{}),t.jsx(L,{ref:s,className:d("fixed left-[50%] top-[50%] z-[100005] grid w-full max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-y-auto border bg-background p-6 shadow-lg opacity-100 pointer-events-auto data-[state=open]:opacity-100 data-[state=closed]:opacity-0 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));je.displayName=L.displayName;const _e=({className:e,...a})=>t.jsx("div",{className:d("flex flex-col space-y-2 text-center sm:text-left",e),...a});_e.displayName="AlertDialogHeader";const Ce=({className:e,...a})=>t.jsx("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});Ce.displayName="AlertDialogFooter";const we=l.forwardRef(({className:e,...a},s)=>t.jsx(Q,{ref:s,className:d("text-lg font-semibold",e),...a}));we.displayName=Q.displayName;const Ee=l.forwardRef(({className:e,...a},s)=>t.jsx(K,{ref:s,className:d("text-sm text-muted-foreground",e),...a}));Ee.displayName=K.displayName;const Re=l.forwardRef(({className:e,...a},s)=>t.jsx(G,{ref:s,className:d(_(),e),...a}));Re.displayName=G.displayName;const Se=l.forwardRef(({className:e,...a},s)=>t.jsx(k,{ref:s,className:d(_({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));Se.displayName=k.displayName;export{Me as A,qe as C,Ie as N,je as a,_e as b,we as c,Ee as d,Ce as e,Se as f,Re as g};
