import{c as en,r as D,j as c,b as Te,R as To,d as Mo,e as pe,f as Po,P as Aa,g as Eo,u as Dn,X as It,h as Oo}from"./index-CCHYrS91.js";import{h as Ro,i as Io,j as Ta,u as ie,a as de,g as G,S as gt,B as ee,L as Do,k as zo,C as on,f as $o,l as Yn,T as ht,P as ln,I as cn,D as ci,c as ui,d as fi,e as di,m as hi,n as tt,o as pi}from"./layout-jNJtBElM.js";import{C as _e,a as lt,b as ct,c as we}from"./card-CDDgQEzE.js";import{e as Fo,S as Dt,a as zt,b as $t,c as Ft,d as oe,C as Lo}from"./select-CiBfteIv.js";import{B as cr,S as qo,R as mi}from"./badge-SzjNCKx1.js";import{M as Uo,T as Ho,a as Bo,b as kt,c as Ct}from"./tabs-B2tOgonI.js";import{c as Ma,R as Vo,T as Wo,C as Go,a as it,E as Ko}from"./index-RXUWRkCz.js";import{A as Pa,a as Ea,b as Oa,c as Ra,d as Ia,e as Da,f as za,g as $a}from"./alert-dialog-CvH3YdN3.js";import{B as Yo}from"./book-open-SGD4Xmog.js";import{L as Xo}from"./loader-circle-QGFSl3P4.js";import{M as Zo,r as Jo,F as Qo,a as gi}from"./index-CGpqs-WC.js";import{F as el}from"./file-text-D0N0nomL.js";import{i as tl,f as nl}from"./format-D7m0hUtg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],il=en("brain-circuit",rl);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],sl=en("database",al);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],ll=en("file",ol);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ul=en("image",cl);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Dr=en("layers",fl),Fa=D.forwardRef(({className:e,...n},r)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:r,className:Te("w-full caption-bottom text-sm",e),...n})}));Fa.displayName="Table";const La=D.forwardRef(({className:e,...n},r)=>c.jsx("thead",{ref:r,className:Te("[&_tr]:border-b",e),...n}));La.displayName="TableHeader";const qa=D.forwardRef(({className:e,...n},r)=>c.jsx("tbody",{ref:r,className:Te("[&_tr:last-child]:border-0",e),...n}));qa.displayName="TableBody";const dl=D.forwardRef(({className:e,...n},r)=>c.jsx("tfoot",{ref:r,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));dl.displayName="TableFooter";const ur=D.forwardRef(({className:e,...n},r)=>c.jsx("tr",{ref:r,className:Te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...n}));ur.displayName="TableRow";const He=D.forwardRef(({className:e,...n},r)=>c.jsx("th",{ref:r,className:Te("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));He.displayName="TableHead";const Be=D.forwardRef(({className:e,...n},r)=>c.jsx("td",{ref:r,className:Te("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));Be.displayName="TableCell";const hl=D.forwardRef(({className:e,...n},r)=>c.jsx("caption",{ref:r,className:Te("mt-4 text-sm text-muted-foreground",e),...n}));hl.displayName="TableCaption";function pl(e,n,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return n?.(a)}}var ml=To[" useInsertionEffect ".trim().toString()]||Mo;function Ua({prop:e,defaultProp:n,onChange:r=()=>{},caller:i}){const[a,s,o]=gl({defaultProp:n,onChange:r}),l=e!==void 0,f=l?e:a;{const h=D.useRef(e!==void 0);D.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${i} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,i])}const d=D.useCallback(h=>{if(l){const u=yl(h)?h(e):h;u!==e&&o.current?.(u)}else s(h)},[l,e,s,o]);return[f,d]}function gl({defaultProp:e,onChange:n}){const[r,i]=D.useState(e),a=D.useRef(r),s=D.useRef(n);return ml(()=>{s.current=n},[n]),D.useEffect(()=>{a.current!==r&&(s.current?.(r),a.current=r)},[r,a]),[r,i,s]}function yl(e){return typeof e=="function"}var Me="Accordion",xl=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zr,vl,bl]=Fo(Me),[zn]=Po(Me,[bl,Ma]),$r=Ma(),Ha=pe.forwardRef((e,n)=>{const{type:r,...i}=e,a=i,s=i;return c.jsx(zr.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?c.jsx(jl,{...s,ref:n}):c.jsx(Nl,{...a,ref:n})})});Ha.displayName=Me;var[Ba,_l]=zn(Me),[Va,wl]=zn(Me,{collapsible:!1}),Nl=pe.forwardRef((e,n)=>{const{value:r,defaultValue:i,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,f]=Ua({prop:r,defaultProp:i??"",onChange:a,caller:Me});return c.jsx(Ba,{scope:e.__scopeAccordion,value:pe.useMemo(()=>l?[l]:[],[l]),onItemOpen:f,onItemClose:pe.useCallback(()=>s&&f(""),[s,f]),children:c.jsx(Va,{scope:e.__scopeAccordion,collapsible:s,children:c.jsx(Wa,{...o,ref:n})})})}),jl=pe.forwardRef((e,n)=>{const{value:r,defaultValue:i,onValueChange:a=()=>{},...s}=e,[o,l]=Ua({prop:r,defaultProp:i??[],onChange:a,caller:Me}),f=pe.useCallback(h=>l((u=[])=>[...u,h]),[l]),d=pe.useCallback(h=>l((u=[])=>u.filter(p=>p!==h)),[l]);return c.jsx(Ba,{scope:e.__scopeAccordion,value:o,onItemOpen:f,onItemClose:d,children:c.jsx(Va,{scope:e.__scopeAccordion,collapsible:!0,children:c.jsx(Wa,{...s,ref:n})})})}),[kl,$n]=zn(Me),Wa=pe.forwardRef((e,n)=>{const{__scopeAccordion:r,disabled:i,dir:a,orientation:s="vertical",...o}=e,l=pe.useRef(null),f=Eo(l,n),d=vl(r),u=Io(a)==="ltr",p=pl(e.onKeyDown,m=>{if(!xl.includes(m.key))return;const y=m.target,w=d().filter(x=>!x.ref.current?.disabled),v=w.findIndex(x=>x.ref.current===y),g=w.length;if(v===-1)return;m.preventDefault();let k=v;const j=0,b=g-1,_=()=>{k=v+1,k>b&&(k=j)},S=()=>{k=v-1,k<j&&(k=b)};switch(m.key){case"Home":k=j;break;case"End":k=b;break;case"ArrowRight":s==="horizontal"&&(u?_():S());break;case"ArrowDown":s==="vertical"&&_();break;case"ArrowLeft":s==="horizontal"&&(u?S():_());break;case"ArrowUp":s==="vertical"&&S();break}const M=k%g;w[M].ref.current?.focus()});return c.jsx(kl,{scope:r,disabled:i,direction:a,orientation:s,children:c.jsx(zr.Slot,{scope:r,children:c.jsx(Aa.div,{...o,"data-orientation":s,ref:f,onKeyDown:i?void 0:p})})})}),Nn="AccordionItem",[Cl,Fr]=zn(Nn),Ga=pe.forwardRef((e,n)=>{const{__scopeAccordion:r,value:i,...a}=e,s=$n(Nn,r),o=_l(Nn,r),l=$r(r),f=Ro(),d=i&&o.value.includes(i)||!1,h=s.disabled||e.disabled;return c.jsx(Cl,{scope:r,open:d,disabled:h,triggerId:f,children:c.jsx(Vo,{"data-orientation":s.orientation,"data-state":Qa(d),...l,...a,ref:n,disabled:h,open:d,onOpenChange:u=>{u?o.onItemOpen(i):o.onItemClose(i)}})})});Ga.displayName=Nn;var Ka="AccordionHeader",Ya=pe.forwardRef((e,n)=>{const{__scopeAccordion:r,...i}=e,a=$n(Me,r),s=Fr(Ka,r);return c.jsx(Aa.h3,{"data-orientation":a.orientation,"data-state":Qa(s.open),"data-disabled":s.disabled?"":void 0,...i,ref:n})});Ya.displayName=Ka;var fr="AccordionTrigger",Xa=pe.forwardRef((e,n)=>{const{__scopeAccordion:r,...i}=e,a=$n(Me,r),s=Fr(fr,r),o=wl(fr,r),l=$r(r);return c.jsx(zr.ItemSlot,{scope:r,children:c.jsx(Wo,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...i,ref:n})})});Xa.displayName=fr;var Za="AccordionContent",Ja=pe.forwardRef((e,n)=>{const{__scopeAccordion:r,...i}=e,a=$n(Me,r),s=Fr(Za,r),o=$r(r);return c.jsx(Go,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...i,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Ja.displayName=Za;function Qa(e){return e?"open":"closed"}var Sl=Ha,Al=Ga,Tl=Ya,es=Xa,ts=Ja;const Ml=Sl,dr=D.forwardRef(({className:e,...n},r)=>c.jsx(Al,{ref:r,className:Te("border-b",e),...n}));dr.displayName="AccordionItem";const hr=D.forwardRef(({className:e,children:n,...r},i)=>c.jsx(Tl,{className:"flex",children:c.jsxs(es,{ref:i,className:Te("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...r,children:[n,c.jsx(Ta,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));hr.displayName=es.displayName;const pr=D.forwardRef(({className:e,children:n,...r},i)=>c.jsx(ts,{ref:i,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:c.jsx("div",{className:Te("pb-4 pt-0",e),children:n})}));pr.displayName=ts.displayName;const Pl=`You are extracting a full course syllabus for ingestion.

Return ONLY a valid JSON object with NO additional text, NO markdown code blocks, NO explanation.

Top-level structure:
{
  "term": {
    "startDate": "2026-01-05",
    "endDate": "2026-04-24",
    "timezone": "America/Chicago"
  },
  "modules": [
    {
      "name": "Module 1: ...",
      "orderIndex": 1,
      "topics": ["..."],
      "readings": ["..."],
      "assessments": ["..."]
    }
  ],
  "events": [
    {
      "type": "class" | "lecture" | "reading" | "topic" | "assignment" | "quiz" | "exam" | "assessment",
      "title": "string",
      "date": "YYYY-MM-DD",
      "dueDate": "YYYY-MM-DD | null",
      "startTime": "HH:MM | null",
      "endTime": "HH:MM | null",
      "daysOfWeek": ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],
      "delivery": "in_person" | "virtual_sync" | "virtual_async" | "hybrid",
      "assessmentType": "EA | null",
      "moduleName": "Module 1: ... | null",
      "notes": "string | null"
    }
  ]
}

Rules:
1. Include ALL items: class meetings, assignments, quizzes, exams, topics, readings, virtual synchronous/asynchronous activities, and learning assessments (EA).
2. For repeating class meetings, set daysOfWeek + startTime/endTime, and include term start/end.
3. For one-off items, set date or dueDate.
4. Keep moduleName when items belong to a module.
5. Return ONLY the JSON object, nothing else.

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,El=`I need you to extract learning objectives from my course material.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "loCode": "string",
  "title": "string"
}

Rules:
1. loCode: Preserve original numbering if present, or create sequential "1", "2", "3"...
2. title: Keep the objective text exactly as written
3. Return ONLY the JSON array, nothing else

Here are my learning objectives:

[PASTE YOUR LOs BELOW]`,Ol=`I need you to convert my study session notes into WRAP format.

WRAP format has 4 sections:

Section A: Obsidian Notes
- Main concepts and insights from the session
- Key points to remember

Section B: Anki Cards
- Format: "front: [question]" on one line, "back: [answer]" on next line
- Create cards for important facts and concepts

Section C: Spaced Schedule
- R1=tomorrow
- R2=3d
- R3=1w
- R4=2w

Section D: JSON Logs
\`\`\`json
{
  "merged": {
    "topic": "[main topic]",
    "mode": "Core",
    "duration_minutes": [number],
    "understanding": [1-5],
    "retention": [1-5]
  }
}
\`\`\`

Return ONLY the WRAP formatted content, NO additional text or explanation.

Here are my study notes:

[PASTE YOUR NOTES BELOW]`;function Rl(){const e=Dn(),[n,r]=D.useState(null),[i,a]=D.useState(null),[s,o]=D.useState(""),[l,f]=D.useState(""),[d,h]=D.useState(null),[u,p]=D.useState(""),[m,y]=D.useState(null),[w,v]=D.useState(null),[g,k]=D.useState(null),{data:j=[]}=ie({queryKey:["courses"],queryFn:()=>G.courses.getActive()}),{data:b=[]}=ie({queryKey:["modules",n],queryFn:()=>n?G.modules.getByCourse(n):Promise.resolve([]),enabled:!!n}),{data:_=[]}=ie({queryKey:["learningObjectives",n],queryFn:()=>n?G.learningObjectives.getByCourse(n):Promise.resolve([]),enabled:!!n}),S=de({mutationFn:async P=>{if(!n)throw new Error("Select a course first");const z=JSON.parse(A(P));return G.syllabus.importBulk(n,z)},onSuccess:P=>{e.invalidateQueries({queryKey:["scheduleEvents"]}),e.invalidateQueries({queryKey:["modules"]}),o(""),v({type:"success",message:`Imported: ${P.modulesCreated} modules, ${P.eventsCreated} events (${P.classMeetingsExpanded} class meetings expanded)`}),h(null)},onError:P=>{v({type:"error",message:P.message||"Failed to import syllabus"}),h(P.message||"Failed to import syllabus")}}),M=de({mutationFn:async P=>{if(!n)throw new Error("Select a course first");const z=JSON.parse(A(P));return G.learningObjectives.createBulk(n,i,z)},onSuccess:()=>{e.invalidateQueries({queryKey:["learningObjectives"]}),f(""),h(null)},onError:P=>{h(P.message||"Failed to import LOs")}}),x=P=>{navigator.clipboard.writeText(P)},A=P=>{const z=P.trim();if(!z)return"";const N=z.match(/```json\s*([\s\S]*?)```/i)||z.match(/```\s*([\s\S]*?)```/i),I=N?N[1].trim():z,O=I.indexOf("{"),q=I.lastIndexOf("}");return O!==-1&&q!==-1&&q>O?I.slice(O,q+1).trim():I},E=P=>{const z=[];let N=null;try{const F=A(P);if(!F){z.push("No JSON found in input"),k({isValid:!1,errors:z});return}N=JSON.parse(F)}catch(F){z.push(`Invalid JSON: ${F.message}`),k({isValid:!1,errors:z});return}(!N||typeof N!="object")&&z.push("JSON must be an object");const I=N.name&&typeof N.name=="string"&&N.name.trim(),O=N.term&&typeof N.term=="object",q=Array.isArray(N.modules),H=Array.isArray(N.events);if(I||z.push("Missing or invalid 'name' field"),O||z.push("Missing or invalid 'term' object"),q||z.push("Missing or invalid 'modules' array"),H||z.push("Missing or invalid 'events' array"),O&&(N.term.startDate||z.push("term.startDate is required"),N.term.endDate||z.push("term.endDate is required")),z.length===0){const F={courseName:N.name,moduleCount:N.modules?.length||0,eventCount:N.events?.length||0,startDate:N.term?.startDate,endDate:N.term?.endDate};k({isValid:!0,errors:[],preview:F})}else k({isValid:!1,errors:z})},R=async()=>{try{y(null);const P=u,N=await G.brain.ingest(P,"pasted_wrap.md");N.sessionSaved?(y({type:"success",message:`✓ Session saved! ID: ${N.sessionId}, Cards: ${N.cardsCreated||0}`}),p("")):y({type:"error",message:N.errors?.join(", ")||N.message})}catch(P){y({type:"error",message:P.message||"Failed to ingest"})}};return c.jsxs("div",{className:"space-y-6 p-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),c.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:n||"",onChange:P=>{r(P.target.value?parseInt(P.target.value):null),a(null)},children:[c.jsx("option",{value:"",children:"-- Select Course --"}),j.map(P=>c.jsx("option",{value:P.id,children:P.name},P.id))]})]}),!n&&c.jsx("p",{className:"text-center text-muted-foreground font-terminal text-sm py-8",children:"Select a course above to begin ingestion."}),n&&c.jsxs("div",{className:"border border-secondary/40 rounded-none p-4 bg-primary/5",children:[c.jsx("h2",{className:"text-xl font-arcade text-primary mb-4",children:"WRAP SESSION INGESTION"}),m&&c.jsx("div",{className:`mb-4 p-3 rounded-none font-terminal text-sm ${m.type==="success"?"bg-green-900/30 border border-green-500 text-green-400":"bg-red-900/30 border border-red-500 text-red-400"}`,children:m.message}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>x(Ol),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),c.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Use ChatGPT to convert your notes to WRAP format, then paste or upload below:"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Paste WRAP Content"}),c.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-48 font-terminal text-sm",placeholder:"Paste your WRAP session here...",value:u,onChange:P=>{p(P.target.value),y(null)}})]}),c.jsx("button",{onClick:R,disabled:!u,className:"bg-primary hover:bg-primary/80 disabled:opacity-50 px-6 py-3 rounded-none font-arcade text-sm w-full",type:"button",children:"INGEST WRAP SESSION"})]})]}),n&&c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"text-xl font-arcade text-primary",children:"MATERIAL INGESTION"}),d&&c.jsx("div",{className:"bg-destructive/20 border border-destructive rounded-none p-3 text-destructive font-terminal",children:d}),n&&c.jsxs(Ml,{type:"multiple",className:"border border-secondary/40 rounded-none divide-y divide-secondary/40",children:[c.jsxs(dr,{value:"syllabus-import",className:"border-secondary/40",children:[c.jsx(hr,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"SYLLABUS IMPORT (MODULES + SCHEDULE)"}),c.jsxs(pr,{className:"px-3",children:[c.jsx("button",{onClick:()=>x(Pl),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),c.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (combined JSON object) below:"}),c.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-40 font-terminal text-sm",placeholder:'{"term":{"startDate":"2026-01-15","endDate":"2026-05-01","timezone":"America/Chicago"},"modules":[...],"events":[...]}',value:s,onChange:P=>{o(P.target.value),v(null),P.target.value.trim()?E(P.target.value):k(null)}}),g&&!g.isValid&&c.jsxs("div",{className:"mt-2 p-2 border border-red-500 bg-red-900/30 rounded-none font-terminal text-xs text-red-400",children:[c.jsx("div",{className:"font-bold mb-1",children:"Validation Errors:"}),g.errors.map((P,z)=>c.jsxs("div",{children:["• ",P]},z))]}),g&&g.isValid&&g.preview&&c.jsxs("div",{className:"mt-2 p-3 border border-primary bg-primary/10 rounded-none font-terminal text-xs text-primary",children:[c.jsx("div",{className:"font-bold mb-2",children:"✓ Valid JSON Preview:"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Course:"})," ",g.preview.courseName]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Modules:"})," ",g.preview.moduleCount]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Events:"})," ",g.preview.eventCount]}),g.preview.startDate&&c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Start:"})," ",g.preview.startDate]}),g.preview.endDate&&c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"End:"})," ",g.preview.endDate]})]})]}),c.jsx("button",{onClick:()=>S.mutate(s),disabled:!g?.isValid||S.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:S.isPending?"Importing...":"Import Syllabus"}),w&&c.jsx("div",{className:`mt-2 p-2 border font-terminal text-xs ${w.type==="success"?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:w.message})]})]}),c.jsxs(dr,{value:"learning-objectives",className:"border-secondary/40",children:[c.jsx(hr,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"LEARNING OBJECTIVES IMPORT"}),c.jsxs(pr,{className:"px-3",children:[c.jsxs("div",{className:"mb-2",children:[c.jsx("label",{className:"block text-xs mb-1 font-terminal text-muted-foreground",children:"Target Module (optional)"}),c.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:i||"",onChange:P=>a(P.target.value?parseInt(P.target.value):null),children:[c.jsx("option",{value:"",children:"-- No Module (Course-level) --"}),b.map(P=>c.jsx("option",{value:P.id,children:P.name},P.id))]})]}),c.jsx("button",{onClick:()=>x(El),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),c.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),c.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"loCode": "1.1", "title": "Define..."}]',value:l,onChange:P=>f(P.target.value)}),c.jsx("button",{onClick:()=>M.mutate(l),disabled:!l||M.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:M.isPending?"Importing...":"Import LOs"}),_.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("h4",{className:"font-terminal text-xs mb-2",children:["Current LOs (",_.length,")"]}),c.jsx("div",{className:"max-h-48 overflow-y-auto",children:_.map(P=>c.jsxs("div",{className:"text-xs py-1 border-b border-secondary/30 font-terminal",children:[c.jsx("span",{className:"text-primary",children:P.loCode}),": ",P.title,c.jsx("span",{className:`ml-2 text-[10px] px-1 rounded ${P.status==="solid"?"bg-green-600":P.status==="in_progress"?"bg-yellow-600":P.status==="need_review"?"bg-orange-600":"bg-gray-600"}`,children:P.status})]},P.id))})]})]})]})]})]})]})}function Il(){const e=Dn(),[n,r]=D.useState(null),[i,a]=D.useState({}),[s,o]=D.useState({}),[l,f]=D.useState(new Set),[d,h]=D.useState(new Set),[u,p]=D.useState(null),m=D.useRef(null),{data:y=[]}=ie({queryKey:["courses"],queryFn:()=>G.courses.getActive()}),{data:w=[]}=ie({queryKey:["modules",n],queryFn:()=>n?G.modules.getByCourse(n):Promise.resolve([]),enabled:!!n}),{data:v=[]}=ie({queryKey:["scheduleEvents",n],queryFn:()=>n?G.scheduleEvents.getByCourse(n):Promise.resolve([]),enabled:!!n}),g=de({mutationFn:({id:x,data:A})=>G.modules.update(x,A),onSuccess:()=>{e.invalidateQueries({queryKey:["modules"]})}}),k=de({mutationFn:x=>G.modules.delete(x),onSuccess:()=>{e.invalidateQueries({queryKey:["modules"]})}}),j=de({mutationFn:x=>G.modules.deleteMany(x),onSuccess:()=>{e.invalidateQueries({queryKey:["modules"]}),f(new Set)}}),b=de({mutationFn:({id:x,data:A})=>G.scheduleEvents.update(x,A),onSuccess:()=>{e.invalidateQueries({queryKey:["scheduleEvents"]})}}),_=de({mutationFn:x=>G.scheduleEvents.delete(x),onSuccess:()=>{e.invalidateQueries({queryKey:["scheduleEvents"]})}}),S=de({mutationFn:x=>G.scheduleEvents.deleteMany(x),onSuccess:()=>{e.invalidateQueries({queryKey:["scheduleEvents"]}),h(new Set)}}),M=(x,A,E)=>{if(!A.length)return;const R={type:x,ids:A,label:E};m.current=R,p(R)};return c.jsxs("div",{className:"space-y-6 p-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),c.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:n||"",onChange:x=>{r(x.target.value?parseInt(x.target.value):null)},children:[c.jsx("option",{value:"",children:"-- Select Course --"}),y.map(x=>c.jsx("option",{value:x.id,children:x.name},x.id))]})]}),n&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsx(lt,{className:"border-b border-secondary/50 p-3",children:c.jsxs(ct,{className:"font-arcade text-sm flex items-center gap-2",children:[c.jsx(sl,{className:"w-4 h-4"}),"MODULES (",w.length,")"]})}),c.jsx(we,{className:"p-0",children:w.length===0?c.jsx("p",{className:"text-xs text-muted-foreground font-terminal p-4",children:"No modules yet. Import a syllabus to add modules."}):c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",onClick:()=>{const x=new Set;l.size!==w.length&&w.forEach(A=>x.add(A.id)),f(x)},children:l.size===w.length?"Uncheck All":"Check All"}),c.jsx("button",{className:"bg-destructive hover:bg-destructive/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:l.size===0,onClick:()=>{M("modules",Array.from(l),`Delete ${l.size} module(s)? This cannot be undone.`)},children:"Delete"}),c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:l.size===0,onClick:()=>{l.forEach(x=>{const A=i[x];A&&g.mutate({id:x,data:A})}),a(x=>{const A={...x};return l.forEach(E=>{delete A[E]}),A})},children:"Save"})]}),c.jsx(gt,{className:"h-[280px]",children:c.jsxs("table",{className:"w-full text-sm font-terminal",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-secondary/50",children:[c.jsx("th",{className:"text-center p-2 w-8",children:"Select"}),c.jsx("th",{className:"text-left p-2",children:"Module"}),c.jsx("th",{className:"text-center p-2",children:"Order"}),c.jsx("th",{className:"text-center p-2",children:"Files"}),c.jsx("th",{className:"text-center p-2",children:"NotebookLM"}),c.jsx("th",{className:"text-center p-2",children:"Status"}),c.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),c.jsx("tbody",{children:w.map(x=>c.jsxs("tr",{className:"border-b border-secondary/30",children:[c.jsx("td",{className:"text-center p-2",children:c.jsx(it,{checked:l.has(x.id),onCheckedChange:A=>f(E=>{const R=new Set(E);return A?R.add(x.id):R.delete(x.id),R}),className:"rounded-none border-secondary data-[state=checked]:bg-secondary w-4 h-4"})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:i[x.id]?.name??x.name,onChange:A=>a(E=>({...E,[x.id]:{...E[x.id],name:A.target.value}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx("input",{type:"number",className:"w-16 bg-black border border-secondary rounded-none p-1 text-xs font-terminal text-center",value:i[x.id]?.orderIndex??x.orderIndex??0,onChange:A=>a(E=>({...E,[x.id]:{...E[x.id],orderIndex:parseInt(A.target.value||"0",10)}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx(it,{checked:x.filesDownloaded,onCheckedChange:A=>g.mutate({id:x.id,data:{filesDownloaded:!!A}}),className:"rounded-none border-secondary data-[state=checked]:bg-secondary w-4 h-4"})}),c.jsx("td",{className:"text-center p-2",children:c.jsx(it,{checked:x.notebooklmLoaded,onCheckedChange:A=>g.mutate({id:x.id,data:{notebooklmLoaded:!!A}}),className:"rounded-none border-secondary data-[state=checked]:bg-secondary w-4 h-4"})}),c.jsx("td",{className:"text-center p-2",children:x.filesDownloaded&&x.notebooklmLoaded?c.jsx("span",{className:"text-green-400",children:"Ready"}):c.jsx("span",{className:"text-yellow-400",children:"Pending"})}),c.jsxs("td",{className:"text-center p-2 space-x-2",children:[c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:!i[x.id],onClick:()=>{const A=i[x.id];A&&(g.mutate({id:x.id,data:A}),a(E=>{const R={...E};return delete R[x.id],R}))},children:"Save"}),c.jsx("button",{className:"bg-destructive hover:bg-destructive/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",onClick:()=>k.mutate(x.id),children:"Delete"})]})]},x.id))})]})})]})})]}),c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsx(lt,{className:"border-b border-secondary/50 p-3",children:c.jsxs(ct,{className:"font-arcade text-sm flex items-center gap-2",children:[c.jsx(Dr,{className:"w-4 h-4"}),"SCHEDULE ITEMS (",v.length,")"]})}),c.jsx(we,{className:"p-0",children:v.length===0?c.jsx("p",{className:"text-xs text-muted-foreground font-terminal p-4",children:"No schedule items yet. Import a syllabus to add events."}):c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",onClick:()=>{const x=new Set;d.size!==v.length&&v.forEach(A=>x.add(A.id)),h(x)},children:d.size===v.length?"Uncheck All":"Check All"}),c.jsx("button",{className:"bg-destructive hover:bg-destructive/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:d.size===0,onClick:()=>{M("schedule",Array.from(d),`Delete ${d.size} schedule item(s)? This cannot be undone.`)},children:"Delete"}),c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:d.size===0,onClick:()=>{d.forEach(x=>{const A=s[x];A&&b.mutate({id:x,data:A})}),o(x=>{const A={...x};return d.forEach(E=>{delete A[E]}),A})},children:"Save"})]}),c.jsx(gt,{className:"h-[280px]",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-xs font-terminal",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-secondary/50",children:[c.jsx("th",{className:"text-center p-2 w-8",children:"Select"}),c.jsx("th",{className:"text-left p-2",children:"Type"}),c.jsx("th",{className:"text-left p-2",children:"Delivery"}),c.jsx("th",{className:"text-left p-2",children:"Title"}),c.jsx("th",{className:"text-center p-2",children:"Date"}),c.jsx("th",{className:"text-center p-2",children:"Start"}),c.jsx("th",{className:"text-center p-2",children:"End"}),c.jsx("th",{className:"text-center p-2",children:"Due"}),c.jsx("th",{className:"text-left p-2",children:"Notes"}),c.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),c.jsx("tbody",{children:v.map(x=>{const A=s[x.id]||{},E=A.type??x.type??"",R=A.delivery??x.delivery??"",P=A.title??x.title??"",z=A.date??x.date??"",N=A.startTime??x.startTime??"",I=A.endTime??x.endTime??"",O=A.dueDate??x.dueDate??"",q=A.notes??x.notes??"",H=!!s[x.id];return c.jsxs("tr",{className:"border-b border-secondary/30 align-top",children:[c.jsx("td",{className:"text-center p-2",children:c.jsx(it,{checked:d.has(x.id),onCheckedChange:F=>h(L=>{const V=new Set(L);return F?V.add(x.id):V.delete(x.id),V}),className:"rounded-none border-secondary data-[state=checked]:bg-secondary w-4 h-4"})}),c.jsx("td",{className:"p-2",children:c.jsx("select",{className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:E,onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],type:F.target.value}})),children:["class","lecture","reading","topic","assignment","quiz","exam","assessment","other"].map(F=>c.jsx("option",{value:F,children:F},F))})}),c.jsx("td",{className:"p-2",children:c.jsx("select",{className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:R,onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],delivery:F.target.value}})),children:["","in_person","virtual_sync","virtual_async","online_module","hybrid"].map(F=>c.jsx("option",{value:F,children:F||"--"},F))})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:P,onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],title:F.target.value}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx("input",{type:"date",className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:z||"",onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],date:F.target.value}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx("input",{type:"time",className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:N||"",onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],startTime:F.target.value}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx("input",{type:"time",className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:I||"",onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],endTime:F.target.value}}))})}),c.jsx("td",{className:"text-center p-2",children:c.jsx("input",{type:"date",className:"bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:O||"",onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],dueDate:F.target.value}}))})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-black border border-secondary rounded-none p-1 text-xs font-terminal",value:q||"",onChange:F=>o(L=>({...L,[x.id]:{...L[x.id],notes:F.target.value}}))})}),c.jsxs("td",{className:"text-center p-2 space-x-2",children:[c.jsx("button",{className:"bg-secondary hover:bg-secondary/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",disabled:!H,onClick:()=>{b.mutate({id:x.id,data:{type:E,title:P,date:z,startTime:N,endTime:I,dueDate:O,notes:q,delivery:R}}),o(F=>{const L={...F};return delete L[x.id],L})},children:"Save"}),c.jsx("button",{className:"bg-destructive hover:bg-destructive/80 px-2 py-1 rounded-none text-[10px] font-terminal",type:"button",onClick:()=>_.mutate(x.id),children:"Delete"})]})]},x.id)})})]})})})]})})]})]}),c.jsx(Pa,{open:!!u,onOpenChange:x=>!x&&p(null),children:c.jsxs(Ea,{className:"bg-black border-2 border-primary rounded-none font-terminal text-primary shadow-none max-w-md translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[c.jsxs(Oa,{className:"text-left",children:[c.jsx(Ra,{className:"font-arcade text-destructive",children:"CONFIRM_DELETE"}),c.jsx(Ia,{className:"font-terminal text-muted-foreground",children:u?.label})]}),c.jsxs(Da,{className:"gap-2 sm:justify-end",children:[c.jsx(za,{className:"rounded-none border-secondary font-terminal text-xs hover:bg-secondary/20",onClick:()=>{m.current=null,p(null)},children:"CANCEL"}),c.jsx($a,{className:"rounded-none bg-destructive text-destructive-foreground font-arcade text-xs hover:bg-destructive/80",type:"button",onClick:()=>{const x=m.current;x&&(x.type==="modules"?j.mutate(x.ids):S.mutate(x.ids),m.current=null,p(null))},children:"DELETE"})]})]})})]})}function Dl(){const[e,n]=D.useState(null),{data:r=[]}=ie({queryKey:["courses"],queryFn:async()=>{const u=await fetch("/api/courses");if(!u.ok)throw new Error("Failed to fetch courses");return u.json()}}),{data:i=[],isLoading:a}=ie({queryKey:["modules",e],queryFn:()=>e?G.modules.getByCourse(e):Promise.resolve([]),enabled:!!e}),{data:s=[]}=ie({queryKey:["learningObjectives",e],queryFn:()=>e?G.learningObjectives.getByCourse(e):Promise.resolve([]),enabled:!!e}),{data:o=[]}=ie({queryKey:["scheduleEvents",e],queryFn:()=>e?G.scheduleEvents.getByCourse(e):Promise.resolve([]),enabled:!!e}),l=i.reduce((u,p)=>{const m=p.orderIndex||0;return u[m]||(u[m]=[]),u[m].push(p),u},{}),f=s.reduce((u,p)=>{const m=p.moduleId||0;return u[m]||(u[m]=[]),u[m].push(p),u},{}),d=o.reduce((u,p)=>{const m=p.linkedModuleId||0;return u[m]||(u[m]=[]),u[m].push(p),u},{}),h=i.length>0||s.length>0||o.length>0;return c.jsxs("div",{className:"space-y-4 p-4",children:[c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsx(lt,{className:"border-b border-secondary/50 p-3",children:c.jsx(ct,{className:"font-arcade text-sm",children:"SELECT COURSE"})}),c.jsx(we,{className:"p-3",children:c.jsxs(Dt,{value:e?.toString()||"",onValueChange:u=>n(u?parseInt(u):null),children:[c.jsx(zt,{className:"rounded-none border-primary",children:c.jsx($t,{placeholder:"Choose a course..."})}),c.jsx(Ft,{children:r.map(u=>c.jsx(oe,{value:u.id.toString(),children:u.name},u.id))})]})})]}),e?a?c.jsx(_e,{className:"brain-card rounded-none",children:c.jsx(we,{className:"p-8 text-center",children:c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Loading syllabus..."})})}):h?c.jsx(gt,{className:"h-[600px]",children:c.jsx("div",{className:"space-y-4 pr-4",children:Object.entries(l).sort(([u],[p])=>parseInt(u)-parseInt(p)).map(([u,p])=>c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsx(lt,{className:"border-b border-secondary/50 p-3",children:c.jsxs(ct,{className:"font-arcade text-sm",children:["WEEK ",u]})}),c.jsx(we,{className:"p-3 space-y-3",children:p.map(m=>c.jsxs("div",{className:"space-y-2 border-l-2 border-secondary/40 pl-3",children:[c.jsx("div",{className:"font-arcade text-xs text-primary",children:m.name}),f[m.id]&&f[m.id].length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground uppercase",children:"Objectives"}),c.jsx("div",{className:"space-y-1",children:f[m.id].map(y=>c.jsxs("div",{className:"font-terminal text-xs text-secondary",children:["• ",y.loCode,": ",y.title]},y.id))})]}),d[m.id]&&d[m.id].length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground uppercase",children:"Events"}),c.jsx("div",{className:"space-y-1",children:d[m.id].map(y=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cr,{variant:"outline",className:`text-[10px] font-terminal ${y.type==="quiz"?"border-yellow-500/50 text-yellow-400":y.type==="exam"?"border-red-500/50 text-red-400":"border-blue-500/50 text-blue-400"}`,children:y.type?.toUpperCase()}),c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:y.title}),y.dueDate&&c.jsx("span",{className:"font-terminal text-[10px] text-secondary ml-auto",children:new Date(y.dueDate).toLocaleDateString()})]},y.id))})]})]},m.id))})]},u))})}):c.jsx(_e,{className:"brain-card rounded-none",children:c.jsx(we,{className:"p-8 text-center",children:c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No syllabus imported"})})}):c.jsx(_e,{className:"brain-card rounded-none",children:c.jsx(we,{className:"p-8 text-center",children:c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Select a course to view syllabus"})})})]})}function yi(e,n){if(n.length===0)return e;const r=[];for(const i of n)r.push({type:"image_url",image_url:{url:i}});return e.trim()&&r.push({type:"text",text:e}),r}function zl(){const[e,n]=D.useState(!1),[r,i]=D.useState("chat"),[a,s]=D.useState([]),[o,l]=D.useState(""),[f,d]=D.useState([]),[h,u]=D.useState(!1),[p,m]=D.useState("anki"),y=D.useRef(null),w=D.useRef(null),v=Dn(),g=D.useCallback(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[]);D.useEffect(()=>{g()},[a,g]);const k=A=>{const E=new FileReader;E.onload=()=>{typeof E.result=="string"&&d(R=>[...R,E.result])},E.readAsDataURL(A)},j=A=>{const E=A.clipboardData?.items;if(E){for(const R of Array.from(E))if(R.type.startsWith("image/")){A.preventDefault();const P=R.getAsFile();P&&k(P)}}},b=A=>{const E=A.target.files;if(E){for(const R of Array.from(E))R.type.startsWith("image/")&&k(R);A.target.value=""}},_=async(A,E)=>{s(O=>[...O,{role:"assistant",content:""}]);const R=a.map(O=>({role:O.role,content:O.images?.length?yi(O.content,O.images):O.content})).concat([{role:"user",content:yi(A,E)}]),z=(await fetch("/api/brain/quick-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:R})})).body?.getReader(),N=new TextDecoder;if(!z)throw new Error("No response body");let I="";for(;;){const{done:O,value:q}=await z.read();if(O)break;I+=N.decode(q,{stream:!0});const H=I.split(`
`);I=H.pop()??"";for(const F of H){if(!F.startsWith("data: "))continue;const L=F.slice(6);if(L==="[DONE]")break;try{const V=JSON.parse(L);if(V.error){s(W=>{const Y=[...W];return Y[Y.length-1]={role:"assistant",content:`Error: ${V.error}`},Y});return}V.content&&s(W=>{const Y=[...W],K=Y[Y.length-1];return Y[Y.length-1]={...K,content:K.content+V.content},Y})}catch{}}}},S=async A=>{try{const E=p==="both"?"all":p,R=p==="obsidian"||p==="both",P=await G.brain.chat(A,R,E);let z=P.response;const N={cardsCreated:P.cardsCreated,sessionSaved:P.sessionSaved,sessionId:P.sessionId},I=[];P.sessionSaved&&I.push(`Session saved (ID: ${P.sessionId})`),P.cardsCreated&&I.push(`${P.cardsCreated} Anki cards created`),P.obsidianSynced&&I.push("Synced to Obsidian"),P.obsidianError&&I.push(`Obsidian error: ${P.obsidianError}`),I.length>0&&(z=`${I.join(" | ")}

${z}`),s(O=>[...O,{role:"assistant",content:z,meta:N}]),v.invalidateQueries({queryKey:["anki","drafts"]}),v.invalidateQueries({queryKey:["brain","metrics"]}),v.invalidateQueries({queryKey:["sessions"]})}catch(E){s(R=>[...R,{role:"assistant",content:`Error: ${E}`}])}},M=async()=>{const A=o.trim();if(!A&&f.length===0)return;const E={role:"user",content:A,images:[...f]};s(R=>[...R,E]),l(""),d([]),u(!0);try{r==="chat"?await _(A,E.images??[]):await S(A)}catch(R){s(P=>{const z=P[P.length-1];if(z?.role==="assistant"&&!z.content){const N=[...P];return N[N.length-1]={role:"assistant",content:`Error: ${R}`},N}return[...P,{role:"assistant",content:`Error: ${R}`}]})}finally{u(!1)}},x=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),M())};return e?c.jsxs(_e,{className:"brain-card border-primary/30 mb-4",children:[c.jsxs(lt,{className:"py-2 px-4 flex flex-row items-center justify-between",children:[c.jsx(ct,{className:"text-xs",children:"BRAIN CHAT"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("div",{className:"flex bg-secondary/40 border border-secondary/60 rounded overflow-hidden mr-2",children:[c.jsxs("button",{onClick:()=>i("chat"),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${r==="chat"?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[c.jsx(Uo,{className:"w-3 h-3"})," CHAT"]}),c.jsxs("button",{onClick:()=>i("ingest"),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${r==="ingest"?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[c.jsx(il,{className:"w-3 h-3"})," INGEST"]})]}),c.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>n(!1),children:c.jsx(Lo,{className:"w-4 h-4"})})]})]}),c.jsxs(we,{className:"p-0",children:[c.jsxs("div",{className:"px-4 py-1 border-b border-border flex items-center justify-between",children:[c.jsx("p",{className:"text-[10px] text-muted-foreground",children:r==="chat"?"General chat with Gemini Flash — ask anything, paste screenshots":"Study ingestion — paste notes to create Anki cards & save sessions"}),r==="ingest"&&c.jsx("div",{className:"flex bg-secondary/40 border border-secondary/60 rounded overflow-hidden",children:["anki","obsidian","both"].map(A=>c.jsxs("button",{onClick:()=>m(A),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${p===A?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[A==="anki"&&c.jsxs(c.Fragment,{children:[c.jsx(Dr,{className:"w-3 h-3"})," ANKI"]}),A==="obsidian"&&c.jsxs(c.Fragment,{children:[c.jsx(Yo,{className:"w-3 h-3"})," OBSIDIAN"]}),A==="both"&&c.jsx(c.Fragment,{children:"BOTH"})]},A))})]}),c.jsxs("div",{ref:y,className:"h-64 overflow-y-auto px-4 py-2 space-y-3",children:[a.length===0&&c.jsx("p",{className:"text-muted-foreground text-xs text-center py-8",children:r==="chat"?"Ask anything. Paste screenshots with Ctrl+V.":"Paste your study notes to ingest into Brain."}),a.map((A,E)=>c.jsx("div",{className:`flex ${A.role==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[80%] rounded px-3 py-2 text-sm whitespace-pre-wrap ${A.role==="user"?"bg-primary/20 text-foreground border border-primary/30":"bg-secondary/40 text-foreground border border-secondary/60"}`,children:[A.images?.map((R,P)=>c.jsx("img",{src:R,alt:"attached",className:"max-h-32 rounded mb-1"},P)),A.content]})},E)),h&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-secondary/40 border border-secondary/60 rounded px-3 py-2",children:c.jsx(Xo,{className:"w-4 h-4 animate-spin text-primary"})})})]}),f.length>0&&c.jsx("div",{className:"px-4 py-1 flex gap-2 flex-wrap",children:f.map((A,E)=>c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:A,alt:"pending",className:"h-12 rounded border border-primary/30"}),c.jsx("button",{onClick:()=>d(R=>R.filter((P,z)=>z!==E)),className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:c.jsx(It,{className:"w-3 h-3"})})]},E))}),c.jsxs("div",{className:"flex items-end gap-2 px-4 py-2 border-t border-border",children:[c.jsx("input",{ref:w,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:b}),r==="chat"&&c.jsx(ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:()=>w.current?.click(),children:c.jsx(ul,{className:"w-4 h-4 text-primary"})}),c.jsx("textarea",{value:o,onChange:A=>l(A.target.value),onKeyDown:x,onPaste:j,placeholder:r==="chat"?"Ask anything... (Ctrl+V to paste images)":"Paste study notes to ingest...",rows:r==="ingest"?3:1,className:"flex-1 bg-transparent border border-input rounded px-3 py-1.5 text-sm resize-none focus:outline-none focus:ring-1 focus:ring-ring"}),c.jsx(ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:M,disabled:h,children:c.jsx(qo,{className:"w-4 h-4 text-primary"})})]})]})]}):c.jsxs("button",{onClick:()=>n(!0),className:"w-full flex items-center justify-between brain-card border border-primary/30 px-4 py-2 mb-4 text-sm text-primary hover:bg-primary/10 transition-colors",children:[c.jsx("span",{className:"font-arcade text-xs tracking-widest uppercase",children:"BRAIN CHAT"}),c.jsx(Ta,{className:"w-4 h-4"})]})}const $l=/(\[\[.*?\]\])/g,Fl=/!\[\[(.*?)\]\]/g,Ll=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp"],ql=/^\[!([\w-]+)\]\s*(.*)?$/,xi={note:"border-blue-500/50 bg-blue-500/10",tip:"border-green-500/50 bg-green-500/10",important:"border-purple-500/50 bg-purple-500/10",warning:"border-yellow-500/50 bg-yellow-500/10",caution:"border-red-500/50 bg-red-500/10",info:"border-blue-400/50 bg-blue-400/10",abstract:"border-cyan-500/50 bg-cyan-500/10",summary:"border-cyan-500/50 bg-cyan-500/10",todo:"border-blue-500/50 bg-blue-500/10",success:"border-green-500/50 bg-green-500/10",question:"border-yellow-400/50 bg-yellow-400/10",example:"border-purple-400/50 bg-purple-400/10",quote:"border-gray-400/50 bg-gray-400/10",bug:"border-red-400/50 bg-red-400/10",danger:"border-red-500/50 bg-red-500/10",fail:"border-red-500/50 bg-red-500/10",failure:"border-red-500/50 bg-red-500/10"};function Xn(e,n){return e.split($l).map((r,i)=>{const a=r.match(/^\[\[(.*?)\]\]$/);if(a){const s=a[1].includes("|")?a[1].split("|")[1]:a[1],o=a[1].includes("|")?a[1].split("|")[0]:a[1];return c.jsx("span",{className:"text-blue-400 hover:text-blue-300 cursor-pointer underline decoration-dotted",onClick:l=>n?.(o,l.shiftKey),title:`${o} (Shift+click for Obsidian app)`,children:s},i)}return c.jsx("span",{children:r},i)})}function Ul(e){return e.replace(Fl,(n,r)=>{const i=r.toLowerCase();return Ll.some(s=>i.endsWith(s))?`![${r}](/api/obsidian/vault-file/${encodeURIComponent(r)})`:`[[${r}]]`})}function Hl(e){const n=e.split(`
`),r=[];let i=!1,a="",s="",o=[];const l=()=>{if(!i)return;const f=xi[a.toLowerCase()]||xi.note,d=s||a.charAt(0).toUpperCase()+a.slice(1);r.push(`<div class="callout ${f} border-l-4 rounded px-3 py-2 my-2">`),r.push(`<div class="font-bold text-xs uppercase tracking-wider mb-1">${d}</div>`),r.push(""),r.push(o.join(`
`)),r.push(""),r.push("</div>"),i=!1,o=[]};for(const f of n){if(f.startsWith("> ")){const d=f.slice(2),h=d.match(ql);if(h&&!i){i=!0,a=h[1],s=h[2]||"";continue}if(i){o.push(d);continue}}else if(f===">"&&i){o.push("");continue}else l();r.push(f)}return l(),r.join(`
`)}function Bl({content:e,onWikilinkClick:n}){const r=Hl(Ul(e)),i={h1:({children:a})=>c.jsx("h1",{className:"text-xl font-bold text-primary border-b border-primary/30 pb-1 mb-3 mt-4",children:a}),h2:({children:a})=>c.jsx("h2",{className:"text-lg font-bold text-primary/90 border-b border-primary/20 pb-1 mb-2 mt-3",children:a}),h3:({children:a})=>c.jsx("h3",{className:"text-base font-semibold text-primary/80 mb-2 mt-3",children:a}),h4:({children:a})=>c.jsx("h4",{className:"text-sm font-semibold text-primary/70 mb-1 mt-2",children:a}),p:({children:a})=>typeof a=="string"?c.jsx("p",{className:"mb-2 leading-relaxed",children:Xn(a,n)}):c.jsx("p",{className:"mb-2 leading-relaxed",children:a}),strong:({children:a})=>c.jsx("strong",{className:"font-bold text-foreground",children:a}),em:({children:a})=>c.jsx("em",{className:"italic text-foreground/90",children:a}),ul:({children:a})=>c.jsx("ul",{className:"list-disc list-inside mb-2 space-y-0.5 ml-2",children:a}),ol:({children:a})=>c.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-0.5 ml-2",children:a}),li:({children:a})=>typeof a=="string"?c.jsx("li",{className:"leading-relaxed",children:Xn(a,n)}):c.jsx("li",{className:"leading-relaxed",children:a}),blockquote:({children:a})=>c.jsx("blockquote",{className:"border-l-4 border-primary/30 pl-3 my-2 text-muted-foreground italic",children:a}),code:({children:a,className:s})=>s?.startsWith("language-")?c.jsx("code",{className:"block bg-black/80 border border-secondary/40 rounded p-3 my-2 text-xs font-mono overflow-x-auto whitespace-pre",children:a}):c.jsx("code",{className:"bg-secondary/40 px-1.5 py-0.5 rounded text-xs font-mono text-primary",children:a}),pre:({children:a})=>c.jsx("pre",{className:"my-2",children:a}),hr:()=>c.jsx("hr",{className:"border-primary/20 my-4"}),a:({href:a,children:s})=>c.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:s}),table:({children:a})=>c.jsx("div",{className:"overflow-x-auto my-2",children:c.jsx("table",{className:"w-full text-xs border-collapse border border-secondary/40",children:a})}),th:({children:a})=>c.jsx("th",{className:"border border-secondary/40 bg-secondary/20 px-2 py-1 text-left font-semibold",children:a}),td:({children:a})=>typeof a=="string"?c.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:Xn(a,n)}):c.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:a}),img:({src:a,alt:s})=>c.jsx("img",{src:a,alt:s||"",className:"max-w-full rounded border border-secondary/40 my-2",loading:"lazy"}),del:({children:a})=>c.jsx("del",{className:"line-through text-muted-foreground",children:a}),input:({checked:a,...s})=>c.jsx("input",{type:"checkbox",checked:a,readOnly:!0,className:"mr-1.5 accent-primary",...s})};return c.jsx("div",{className:"obsidian-preview prose-invert max-w-none text-sm leading-relaxed",children:c.jsx(Zo,{remarkPlugins:[Jo],components:i,allowedElements:void 0,unwrapDisallowed:!1,children:r})})}function Vl(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Wl(e,n,r){return n=ec(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function vi(e,n){return Yl(e)||Vl(e,n)||ns(e,n)||Jl()}function Gl(e){return Kl(e)||Xl(e)||ns(e)||Zl()}function Kl(e){if(Array.isArray(e))return mr(e)}function Yl(e){if(Array.isArray(e))return e}function Xl(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ns(e,n){if(e){if(typeof e=="string")return mr(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mr(e,n)}}function mr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}function Zl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ql(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ec(e){var n=Ql(e,"string");return typeof n=="symbol"?n:String(n)}var tc=function(n,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Gl(Object.entries(n).filter(function(a){var s=vi(a,1),o=s[0];return!i.has(o)}).map(function(a){var s=vi(a,2),o=s[0],l=s[1];return Wl({},o,l)}))))};function gr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function nc(e){if(Array.isArray(e))return e}function rc(e){if(Array.isArray(e))return gr(e)}function ic(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ac(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n!==0)for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lc(e,n){return nc(e)||ac(e,n)||rs(e,n)||sc()}function bi(e){return rc(e)||ic(e)||rs(e)||oc()}function rs(e,n){if(e){if(typeof e=="string")return gr(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gr(e,n):void 0}}function cc(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,i=r===void 0?"div":r,a=n.nodeMapper,s=a===void 0?function(h){return h}:a,o=n.methodNames,l=o===void 0?[]:o,f=n.initPropNames,d=f===void 0?[]:f;return D.forwardRef(function(h,u){var p=D.useRef(),m=D.useMemo(function(){var v=Object.fromEntries(d.filter(function(g){return h.hasOwnProperty(g)}).map(function(g){return[g,h[g]]}));return e(v)},[]);_i(function(){m(s(p.current))},D.useLayoutEffect),_i(function(){return m._destructor instanceof Function?m._destructor:void 0});var y=D.useCallback(function(v){for(var g=arguments.length,k=new Array(g>1?g-1:0),j=1;j<g;j++)k[j-1]=arguments[j];return m[v]instanceof Function?m[v].apply(m,k):void 0},[m]),w=D.useRef({});return Object.keys(tc(h,[].concat(bi(l),bi(d)))).filter(function(v){return w.current[v]!==h[v]}).forEach(function(v){return y(v,h[v])}),w.current=h,D.useImperativeHandle(u,function(){return Object.fromEntries(l.map(function(v){return[v,function(){for(var g=arguments.length,k=new Array(g),j=0;j<g;j++)k[j]=arguments[j];return y.apply(void 0,[v].concat(k))}]}))},[y]),pe.createElement(i,{ref:p})})}function _i(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.useEffect,r=D.useRef(),i=D.useRef(!1),a=D.useRef(!1),s=D.useState(0),o=lc(s,2);o[0];var l=o[1];i.current&&(a.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),l(function(f){return f+1}),function(){a.current&&r.current&&r.current()}},[])}var yr="http://www.w3.org/1999/xhtml";const wi={svg:"http://www.w3.org/2000/svg",xhtml:yr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fn(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),wi.hasOwnProperty(n)?{space:wi[n],local:e}:e}function uc(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===yr&&n.documentElement.namespaceURI===yr?n.createElement(e):n.createElementNS(r,e)}}function fc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function is(e){var n=Fn(e);return(n.local?fc:uc)(n)}function dc(){}function Lr(e){return e==null?dc:function(){return this.querySelector(e)}}function hc(e){typeof e!="function"&&(e=Lr(e));for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var s=n[a],o=s.length,l=i[a]=new Array(o),f,d,h=0;h<o;++h)(f=s[h])&&(d=e.call(f,f.__data__,h,s))&&("__data__"in f&&(d.__data__=f.__data__),l[h]=d);return new ye(i,this._parents)}function pc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mc(){return[]}function as(e){return e==null?mc:function(){return this.querySelectorAll(e)}}function gc(e){return function(){return pc(e.apply(this,arguments))}}function yc(e){typeof e=="function"?e=gc(e):e=as(e);for(var n=this._groups,r=n.length,i=[],a=[],s=0;s<r;++s)for(var o=n[s],l=o.length,f,d=0;d<l;++d)(f=o[d])&&(i.push(e.call(f,f.__data__,d,o)),a.push(f));return new ye(i,a)}function ss(e){return function(){return this.matches(e)}}function os(e){return function(n){return n.matches(e)}}var xc=Array.prototype.find;function vc(e){return function(){return xc.call(this.children,e)}}function bc(){return this.firstElementChild}function _c(e){return this.select(e==null?bc:vc(typeof e=="function"?e:os(e)))}var wc=Array.prototype.filter;function Nc(){return Array.from(this.children)}function jc(e){return function(){return wc.call(this.children,e)}}function kc(e){return this.selectAll(e==null?Nc:jc(typeof e=="function"?e:os(e)))}function Cc(e){typeof e!="function"&&(e=ss(e));for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var s=n[a],o=s.length,l=i[a]=[],f,d=0;d<o;++d)(f=s[d])&&e.call(f,f.__data__,d,s)&&l.push(f);return new ye(i,this._parents)}function ls(e){return new Array(e.length)}function Sc(){return new ye(this._enter||this._groups.map(ls),this._parents)}function jn(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}jn.prototype={constructor:jn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ac(e){return function(){return e}}function Tc(e,n,r,i,a,s){for(var o=0,l,f=n.length,d=s.length;o<d;++o)(l=n[o])?(l.__data__=s[o],i[o]=l):r[o]=new jn(e,s[o]);for(;o<f;++o)(l=n[o])&&(a[o]=l)}function Mc(e,n,r,i,a,s,o){var l,f,d=new Map,h=n.length,u=s.length,p=new Array(h),m;for(l=0;l<h;++l)(f=n[l])&&(p[l]=m=o.call(f,f.__data__,l,n)+"",d.has(m)?a[l]=f:d.set(m,f));for(l=0;l<u;++l)m=o.call(e,s[l],l,s)+"",(f=d.get(m))?(i[l]=f,f.__data__=s[l],d.delete(m)):r[l]=new jn(e,s[l]);for(l=0;l<h;++l)(f=n[l])&&d.get(p[l])===f&&(a[l]=f)}function Pc(e){return e.__data__}function Ec(e,n){if(!arguments.length)return Array.from(this,Pc);var r=n?Mc:Tc,i=this._parents,a=this._groups;typeof e!="function"&&(e=Ac(e));for(var s=a.length,o=new Array(s),l=new Array(s),f=new Array(s),d=0;d<s;++d){var h=i[d],u=a[d],p=u.length,m=Oc(e.call(h,h&&h.__data__,d,i)),y=m.length,w=l[d]=new Array(y),v=o[d]=new Array(y),g=f[d]=new Array(p);r(h,u,w,v,g,m,n);for(var k=0,j=0,b,_;k<y;++k)if(b=w[k]){for(k>=j&&(j=k+1);!(_=v[j])&&++j<y;);b._next=_||null}}return o=new ye(o,i),o._enter=l,o._exit=f,o}function Oc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rc(){return new ye(this._exit||this._groups.map(ls),this._parents)}function Ic(e,n,r){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(a=n(a),a&&(a=a.selection())),r==null?s.remove():r(s),i&&a?i.merge(a).order():a}function Dc(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,a=r.length,s=i.length,o=Math.min(a,s),l=new Array(a),f=0;f<o;++f)for(var d=r[f],h=i[f],u=d.length,p=l[f]=new Array(u),m,y=0;y<u;++y)(m=d[y]||h[y])&&(p[y]=m);for(;f<a;++f)l[f]=r[f];return new ye(l,this._parents)}function zc(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],a=i.length-1,s=i[a],o;--a>=0;)(o=i[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function $c(e){e||(e=Fc);function n(u,p){return u&&p?e(u.__data__,p.__data__):!u-!p}for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s){for(var o=r[s],l=o.length,f=a[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(f[h]=d);f.sort(n)}return new ye(a,this._parents).order()}function Fc(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Lc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qc(){return Array.from(this)}function Uc(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length;a<s;++a){var o=i[a];if(o)return o}return null}function Hc(){let e=0;for(const n of this)++e;return e}function Bc(){return!this.node()}function Vc(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var a=n[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Wc(e){return function(){this.removeAttribute(e)}}function Gc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kc(e,n){return function(){this.setAttribute(e,n)}}function Yc(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Xc(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Zc(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Jc(e,n){var r=Fn(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?Gc:Wc:typeof n=="function"?r.local?Zc:Xc:r.local?Yc:Kc)(r,n))}function cs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qc(e){return function(){this.style.removeProperty(e)}}function eu(e,n,r){return function(){this.style.setProperty(e,n,r)}}function tu(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function nu(e,n,r){return arguments.length>1?this.each((n==null?Qc:typeof n=="function"?tu:eu)(e,n,r??"")):vt(this.node(),e)}function vt(e,n){return e.style.getPropertyValue(n)||cs(e).getComputedStyle(e,null).getPropertyValue(n)}function ru(e){return function(){delete this[e]}}function iu(e,n){return function(){this[e]=n}}function au(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function su(e,n){return arguments.length>1?this.each((n==null?ru:typeof n=="function"?au:iu)(e,n)):this.node()[e]}function us(e){return e.trim().split(/^|\s+/)}function qr(e){return e.classList||new fs(e)}function fs(e){this._node=e,this._names=us(e.getAttribute("class")||"")}fs.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ds(e,n){for(var r=qr(e),i=-1,a=n.length;++i<a;)r.add(n[i])}function hs(e,n){for(var r=qr(e),i=-1,a=n.length;++i<a;)r.remove(n[i])}function ou(e){return function(){ds(this,e)}}function lu(e){return function(){hs(this,e)}}function cu(e,n){return function(){(n.apply(this,arguments)?ds:hs)(this,e)}}function uu(e,n){var r=us(e+"");if(arguments.length<2){for(var i=qr(this.node()),a=-1,s=r.length;++a<s;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof n=="function"?cu:n?ou:lu)(r,n))}function fu(){this.textContent=""}function du(e){return function(){this.textContent=e}}function hu(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function pu(e){return arguments.length?this.each(e==null?fu:(typeof e=="function"?hu:du)(e)):this.node().textContent}function mu(){this.innerHTML=""}function gu(e){return function(){this.innerHTML=e}}function yu(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function xu(e){return arguments.length?this.each(e==null?mu:(typeof e=="function"?yu:gu)(e)):this.node().innerHTML}function vu(){this.nextSibling&&this.parentNode.appendChild(this)}function bu(){return this.each(vu)}function _u(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wu(){return this.each(_u)}function Nu(e){var n=typeof e=="function"?e:is(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ju(){return null}function ku(e,n){var r=typeof e=="function"?e:is(e),i=n==null?ju:typeof n=="function"?n:Lr(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function Cu(){var e=this.parentNode;e&&e.removeChild(this)}function Su(){return this.each(Cu)}function Au(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Tu(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Mu(e){return this.select(e?Tu:Au)}function Pu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Eu(e){return function(n){e.call(this,n,this.__data__)}}function Ou(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function Ru(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,a=n.length,s;r<a;++r)s=n[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):n[++i]=s;++i?n.length=i:delete this.__on}}}function Iu(e,n,r){return function(){var i=this.__on,a,s=Eu(n);if(i){for(var o=0,l=i.length;o<l;++o)if((a=i[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=n;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:n,listener:s,options:r},i?i.push(a):this.__on=[a]}}function Du(e,n,r){var i=Ou(e+""),a,s=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,d=l.length,h;f<d;++f)for(a=0,h=l[f];a<s;++a)if((o=i[a]).type===h.type&&o.name===h.name)return h.value}return}for(l=n?Iu:Ru,a=0;a<s;++a)this.each(l(i[a],n,r));return this}function ps(e,n,r){var i=cs(e),a=i.CustomEvent;typeof a=="function"?a=new a(n,r):(a=i.document.createEvent("Event"),r?(a.initEvent(n,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(n,!1,!1)),e.dispatchEvent(a)}function zu(e,n){return function(){return ps(this,e,n)}}function $u(e,n){return function(){return ps(this,e,n.apply(this,arguments))}}function Fu(e,n){return this.each((typeof n=="function"?$u:zu)(e,n))}function*Lu(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&(yield o)}var ms=[null];function ye(e,n){this._groups=e,this._parents=n}function tn(){return new ye([[document.documentElement]],ms)}function qu(){return this}ye.prototype=tn.prototype={constructor:ye,select:hc,selectAll:yc,selectChild:_c,selectChildren:kc,filter:Cc,data:Ec,enter:Sc,exit:Rc,join:Ic,merge:Dc,selection:qu,order:zc,sort:$c,call:Lc,nodes:qc,node:Uc,size:Hc,empty:Bc,each:Vc,attr:Jc,style:nu,property:su,classed:uu,text:pu,html:xu,raise:bu,lower:wu,append:Nu,insert:ku,remove:Su,clone:Mu,datum:Pu,on:Du,dispatch:Fu,[Symbol.iterator]:Lu};function Ne(e){return typeof e=="string"?new ye([[document.querySelector(e)]],[document.documentElement]):new ye([[e]],ms)}function Uu(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Oe(e,n){if(e=Uu(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}}return[e.pageX,e.pageY]}var Hu={value:()=>{}};function nn(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new xn(r)}function xn(e){this._=e}function Bu(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}xn.prototype=nn.prototype={constructor:xn,on:function(e,n){var r=this._,i=Bu(e+"",r),a,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((a=(e=i[s]).type)&&(a=Vu(r[a],e.name)))return a;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++s<o;)if(a=(e=i[s]).type)r[a]=Ni(r[a],e.name,n);else if(n==null)for(a in r)r[a]=Ni(r[a],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new xn(e)},call:function(e,n){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,s;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(n,r)}};function Vu(e,n){for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).name===n)return a.value}function Ni(e,n,r){for(var i=0,a=e.length;i<a;++i)if(e[i].name===n){e[i]=Hu,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}const Wu={passive:!1},Gt={capture:!0,passive:!1};function Zn(e){e.stopImmediatePropagation()}function yt(e){e.preventDefault(),e.stopImmediatePropagation()}function gs(e){var n=e.document.documentElement,r=Ne(e).on("dragstart.drag",yt,Gt);"onselectstart"in n?r.on("selectstart.drag",yt,Gt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ys(e,n){var r=e.document.documentElement,i=Ne(e).on("dragstart.drag",null);n&&(i.on("click.drag",yt,Gt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const un=e=>()=>e;function xr(e,{sourceEvent:n,subject:r,target:i,identifier:a,active:s,x:o,y:l,dx:f,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}xr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Gu(e){return!e.ctrlKey&&!e.button}function Ku(){return this.parentNode}function Yu(e,n){return n??{x:e.x,y:e.y}}function Xu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zu(){var e=Gu,n=Ku,r=Yu,i=Xu,a={},s=nn("start","drag","end"),o=0,l,f,d,h,u=0;function p(b){b.on("mousedown.drag",m).filter(i).on("touchstart.drag",v).on("touchmove.drag",g,Wu).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(b,_){if(!(h||!e.call(this,b,_))){var S=j(this,n.call(this,b,_),b,_,"mouse");S&&(Ne(b.view).on("mousemove.drag",y,Gt).on("mouseup.drag",w,Gt),gs(b.view),Zn(b),d=!1,l=b.clientX,f=b.clientY,S("start",b))}}function y(b){if(yt(b),!d){var _=b.clientX-l,S=b.clientY-f;d=_*_+S*S>u}a.mouse("drag",b)}function w(b){Ne(b.view).on("mousemove.drag mouseup.drag",null),ys(b.view,d),yt(b),a.mouse("end",b)}function v(b,_){if(e.call(this,b,_)){var S=b.changedTouches,M=n.call(this,b,_),x=S.length,A,E;for(A=0;A<x;++A)(E=j(this,M,b,_,S[A].identifier,S[A]))&&(Zn(b),E("start",b,S[A]))}}function g(b){var _=b.changedTouches,S=_.length,M,x;for(M=0;M<S;++M)(x=a[_[M].identifier])&&(yt(b),x("drag",b,_[M]))}function k(b){var _=b.changedTouches,S=_.length,M,x;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),M=0;M<S;++M)(x=a[_[M].identifier])&&(Zn(b),x("end",b,_[M]))}function j(b,_,S,M,x,A){var E=s.copy(),R=Oe(A||S,_),P,z,N;if((N=r.call(b,new xr("beforestart",{sourceEvent:S,target:p,identifier:x,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:E}),M))!=null)return P=N.x-R[0]||0,z=N.y-R[1]||0,function I(O,q,H){var F=R,L;switch(O){case"start":a[x]=I,L=o++;break;case"end":delete a[x],--o;case"drag":R=Oe(H||q,_),L=o;break}E.call(O,b,new xr(O,{sourceEvent:q,subject:N,target:p,identifier:x,active:L,x:R[0]+P,y:R[1]+z,dx:R[0]-F[0],dy:R[1]-F[1],dispatch:E}),M)}}return p.filter=function(b){return arguments.length?(e=typeof b=="function"?b:un(!!b),p):e},p.container=function(b){return arguments.length?(n=typeof b=="function"?b:un(b),p):n},p.subject=function(b){return arguments.length?(r=typeof b=="function"?b:un(b),p):r},p.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:un(!!b),p):i},p.on=function(){var b=s.on.apply(s,arguments);return b===s?p:b},p.clickDistance=function(b){return arguments.length?(u=(b=+b)*b,p):Math.sqrt(u)},p}function Ur(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function xs(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function rn(){}var Kt=.7,kn=1/Kt,xt="\\s*([+-]?\\d+)\\s*",Yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ju=/^#([0-9a-f]{3,8})$/,Qu=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),ef=new RegExp(`^rgb\\(${Ie},${Ie},${Ie}\\)$`),tf=new RegExp(`^rgba\\(${xt},${xt},${xt},${Yt}\\)$`),nf=new RegExp(`^rgba\\(${Ie},${Ie},${Ie},${Yt}\\)$`),rf=new RegExp(`^hsl\\(${Yt},${Ie},${Ie}\\)$`),af=new RegExp(`^hsla\\(${Yt},${Ie},${Ie},${Yt}\\)$`),ji={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ur(rn,Xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ki,formatHex:ki,formatHex8:sf,formatHsl:of,formatRgb:Ci,toString:Ci});function ki(){return this.rgb().formatHex()}function sf(){return this.rgb().formatHex8()}function of(){return vs(this).formatHsl()}function Ci(){return this.rgb().formatRgb()}function Xt(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Ju.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Si(n):r===3?new he(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?fn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?fn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Qu.exec(e))?new he(n[1],n[2],n[3],1):(n=ef.exec(e))?new he(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=tf.exec(e))?fn(n[1],n[2],n[3],n[4]):(n=nf.exec(e))?fn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=rf.exec(e))?Mi(n[1],n[2]/100,n[3]/100,1):(n=af.exec(e))?Mi(n[1],n[2]/100,n[3]/100,n[4]):ji.hasOwnProperty(e)?Si(ji[e]):e==="transparent"?new he(NaN,NaN,NaN,0):null}function Si(e){return new he(e>>16&255,e>>8&255,e&255,1)}function fn(e,n,r,i){return i<=0&&(e=n=r=NaN),new he(e,n,r,i)}function lf(e){return e instanceof rn||(e=Xt(e)),e?(e=e.rgb(),new he(e.r,e.g,e.b,e.opacity)):new he}function vr(e,n,r,i){return arguments.length===1?lf(e):new he(e,n,r,i??1)}function he(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}Ur(he,vr,xs(rn,{brighter(e){return e=e==null?kn:Math.pow(kn,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kt:Math.pow(Kt,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new he(st(this.r),st(this.g),st(this.b),Cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ai,formatHex:Ai,formatHex8:cf,formatRgb:Ti,toString:Ti}));function Ai(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function cf(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ti(){const e=Cn(this.opacity);return`${e===1?"rgb(":"rgba("}${st(this.r)}, ${st(this.g)}, ${st(this.b)}${e===1?")":`, ${e})`}`}function Cn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function st(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function at(e){return e=st(e),(e<16?"0":"")+e.toString(16)}function Mi(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Se(e,n,r,i)}function vs(e){if(e instanceof Se)return new Se(e.h,e.s,e.l,e.opacity);if(e instanceof rn||(e=Xt(e)),!e)return new Se;if(e instanceof Se)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(n,r,i),s=Math.max(n,r,i),o=NaN,l=s-a,f=(s+a)/2;return l?(n===s?o=(r-i)/l+(r<i)*6:r===s?o=(i-n)/l+2:o=(n-r)/l+4,l/=f<.5?s+a:2-s-a,o*=60):l=f>0&&f<1?0:o,new Se(o,l,f,e.opacity)}function uf(e,n,r,i){return arguments.length===1?vs(e):new Se(e,n,r,i??1)}function Se(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}Ur(Se,uf,xs(rn,{brighter(e){return e=e==null?kn:Math.pow(kn,e),new Se(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kt:Math.pow(Kt,e),new Se(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,a=2*r-i;return new he(Jn(e>=240?e-240:e+120,a,i),Jn(e,a,i),Jn(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Se(Pi(this.h),dn(this.s),dn(this.l),Cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cn(this.opacity);return`${e===1?"hsl(":"hsla("}${Pi(this.h)}, ${dn(this.s)*100}%, ${dn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pi(e){return e=(e||0)%360,e<0?e+360:e}function dn(e){return Math.max(0,Math.min(1,e||0))}function Jn(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const bs=e=>()=>e;function ff(e,n){return function(r){return e+r*n}}function df(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function hf(e){return(e=+e)==1?_s:function(n,r){return r-n?df(n,r,e):bs(isNaN(n)?r:n)}}function _s(e,n){var r=n-e;return r?ff(e,r):bs(isNaN(e)?n:e)}const Ei=(function e(n){var r=hf(n);function i(a,s){var o=r((a=vr(a)).r,(s=vr(s)).r),l=r(a.g,s.g),f=r(a.b,s.b),d=_s(a.opacity,s.opacity);return function(h){return a.r=o(h),a.g=l(h),a.b=f(h),a.opacity=d(h),a+""}}return i.gamma=e,i})(1);function Qe(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var br=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qn=new RegExp(br.source,"g");function pf(e){return function(){return e}}function mf(e){return function(n){return e(n)+""}}function gf(e,n){var r=br.lastIndex=Qn.lastIndex=0,i,a,s,o=-1,l=[],f=[];for(e=e+"",n=n+"";(i=br.exec(e))&&(a=Qn.exec(n));)(s=a.index)>r&&(s=n.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,f.push({i:o,x:Qe(i,a)})),r=Qn.lastIndex;return r<n.length&&(s=n.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?f[0]?mf(f[0].x):pf(n):(n=f.length,function(d){for(var h=0,u;h<n;++h)l[(u=f[h]).i]=u.x(d);return l.join("")})}var Oi=180/Math.PI,_r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ws(e,n,r,i,a,s){var o,l,f;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(f=e*r+n*i)&&(r-=e*f,i-=n*f),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,f/=l),e*i<n*r&&(e=-e,n=-n,f=-f,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(n,e)*Oi,skewX:Math.atan(f)*Oi,scaleX:o,scaleY:l}}var hn;function yf(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?_r:ws(n.a,n.b,n.c,n.d,n.e,n.f)}function xf(e){return e==null||(hn||(hn=document.createElementNS("http://www.w3.org/2000/svg","g")),hn.setAttribute("transform",e),!(e=hn.transform.baseVal.consolidate()))?_r:(e=e.matrix,ws(e.a,e.b,e.c,e.d,e.e,e.f))}function Ns(e,n,r,i){function a(d){return d.length?d.pop()+" ":""}function s(d,h,u,p,m,y){if(d!==u||h!==p){var w=m.push("translate(",null,n,null,r);y.push({i:w-4,x:Qe(d,u)},{i:w-2,x:Qe(h,p)})}else(u||p)&&m.push("translate("+u+n+p+r)}function o(d,h,u,p){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),p.push({i:u.push(a(u)+"rotate(",null,i)-2,x:Qe(d,h)})):h&&u.push(a(u)+"rotate("+h+i)}function l(d,h,u,p){d!==h?p.push({i:u.push(a(u)+"skewX(",null,i)-2,x:Qe(d,h)}):h&&u.push(a(u)+"skewX("+h+i)}function f(d,h,u,p,m,y){if(d!==u||h!==p){var w=m.push(a(m)+"scale(",null,",",null,")");y.push({i:w-4,x:Qe(d,u)},{i:w-2,x:Qe(h,p)})}else(u!==1||p!==1)&&m.push(a(m)+"scale("+u+","+p+")")}return function(d,h){var u=[],p=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,u,p),o(d.rotate,h.rotate,u,p),l(d.skewX,h.skewX,u,p),f(d.scaleX,d.scaleY,h.scaleX,h.scaleY,u,p),d=h=null,function(m){for(var y=-1,w=p.length,v;++y<w;)u[(v=p[y]).i]=v.x(m);return u.join("")}}}var vf=Ns(yf,"px, ","px)","deg)"),bf=Ns(xf,", ",")",")"),_f=1e-12;function Ri(e){return((e=Math.exp(e))+1/e)/2}function wf(e){return((e=Math.exp(e))-1/e)/2}function Nf(e){return((e=Math.exp(2*e))-1)/(e+1)}const jf=(function e(n,r,i){function a(s,o){var l=s[0],f=s[1],d=s[2],h=o[0],u=o[1],p=o[2],m=h-l,y=u-f,w=m*m+y*y,v,g;if(w<_f)g=Math.log(p/d)/n,v=function(M){return[l+M*m,f+M*y,d*Math.exp(n*M*g)]};else{var k=Math.sqrt(w),j=(p*p-d*d+i*w)/(2*d*r*k),b=(p*p-d*d-i*w)/(2*p*r*k),_=Math.log(Math.sqrt(j*j+1)-j),S=Math.log(Math.sqrt(b*b+1)-b);g=(S-_)/n,v=function(M){var x=M*g,A=Ri(_),E=d/(r*k)*(A*Nf(n*x+_)-wf(_));return[l+E*m,f+E*y,d*A/Ri(n*x+_)]}}return v.duration=g*1e3*n/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,f=l*l;return e(o,l,f)},a})(Math.SQRT2,2,4);var bt=0,Lt=0,St=0,js=1e3,Sn,qt,An=0,ut=0,Ln=0,Zt=typeof performance=="object"&&performance.now?performance:Date,ks=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hr(){return ut||(ks(kf),ut=Zt.now()+Ln)}function kf(){ut=0}function Tn(){this._call=this._time=this._next=null}Tn.prototype=Br.prototype={constructor:Tn,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Hr():+r)+(n==null?0:+n),!this._next&&qt!==this&&(qt?qt._next=this:Sn=this,qt=this),this._call=e,this._time=r,wr()},stop:function(){this._call&&(this._call=null,this._time=1/0,wr())}};function Br(e,n,r){var i=new Tn;return i.restart(e,n,r),i}function Cf(){Hr(),++bt;for(var e=Sn,n;e;)(n=ut-e._time)>=0&&e._call.call(void 0,n),e=e._next;--bt}function Ii(){ut=(An=Zt.now())+Ln,bt=Lt=0;try{Cf()}finally{bt=0,Af(),ut=0}}function Sf(){var e=Zt.now(),n=e-An;n>js&&(Ln-=n,An=e)}function Af(){for(var e,n=Sn,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Sn=r);qt=e,wr(i)}function wr(e){if(!bt){Lt&&(Lt=clearTimeout(Lt));var n=e-ut;n>24?(e<1/0&&(Lt=setTimeout(Ii,e-Zt.now()-Ln)),St&&(St=clearInterval(St))):(St||(An=Zt.now(),St=setInterval(Sf,js)),bt=1,ks(Ii))}}function Di(e,n,r){var i=new Tn;return n=n==null?0:+n,i.restart(a=>{i.stop(),e(a+n)},n,r),i}var Tf=nn("start","end","cancel","interrupt"),Mf=[],Cs=0,zi=1,Nr=2,vn=3,$i=4,jr=5,bn=6;function qn(e,n,r,i,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Pf(e,r,{name:n,index:i,group:a,on:Tf,tween:Mf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Cs})}function Vr(e,n){var r=Pe(e,n);if(r.state>Cs)throw new Error("too late; already scheduled");return r}function ze(e,n){var r=Pe(e,n);if(r.state>vn)throw new Error("too late; already running");return r}function Pe(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function Pf(e,n,r){var i=e.__transition,a;i[n]=r,r.timer=Br(s,0,r.time);function s(d){r.state=zi,r.timer.restart(o,r.delay,r.time),r.delay<=d&&o(d-r.delay)}function o(d){var h,u,p,m;if(r.state!==zi)return f();for(h in i)if(m=i[h],m.name===r.name){if(m.state===vn)return Di(o);m.state===$i?(m.state=bn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[h]):+h<n&&(m.state=bn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[h])}if(Di(function(){r.state===vn&&(r.state=$i,r.timer.restart(l,r.delay,r.time),l(d))}),r.state=Nr,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Nr){for(r.state=vn,a=new Array(p=r.tween.length),h=0,u=-1;h<p;++h)(m=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++u]=m);a.length=u+1}}function l(d){for(var h=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(f),r.state=jr,1),u=-1,p=a.length;++u<p;)a[u].call(e,h);r.state===jr&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=bn,r.timer.stop(),delete i[n];for(var d in i)return;delete e.__transition}}function _n(e,n){var r=e.__transition,i,a,s=!0,o;if(r){n=n==null?null:n+"";for(o in r){if((i=r[o]).name!==n){s=!1;continue}a=i.state>Nr&&i.state<jr,i.state=bn,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[o]}s&&delete e.__transition}}function Ef(e){return this.each(function(){_n(this,e)})}function Of(e,n){var r,i;return function(){var a=ze(this,e),s=a.tween;if(s!==r){i=r=s;for(var o=0,l=i.length;o<l;++o)if(i[o].name===n){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function Rf(e,n,r){var i,a;if(typeof r!="function")throw new Error;return function(){var s=ze(this,e),o=s.tween;if(o!==i){a=(i=o).slice();for(var l={name:n,value:r},f=0,d=a.length;f<d;++f)if(a[f].name===n){a[f]=l;break}f===d&&a.push(l)}s.tween=a}}function If(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=Pe(this.node(),r).tween,a=0,s=i.length,o;a<s;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((n==null?Of:Rf)(r,e,n))}function Wr(e,n,r){var i=e._id;return e.each(function(){var a=ze(this,i);(a.value||(a.value={}))[n]=r.apply(this,arguments)}),function(a){return Pe(a,i).value[n]}}function Ss(e,n){var r;return(typeof n=="number"?Qe:n instanceof Xt?Ei:(r=Xt(n))?(n=r,Ei):gf)(e,n)}function Df(e){return function(){this.removeAttribute(e)}}function zf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $f(e,n,r){var i,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===i?s:s=n(i=o,r)}}function Ff(e,n,r){var i,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?s:s=n(i=o,r)}}function Lf(e,n,r){var i,a,s;return function(){var o,l=r(this),f;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),f=l+"",o===f?null:o===i&&f===a?s:(a=f,s=n(i=o,l)))}}function qf(e,n,r){var i,a,s;return function(){var o,l=r(this),f;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),f=l+"",o===f?null:o===i&&f===a?s:(a=f,s=n(i=o,l)))}}function Uf(e,n){var r=Fn(e),i=r==="transform"?bf:Ss;return this.attrTween(e,typeof n=="function"?(r.local?qf:Lf)(r,i,Wr(this,"attr."+e,n)):n==null?(r.local?zf:Df)(r):(r.local?Ff:$f)(r,i,n))}function Hf(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function Bf(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function Vf(e,n){var r,i;function a(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Bf(e,s)),r}return a._value=n,a}function Wf(e,n){var r,i;function a(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Hf(e,s)),r}return a._value=n,a}function Gf(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=Fn(e);return this.tween(r,(i.local?Vf:Wf)(i,n))}function Kf(e,n){return function(){Vr(this,e).delay=+n.apply(this,arguments)}}function Yf(e,n){return n=+n,function(){Vr(this,e).delay=n}}function Xf(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Kf:Yf)(n,e)):Pe(this.node(),n).delay}function Zf(e,n){return function(){ze(this,e).duration=+n.apply(this,arguments)}}function Jf(e,n){return n=+n,function(){ze(this,e).duration=n}}function Qf(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Zf:Jf)(n,e)):Pe(this.node(),n).duration}function ed(e,n){if(typeof n!="function")throw new Error;return function(){ze(this,e).ease=n}}function td(e){var n=this._id;return arguments.length?this.each(ed(n,e)):Pe(this.node(),n).ease}function nd(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;ze(this,e).ease=r}}function rd(e){if(typeof e!="function")throw new Error;return this.each(nd(this._id,e))}function id(e){typeof e!="function"&&(e=ss(e));for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var s=n[a],o=s.length,l=i[a]=[],f,d=0;d<o;++d)(f=s[d])&&e.call(f,f.__data__,d,s)&&l.push(f);return new Ye(i,this._parents,this._name,this._id)}function ad(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var f=n[l],d=r[l],h=f.length,u=o[l]=new Array(h),p,m=0;m<h;++m)(p=f[m]||d[m])&&(u[m]=p);for(;l<i;++l)o[l]=n[l];return new Ye(o,this._parents,this._name,this._id)}function sd(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function od(e,n,r){var i,a,s=sd(n)?Vr:ze;return function(){var o=s(this,e),l=o.on;l!==i&&(a=(i=l).copy()).on(n,r),o.on=a}}function ld(e,n){var r=this._id;return arguments.length<2?Pe(this.node(),r).on.on(e):this.each(od(r,e,n))}function cd(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function ud(){return this.on("end.remove",cd(this._id))}function fd(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Lr(e));for(var i=this._groups,a=i.length,s=new Array(a),o=0;o<a;++o)for(var l=i[o],f=l.length,d=s[o]=new Array(f),h,u,p=0;p<f;++p)(h=l[p])&&(u=e.call(h,h.__data__,p,l))&&("__data__"in h&&(u.__data__=h.__data__),d[p]=u,qn(d[p],n,r,p,d,Pe(h,r)));return new Ye(s,this._parents,n,r)}function dd(e){var n=this._name,r=this._id;typeof e!="function"&&(e=as(e));for(var i=this._groups,a=i.length,s=[],o=[],l=0;l<a;++l)for(var f=i[l],d=f.length,h,u=0;u<d;++u)if(h=f[u]){for(var p=e.call(h,h.__data__,u,f),m,y=Pe(h,r),w=0,v=p.length;w<v;++w)(m=p[w])&&qn(m,n,r,w,p,y);s.push(p),o.push(h)}return new Ye(s,o,n,r)}var hd=tn.prototype.constructor;function pd(){return new hd(this._groups,this._parents)}function md(e,n){var r,i,a;return function(){var s=vt(this,e),o=(this.style.removeProperty(e),vt(this,e));return s===o?null:s===r&&o===i?a:a=n(r=s,i=o)}}function As(e){return function(){this.style.removeProperty(e)}}function gd(e,n,r){var i,a=r+"",s;return function(){var o=vt(this,e);return o===a?null:o===i?s:s=n(i=o,r)}}function yd(e,n,r){var i,a,s;return function(){var o=vt(this,e),l=r(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(e),vt(this,e))),o===f?null:o===i&&f===a?s:(a=f,s=n(i=o,l))}}function xd(e,n){var r,i,a,s="style."+n,o="end."+s,l;return function(){var f=ze(this,e),d=f.on,h=f.value[s]==null?l||(l=As(n)):void 0;(d!==r||a!==h)&&(i=(r=d).copy()).on(o,a=h),f.on=i}}function vd(e,n,r){var i=(e+="")=="transform"?vf:Ss;return n==null?this.styleTween(e,md(e,i)).on("end.style."+e,As(e)):typeof n=="function"?this.styleTween(e,yd(e,i,Wr(this,"style."+e,n))).each(xd(this._id,e)):this.styleTween(e,gd(e,i,n),r).on("end.style."+e,null)}function bd(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function _d(e,n,r){var i,a;function s(){var o=n.apply(this,arguments);return o!==a&&(i=(a=o)&&bd(e,o,r)),i}return s._value=n,s}function wd(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,_d(e,n,r??""))}function Nd(e){return function(){this.textContent=e}}function jd(e){return function(){var n=e(this);this.textContent=n??""}}function kd(e){return this.tween("text",typeof e=="function"?jd(Wr(this,"text",e)):Nd(e==null?"":e+""))}function Cd(e){return function(n){this.textContent=e.call(this,n)}}function Sd(e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Cd(a)),n}return i._value=e,i}function Ad(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Sd(e))}function Td(){for(var e=this._name,n=this._id,r=Ts(),i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],l=o.length,f,d=0;d<l;++d)if(f=o[d]){var h=Pe(f,n);qn(f,e,r,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ye(i,this._parents,e,r)}function Md(){var e,n,r=this,i=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},f={value:function(){--a===0&&s()}};r.each(function(){var d=ze(this,i),h=d.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(f)),d.on=n}),a===0&&s()})}var Pd=0;function Ye(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function Ts(){return++Pd}var Fe=tn.prototype;Ye.prototype={constructor:Ye,select:fd,selectAll:dd,selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:id,merge:ad,selection:pd,transition:Td,call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:ld,attr:Uf,attrTween:Gf,style:vd,styleTween:wd,text:kd,textTween:Ad,remove:ud,tween:If,delay:Xf,duration:Qf,ease:td,easeVarying:rd,end:Md,[Symbol.iterator]:Fe[Symbol.iterator]};function Ed(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Od={time:null,delay:0,duration:250,ease:Ed};function Rd(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function Id(e){var n,r;e instanceof Ye?(n=e._id,e=e._name):(n=Ts(),(r=Od).time=Hr(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],l=o.length,f,d=0;d<l;++d)(f=o[d])&&qn(f,e,n,d,o,r||Rd(f,n));return new Ye(i,this._parents,e,n)}tn.prototype.interrupt=Ef;tn.prototype.transition=Id;const pn=e=>()=>e;function Dd(e,{sourceEvent:n,target:r,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function We(e,n,r){this.k=e,this.x=n,this.y=r}We.prototype={constructor:We,scale:function(e){return e===1?this:new We(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new We(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gr=new We(1,0,0);Ee.prototype=We.prototype;function Ee(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Gr;return e.__zoom}function er(e){e.stopImmediatePropagation()}function At(e){e.preventDefault(),e.stopImmediatePropagation()}function zd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $d(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fi(){return this.__zoom||Gr}function Fd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ld(){return navigator.maxTouchPoints||"ontouchstart"in this}function qd(e,n,r){var i=e.invertX(n[0][0])-r[0][0],a=e.invertX(n[1][0])-r[1][0],s=e.invertY(n[0][1])-r[0][1],o=e.invertY(n[1][1])-r[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Ud(){var e=zd,n=$d,r=qd,i=Fd,a=Ld,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,f=jf,d=nn("start","zoom","end"),h,u,p,m=500,y=150,w=0,v=10;function g(N){N.property("__zoom",Fi).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(N,I,O,q){var H=N.selection?N.selection():N;H.property("__zoom",Fi),N!==H?_(N,I,O,q):H.interrupt().each(function(){S(this,arguments).event(q).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},g.scaleBy=function(N,I,O,q){g.scaleTo(N,function(){var H=this.__zoom.k,F=typeof I=="function"?I.apply(this,arguments):I;return H*F},O,q)},g.scaleTo=function(N,I,O,q){g.transform(N,function(){var H=n.apply(this,arguments),F=this.__zoom,L=O==null?b(H):typeof O=="function"?O.apply(this,arguments):O,V=F.invert(L),W=typeof I=="function"?I.apply(this,arguments):I;return r(j(k(F,W),L,V),H,o)},O,q)},g.translateBy=function(N,I,O,q){g.transform(N,function(){return r(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof O=="function"?O.apply(this,arguments):O),n.apply(this,arguments),o)},null,q)},g.translateTo=function(N,I,O,q,H){g.transform(N,function(){var F=n.apply(this,arguments),L=this.__zoom,V=q==null?b(F):typeof q=="function"?q.apply(this,arguments):q;return r(Gr.translate(V[0],V[1]).scale(L.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof O=="function"?-O.apply(this,arguments):-O),F,o)},q,H)};function k(N,I){return I=Math.max(s[0],Math.min(s[1],I)),I===N.k?N:new We(I,N.x,N.y)}function j(N,I,O){var q=I[0]-O[0]*N.k,H=I[1]-O[1]*N.k;return q===N.x&&H===N.y?N:new We(N.k,q,H)}function b(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function _(N,I,O,q){N.on("start.zoom",function(){S(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(q).end()}).tween("zoom",function(){var H=this,F=arguments,L=S(H,F).event(q),V=n.apply(H,F),W=O==null?b(V):typeof O=="function"?O.apply(H,F):O,Y=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),K=H.__zoom,ae=typeof I=="function"?I.apply(H,F):I,xe=f(K.invert(W).concat(Y/K.k),ae.invert(W).concat(Y/ae.k));return function(se){if(se===1)se=ae;else{var ke=xe(se),wt=Y/ke[2];se=new We(wt,W[0]-ke[0]*wt,W[1]-ke[1]*wt)}L.zoom(null,se)}})}function S(N,I,O){return!O&&N.__zooming||new M(N,I)}function M(N,I){this.that=N,this.args=I,this.active=0,this.sourceEvent=null,this.extent=n.apply(N,I),this.taps=0}M.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,I){return this.mouse&&N!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var I=Ne(this.that).datum();d.call(N,this.that,new Dd(N,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:d}),I)}};function x(N,...I){if(!e.apply(this,arguments))return;var O=S(this,I).event(N),q=this.__zoom,H=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,i.apply(this,arguments)))),F=Oe(N);if(O.wheel)(O.mouse[0][0]!==F[0]||O.mouse[0][1]!==F[1])&&(O.mouse[1]=q.invert(O.mouse[0]=F)),clearTimeout(O.wheel);else{if(q.k===H)return;O.mouse=[F,q.invert(F)],_n(this),O.start()}At(N),O.wheel=setTimeout(L,y),O.zoom("mouse",r(j(k(q,H),O.mouse[0],O.mouse[1]),O.extent,o));function L(){O.wheel=null,O.end()}}function A(N,...I){if(p||!e.apply(this,arguments))return;var O=N.currentTarget,q=S(this,I,!0).event(N),H=Ne(N.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",Y,!0),F=Oe(N,O),L=N.clientX,V=N.clientY;gs(N.view),er(N),q.mouse=[F,this.__zoom.invert(F)],_n(this),q.start();function W(K){if(At(K),!q.moved){var ae=K.clientX-L,xe=K.clientY-V;q.moved=ae*ae+xe*xe>w}q.event(K).zoom("mouse",r(j(q.that.__zoom,q.mouse[0]=Oe(K,O),q.mouse[1]),q.extent,o))}function Y(K){H.on("mousemove.zoom mouseup.zoom",null),ys(K.view,q.moved),At(K),q.event(K).end()}}function E(N,...I){if(e.apply(this,arguments)){var O=this.__zoom,q=Oe(N.changedTouches?N.changedTouches[0]:N,this),H=O.invert(q),F=O.k*(N.shiftKey?.5:2),L=r(j(k(O,F),q,H),n.apply(this,I),o);At(N),l>0?Ne(this).transition().duration(l).call(_,L,q,N):Ne(this).call(g.transform,L,q,N)}}function R(N,...I){if(e.apply(this,arguments)){var O=N.touches,q=O.length,H=S(this,I,N.changedTouches.length===q).event(N),F,L,V,W;for(er(N),L=0;L<q;++L)V=O[L],W=Oe(V,this),W=[W,this.__zoom.invert(W),V.identifier],H.touch0?!H.touch1&&H.touch0[2]!==W[2]&&(H.touch1=W,H.taps=0):(H.touch0=W,F=!0,H.taps=1+!!h);h&&(h=clearTimeout(h)),F&&(H.taps<2&&(u=W[0],h=setTimeout(function(){h=null},m)),_n(this),H.start())}}function P(N,...I){if(this.__zooming){var O=S(this,I).event(N),q=N.changedTouches,H=q.length,F,L,V,W;for(At(N),F=0;F<H;++F)L=q[F],V=Oe(L,this),O.touch0&&O.touch0[2]===L.identifier?O.touch0[0]=V:O.touch1&&O.touch1[2]===L.identifier&&(O.touch1[0]=V);if(L=O.that.__zoom,O.touch1){var Y=O.touch0[0],K=O.touch0[1],ae=O.touch1[0],xe=O.touch1[1],se=(se=ae[0]-Y[0])*se+(se=ae[1]-Y[1])*se,ke=(ke=xe[0]-K[0])*ke+(ke=xe[1]-K[1])*ke;L=k(L,Math.sqrt(se/ke)),V=[(Y[0]+ae[0])/2,(Y[1]+ae[1])/2],W=[(K[0]+xe[0])/2,(K[1]+xe[1])/2]}else if(O.touch0)V=O.touch0[0],W=O.touch0[1];else return;O.zoom("touch",r(j(L,V,W),O.extent,o))}}function z(N,...I){if(this.__zooming){var O=S(this,I).event(N),q=N.changedTouches,H=q.length,F,L;for(er(N),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),F=0;F<H;++F)L=q[F],O.touch0&&O.touch0[2]===L.identifier?delete O.touch0:O.touch1&&O.touch1[2]===L.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(L=Oe(L,this),Math.hypot(u[0]-L[0],u[1]-L[1])<v)){var V=Ne(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return g.wheelDelta=function(N){return arguments.length?(i=typeof N=="function"?N:pn(+N),g):i},g.filter=function(N){return arguments.length?(e=typeof N=="function"?N:pn(!!N),g):e},g.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:pn(!!N),g):a},g.extent=function(N){return arguments.length?(n=typeof N=="function"?N:pn([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),g):n},g.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],g):[s[0],s[1]]},g.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(N){return arguments.length?(r=N,g):r},g.duration=function(N){return arguments.length?(l=+N,g):l},g.interpolate=function(N){return arguments.length?(f=N,g):f},g.on=function(){var N=d.on.apply(d,arguments);return N===d?g:N},g.clickDistance=function(N){return arguments.length?(w=(N=+N)*N,g):Math.sqrt(w)},g.tapDistance=function(N){return arguments.length?(v=+N,g):v},g}class Li extends Map{constructor(n,r=Vd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,a]of n)this.set(i,a)}get(n){return super.get(qi(this,n))}has(n){return super.has(qi(this,n))}set(n,r){return super.set(Hd(this,n),r)}delete(n){return super.delete(Bd(this,n))}}function qi({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function Hd({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function Bd({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function Vd(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ui(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let a of e)(a=n(a,++i,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function Hi(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let a of e)(a=n(a,++i,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function Wd(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var Gd=typeof global=="object"&&global&&global.Object===Object&&global,Kd=typeof self=="object"&&self&&self.Object===Object&&self,Ms=Gd||Kd||Function("return this")(),Mn=Ms.Symbol,Ps=Object.prototype,Yd=Ps.hasOwnProperty,Xd=Ps.toString,Tt=Mn?Mn.toStringTag:void 0;function Zd(e){var n=Yd.call(e,Tt),r=e[Tt];try{e[Tt]=void 0;var i=!0}catch{}var a=Xd.call(e);return i&&(n?e[Tt]=r:delete e[Tt]),a}var Jd=Object.prototype,Qd=Jd.toString;function eh(e){return Qd.call(e)}var th="[object Null]",nh="[object Undefined]",Bi=Mn?Mn.toStringTag:void 0;function rh(e){return e==null?e===void 0?nh:th:Bi&&Bi in Object(e)?Zd(e):eh(e)}function ih(e){return e!=null&&typeof e=="object"}var ah="[object Symbol]";function sh(e){return typeof e=="symbol"||ih(e)&&rh(e)==ah}var oh=/\s/;function lh(e){for(var n=e.length;n--&&oh.test(e.charAt(n)););return n}var ch=/^\s+/;function uh(e){return e&&e.slice(0,lh(e)+1).replace(ch,"")}function Pn(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Vi=NaN,fh=/^[-+]0x[0-9a-f]+$/i,dh=/^0b[01]+$/i,hh=/^0o[0-7]+$/i,ph=parseInt;function Wi(e){if(typeof e=="number")return e;if(sh(e))return Vi;if(Pn(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Pn(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=uh(e);var r=dh.test(e);return r||hh.test(e)?ph(e.slice(2),r?2:8):fh.test(e)?Vi:+e}var tr=function(){return Ms.Date.now()},mh="Expected a function",gh=Math.max,yh=Math.min;function Es(e,n,r){var i,a,s,o,l,f,d=0,h=!1,u=!1,p=!0;if(typeof e!="function")throw new TypeError(mh);n=Wi(n)||0,Pn(r)&&(h=!!r.leading,u="maxWait"in r,s=u?gh(Wi(r.maxWait)||0,n):s,p="trailing"in r?!!r.trailing:p);function m(S){var M=i,x=a;return i=a=void 0,d=S,o=e.apply(x,M),o}function y(S){return d=S,l=setTimeout(g,n),h?m(S):o}function w(S){var M=S-f,x=S-d,A=n-M;return u?yh(A,s-x):A}function v(S){var M=S-f,x=S-d;return f===void 0||M>=n||M<0||u&&x>=s}function g(){var S=tr();if(v(S))return k(S);l=setTimeout(g,w(S))}function k(S){return l=void 0,p&&i?m(S):(i=a=void 0,o)}function j(){l!==void 0&&clearTimeout(l),d=0,i=f=a=l=void 0}function b(){return l===void 0?o:k(tr())}function _(){var S=tr(),M=v(S);if(i=arguments,a=this,f=S,M){if(l===void 0)return y(f);if(u)return clearTimeout(l),l=setTimeout(g,n),m(f)}return l===void 0&&(l=setTimeout(g,n)),o}return _.cancel=j,_.flush=b,_}var xh="Expected a function";function vh(e,n,r){var i=!0,a=!0;if(typeof e!="function")throw new TypeError(xh);return Pn(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),Es(e,n,{leading:i,maxWait:n,trailing:a})}var ot=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-ot.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?ot.Bounce.In(e*2)*.5:ot.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),Ut=function(){return performance.now()},Os=(function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a=0,s=r;a<s.length;a++){var o=s[a];(n=o._group)===null||n===void 0||n.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=Ut()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<i.length;a++){var s=this._tweens[i[a]],o=!r;s&&s.update(n,o)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},e})(),kr={Linear:function(e,n){var r=e.length-1,i=r*n,a=Math.floor(i),s=kr.Utils.Linear;return n<0?s(e[0],e[1],i):n>1?s(e[r],e[r-1],r-i):s(e[a],e[a+1>r?r:a+1],i-a)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},Rs=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),Cr=new Os,Gi=(function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ot.Linear.None,this._interpolationFunction=kr.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Rs.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Cr,Cr.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=Ut()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var s in this._valuesEnd)a[s]=this._valuesEnd[s];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,a,s){for(var o in i){var l=n[o],f=Array.isArray(l),d=f?"array":typeof l,h=!f&&Array.isArray(i[o]);if(!(d==="undefined"||d==="function")){if(h){var u=i[o];if(u.length===0)continue;for(var p=[l],m=0,y=u.length;m<y;m+=1){var w=this._handleRelativeValue(l,u[m]);if(isNaN(w)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}p.push(w)}h&&(i[o]=p)}if((d==="object"||f)&&l&&!h){r[o]=f?[]:{};var v=l;for(var g in v)r[o][g]=v[g];a[o]=f?[]:{};var u=i[o];if(!this._isDynamic){var k={};for(var g in u)k[g]=u[g];i[o]=u=k}this._setupProperties(v,r[o],u,a[o],s)}else(typeof r[o]>"u"||s)&&(r[o]=l),f||(r[o]*=1),h?a[o]=i[o].slice().reverse():a[o]=r[o]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=Ut()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=Ut()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=ot.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=kr.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,a;if(n===void 0&&(n=Ut()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=n-this._startTime,l=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),f=this._duration+this._repeat*l,d=function(){if(i._duration===0||o>f)return 1;var w=Math.trunc(o/l),v=o-w*l,g=Math.min(v/i._duration,1);return g===0&&o===i._duration?1:g},h=d(),u=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||o>=this._duration)if(this._repeat>0){var p=Math.min(Math.trunc((o-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=p);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*p,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,y=this._chainedTweens.length;m<y;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,a){for(var s in i)if(r[s]!==void 0){var o=r[s]||0,l=i[s],f=Array.isArray(n[s]),d=Array.isArray(l),h=!f&&d;h?n[s]=this._interpolationFunction(l,a):typeof l=="object"&&l?this._updateProperties(n[s],o,l,a):(l=this._handleRelativeValue(o,l),typeof l=="number"&&(n[s]=o+(l-o)*a))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e})();Rs.nextId;var De=Cr;De.getAll.bind(De);De.removeAll.bind(De);De.add.bind(De);De.remove.bind(De);De.update.bind(De);function Ki(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function bh(e){if(Array.isArray(e))return e}function _h(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function wh(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function Nh(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n!==0)for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function jh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kh(e,n){return bh(e)||Nh(e,n)||Ch(e,n)||jh()}function Ch(e,n){if(e){if(typeof e=="string")return Ki(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ki(e,n):void 0}}var Sh=wh(function e(n,r){var i=r.default,a=i===void 0?null:i,s=r.triggerUpdate,o=s===void 0?!0:s,l=r.onChange,f=l===void 0?function(d,h){}:l;_h(this,e),this.name=n,this.defaultVal=a,this.triggerUpdate=o,this.onChange=f});function Kr(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,a=i===void 0?{}:i,s=e.methods,o=s===void 0?{}:s,l=e.aliases,f=l===void 0?{}:l,d=e.init,h=d===void 0?function(){}:d,u=e.update,p=u===void 0?function(){}:u,m=Object.keys(a).map(function(y){return new Sh(y,a[y])});return function y(){for(var w=arguments.length,v=new Array(w),g=0;g<w;g++)v[g]=arguments[g];var k=!!(this instanceof y&&this.constructor),j=k?v.shift():void 0,b=v[0],_=b===void 0?{}:b,S=Object.assign({},r instanceof Function?r(_):r,{initialised:!1}),M={};function x(R){return A(R,_),E(),x}var A=function(P,z){h.call(x,P,S,z),S.initialised=!0},E=Es(function(){S.initialised&&(p.call(x,S,M),M={})},1);return m.forEach(function(R){x[R.name]=P(R);function P(z){var N=z.name,I=z.triggerUpdate,O=I===void 0?!1:I,q=z.onChange,H=q===void 0?function(V,W){}:q,F=z.defaultVal,L=F===void 0?null:F;return function(V){var W=S[N];if(!arguments.length)return W;var Y=V===void 0?L:V;return S[N]=Y,H.call(x,Y,S,W),!M.hasOwnProperty(N)&&(M[N]=W),O&&E(),x}}}),Object.keys(o).forEach(function(R){x[R]=function(){for(var P,z=arguments.length,N=new Array(z),I=0;I<z;I++)N[I]=arguments[I];return(P=o[R]).call.apply(P,[x,S].concat(N))}}),Object.entries(f).forEach(function(R){var P=kh(R,2),z=P[0],N=P[1];return x[z]=x[N]}),x.resetProps=function(){return m.forEach(function(R){x[R.name](R.defaultVal)}),x},x.resetProps(),S._rerender=E,k&&j&&x(j),x}}var X=(function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}});function En(e){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},En(e)}var Ah=/^\s+/,Th=/\s+$/;function B(e,n){if(e=e||"",n=n||{},e instanceof B)return e;if(!(this instanceof B))return new B(e,n);var r=Mh(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}B.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,a,s,o,l;return r=n.r/255,i=n.g/255,a=n.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),a<=.03928?l=a/12.92:l=Math.pow((a+.055)/1.055,2.4),.2126*s+.7152*o+.0722*l},setAlpha:function(n){return this._a=Is(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=Xi(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=Xi(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),a=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+a+"%)":"hsva("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var n=Yi(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Yi(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),a=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+a+"%)":"hsla("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(n){return Zi(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return Rh(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(te(this._r,255)*100)+"%",g:Math.round(te(this._g,255)*100)+"%",b:Math.round(te(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(te(this._r,255)*100)+"%, "+Math.round(te(this._g,255)*100)+"%, "+Math.round(te(this._b,255)*100)+"%)":"rgba("+Math.round(te(this._r,255)*100)+"%, "+Math.round(te(this._g,255)*100)+"%, "+Math.round(te(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Wh[Zi(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+Ji(this._r,this._g,this._b,this._a),i=r,a=this._gradientType?"GradientType = 1, ":"";if(n){var s=B(n);i="#"+Ji(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,a=this._a<1&&this._a>=0,s=!r&&a&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return s?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return B(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification($h,arguments)},brighten:function(){return this._applyModification(Fh,arguments)},darken:function(){return this._applyModification(Lh,arguments)},desaturate:function(){return this._applyModification(Ih,arguments)},saturate:function(){return this._applyModification(Dh,arguments)},greyscale:function(){return this._applyModification(zh,arguments)},spin:function(){return this._applyModification(qh,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Bh,arguments)},complement:function(){return this._applyCombination(Uh,arguments)},monochromatic:function(){return this._applyCombination(Vh,arguments)},splitcomplement:function(){return this._applyCombination(Hh,arguments)},triad:function(){return this._applyCombination(Qi,[3])},tetrad:function(){return this._applyCombination(Qi,[4])}};B.fromRatio=function(e,n){if(En(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=Ht(e[i]));e=r}return B(e,n)};function Mh(e){var n={r:0,g:0,b:0},r=1,i=null,a=null,s=null,o=!1,l=!1;return typeof e=="string"&&(e=Xh(e)),En(e)=="object"&&(Le(e.r)&&Le(e.g)&&Le(e.b)?(n=Ph(e.r,e.g,e.b),o=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Le(e.h)&&Le(e.s)&&Le(e.v)?(i=Ht(e.s),a=Ht(e.v),n=Oh(e.h,i,a),o=!0,l="hsv"):Le(e.h)&&Le(e.s)&&Le(e.l)&&(i=Ht(e.s),s=Ht(e.l),n=Eh(e.h,i,s),o=!0,l="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Is(r),{ok:o,format:e.format||l,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function Ph(e,n,r){return{r:te(e,255)*255,g:te(n,255)*255,b:te(r,255)*255}}function Yi(e,n,r){e=te(e,255),n=te(n,255),r=te(r,255);var i=Math.max(e,n,r),a=Math.min(e,n,r),s,o,l=(i+a)/2;if(i==a)s=o=0;else{var f=i-a;switch(o=l>.5?f/(2-i-a):f/(i+a),i){case e:s=(n-r)/f+(n<r?6:0);break;case n:s=(r-e)/f+2;break;case r:s=(e-n)/f+4;break}s/=6}return{h:s,s:o,l}}function Eh(e,n,r){var i,a,s;e=te(e,360),n=te(n,100),r=te(r,100);function o(d,h,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?d+(h-d)*6*u:u<1/2?h:u<2/3?d+(h-d)*(2/3-u)*6:d}if(n===0)i=a=s=r;else{var l=r<.5?r*(1+n):r+n-r*n,f=2*r-l;i=o(f,l,e+1/3),a=o(f,l,e),s=o(f,l,e-1/3)}return{r:i*255,g:a*255,b:s*255}}function Xi(e,n,r){e=te(e,255),n=te(n,255),r=te(r,255);var i=Math.max(e,n,r),a=Math.min(e,n,r),s,o,l=i,f=i-a;if(o=i===0?0:f/i,i==a)s=0;else{switch(i){case e:s=(n-r)/f+(n<r?6:0);break;case n:s=(r-e)/f+2;break;case r:s=(e-n)/f+4;break}s/=6}return{h:s,s:o,v:l}}function Oh(e,n,r){e=te(e,360)*6,n=te(n,100),r=te(r,100);var i=Math.floor(e),a=e-i,s=r*(1-n),o=r*(1-a*n),l=r*(1-(1-a)*n),f=i%6,d=[r,o,s,s,l,r][f],h=[l,r,r,o,s,s][f],u=[s,s,l,r,r,o][f];return{r:d*255,g:h*255,b:u*255}}function Zi(e,n,r,i){var a=[Ae(Math.round(e).toString(16)),Ae(Math.round(n).toString(16)),Ae(Math.round(r).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Rh(e,n,r,i,a){var s=[Ae(Math.round(e).toString(16)),Ae(Math.round(n).toString(16)),Ae(Math.round(r).toString(16)),Ae(Ds(i))];return a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Ji(e,n,r,i){var a=[Ae(Ds(i)),Ae(Math.round(e).toString(16)),Ae(Math.round(n).toString(16)),Ae(Math.round(r).toString(16))];return a.join("")}B.equals=function(e,n){return!e||!n?!1:B(e).toRgbString()==B(n).toRgbString()};B.random=function(){return B.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Ih(e,n){n=n===0?0:n||10;var r=B(e).toHsl();return r.s-=n/100,r.s=Un(r.s),B(r)}function Dh(e,n){n=n===0?0:n||10;var r=B(e).toHsl();return r.s+=n/100,r.s=Un(r.s),B(r)}function zh(e){return B(e).desaturate(100)}function $h(e,n){n=n===0?0:n||10;var r=B(e).toHsl();return r.l+=n/100,r.l=Un(r.l),B(r)}function Fh(e,n){n=n===0?0:n||10;var r=B(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),B(r)}function Lh(e,n){n=n===0?0:n||10;var r=B(e).toHsl();return r.l-=n/100,r.l=Un(r.l),B(r)}function qh(e,n){var r=B(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,B(r)}function Uh(e){var n=B(e).toHsl();return n.h=(n.h+180)%360,B(n)}function Qi(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=B(e).toHsl(),i=[B(e)],a=360/n,s=1;s<n;s++)i.push(B({h:(r.h+s*a)%360,s:r.s,l:r.l}));return i}function Hh(e){var n=B(e).toHsl(),r=n.h;return[B(e),B({h:(r+72)%360,s:n.s,l:n.l}),B({h:(r+216)%360,s:n.s,l:n.l})]}function Bh(e,n,r){n=n||6,r=r||30;var i=B(e).toHsl(),a=360/r,s=[B(e)];for(i.h=(i.h-(a*n>>1)+720)%360;--n;)i.h=(i.h+a)%360,s.push(B(i));return s}function Vh(e,n){n=n||6;for(var r=B(e).toHsv(),i=r.h,a=r.s,s=r.v,o=[],l=1/n;n--;)o.push(B({h:i,s:a,v:s})),s=(s+l)%1;return o}B.mix=function(e,n,r){r=r===0?0:r||50;var i=B(e).toRgb(),a=B(n).toRgb(),s=r/100,o={r:(a.r-i.r)*s+i.r,g:(a.g-i.g)*s+i.g,b:(a.b-i.b)*s+i.b,a:(a.a-i.a)*s+i.a};return B(o)};B.readability=function(e,n){var r=B(e),i=B(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};B.isReadable=function(e,n,r){var i=B.readability(e,n),a,s;switch(s=!1,a=Zh(r),a.level+a.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};B.mostReadable=function(e,n,r){var i=null,a=0,s,o,l,f;r=r||{},o=r.includeFallbackColors,l=r.level,f=r.size;for(var d=0;d<n.length;d++)s=B.readability(e,n[d]),s>a&&(a=s,i=B(n[d]));return B.isReadable(e,i,{level:l,size:f})||!o?i:(r.includeFallbackColors=!1,B.mostReadable(e,["#fff","#000"],r))};var Sr=B.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Wh=B.hexNames=Gh(Sr);function Gh(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function Is(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function te(e,n){Kh(e)&&(e="100%");var r=Yh(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Un(e){return Math.min(1,Math.max(0,e))}function ge(e){return parseInt(e,16)}function Kh(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Yh(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ae(e){return e.length==1?"0"+e:""+e}function Ht(e){return e<=1&&(e=e*100+"%"),e}function Ds(e){return Math.round(parseFloat(e)*255).toString(16)}function ea(e){return ge(e)/255}var Ce=(function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Le(e){return!!Ce.CSS_UNIT.exec(e)}function Xh(e){e=e.replace(Ah,"").replace(Th,"").toLowerCase();var n=!1;if(Sr[e])e=Sr[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Ce.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Ce.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ce.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Ce.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ce.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Ce.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ce.hex8.exec(e))?{r:ge(r[1]),g:ge(r[2]),b:ge(r[3]),a:ea(r[4]),format:n?"name":"hex8"}:(r=Ce.hex6.exec(e))?{r:ge(r[1]),g:ge(r[2]),b:ge(r[3]),format:n?"name":"hex"}:(r=Ce.hex4.exec(e))?{r:ge(r[1]+""+r[1]),g:ge(r[2]+""+r[2]),b:ge(r[3]+""+r[3]),a:ea(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=Ce.hex3.exec(e))?{r:ge(r[1]+""+r[1]),g:ge(r[2]+""+r[2]),b:ge(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function Zh(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function Ar(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Jh(e){if(Array.isArray(e))return Ar(e)}function zs(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function Qh(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ep(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ve(e,n){return e.get(zs(e,n))}function ta(e,n,r){Qh(e,n),n.set(e,r)}function na(e,n,r){return e.set(zs(e,n),r),r}function tp(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,op(i.key),i)}}function np(e,n,r){return n&&tp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rp(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ip(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ap(e){return Jh(e)||rp(e)||lp(e)||ip()}function sp(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function op(e){var n=sp(e,"string");return typeof n=="symbol"?n:n+""}function lp(e,n){if(e){if(typeof e=="string")return Ar(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,n):void 0}}var cp=123,up=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},$s=function(n,r,i){return(n<<16)+(r<<8)+i},fp=function(n){var r=B(n).toRgb(),i=r.r,a=r.g,s=r.b;return $s(i,a,s)},ra=function(n,r){return n*cp%Math.pow(2,r)},nt=new WeakMap,qe=new WeakMap,dp=(function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;ep(this,e),ta(this,nt,void 0),ta(this,qe,void 0),na(qe,this,n),this.reset()}return np(e,[{key:"reset",value:function(){na(nt,this,["__reserved for background__"])}},{key:"register",value:function(r){if(ve(nt,this).length>=Math.pow(2,24-ve(qe,this)))return null;var i=ve(nt,this).length,a=ra(i,ve(qe,this)),s=up(i+(a<<24-ve(qe,this)));return ve(nt,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?fp(r):$s.apply(void 0,ap(r));if(!i)return null;var a=i&Math.pow(2,24-ve(qe,this))-1,s=i>>24-ve(qe,this)&Math.pow(2,ve(qe,this))-1;return ra(a,ve(qe,this))!==s||a>=ve(nt,this).length?null:ve(nt,this)[a]}}])})(),an,ne,Fs,Ls,rt,ia,qs,Us,Hs,Yr,Tr,Mr,Jt={},Bs=[],hp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Hn=Array.isArray;function Re(e,n){for(var r in n)e[r]=n[r];return e}function Xr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function pp(e,n,r){var i,a,s,o={};for(s in n)s=="key"?i=n[s]:s=="ref"?a=n[s]:o[s]=n[s];if(arguments.length>2&&(o.children=arguments.length>3?an.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return Bt(e,o,i,a,null)}function Bt(e,n,r,i,a){var s={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++Fs,__i:-1,__u:0};return a==null&&ne.vnode!=null&&ne.vnode(s),s}function Bn(e){return e.children}function wn(e,n){this.props=e,this.context=n}function _t(e,n){if(n==null)return e.__?_t(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?_t(e):null}function Vs(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Vs(e)}}function aa(e){(!e.__d&&(e.__d=!0)&&rt.push(e)&&!On.__r++||ia!=ne.debounceRendering)&&((ia=ne.debounceRendering)||qs)(On)}function On(){for(var e,n,r,i,a,s,o,l=1;rt.length;)rt.length>l&&rt.sort(Us),e=rt.shift(),l=rt.length,e.__d&&(r=void 0,i=void 0,a=(i=(n=e).__v).__e,s=[],o=[],n.__P&&((r=Re({},i)).__v=i.__v+1,ne.vnode&&ne.vnode(r),Zr(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[a]:null,s,a??_t(i),!!(32&i.__u),o),r.__v=i.__v,r.__.__k[r.__i]=r,Ks(s,r,o),i.__e=i.__=null,r.__e!=a&&Vs(r)));On.__r=0}function Ws(e,n,r,i,a,s,o,l,f,d,h){var u,p,m,y,w,v,g,k=i&&i.__k||Bs,j=n.length;for(f=mp(r,n,k,f,j),u=0;u<j;u++)(m=r.__k[u])!=null&&(p=m.__i==-1?Jt:k[m.__i]||Jt,m.__i=u,v=Zr(e,m,p,a,s,o,l,f,d,h),y=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&Jr(p.ref,null,m),h.push(m.ref,m.__c||y,m)),w==null&&y!=null&&(w=y),(g=!!(4&m.__u))||p.__k===m.__k?f=Gs(m,f,e,g):typeof m.type=="function"&&v!==void 0?f=v:y&&(f=y.nextSibling),m.__u&=-7);return r.__e=w,f}function mp(e,n,r,i,a){var s,o,l,f,d,h=r.length,u=h,p=0;for(e.__k=new Array(a),s=0;s<a;s++)(o=n[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[s]=Bt(null,o,null,null,null):Hn(o)?o=e.__k[s]=Bt(Bn,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=e.__k[s]=Bt(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[s]=o,f=s+p,o.__=e,o.__b=e.__b+1,l=null,(d=o.__i=gp(o,r,f,u))!=-1&&(u--,(l=r[d])&&(l.__u|=2)),l==null||l.__v==null?(d==-1&&(a>h?p--:a<h&&p++),typeof o.type!="function"&&(o.__u|=4)):d!=f&&(d==f-1?p--:d==f+1?p++:(d>f?p--:p++,o.__u|=4))):e.__k[s]=null;if(u)for(s=0;s<h;s++)(l=r[s])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=_t(l)),Xs(l,l));return i}function Gs(e,n,r,i){var a,s;if(typeof e.type=="function"){for(a=e.__k,s=0;a&&s<a.length;s++)a[s]&&(a[s].__=e,n=Gs(a[s],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=_t(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function gp(e,n,r,i){var a,s,o,l=e.key,f=e.type,d=n[r],h=d!=null&&(2&d.__u)==0;if(d===null&&l==null||h&&l==d.key&&f==d.type)return r;if(i>(h?1:0)){for(a=r-1,s=r+1;a>=0||s<n.length;)if((d=n[o=a>=0?a--:s++])!=null&&(2&d.__u)==0&&l==d.key&&f==d.type)return o}return-1}function sa(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||hp.test(n)?r:r+"px"}function mn(e,n,r,i,a){var s,o;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||sa(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||sa(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")s=n!=(n=n.replace(Hs,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+s]=r,r?i?r.u=i.u:(r.u=Yr,e.addEventListener(n,s?Mr:Tr,s)):e.removeEventListener(n,s?Mr:Tr,s);else{if(a=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function oa(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=Yr++;else if(n.t<r.u)return;return r(ne.event?ne.event(n):n)}}}function Zr(e,n,r,i,a,s,o,l,f,d){var h,u,p,m,y,w,v,g,k,j,b,_,S,M,x,A,E,R=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(f=!!(32&r.__u),s=[l=n.__e=r.__e]),(h=ne.__b)&&h(n);e:if(typeof R=="function")try{if(g=n.props,k="prototype"in R&&R.prototype.render,j=(h=R.contextType)&&i[h.__c],b=h?j?j.props.value:h.__:i,r.__c?v=(u=n.__c=r.__c).__=u.__E:(k?n.__c=u=new R(g,b):(n.__c=u=new wn(g,b),u.constructor=R,u.render=xp),j&&j.sub(u),u.state||(u.state={}),u.__n=i,p=u.__d=!0,u.__h=[],u._sb=[]),k&&u.__s==null&&(u.__s=u.state),k&&R.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Re({},u.__s)),Re(u.__s,R.getDerivedStateFromProps(g,u.__s))),m=u.props,y=u.state,u.__v=n,p)k&&R.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),k&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(k&&R.getDerivedStateFromProps==null&&g!==m&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,b),n.__v==r.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,b)===!1){for(n.__v!=r.__v&&(u.props=g,u.state=u.__s,u.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(P){P&&(P.__=n)}),_=0;_<u._sb.length;_++)u.__h.push(u._sb[_]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,b),k&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(m,y,w)})}if(u.context=b,u.props=g,u.__P=e,u.__e=!1,S=ne.__r,M=0,k){for(u.state=u.__s,u.__d=!1,S&&S(n),h=u.render(u.props,u.state,u.context),x=0;x<u._sb.length;x++)u.__h.push(u._sb[x]);u._sb=[]}else do u.__d=!1,S&&S(n),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++M<25);u.state=u.__s,u.getChildContext!=null&&(i=Re(Re({},i),u.getChildContext())),k&&!p&&u.getSnapshotBeforeUpdate!=null&&(w=u.getSnapshotBeforeUpdate(m,y)),A=h,h!=null&&h.type===Bn&&h.key==null&&(A=Ys(h.props.children)),l=Ws(e,Hn(A)?A:[A],n,r,i,a,s,o,l,f,d),u.base=n.__e,n.__u&=-161,u.__h.length&&o.push(u),v&&(u.__E=u.__=null)}catch(P){if(n.__v=null,f||s!=null)if(P.then){for(n.__u|=f?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,n.__e=l}else{for(E=s.length;E--;)Xr(s[E]);Pr(n)}else n.__e=r.__e,n.__k=r.__k,P.then||Pr(n);ne.__e(P,n,r)}else s==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):l=n.__e=yp(r.__e,n,r,i,a,s,o,f,d);return(h=ne.diffed)&&h(n),128&n.__u?void 0:l}function Pr(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Pr)}function Ks(e,n,r){for(var i=0;i<r.length;i++)Jr(r[i],r[++i],r[++i]);ne.__c&&ne.__c(n,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(s){s.call(a)})}catch(s){ne.__e(s,a.__v)}})}function Ys(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Hn(e)?e.map(Ys):Re({},e)}function yp(e,n,r,i,a,s,o,l,f){var d,h,u,p,m,y,w,v=r.props||Jt,g=n.props,k=n.type;if(k=="svg"?a="http://www.w3.org/2000/svg":k=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((m=s[d])&&"setAttribute"in m==!!k&&(k?m.localName==k:m.nodeType==3)){e=m,s[d]=null;break}}if(e==null){if(k==null)return document.createTextNode(g);e=document.createElementNS(a,k,g.is&&g),l&&(ne.__m&&ne.__m(n,s),l=!1),s=null}if(k==null)v===g||l&&e.data==g||(e.data=g);else{if(s=s&&an.call(e.childNodes),!l&&s!=null)for(v={},d=0;d<e.attributes.length;d++)v[(m=e.attributes[d]).name]=m.value;for(d in v)if(m=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")u=m;else if(!(d in g)){if(d=="value"&&"defaultValue"in g||d=="checked"&&"defaultChecked"in g)continue;mn(e,d,null,m,a)}}for(d in g)m=g[d],d=="children"?p=m:d=="dangerouslySetInnerHTML"?h=m:d=="value"?y=m:d=="checked"?w=m:l&&typeof m!="function"||v[d]===m||mn(e,d,m,v[d],a);if(h)l||u&&(h.__html==u.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(u&&(e.innerHTML=""),Ws(n.type=="template"?e.content:e,Hn(p)?p:[p],n,r,i,k=="foreignObject"?"http://www.w3.org/1999/xhtml":a,s,o,s?s[0]:r.__k&&_t(r,0),l,f),s!=null)for(d=s.length;d--;)Xr(s[d]);l||(d="value",k=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[d]||k=="progress"&&!y||k=="option"&&y!=v[d])&&mn(e,d,y,v[d],a),d="checked",w!=null&&w!=e[d]&&mn(e,d,w,v[d],a))}return e}function Jr(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(a){ne.__e(a,r)}}function Xs(e,n,r){var i,a;if(ne.unmount&&ne.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Jr(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){ne.__e(s,n)}i.base=i.__P=null}if(i=e.__k)for(a=0;a<i.length;a++)i[a]&&Xs(i[a],n,r||typeof e.type!="function");r||Xr(e.__e),e.__c=e.__=e.__e=void 0}function xp(e,n,r){return this.constructor(e,r)}function vp(e,n,r){var i,a,s,o;n==document&&(n=document.documentElement),ne.__&&ne.__(e,n),a=(i=!1)?null:n.__k,s=[],o=[],Zr(n,e=n.__k=pp(Bn,null,[e]),a||Jt,Jt,n.namespaceURI,a?null:n.firstChild?an.call(n.childNodes):null,s,a?a.__e:n.firstChild,i,o),Ks(s,e,o)}function Zs(e,n,r){var i,a,s,o,l=Re({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)s=="key"?i=n[s]:s=="ref"?a=n[s]:l[s]=n[s]===void 0&&o!=null?o[s]:n[s];return arguments.length>2&&(l.children=arguments.length>3?an.call(arguments,2):r),Bt(e.type,l,i||e.key,a||e.ref,null)}an=Bs.slice,ne={__e:function(e,n,r,i){for(var a,s,o;n=n.__;)if((a=n.__c)&&!a.__)try{if((s=a.constructor)&&s.getDerivedStateFromError!=null&&(a.setState(s.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,i||{}),o=a.__d),o)return a.__E=a}catch(l){e=l}throw e}},Fs=0,Ls=function(e){return e!=null&&e.constructor===void 0},wn.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Re({},this.state),typeof e=="function"&&(e=e(Re({},r),this.props)),e&&Re(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),aa(this))},wn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),aa(this))},wn.prototype.render=Bn,rt=[],qs=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Us=function(e,n){return e.__v.__b-n.__v.__b},On.__r=0,Hs=/(PointerCapture)$|Capture$/i,Yr=0,Tr=oa(!1),Mr=oa(!0);function la(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function bp(e){if(Array.isArray(e))return e}function _p(e,n,r){return(n=Sp(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function wp(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n!==0)for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Np(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ca(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function jp(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ca(Object(r),!0).forEach(function(i){_p(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ca(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function kp(e,n){return bp(e)||wp(e,n)||Ap(e,n)||Np()}function Cp(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Sp(e){var n=Cp(e,"string");return typeof n=="symbol"?n:n+""}function Rn(e){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rn(e)}function Ap(e,n){if(e){if(typeof e=="string")return la(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?la(e,n):void 0}}var Er=function(n){if(Rn(n)!=="object")return n;var r=Zs(n);if(r.props){var i;r.props=jp({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(Er):Er(r.props.children))}return r},Tp=function(n){return Ls(Zs(n))},Mp=function(n,r){delete r.__k,vp(Er(n),r)};function Pp(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var Ep=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Pp(Ep);var Op=Kr({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.style,s=a===void 0?{}:a,o=!!n&&Rn(n)==="object"&&!!n.node&&typeof n.node=="function",l=Ne(o?n.node():n);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(d){var h=kp(d,2),u=h[0],p=h[1];return r.tooltipEl.style(u,p)}),r.tooltipEl.style("left","-10000px").style("display","none");var f="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(f),function(d){r.mouseInside=!0;var h=Oe(d),u=l.node(),p=u.offsetWidth,m=u.offsetHeight,y=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/p*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?m>130&&m-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(y.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(f),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(f),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):Tp(n.content)?(n.tooltipEl.text(""),Mp(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function Rp(e,n,r){var i,a=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function s(){var o,l=i.length,f,d=0,h=0,u=0;for(o=0;o<l;++o)f=i[o],d+=f.x||0,h+=f.y||0,u+=f.z||0;for(d=(d/l-e)*a,h=(h/l-n)*a,u=(u/l-r)*a,o=0;o<l;++o)f=i[o],d&&(f.x-=d),h&&(f.y-=h),u&&(f.z-=u)}return s.initialize=function(o){i=o},s.x=function(o){return arguments.length?(e=+o,s):e},s.y=function(o){return arguments.length?(n=+o,s):n},s.z=function(o){return arguments.length?(r=+o,s):r},s.strength=function(o){return arguments.length?(a=+o,s):a},s}function Ip(e){const n=+this._x.call(null,e);return Js(this.cover(n),n,e)}function Js(e,n,r){if(isNaN(n))return e;var i,a=e._root,s={data:r},o=e._x0,l=e._x1,f,d,h,u,p;if(!a)return e._root=s,e;for(;a.length;)if((h=n>=(f=(o+l)/2))?o=f:l=f,i=a,!(a=a[u=+h]))return i[u]=s,e;if(d=+e._x.call(null,a.data),n===d)return s.next=a,i?i[u]=s:e._root=s,e;do i=i?i[u]=new Array(2):e._root=new Array(2),(h=n>=(f=(o+l)/2))?o=f:l=f;while((u=+h)==(p=+(d>=f)));return i[p]=a,i[u]=s,e}function Dp(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,a=-1/0;for(let s=0,o;s<n;++s)isNaN(o=+this._x.call(null,e[s]))||(r[s]=o,o<i&&(i=o),o>a&&(a=o));if(i>a)return this;this.cover(i).cover(a);for(let s=0;s<n;++s)Js(this,r[s],e[s]);return this}function zp(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,a=this._root,s,o;n>e||e>=r;)switch(o=+(e<n),s=new Array(2),s[o]=a,a=s,i*=2,o){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._x1=r,this}function $p(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Fp(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ke(e,n,r){this.node=e,this.x0=n,this.x1=r}function Lp(e,n){var r,i=this._x0,a,s,o=this._x1,l=[],f=this._root,d,h;for(f&&l.push(new Ke(f,i,o)),n==null?n=1/0:(i=e-n,o=e+n);d=l.pop();)if(!(!(f=d.node)||(a=d.x0)>o||(s=d.x1)<i))if(f.length){var u=(a+s)/2;l.push(new Ke(f[1],u,s),new Ke(f[0],a,u)),(h=+(e>=u))&&(d=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=d)}else{var p=Math.abs(e-+this._x.call(null,f.data));p<n&&(n=p,i=e-p,o=e+p,r=f.data)}return r}function qp(e){if(isNaN(f=+this._x.call(null,e)))return this;var n,r=this._root,i,a,s,o=this._x0,l=this._x1,f,d,h,u,p;if(!r)return this;if(r.length)for(;;){if((h=f>=(d=(o+l)/2))?o=d:l=d,n=r,!(r=r[u=+h]))return this;if(!r.length)break;n[u+1&1]&&(i=n,p=u)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):n?(s?n[u]=s:delete n[u],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[p]=r:this._root=r),this):(this._root=s,this)}function Up(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function Hp(){return this._root}function Bp(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function Vp(e){var n=[],r,i=this._root,a,s,o;for(i&&n.push(new Ke(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,s=r.x0,o=r.x1)&&i.length){var l=(s+o)/2;(a=i[1])&&n.push(new Ke(a,l,o)),(a=i[0])&&n.push(new Ke(a,s,l))}return this}function Wp(e){var n=[],r=[],i;for(this._root&&n.push(new Ke(this._root,this._x0,this._x1));i=n.pop();){var a=i.node;if(a.length){var s,o=i.x0,l=i.x1,f=(o+l)/2;(s=a[0])&&n.push(new Ke(s,o,f)),(s=a[1])&&n.push(new Ke(s,f,l))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function Gp(e){return e[0]}function Kp(e){return arguments.length?(this._x=e,this):this._x}function Qs(e,n){var r=new Qr(n??Gp,NaN,NaN);return e==null?r:r.addAll(e)}function Qr(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function ua(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var me=Qs.prototype=Qr.prototype;me.copy=function(){var e=new Qr(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=ua(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var a=0;a<2;++a)(i=n.source[a])&&(i.length?r.push({source:i,target:n.target[a]=new Array(2)}):n.target[a]=ua(i));return e};me.add=Ip;me.addAll=Dp;me.cover=zp;me.data=$p;me.extent=Fp;me.find=Lp;me.remove=qp;me.removeAll=Up;me.root=Hp;me.size=Bp;me.visit=Vp;me.visitAfter=Wp;me.x=Kp;function Yp(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return eo(this.cover(n,r),n,r,e)}function eo(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var a,s=e._root,o={data:i},l=e._x0,f=e._y0,d=e._x1,h=e._y1,u,p,m,y,w,v,g,k;if(!s)return e._root=o,e;for(;s.length;)if((w=n>=(u=(l+d)/2))?l=u:d=u,(v=r>=(p=(f+h)/2))?f=p:h=p,a=s,!(s=s[g=v<<1|w]))return a[g]=o,e;if(m=+e._x.call(null,s.data),y=+e._y.call(null,s.data),n===m&&r===y)return o.next=s,a?a[g]=o:e._root=o,e;do a=a?a[g]=new Array(4):e._root=new Array(4),(w=n>=(u=(l+d)/2))?l=u:d=u,(v=r>=(p=(f+h)/2))?f=p:h=p;while((g=v<<1|w)===(k=(y>=p)<<1|m>=u));return a[k]=s,a[g]=o,e}function Xp(e){var n,r,i=e.length,a,s,o=new Array(i),l=new Array(i),f=1/0,d=1/0,h=-1/0,u=-1/0;for(r=0;r<i;++r)isNaN(a=+this._x.call(null,n=e[r]))||isNaN(s=+this._y.call(null,n))||(o[r]=a,l[r]=s,a<f&&(f=a),a>h&&(h=a),s<d&&(d=s),s>u&&(u=s));if(f>h||d>u)return this;for(this.cover(f,d).cover(h,u),r=0;r<i;++r)eo(this,o[r],l[r],e[r]);return this}function Zp(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._x1,s=this._y1;if(isNaN(r))a=(r=Math.floor(e))+1,s=(i=Math.floor(n))+1;else{for(var o=a-r||1,l=this._root,f,d;r>e||e>=a||i>n||n>=s;)switch(d=(n<i)<<1|e<r,f=new Array(4),f[d]=l,l=f,o*=2,d){case 0:a=r+o,s=i+o;break;case 1:r=a-o,s=i+o;break;case 2:a=r+o,i=s-o;break;case 3:r=a-o,i=s-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=a,this._y1=s,this}function Jp(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Qp(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ue(e,n,r,i,a){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=a}function em(e,n,r){var i,a=this._x0,s=this._y0,o,l,f,d,h=this._x1,u=this._y1,p=[],m=this._root,y,w;for(m&&p.push(new ue(m,a,s,h,u)),r==null?r=1/0:(a=e-r,s=n-r,h=e+r,u=n+r,r*=r);y=p.pop();)if(!(!(m=y.node)||(o=y.x0)>h||(l=y.y0)>u||(f=y.x1)<a||(d=y.y1)<s))if(m.length){var v=(o+f)/2,g=(l+d)/2;p.push(new ue(m[3],v,g,f,d),new ue(m[2],o,g,v,d),new ue(m[1],v,l,f,g),new ue(m[0],o,l,v,g)),(w=(n>=g)<<1|e>=v)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-w],p[p.length-1-w]=y)}else{var k=e-+this._x.call(null,m.data),j=n-+this._y.call(null,m.data),b=k*k+j*j;if(b<r){var _=Math.sqrt(r=b);a=e-_,s=n-_,h=e+_,u=n+_,i=m.data}}return i}function tm(e){if(isNaN(h=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e)))return this;var n,r=this._root,i,a,s,o=this._x0,l=this._y0,f=this._x1,d=this._y1,h,u,p,m,y,w,v,g;if(!r)return this;if(r.length)for(;;){if((y=h>=(p=(o+f)/2))?o=p:f=p,(w=u>=(m=(l+d)/2))?l=m:d=m,n=r,!(r=r[v=w<<1|y]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,g=v)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):n?(s?n[v]=s:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=s,this)}function nm(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function rm(){return this._root}function im(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function am(e){var n=[],r,i=this._root,a,s,o,l,f;for(i&&n.push(new ue(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,s=r.x0,o=r.y0,l=r.x1,f=r.y1)&&i.length){var d=(s+l)/2,h=(o+f)/2;(a=i[3])&&n.push(new ue(a,d,h,l,f)),(a=i[2])&&n.push(new ue(a,s,h,d,f)),(a=i[1])&&n.push(new ue(a,d,o,l,h)),(a=i[0])&&n.push(new ue(a,s,o,d,h))}return this}function sm(e){var n=[],r=[],i;for(this._root&&n.push(new ue(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var a=i.node;if(a.length){var s,o=i.x0,l=i.y0,f=i.x1,d=i.y1,h=(o+f)/2,u=(l+d)/2;(s=a[0])&&n.push(new ue(s,o,l,h,u)),(s=a[1])&&n.push(new ue(s,h,l,f,u)),(s=a[2])&&n.push(new ue(s,o,u,h,d)),(s=a[3])&&n.push(new ue(s,h,u,f,d))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function om(e){return e[0]}function lm(e){return arguments.length?(this._x=e,this):this._x}function cm(e){return e[1]}function um(e){return arguments.length?(this._y=e,this):this._y}function to(e,n,r){var i=new ei(n??om,r??cm,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function ei(e,n,r,i,a,s){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=a,this._y1=s,this._root=void 0}function fa(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var fe=to.prototype=ei.prototype;fe.copy=function(){var e=new ei(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=fa(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var a=0;a<4;++a)(i=n.source[a])&&(i.length?r.push({source:i,target:n.target[a]=new Array(4)}):n.target[a]=fa(i));return e};fe.add=Yp;fe.addAll=Xp;fe.cover=Zp;fe.data=Jp;fe.extent=Qp;fe.find=em;fe.remove=tm;fe.removeAll=nm;fe.root=rm;fe.size=im;fe.visit=am;fe.visitAfter=sm;fe.x=lm;fe.y=um;function fm(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return no(this.cover(n,r,i),n,r,i,e)}function no(e,n,r,i,a){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var s,o=e._root,l={data:a},f=e._x0,d=e._y0,h=e._z0,u=e._x1,p=e._y1,m=e._z1,y,w,v,g,k,j,b,_,S,M,x;if(!o)return e._root=l,e;for(;o.length;)if((b=n>=(y=(f+u)/2))?f=y:u=y,(_=r>=(w=(d+p)/2))?d=w:p=w,(S=i>=(v=(h+m)/2))?h=v:m=v,s=o,!(o=o[M=S<<2|_<<1|b]))return s[M]=l,e;if(g=+e._x.call(null,o.data),k=+e._y.call(null,o.data),j=+e._z.call(null,o.data),n===g&&r===k&&i===j)return l.next=o,s?s[M]=l:e._root=l,e;do s=s?s[M]=new Array(8):e._root=new Array(8),(b=n>=(y=(f+u)/2))?f=y:u=y,(_=r>=(w=(d+p)/2))?d=w:p=w,(S=i>=(v=(h+m)/2))?h=v:m=v;while((M=S<<2|_<<1|b)===(x=(j>=v)<<2|(k>=w)<<1|g>=y));return s[x]=o,s[M]=l,e}function dm(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),a=new Float64Array(n);let s=1/0,o=1/0,l=1/0,f=-1/0,d=-1/0,h=-1/0;for(let u=0,p,m,y,w;u<n;++u)isNaN(m=+this._x.call(null,p=e[u]))||isNaN(y=+this._y.call(null,p))||isNaN(w=+this._z.call(null,p))||(r[u]=m,i[u]=y,a[u]=w,m<s&&(s=m),m>f&&(f=m),y<o&&(o=y),y>d&&(d=y),w<l&&(l=w),w>h&&(h=w));if(s>f||o>d||l>h)return this;this.cover(s,o,l).cover(f,d,h);for(let u=0;u<n;++u)no(this,r[u],i[u],a[u],e[u]);return this}function hm(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,a=this._y0,s=this._z0,o=this._x1,l=this._y1,f=this._z1;if(isNaN(i))o=(i=Math.floor(e))+1,l=(a=Math.floor(n))+1,f=(s=Math.floor(r))+1;else{for(var d=o-i||1,h=this._root,u,p;i>e||e>=o||a>n||n>=l||s>r||r>=f;)switch(p=(r<s)<<2|(n<a)<<1|e<i,u=new Array(8),u[p]=h,h=u,d*=2,p){case 0:o=i+d,l=a+d,f=s+d;break;case 1:i=o-d,l=a+d,f=s+d;break;case 2:o=i+d,a=l-d,f=s+d;break;case 3:i=o-d,a=l-d,f=s+d;break;case 4:o=i+d,l=a+d,s=f-d;break;case 5:i=o-d,l=a+d,s=f-d;break;case 6:o=i+d,a=l-d,s=f-d;break;case 7:i=o-d,a=l-d,s=f-d;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=a,this._z0=s,this._x1=o,this._y1=l,this._z1=f,this}function pm(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function mm(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Z(e,n,r,i,a,s,o){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=a,this.y1=s,this.z1=o}function gm(e,n,r,i){var a,s=this._x0,o=this._y0,l=this._z0,f,d,h,u,p,m,y=this._x1,w=this._y1,v=this._z1,g=[],k=this._root,j,b;for(k&&g.push(new Z(k,s,o,l,y,w,v)),i==null?i=1/0:(s=e-i,o=n-i,l=r-i,y=e+i,w=n+i,v=r+i,i*=i);j=g.pop();)if(!(!(k=j.node)||(f=j.x0)>y||(d=j.y0)>w||(h=j.z0)>v||(u=j.x1)<s||(p=j.y1)<o||(m=j.z1)<l))if(k.length){var _=(f+u)/2,S=(d+p)/2,M=(h+m)/2;g.push(new Z(k[7],_,S,M,u,p,m),new Z(k[6],f,S,M,_,p,m),new Z(k[5],_,d,M,u,S,m),new Z(k[4],f,d,M,_,S,m),new Z(k[3],_,S,h,u,p,M),new Z(k[2],f,S,h,_,p,M),new Z(k[1],_,d,h,u,S,M),new Z(k[0],f,d,h,_,S,M)),(b=(r>=M)<<2|(n>=S)<<1|e>=_)&&(j=g[g.length-1],g[g.length-1]=g[g.length-1-b],g[g.length-1-b]=j)}else{var x=e-+this._x.call(null,k.data),A=n-+this._y.call(null,k.data),E=r-+this._z.call(null,k.data),R=x*x+A*A+E*E;if(R<i){var P=Math.sqrt(i=R);s=e-P,o=n-P,l=r-P,y=e+P,w=n+P,v=r+P,a=k.data}}return a}const ym=(e,n,r,i,a,s)=>Math.sqrt((e-i)**2+(n-a)**2+(r-s)**2);function xm(e,n,r,i){const a=[],s=e-i,o=n-i,l=r-i,f=e+i,d=n+i,h=r+i;return this.visit((u,p,m,y,w,v,g)=>{if(!u.length)do{const k=u.data;ym(e,n,r,this._x(k),this._y(k),this._z(k))<=i&&a.push(k)}while(u=u.next);return p>f||m>d||y>h||w<s||v<o||g<l}),a}function vm(e){if(isNaN(p=+this._x.call(null,e))||isNaN(m=+this._y.call(null,e))||isNaN(y=+this._z.call(null,e)))return this;var n,r=this._root,i,a,s,o=this._x0,l=this._y0,f=this._z0,d=this._x1,h=this._y1,u=this._z1,p,m,y,w,v,g,k,j,b,_,S;if(!r)return this;if(r.length)for(;;){if((k=p>=(w=(o+d)/2))?o=w:d=w,(j=m>=(v=(l+h)/2))?l=v:h=v,(b=y>=(g=(f+u)/2))?f=g:u=g,n=r,!(r=r[_=b<<2|j<<1|k]))return this;if(!r.length)break;(n[_+1&7]||n[_+2&7]||n[_+3&7]||n[_+4&7]||n[_+5&7]||n[_+6&7]||n[_+7&7])&&(i=n,S=_)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,a?(s?a.next=s:delete a.next,this):n?(s?n[_]=s:delete n[_],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[S]=r:this._root=r),this):(this._root=s,this)}function bm(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function _m(){return this._root}function wm(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function Nm(e){var n=[],r,i=this._root,a,s,o,l,f,d,h;for(i&&n.push(new Z(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,s=r.x0,o=r.y0,l=r.z0,f=r.x1,d=r.y1,h=r.z1)&&i.length){var u=(s+f)/2,p=(o+d)/2,m=(l+h)/2;(a=i[7])&&n.push(new Z(a,u,p,m,f,d,h)),(a=i[6])&&n.push(new Z(a,s,p,m,u,d,h)),(a=i[5])&&n.push(new Z(a,u,o,m,f,p,h)),(a=i[4])&&n.push(new Z(a,s,o,m,u,p,h)),(a=i[3])&&n.push(new Z(a,u,p,l,f,d,m)),(a=i[2])&&n.push(new Z(a,s,p,l,u,d,m)),(a=i[1])&&n.push(new Z(a,u,o,l,f,p,m)),(a=i[0])&&n.push(new Z(a,s,o,l,u,p,m))}return this}function jm(e){var n=[],r=[],i;for(this._root&&n.push(new Z(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var a=i.node;if(a.length){var s,o=i.x0,l=i.y0,f=i.z0,d=i.x1,h=i.y1,u=i.z1,p=(o+d)/2,m=(l+h)/2,y=(f+u)/2;(s=a[0])&&n.push(new Z(s,o,l,f,p,m,y)),(s=a[1])&&n.push(new Z(s,p,l,f,d,m,y)),(s=a[2])&&n.push(new Z(s,o,m,f,p,h,y)),(s=a[3])&&n.push(new Z(s,p,m,f,d,h,y)),(s=a[4])&&n.push(new Z(s,o,l,y,p,m,u)),(s=a[5])&&n.push(new Z(s,p,l,y,d,m,u)),(s=a[6])&&n.push(new Z(s,o,m,y,p,h,u)),(s=a[7])&&n.push(new Z(s,p,m,y,d,h,u))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function km(e){return e[0]}function Cm(e){return arguments.length?(this._x=e,this):this._x}function Sm(e){return e[1]}function Am(e){return arguments.length?(this._y=e,this):this._y}function Tm(e){return e[2]}function Mm(e){return arguments.length?(this._z=e,this):this._z}function ro(e,n,r,i){var a=new ti(n??km,r??Sm,i??Tm,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function ti(e,n,r,i,a,s,o,l,f){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=a,this._z0=s,this._x1=o,this._y1=l,this._z1=f,this._root=void 0}function da(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var le=ro.prototype=ti.prototype;le.copy=function(){var e=new ti(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=da(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var a=0;a<8;++a)(i=n.source[a])&&(i.length?r.push({source:i,target:n.target[a]=new Array(8)}):n.target[a]=da(i));return e};le.add=fm;le.addAll=dm;le.cover=hm;le.data=pm;le.extent=mm;le.find=gm;le.findAllWithinRadius=xm;le.remove=vm;le.removeAll=bm;le.root=_m;le.size=wm;le.visit=Nm;le.visitAfter=jm;le.x=Cm;le.y=Am;le.z=Mm;function Ge(e){return function(){return e}}function Ve(e){return(e()-.5)*1e-6}function Pm(e){return e.index}function ha(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function Em(e){var n=Pm,r=p,i,a=Ge(30),s,o,l,f,d,h,u=1;e==null&&(e=[]);function p(g){return 1/Math.min(f[g.source.index],f[g.target.index])}function m(g){for(var k=0,j=e.length;k<u;++k)for(var b=0,_,S,M,x=0,A=0,E=0,R,P;b<j;++b)_=e[b],S=_.source,M=_.target,x=M.x+M.vx-S.x-S.vx||Ve(h),l>1&&(A=M.y+M.vy-S.y-S.vy||Ve(h)),l>2&&(E=M.z+M.vz-S.z-S.vz||Ve(h)),R=Math.sqrt(x*x+A*A+E*E),R=(R-s[b])/R*g*i[b],x*=R,A*=R,E*=R,M.vx-=x*(P=d[b]),l>1&&(M.vy-=A*P),l>2&&(M.vz-=E*P),S.vx+=x*(P=1-P),l>1&&(S.vy+=A*P),l>2&&(S.vz+=E*P)}function y(){if(o){var g,k=o.length,j=e.length,b=new Map(o.map((S,M)=>[n(S,M,o),S])),_;for(g=0,f=new Array(k);g<j;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=ha(b,_.source)),typeof _.target!="object"&&(_.target=ha(b,_.target)),f[_.source.index]=(f[_.source.index]||0)+1,f[_.target.index]=(f[_.target.index]||0)+1;for(g=0,d=new Array(j);g<j;++g)_=e[g],d[g]=f[_.source.index]/(f[_.source.index]+f[_.target.index]);i=new Array(j),w(),s=new Array(j),v()}}function w(){if(o)for(var g=0,k=e.length;g<k;++g)i[g]=+r(e[g],g,e)}function v(){if(o)for(var g=0,k=e.length;g<k;++g)s[g]=+a(e[g],g,e)}return m.initialize=function(g,...k){o=g,h=k.find(j=>typeof j=="function")||Math.random,l=k.find(j=>[1,2,3].includes(j))||2,y()},m.links=function(g){return arguments.length?(e=g,y(),m):e},m.id=function(g){return arguments.length?(n=g,m):n},m.iterations=function(g){return arguments.length?(u=+g,m):u},m.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Ge(+g),w(),m):r},m.distance=function(g){return arguments.length?(a=typeof g=="function"?g:Ge(+g),v(),m):a},m}const Om=1664525,Rm=1013904223,pa=4294967296;function Im(){let e=1;return()=>(e=(Om*e+Rm)%pa)/pa}var ma=3;function nr(e){return e.x}function ga(e){return e.y}function Dm(e){return e.z}var zm=10,$m=Math.PI*(3-Math.sqrt(5)),Fm=Math.PI*20/(9+Math.sqrt(221));function Lm(e,n){n=n||2;var r=Math.min(ma,Math.max(1,Math.round(n))),i,a=1,s=.001,o=1-Math.pow(s,1/300),l=0,f=.6,d=new Map,h=Br(m),u=nn("tick","end"),p=Im();e==null&&(e=[]);function m(){y(),u.call("tick",i),a<s&&(h.stop(),u.call("end",i))}function y(g){var k,j=e.length,b;g===void 0&&(g=1);for(var _=0;_<g;++_)for(a+=(l-a)*o,d.forEach(function(S){S(a)}),k=0;k<j;++k)b=e[k],b.fx==null?b.x+=b.vx*=f:(b.x=b.fx,b.vx=0),r>1&&(b.fy==null?b.y+=b.vy*=f:(b.y=b.fy,b.vy=0)),r>2&&(b.fz==null?b.z+=b.vz*=f:(b.z=b.fz,b.vz=0));return i}function w(){for(var g=0,k=e.length,j;g<k;++g){if(j=e[g],j.index=g,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),j.fz!=null&&(j.z=j.fz),isNaN(j.x)||r>1&&isNaN(j.y)||r>2&&isNaN(j.z)){var b=zm*(r>2?Math.cbrt(.5+g):r>1?Math.sqrt(.5+g):g),_=g*$m,S=g*Fm;r===1?j.x=b:r===2?(j.x=b*Math.cos(_),j.y=b*Math.sin(_)):(j.x=b*Math.sin(_)*Math.cos(S),j.y=b*Math.cos(_),j.z=b*Math.sin(_)*Math.sin(S))}(isNaN(j.vx)||r>1&&isNaN(j.vy)||r>2&&isNaN(j.vz))&&(j.vx=0,r>1&&(j.vy=0),r>2&&(j.vz=0))}}function v(g){return g.initialize&&g.initialize(e,p,r),g}return w(),i={tick:y,restart:function(){return h.restart(m),i},stop:function(){return h.stop(),i},numDimensions:function(g){return arguments.length?(r=Math.min(ma,Math.max(1,Math.round(g))),d.forEach(v),i):r},nodes:function(g){return arguments.length?(e=g,w(),d.forEach(v),i):e},alpha:function(g){return arguments.length?(a=+g,i):a},alphaMin:function(g){return arguments.length?(s=+g,i):s},alphaDecay:function(g){return arguments.length?(o=+g,i):+o},alphaTarget:function(g){return arguments.length?(l=+g,i):l},velocityDecay:function(g){return arguments.length?(f=1-g,i):1-f},randomSource:function(g){return arguments.length?(p=g,d.forEach(v),i):p},force:function(g,k){return arguments.length>1?(k==null?d.delete(g):d.set(g,v(k)),i):d.get(g)},find:function(){var g=Array.prototype.slice.call(arguments),k=g.shift()||0,j=(r>1?g.shift():null)||0,b=(r>2?g.shift():null)||0,_=g.shift()||1/0,S=0,M=e.length,x,A,E,R,P,z;for(_*=_,S=0;S<M;++S)P=e[S],x=k-P.x,A=j-(P.y||0),E=b-(P.z||0),R=x*x+A*A+E*E,R<_&&(z=P,_=R);return z},on:function(g,k){return arguments.length>1?(u.on(g,k),i):u.on(g)}}}function qm(){var e,n,r,i,a,s=Ge(-30),o,l=1,f=1/0,d=.81;function h(y){var w,v=e.length,g=(n===1?Qs(e,nr):n===2?to(e,nr,ga):n===3?ro(e,nr,ga,Dm):null).visitAfter(p);for(a=y,w=0;w<v;++w)r=e[w],g.visit(m)}function u(){if(e){var y,w=e.length,v;for(o=new Array(w),y=0;y<w;++y)v=e[y],o[v.index]=+s(v,y,e)}}function p(y){var w=0,v,g,k=0,j,b,_,S,M=y.length;if(M){for(j=b=_=S=0;S<M;++S)(v=y[S])&&(g=Math.abs(v.value))&&(w+=v.value,k+=g,j+=g*(v.x||0),b+=g*(v.y||0),_+=g*(v.z||0));w*=Math.sqrt(4/M),y.x=j/k,n>1&&(y.y=b/k),n>2&&(y.z=_/k)}else{v=y,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do w+=o[v.data.index];while(v=v.next)}y.value=w}function m(y,w,v,g,k){if(!y.value)return!0;var j=[v,g,k][n-1],b=y.x-r.x,_=n>1?y.y-r.y:0,S=n>2?y.z-r.z:0,M=j-w,x=b*b+_*_+S*S;if(M*M/d<x)return x<f&&(b===0&&(b=Ve(i),x+=b*b),n>1&&_===0&&(_=Ve(i),x+=_*_),n>2&&S===0&&(S=Ve(i),x+=S*S),x<l&&(x=Math.sqrt(l*x)),r.vx+=b*y.value*a/x,n>1&&(r.vy+=_*y.value*a/x),n>2&&(r.vz+=S*y.value*a/x)),!0;if(y.length||x>=f)return;(y.data!==r||y.next)&&(b===0&&(b=Ve(i),x+=b*b),n>1&&_===0&&(_=Ve(i),x+=_*_),n>2&&S===0&&(S=Ve(i),x+=S*S),x<l&&(x=Math.sqrt(l*x)));do y.data!==r&&(M=o[y.data.index]*a/x,r.vx+=b*M,n>1&&(r.vy+=_*M),n>2&&(r.vz+=S*M));while(y=y.next)}return h.initialize=function(y,...w){e=y,i=w.find(v=>typeof v=="function")||Math.random,n=w.find(v=>[1,2,3].includes(v))||2,u()},h.strength=function(y){return arguments.length?(s=typeof y=="function"?y:Ge(+y),u(),h):s},h.distanceMin=function(y){return arguments.length?(l=y*y,h):Math.sqrt(l)},h.distanceMax=function(y){return arguments.length?(f=y*y,h):Math.sqrt(f)},h.theta=function(y){return arguments.length?(d=y*y,h):Math.sqrt(d)},h}function Um(e,n,r,i){var a,s,o=Ge(.1),l,f;typeof e!="function"&&(e=Ge(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function d(u){for(var p=0,m=a.length;p<m;++p){var y=a[p],w=y.x-n||1e-6,v=(y.y||0)-r||1e-6,g=(y.z||0)-i||1e-6,k=Math.sqrt(w*w+v*v+g*g),j=(f[p]-k)*l[p]*u/k;y.vx+=w*j,s>1&&(y.vy+=v*j),s>2&&(y.vz+=g*j)}}function h(){if(a){var u,p=a.length;for(l=new Array(p),f=new Array(p),u=0;u<p;++u)f[u]=+e(a[u],u,a),l[u]=isNaN(f[u])?0:+o(a[u],u,a)}}return d.initialize=function(u,...p){a=u,s=p.find(m=>[1,2,3].includes(m))||2,h()},d.strength=function(u){return arguments.length?(o=typeof u=="function"?u:Ge(+u),h(),d):o},d.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ge(+u),h(),d):e},d.x=function(u){return arguments.length?(n=+u,d):n},d.y=function(u){return arguments.length?(r=+u,d):r},d.z=function(u){return arguments.length?(i=+u,d):i},d}const{abs:Mt,cos:Ue,sin:pt,acos:Hm,atan2:Pt,sqrt:Ze,pow:be}=Math;function Et(e){return e<0?-be(-e,1/3):be(e,1/3)}const io=Math.PI,gn=2*io,Je=io/2,Bm=1e-6,rr=Number.MAX_SAFE_INTEGER||9007199254740991,ir=Number.MIN_SAFE_INTEGER||-9007199254740991,Vm={x:0,y:0,z:0},$={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Ze(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const a=1-e;let s=n;if(i===0)return n[0].t=e,n[0];if(i===1){const l={x:a*s[0].x+e*s[1].x,y:a*s[0].y+e*s[1].y,t:e};return r&&(l.z=a*s[0].z+e*s[1].z),l}if(i<4){let l=a*a,f=e*e,d,h,u,p=0;i===2?(s=[s[0],s[1],s[2],Vm],d=l,h=a*e*2,u=f):i===3&&(d=l*a,h=l*e*3,u=a*f*3,p=e*f);const m={x:d*s[0].x+h*s[1].x+u*s[2].x+p*s[3].x,y:d*s[0].y+h*s[1].y+u*s[2].y+p*s[3].y,t:e};return r&&(m.z=d*s[0].z+h*s[1].z+u*s[2].z+p*s[3].z),m}const o=JSON.parse(JSON.stringify(n));for(;o.length>1;){for(let l=0;l<o.length-1;l++)o[l]={x:o[l].x+(o[l+1].x-o[l].x)*e,y:o[l].y+(o[l+1].y-o[l].y)*e},typeof o[l].z<"u"&&(o[l].z=o[l].z+(o[l+1].z-o[l].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,n,r,i){const a=1-e,s=r,o=n;let l=s[0],f=s[1],d=s[2],h=s[3],u;if(l*=a,f*=e,o.length===2)return u=l+f,{x:(l*o[0].x+f*o[1].x)/u,y:(l*o[0].y+f*o[1].y)/u,z:i?(l*o[0].z+f*o[1].z)/u:!1,t:e};if(l*=a,f*=2*a,d*=e*e,o.length===3)return u=l+f+d,{x:(l*o[0].x+f*o[1].x+d*o[2].x)/u,y:(l*o[0].y+f*o[1].y+d*o[2].y)/u,z:i?(l*o[0].z+f*o[1].z+d*o[2].z)/u:!1,t:e};if(l*=a,f*=1.5*a,d*=3*a,h*=e*e*e,o.length===4)return u=l+f+d+h,{x:(l*o[0].x+f*o[1].x+d*o[2].x+h*o[3].x)/u,y:(l*o[0].y+f*o[1].y+d*o[2].y+h*o[3].y)/u,z:i?(l*o[0].z+f*o[1].z+d*o[2].z+h*o[3].z)/u:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,a=i.length,s=a-1;a>1;a--,s--){const o=[];for(let l=0,f;l<s;l++)f={x:s*(i[l+1].x-i[l].x),y:s*(i[l+1].y-i[l].y)},n&&(f.z=s*(i[l+1].z-i[l].z)),o.push(f);r.push(o),i=o}return r},between:function(e,n,r){return n<=e&&e<=r||$.approximately(e,n)||$.approximately(e,r)},approximately:function(e,n,r){return Mt(e-n)<=(r||Bm)},length:function(e){const r=$.Tvalues.length;let i=0;for(let a=0,s;a<r;a++)s=.5*$.Tvalues[a]+.5,i+=$.Cvalues[a]*$.arcfn(s,e);return .5*i},map:function(e,n,r,i,a){const s=r-n,o=a-i,l=e-n,f=l/s;return i+o*f},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map($.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,a=n.y-e.y,s=r.x-e.x,o=r.y-e.y,l=i*o-a*s,f=i*s+a*o;return Pt(l,f)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Ze(r*r+i*i)},closest:function(e,n){let r=be(2,63),i,a;return e.forEach(function(s,o){a=$.dist(n,s),a<r&&(r=a,i=o)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=be(e,n)+be(1-e,n),i=r-1;return Mt(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=be(1-e,n),i=be(e,n)+r;return r/i},lli8:function(e,n,r,i,a,s,o,l){const f=(e*i-n*r)*(a-o)-(e-r)*(a*l-s*o),d=(e*i-n*r)*(s-l)-(n-i)*(a*l-s*o),h=(e-r)*(s-l)-(n-i)*(a-o);return h==0?!1:{x:f/h,y:d/h}},lli4:function(e,n,r,i){const a=e.x,s=e.y,o=n.x,l=n.y,f=r.x,d=r.y,h=i.x,u=i.y;return $.lli8(a,s,o,l,f,d,h,u)},lli:function(e,n){return $.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new J(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=rr,r=rr,i=ir,a=ir;return e.forEach(function(s){const o=s.bbox();n>o.x.min&&(n=o.x.min),r>o.y.min&&(r=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(e,n,r,i,a){if(!$.bboxoverlap(n,i))return[];const s=[],o=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(f){f.virtual||l.forEach(function(d){if(d.virtual)return;const h=f.intersects(d,a);h.length>0&&(h.c1=f,h.c2=d,h.s1=e,h.s2=r,s.push(h))})}),s},makeshape:function(e,n,r){const i=n.points.length,a=e.points.length,s=$.makeline(n.points[i-1],e.points[0]),o=$.makeline(e.points[a-1],n.points[0]),l={startcap:s,forward:e,back:n,endcap:o,bbox:$.findbbox([s,e,n,o])};return l.intersections=function(f){return $.shapeintersections(l,l.bbox,f,f.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=rr,a=ir,s,o;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,f=r.length;l<f;l++)s=r[l],o=e.get(s),o[n]<i&&(i=o[n]),o[n]>a&&(a=o[n]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,a=-Pt(n.p2.y-i,n.p2.x-r),s=function(o){return{x:(o.x-r)*Ue(a)-(o.y-i)*pt(a),y:(o.x-r)*pt(a)+(o.y-i)*Ue(a)}};return e.map(s)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=$.align(e,n),a=function(M){return 0<=M&&M<=1};if(r===2){const M=i[0].y,x=i[1].y,A=i[2].y,E=M-2*x+A;if(E!==0){const R=-Ze(x*x-M*A),P=-M+x,z=-(R+P)/E,N=-(-R+P)/E;return[z,N].filter(a)}else if(x!==A&&E===0)return[(2*x-A)/(2*x-2*A)].filter(a);return[]}const s=i[0].y,o=i[1].y,l=i[2].y,f=i[3].y;let d=-s+3*o-3*l+f,h=3*s-6*o+3*l,u=-3*s+3*o,p=s;if($.approximately(d,0)){if($.approximately(h,0))return $.approximately(u,0)?[]:[-p/u].filter(a);const M=Ze(u*u-4*h*p),x=2*h;return[(M-u)/x,(-u-M)/x].filter(a)}h/=d,u/=d,p/=d;const m=(3*u-h*h)/3,y=m/3,w=(2*h*h*h-9*h*u+27*p)/27,v=w/2,g=v*v+y*y*y;let k,j,b,_,S;if(g<0){const M=-m/3,x=M*M*M,A=Ze(x),E=-w/(2*A),R=E<-1?-1:E>1?1:E,P=Hm(R),z=Et(A),N=2*z;return b=N*Ue(P/3)-h/3,_=N*Ue((P+gn)/3)-h/3,S=N*Ue((P+2*gn)/3)-h/3,[b,_,S].filter(a)}else{if(g===0)return k=v<0?Et(-v):-Et(v),b=2*k-h/3,_=-k-h/3,[b,_].filter(a);{const M=Ze(g);return k=Et(-v+M),j=Et(v+M),[k-j-h/3].filter(a)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],a=n-2*r+i;if(a!==0){const s=-Ze(r*r-n*i),o=-n+r,l=-(s+o)/a,f=-(-s+o)/a;return[l,f]}else if(r!==i&&a===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,a){let s,o,l,f,d=0,h=0;const u=$.compute(e,n),p=$.compute(e,r),m=u.x*u.x+u.y*u.y;if(i?(s=Ze(be(u.y*p.z-p.y*u.z,2)+be(u.z*p.x-p.z*u.x,2)+be(u.x*p.y-p.x*u.y,2)),o=be(m+u.z*u.z,3/2)):(s=u.x*p.y-u.y*p.x,o=be(m,3/2)),s===0||o===0)return{k:0,r:0};if(d=s/o,h=o/s,!a){const y=$.curvature(e-.001,n,r,i,!0).k,w=$.curvature(e+.001,n,r,i,!0).k;f=(w-d+(d-y))/2,l=(Mt(w-d)+Mt(d-y))/2}return{k:d,r:h,dk:f,adk:l}},inflections:function(e){if(e.length<4)return[];const n=$.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,a=n[1].x*n[2].y,s=n[3].x*n[2].y,o=18*(-3*r+2*i+3*a-s),l=18*(3*r-i-3*a),f=18*(a-r);if($.approximately(o,0)){if(!$.approximately(l,0)){let p=-f/l;if(0<=p&&p<=1)return[p]}return[]}const d=2*o;if($.approximately(d,0))return[];const h=l*l-4*o*f;if(h<0)return[];const u=Math.sqrt(h);return[(u-l)/d,-(l+u)/d].filter(function(p){return 0<=p&&p<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let a=0,s,o,l,f;a<i;a++)if(s=r[a],o=e[s].mid,l=n[s].mid,f=(e[s].size+n[s].size)/2,Mt(o-l)>=f)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),a=n.bbox(),s=1e5,o=r||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(s*(e._t1+e._t2)/2|0)/s+"/"+(s*(n._t1+n._t2)/2|0)/s];let l=e.split(.5),f=n.split(.5),d=[{left:l.left,right:f.left},{left:l.left,right:f.right},{left:l.right,right:f.right},{left:l.right,right:f.left}];d=d.filter(function(u){return $.bboxoverlap(u.left.bbox(),u.right.bbox())});let h=[];return d.length===0||(d.forEach(function(u){h=h.concat($.pairiteration(u.left,u.right,o))}),h=h.filter(function(u,p){return h.indexOf(u)===p})),h},getccenter:function(e,n,r){const i=n.x-e.x,a=n.y-e.y,s=r.x-n.x,o=r.y-n.y,l=i*Ue(Je)-a*pt(Je),f=i*pt(Je)+a*Ue(Je),d=s*Ue(Je)-o*pt(Je),h=s*pt(Je)+o*Ue(Je),u=(e.x+n.x)/2,p=(e.y+n.y)/2,m=(n.x+r.x)/2,y=(n.y+r.y)/2,w=u+l,v=p+f,g=m+d,k=y+h,j=$.lli8(u,p,w,v,m,y,g,k),b=$.dist(j,e);let _=Pt(e.y-j.y,e.x-j.x),S=Pt(n.y-j.y,n.x-j.x),M=Pt(r.y-j.y,r.x-j.x),x;return _<M?((_>S||S>M)&&(_+=gn),_>M&&(x=M,M=_,_=x)):M<S&&S<_?(x=M,M=_,_=x):M+=gn,j.s=_,j.e=M,j.r=b,j},numberSort:function(e,n){return e-n}};class Vt{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return $.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)$.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new Vt(r)}}const{abs:Ot,min:ya,max:xa,cos:Wm,sin:Gm,acos:Km,sqrt:Rt}=Math,Ym=Math.PI;class J{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const m=[];r.forEach(function(y){["x","y","z"].forEach(function(w){typeof y[w]<"u"&&m.push(y[w])})}),r=m}let a=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(s===9||s===12)||n&&n[0]&&typeof n[0].z<"u",l=this.points=[];for(let m=0,y=o?3:2;m<s;m+=y){var f={x:r[m],y:r[m+1]};o&&(f.z=r[m+2]),l.push(f)}const d=this.order=l.length-1,h=this.dims=["x","y"];o&&h.push("z"),this.dimlen=h.length;const u=$.align(l,{p1:l[0],p2:l[d]}),p=$.dist(l[0],l[d]);this._linear=u.reduce((m,y)=>m+Ot(y.y),0)<p/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,a){if(typeof a>"u"&&(a=.5),a===0)return new J(r,r,i);if(a===1)return new J(n,r,r);const s=J.getABC(2,n,r,i,a);return new J(n,s.A,i)}static cubicFromPoints(n,r,i,a,s){typeof a>"u"&&(a=.5);const o=J.getABC(3,n,r,i,a);typeof s>"u"&&(s=$.dist(r,o.C));const l=s*(1-a)/a,f=$.dist(n,i),d=(i.x-n.x)/f,h=(i.y-n.y)/f,u=s*d,p=s*h,m=l*d,y=l*h,w={x:r.x-u,y:r.y-p},v={x:r.x+m,y:r.y+y},g=o.A,k={x:g.x+(w.x-g.x)/(1-a),y:g.y+(w.y-g.y)/(1-a)},j={x:g.x+(v.x-g.x)/a,y:g.y+(v.y-g.y)/a},b={x:n.x+(k.x-n.x)/a,y:n.y+(k.y-n.y)/a},_={x:i.x+(j.x-i.x)/(1-a),y:i.y+(j.y-i.y)/(1-a)};return new J(n,b,_,i)}static getUtils(){return $}getUtils(){return J.getUtils()}static get PolyBezier(){return Vt}valueOf(){return this.toString()}toString(){return $.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,a=["M",r,i,this.order===2?"Q":"C"];for(let s=1,o=n.length;s<o;s++)a.push(n[s].x),a.push(n[s].y);return a.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=$.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=$.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return $.length(this.derivative.bind(this))}static getABC(n=2,r,i,a,s=.5){const o=$.projectionratio(s,n),l=1-o,f={x:o*r.x+l*a.x,y:o*r.y+l*a.y},d=$.abcratio(s,n);return{A:{x:i.x+(i.x-f.x)/d,y:i.y+(i.y-f.y)/d},B:i,C:f,S:r,E:a}}getABC(n,r){r=r||this.get(n);let i=this.points[0],a=this.points[this.order];return J.getABC(this.order,i,r,a,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,a;r<n;r++)a=r/(n-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),a=[];for(let s=0,o,l=0;s<i.length;s++)o=i[s],$.dist(o,n)<r&&(a.push(o),l+=s/i.length);return a.length?t/=a.length:!1}project(n){const r=this.getLUT(),i=r.length-1,a=$.closest(r,n),s=a.mpos,o=(s-1)/i,l=(s+1)/i,f=.1/i;let d=a.mdist,h=o,u=h,p;d+=1;for(let m;h<l+f;h+=f)p=this.compute(h),m=$.dist(n,p),m<d&&(d=m,u=h);return u=u<0?0:u>1?1:u,p=this.compute(u),p.t=u,p.d=d,p}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?$.computeWithRatios(n,this.points,this.ratios,this._3d):$.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let a=1,s,o;a<i;a++)s=n[a],o=n[a-1],r[a]={x:(i-a)/i*s.x+a/i*o.x,y:(i-a)/i*s.y+a/i*o.y};return r[i]=n[i-1],new J(r)}derivative(n){return $.compute(n,this.dpoints[0],this._3d)}dderivative(n){return $.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new J($.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return $.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return $.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=Rt(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),a=Rt(r.x*r.x+r.y*r.y+r.z*r.z),s=Rt(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=a,r.y/=a,r.z/=a,i.x/=s,i.y/=s,i.z/=s;const o={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Rt(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=l,o.y/=l,o.z/=l;const f=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:n,x:f[0]*r.x+f[1]*r.y+f[2]*r.z,y:f[3]*r.x+f[4]*r.y+f[5]*r.z,z:f[6]*r.x+f[7]*r.y+f[8]*r.z}}hull(n){let r=this.points,i=[],a=[],s=0;for(a[s++]=r[0],a[s++]=r[1],a[s++]=r[2],this.order===3&&(a[s++]=r[3]);r.length>1;){i=[];for(let o=0,l,f=r.length-1;o<f;o++)l=$.lerp(n,r[o],r[o+1]),a[s++]=l,i.push(l);r=i}return a}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),a={left:this.order===2?new J([i[0],i[3],i[5]]):new J([i[0],i[4],i[7],i[9]]),right:this.order===2?new J([i[5],i[4],i[2]]):new J([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=$.map(0,0,1,this._t1,this._t2),a.left._t2=$.map(n,0,1,this._t1,this._t2),a.right._t1=$.map(n,0,1,this._t1,this._t2),a.right._t2=$.map(1,0,1,this._t1,this._t2),r?(r=$.map(r,n,1,0,1),a.right.split(r).left):a}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let a=function(o){return o[i]},s=this.dpoints[0].map(a);n[i]=$.droots(s),this.order===3&&(s=this.dpoints[1].map(a),n[i]=n[i].concat($.droots(s))),n[i]=n[i].filter(function(o){return o>=0&&o<=1}),r=r.concat(n[i].sort($.numberSort))}).bind(this)),n.values=r.sort($.numberSort).filter(function(i,a){return r.indexOf(i)===a}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=$.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return $.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),a=this.normal(n),s={c:i,n:a,x:i.x+a.x*r,y:i.y+a.y*r};return this._3d&&(s.z=i.z+a.z*r),s}if(this._linear){const i=this.normal(0),a=this.points.map(function(s){const o={x:s.x+n*i.x,y:s.y+n*i.y};return s.z&&i.z&&(o.z=s.z+n*i.z),o});return[new J(a)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const a=$.angle(this.points[0],this.points[3],this.points[1]),s=$.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&s<0||a<0&&s>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),Ot(Km(i))<Ym/3}reduce(){let n,r=0,i=0,a=.01,s,o=[],l=[],f=this.extrema().values;for(f.indexOf(0)===-1&&(f=[0].concat(f)),f.indexOf(1)===-1&&f.push(1),r=f[0],n=1;n<f.length;n++)i=f[n],s=this.split(r,i),s._t1=r,s._t2=i,o.push(s),r=i;return o.forEach(function(d){for(r=0,i=0;i<=1;)for(i=r+a;i<=1+a;i+=a)if(s=d.split(r,i),!s.simple()){if(i-=a,Ot(r-i)<a)return[];s=d.split(r,i),s._t1=$.map(r,0,1,d._t1,d._t2),s._t2=$.map(i,0,1,d._t1,d._t2),l.push(s),r=i;break}r<1&&(s=d.split(r,1),s._t1=$.map(r,0,1,d._t1,d._t2),s._t2=d._t2,l.push(s))}),l}translate(n,r,i){i=typeof i=="number"?i:r;const a=this.order;let s=this.points.map((o,l)=>(1-l/a)*r+l/a*i);return new J(this.points.map((o,l)=>({x:o.x+n.x*s[l],y:o.y+n.y*s[l]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const a=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const o=i?i(0):n,l=i?i(1):n,f=[this.offset(0,10),this.offset(1,10)],d=[],h=$.lli4(f[0],f[0].c,f[1],f[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(u){const p=d[u*r]=$.copy(s[u*r]);p.x+=(u?l:o)*f[u].n.x,p.y+=(u?l:o)*f[u].n.y}),i?([0,1].forEach(function(u){if(!(r===2&&u)){var p=s[u+1],m={x:p.x-h.x,y:p.y-h.y},y=i?i((u+1)/r):n;i&&!a&&(y=-y);var w=Rt(m.x*m.x+m.y*m.y);m.x/=w,m.y/=w,d[u+1]={x:p.x+y*m.x,y:p.y+y*m.y}}}),new J(d)):([0,1].forEach(u=>{if(r===2&&u)return;const p=d[u*r],m=this.derivative(u),y={x:p.x+m.x,y:p.y+m.y};d[u+1]=$.lli4(p,y,h,s[u+1])}),new J(d))}outline(n,r,i,a){if(r=r===void 0?n:r,this._linear){const _=this.normal(0),S=this.points[0],M=this.points[this.points.length-1];let x,A,E;i===void 0&&(i=n,a=r),x={x:S.x+_.x*n,y:S.y+_.y*n},E={x:M.x+_.x*i,y:M.y+_.y*i},A={x:(x.x+E.x)/2,y:(x.y+E.y)/2};const R=[x,A,E];x={x:S.x-_.x*r,y:S.y-_.y*r},E={x:M.x-_.x*a,y:M.y-_.y*a},A={x:(x.x+E.x)/2,y:(x.y+E.y)/2};const P=[E,A,x],z=$.makeline(P[2],R[0]),N=$.makeline(R[2],P[0]),I=[z,new J(R),N,new J(P)];return new Vt(I)}const s=this.reduce(),o=s.length,l=[];let f=[],d,h=0,u=this.length();const p=typeof i<"u"&&typeof a<"u";function m(_,S,M,x,A){return function(E){const R=x/M,P=(x+A)/M,z=S-_;return $.map(E,0,1,_+R*z,_+P*z)}}s.forEach(function(_){const S=_.length();p?(l.push(_.scale(m(n,i,u,h,S))),f.push(_.scale(m(-r,-a,u,h,S)))):(l.push(_.scale(n)),f.push(_.scale(-r))),h+=S}),f=f.map(function(_){return d=_.points,d[3]?_.points=[d[3],d[2],d[1],d[0]]:_.points=[d[2],d[1],d[0]],_}).reverse();const y=l[0].points[0],w=l[o-1].points[l[o-1].points.length-1],v=f[o-1].points[f[o-1].points.length-1],g=f[0].points[0],k=$.makeline(v,y),j=$.makeline(w,g),b=[k].concat(l).concat([j]).concat(f);return new Vt(b)}outlineshapes(n,r,i){r=r||n;const a=this.outline(n,r).curves,s=[];for(let o=1,l=a.length;o<l/2;o++){const f=$.makeshape(a[o],a[l-o],i);f.startcap.virtual=o>1,f.endcap.virtual=o<l/2-1,s.push(f)}return s}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof J&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=ya(n.p1.x,n.p2.x),i=ya(n.p1.y,n.p2.y),a=xa(n.p1.x,n.p2.x),s=xa(n.p1.y,n.p2.y);return $.roots(this.points,n).filter(o=>{var l=this.get(o);return $.between(l.x,r,a)&&$.between(l.y,i,s)})}selfintersects(n){const r=this.reduce(),i=r.length-2,a=[];for(let s=0,o,l,f;s<i;s++)l=r.slice(s,s+1),f=r.slice(s+2),o=this.curveintersects(l,f,n),a.push(...o);return a}curveintersects(n,r,i){const a=[];n.forEach(function(o){r.forEach(function(l){o.overlaps(l)&&a.push({left:o,right:l})})});let s=[];return a.forEach(function(o){const l=$.pairiteration(o.left,o.right,i);l.length>0&&(s=s.concat(l))}),s}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,a){const s=(a-i)/4,o=this.get(i+s),l=this.get(a-s),f=$.dist(n,r),d=$.dist(n,o),h=$.dist(n,l);return Ot(d-f)+Ot(h-f)}_iterate(n,r){let i=0,a=1,s;do{s=0,a=1;let o=this.get(i),l,f,d,h,u=!1,p=!1,m,y=a,w=1;do if(p=u,h=d,y=(i+a)/2,l=this.get(y),f=this.get(a),d=$.getccenter(o,l,f),d.interval={start:i,end:a},u=this._error(d,o,i,a)<=n,m=p&&!u,m||(w=a),u){if(a>=1){if(d.interval.end=w=1,h=d,a>1){let g={x:d.x+d.r*Wm(d.e),y:d.y+d.r*Gm(d.e)};d.e+=$.angle({x:d.x,y:d.y},g,this.get(1))}break}a=a+(a-i)/2}else a=y;while(!m&&s++<100);if(s>=100)break;h=h||d,r.push(h),i=w}while(a<1);return r}}function Or(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Xm(e){if(Array.isArray(e))return e}function Zm(e){if(Array.isArray(e))return Or(e)}function Jm(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qm(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n!==0)for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function eg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ng(e,n){if(e==null)return{};var r,i,a=rg(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rg(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function ig(e,n){return Xm(e)||Qm(e,n)||ao(e,n)||eg()}function ag(e){return Zm(e)||Jm(e)||ao(e)||tg()}function sg(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function og(e){var n=sg(e,"string");return typeof n=="symbol"?n:n+""}function ao(e,n){if(e){if(typeof e=="string")return Or(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(e,n):void 0}}var lg=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),s=e.reduce(function(l,f){var d=l,h=f;return a.forEach(function(u,p){var m=u.keyAccessor,y=u.isProp,w;if(y){var v=h,g=v[m],k=ng(v,[m].map(og));w=g,h=k}else w=m(h,p);p+1<a.length?(d.hasOwnProperty(w)||(d[w]={}),d=d[w]):r?(d.hasOwnProperty(w)||(d[w]=[]),d[w].push(h)):d[w]=h}),l},{});r instanceof Function&&(function l(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d===a.length?Object.keys(f).forEach(function(h){return f[h]=r(f[h])}):Object.values(f).forEach(function(h){return l(h,d+1)})})(s);var o=s;return i&&(o=[],(function l(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];d.length===a.length?o.push({keys:d,vals:f}):Object.entries(f).forEach(function(h){var u=ig(h,2),p=u[0],m=u[1];return l(m,[].concat(ag(d),[p]))})})(s),n instanceof Array&&n.length===0&&o.length===1&&(o[0].keys=[])),o});function cg(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const va=Symbol("implicit");function so(){var e=new Li,n=[],r=[],i=va;function a(s){let o=e.get(s);if(o===void 0){if(i!==va)return i;e.set(s,o=n.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return n.slice();n=[],e=new Li;for(const o of s)e.has(o)||e.set(o,n.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return so(n,r).unknown(i)},cg.apply(a,arguments),a}function ug(e){for(var n=e.length/6|0,r=new Array(n),i=0;i<n;)r[i]="#"+e.slice(i*6,++i*6);return r}const fg=ug("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function dg(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var hg=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;dg(hg);function Rr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function pg(e){if(Array.isArray(e))return e}function mg(e){if(Array.isArray(e))return Rr(e)}function ba(e,n,r){if(oo())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var a=new(e.bind.apply(e,i));return a}function Qt(e,n,r){return(n=_g(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function oo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oo=function(){return!!e})()}function gg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yg(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,a,s,o,l=[],f=!0,d=!1;try{if(s=(r=r.call(e)).next,n!==0)for(;!(f=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);f=!0);}catch(h){d=!0,a=h}finally{try{if(!f&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function xg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function mt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_a(Object(r),!0).forEach(function(i){Qt(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_a(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Wt(e,n){return pg(e)||yg(e,n)||lo(e,n)||xg()}function je(e){return mg(e)||gg(e)||lo(e)||vg()}function bg(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _g(e){var n=bg(e,"string");return typeof n=="symbol"?n:n+""}function Ir(e){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ir(e)}function lo(e,n){if(e){if(typeof e=="string")return Rr(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(e,n):void 0}}var wg=so(fg);function wa(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=wg(n(i))})}function Ng(e,n){var r=e.nodes,i=e.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.nodeFilter,o=s===void 0?function(){return!0}:s,l=a.onLoopError,f=l===void 0?function(m){throw"Invalid DAG structure! Found cycle in node path: ".concat(m.join(" -> "),".")}:l,d={};r.forEach(function(m){return d[n(m)]={data:m,out:[],depth:-1,skip:!o(m)}}),i.forEach(function(m){var y=m.source,w=m.target,v=b(y),g=b(w);if(!d.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!d.hasOwnProperty(g))throw"Missing target node with id: ".concat(g);var k=d[v],j=d[g];k.out.push(j);function b(_){return Ir(_)==="object"?n(_):_}});var h=[];p(Object.values(d));var u=Object.assign.apply(Object,[{}].concat(je(Object.entries(d).filter(function(m){var y=Wt(m,2),w=y[1];return!w.skip}).map(function(m){var y=Wt(m,2),w=y[0],v=y[1];return Qt({},w,v.depth)}))));return u;function p(m){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var b=m[g];if(y.indexOf(b)!==-1){var _=[].concat(je(y.slice(y.indexOf(b))),[b]).map(function(S){return n(S.data)});return h.some(function(S){return S.length===_.length&&S.every(function(M,x){return M===_[x]})})||(h.push(_),f(_)),1}w>b.depth&&(b.depth=w,p(b.out,[].concat(je(y),[b]),w+(b.skip?0:1)))},g=0,k=m.length;g<k;g++)v()}}var jg=2,ce=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Na=function(n,r){if(!r.isShadow){var i=X(r.linkDirectionalParticles);r.graphData.links.forEach(function(a){var s=Math.round(Math.abs(i(a)));s?a.__photons=je(Array(s)).map(function(){return{}}):delete a.__photons})}},In=Kr({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,Na(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ce},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ce},nodeColor:{default:"color",triggerUpdate:!1,onChange:ce},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ce},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ce},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ce},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ce},linkColor:{default:"color",triggerUpdate:!1,onChange:ce},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ce},linkWidth:{default:1,triggerUpdate:!1,onChange:ce},linkCurvature:{default:0,triggerUpdate:!1,onChange:ce},linkCanvasObject:{triggerUpdate:!1,onChange:ce},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ce},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ce},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ce},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ce},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Na},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),a(),!n.isShadow&&s(),!n.isShadow&&o(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var l=X(n.nodeVisibility),f=X(n.nodeVal),d=X(n.nodeColor),h=X(n.nodeCanvasObjectMode),u=n.ctx,p=n.isShadow/n.globalScale,m=n.graphData.nodes.filter(l);u.save(),m.forEach(function(y){var w=h(y);if(n.nodeCanvasObject&&(w==="before"||w==="replace")&&(n.nodeCanvasObject(y,u,n.globalScale),w==="replace")){u.restore();return}var v=Math.sqrt(Math.max(0,f(y)||1))*n.nodeRelSize+p;u.beginPath(),u.arc(y.x,y.y,v,0,2*Math.PI,!1),u.fillStyle=d(y)||"rgba(31, 120, 180, 0.92)",u.fill(),n.nodeCanvasObject&&w==="after"&&n.nodeCanvasObject(y,n.ctx,n.globalScale)}),u.restore()}function a(){var l=X(n.linkVisibility),f=X(n.linkColor),d=X(n.linkWidth),h=X(n.linkLineDash),u=X(n.linkCurvature),p=X(n.linkCanvasObjectMode),m=n.ctx,y=n.isShadow*2,w=n.graphData.links.filter(l);w.forEach(S);var v=[],g=[],k=w;if(n.linkCanvasObject){var j=[],b=[];w.forEach(function(M){return({before:v,after:g,replace:j}[p(M)]||b).push(M)}),k=[].concat(je(v),g,b),v=v.concat(j)}m.save(),v.forEach(function(M){return n.linkCanvasObject(M,m,n.globalScale)}),m.restore();var _=lg(k,[f,d,h]);m.save(),Object.entries(_).forEach(function(M){var x=Wt(M,2),A=x[0],E=x[1],R=!A||A==="undefined"?"rgba(0,0,0,0.15)":A;Object.entries(E).forEach(function(P){var z=Wt(P,2),N=z[0],I=z[1],O=(N||1)/n.globalScale+y;Object.entries(I).forEach(function(q){var H=Wt(q,2);H[0];var F=H[1],L=h(F[0]);m.beginPath(),F.forEach(function(V){var W=V.source,Y=V.target;if(!(!W||!Y||!W.hasOwnProperty("x")||!Y.hasOwnProperty("x"))){m.moveTo(W.x,W.y);var K=V.__controlPoints;K?m[K.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(m,je(K).concat([Y.x,Y.y])):m.lineTo(Y.x,Y.y)}}),m.strokeStyle=R,m.lineWidth=O,m.setLineDash(L||[]),m.stroke()})})}),m.restore(),m.save(),g.forEach(function(M){return n.linkCanvasObject(M,m,n.globalScale)}),m.restore();function S(M){var x=u(M);if(!x){M.__controlPoints=null;return}var A=M.source,E=M.target;if(!(!A||!E||!A.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var R=Math.sqrt(Math.pow(E.x-A.x,2)+Math.pow(E.y-A.y,2));if(R>0){var P=Math.atan2(E.y-A.y,E.x-A.x),z=R*x,N={x:(A.x+E.x)/2+z*Math.cos(P-Math.PI/2),y:(A.y+E.y)/2+z*Math.sin(P-Math.PI/2)};M.__controlPoints=[N.x,N.y]}else{var I=x*70;M.__controlPoints=[E.x,E.y-I,E.x+I,E.y]}}}}function s(){var l=1.6,f=.2,d=X(n.linkDirectionalArrowLength),h=X(n.linkDirectionalArrowRelPos),u=X(n.linkVisibility),p=X(n.linkDirectionalArrowColor||n.linkColor),m=X(n.nodeVal),y=n.ctx;y.save(),n.graphData.links.filter(u).forEach(function(w){var v=d(w);if(!(!v||v<0)){var g=w.source,k=w.target;if(!(!g||!k||!g.hasOwnProperty("x")||!k.hasOwnProperty("x"))){var j=Math.sqrt(Math.max(0,m(g)||1))*n.nodeRelSize,b=Math.sqrt(Math.max(0,m(k)||1))*n.nodeRelSize,_=Math.min(1,Math.max(0,h(w))),S=p(w)||"rgba(0,0,0,0.28)",M=v/l/2,x=w.__controlPoints&&ba(J,[g.x,g.y].concat(je(w.__controlPoints),[k.x,k.y])),A=x?function(O){return x.get(O)}:function(O){return{x:g.x+(k.x-g.x)*O||0,y:g.y+(k.y-g.y)*O||0}},E=x?x.length():Math.sqrt(Math.pow(k.x-g.x,2)+Math.pow(k.y-g.y,2)),R=j+v+(E-j-b-v)*_,P=A(R/E),z=A((R-v)/E),N=A((R-v*(1-f))/E),I=Math.atan2(P.y-z.y,P.x-z.x)-Math.PI/2;y.beginPath(),y.moveTo(P.x,P.y),y.lineTo(z.x+M*Math.cos(I),z.y+M*Math.sin(I)),y.lineTo(N.x,N.y),y.lineTo(z.x-M*Math.cos(I),z.y-M*Math.sin(I)),y.fillStyle=S,y.fill()}}}),y.restore()}function o(){var l=X(n.linkDirectionalParticles),f=X(n.linkDirectionalParticleSpeed),d=X(n.linkDirectionalParticleOffset),h=X(n.linkDirectionalParticleWidth),u=X(n.linkVisibility),p=X(n.linkDirectionalParticleColor||n.linkColor),m=n.ctx;m.save(),n.graphData.links.filter(u).forEach(function(y){var w=l(y);if(!(!y.hasOwnProperty("__photons")||!y.__photons.length)){var v=y.source,g=y.target;if(!(!v||!g||!v.hasOwnProperty("x")||!g.hasOwnProperty("x"))){var k=f(y),j=Math.abs(d(y)),b=y.__photons||[],_=Math.max(0,h(y)/2)/Math.sqrt(n.globalScale),S=p(y)||"rgba(0,0,0,0.28)";m.fillStyle=S;var M=y.__controlPoints?ba(J,[v.x,v.y].concat(je(y.__controlPoints),[g.x,g.y])):null,x=0,A=!1;b.forEach(function(E){var R=!!E.__singleHop;if(E.hasOwnProperty("__progressRatio")||(E.__progressRatio=R?0:(x+j)/w),!R&&x++,E.__progressRatio+=k,E.__progressRatio>=1)if(!R)E.__progressRatio=E.__progressRatio%1;else{A=!0;return}var P=E.__progressRatio,z=M?M.get(P):{x:v.x+(g.x-v.x)*P||0,y:v.y+(g.y-v.y)*P||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(z.x,z.y,y,m,n.globalScale):(m.beginPath(),m.arc(z.x,z.y,_,0,2*Math.PI,!1),m.fill())}),A&&(y.__photons=y.__photons.filter(function(E){return!E.__singleHop||E.__progressRatio<=1}))}}}),m.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Lm().force("link",Em()).force("charge",qm()).force("center",Rp()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&wa(n.graphData.nodes,X(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&wa(n.graphData.links,X(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(p){p.source=p[n.linkSource],p.target=p[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(p){return p[n.nodeId]}).links(n.graphData.links);var a=n.dagMode&&Ng(n.graphData,function(p){return p[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),s=Math.max.apply(Math,je(Object.values(a||[]))),o=n.dagLevelDistance||n.graphData.nodes.length/(s||1)*jg*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(p){return delete p[l]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var f=["rl","bu"].includes(n.dagMode),d=function(m){return(a[m[n.nodeId]]-s/2)*o*(f?-1:1)},h=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(p){return p[h]=d(p)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?Um(function(p){var m=a[p[n.nodeId]]||-1;return(n.dagMode==="radialin"?s-m:m)*o}).strength(function(p){return n.dagNodeFilter(p)?1:0}):null);for(var u=0;u<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);u++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function co(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(l,f){r.forEach(function(d){return f[d][s](l)})},triggerUpdate:!1}},linkMethod:function(s){return function(o){for(var l=arguments.length,f=new Array(l>1?l-1:0),d=1;d<l;d++)f[d-1]=arguments[d];var h=[];return r.forEach(function(u){var p=o[u],m=p[s].apply(p,f);m!==p&&h.push(m)}),h.length?h[0]:this}}}}var kg=800,Cg=4,Sg=5,uo=co("forceGraph",In),Ag=co(["forceGraph","shadowGraph"],In),Tg=Object.assign.apply(Object,je(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Qt({},e,uo.linkProp(e))})).concat(je(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Qt({},e,Ag.linkProp(e))})))),Mg=Object.assign.apply(Object,je(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Qt({},e,uo.linkMethod(e))})));function ar(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(s){s.style.width="".concat(e.width,"px"),s.style.height="".concat(e.height,"px"),s.width=e.width*i,s.height=e.height*i,!n&&!r&&s.getContext("2d").scale(i,i)});var a=Ee(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/a,(e.height-r)/2/a),e.needsRedraw=!0}}function fo(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function ja(e,n,r){e.save(),fo(e),e.clearRect(0,0,n,r),e.restore()}var Pg=Kr({props:mt({width:{default:window.innerWidth,onChange:function(n,r){return ar(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return ar(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(a){return(a||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(a){var s=a.type,o=a.objs;o.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var f=r.colorTracker.lookup(l.__indexColor);return!f||!f.hasOwnProperty("d")||f.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:s,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,a,s){return n(i,i.__indexColor,a,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,a,s){return n(i,i.__indexColor,a,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Tg),aliases:{stopAnimation:"pauseAnimation"},methods:mt({graph2ScreenCoords:function(n,r,i){var a=Ee(n.canvas);return{x:r*a.k+a.x,y:i*a.k+a.y}},screen2GraphCoords:function(n,r,i){var a=Ee(n.canvas);return{x:(r-a.x)/a.k,y:(i-a.y)/a.k}},centerAt:function(n,r,i,a){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return a?n.tweenGroup.add(new Gi(o()).to(s,a).easing(ot.Quadratic.Out).onUpdate(l).start()):l(s),this}return o();function o(){var f=Ee(n.canvas);return{x:(n.width/2-f.x)/f.k,y:(n.height/2-f.y)/f.k}}function l(f){var d=f.x,h=f.y;n.zoom.translateTo(n.zoom.__baseElem,d===void 0?o().x:d,h===void 0?o().y:h),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new Gi({k:a()}).to({k:r},i).easing(ot.Quadratic.Out).onUpdate(function(o){var l=o.k;return s(l)}).start()):s(r),this;return a();function a(){return Ee(n.canvas).k}function s(o){n.zoom.scaleTo(n.zoom.__baseElem,o),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];var l=this.getGraphBbox.apply(this,s);if(l){var f={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},d=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(l.x[1]-l.x[0]),(n.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(f.x,f.y,r),this.zoom(d,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=X(n.nodeVal),a=function(l){return Math.sqrt(Math.max(0,i(l)||1))*n.nodeRelSize},s=n.graphData.nodes.filter(r).map(function(o){return{x:o.x,y:o.y,r:a(o)}});return s.length?{x:[Hi(s,function(o){return o.x-o.r}),Ui(s,function(o){return o.x+o.r})],y:[Hi(s,function(o){return o.y-o.r}),Ui(s,function(o){return o.y+o.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Mg),stateInit:function(){return{lastSetZoom:1,zoom:Ud(),forceGraph:new In,shadowGraph:new In().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new dp,tweenGroup:new Os}},init:function(n,r){var i=this;n.innerHTML="";var a=document.createElement("div");a.classList.add("force-graph-container"),a.style.position="relative",n.appendChild(a),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),a.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),o=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},f=function(){var u=null,p=window.devicePixelRatio,m=l.x>0&&l.y>0?o.getImageData(l.x*p,l.y*p,1,1):null;return m&&(u=r.colorTracker.lookup(m.data)),u};Ne(r.canvas).call(Zu().subject(function(){if(!r.enableNodeDrag)return null;var h=f();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var u=h.subject;u.__initialDragPos={x:u.x,y:u.y,fx:u.fx,fy:u.fy},h.active||(u.fx=u.x,u.fy=u.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var u=h.subject,p=u.__initialDragPos,m=h,y=Ee(r.canvas).k,w={x:p.x+(m.x-p.x)/y-u.x,y:p.y+(m.y-p.y)/y-u.y};["x","y"].forEach(function(v){return u["f".concat(v)]=u[v]=p[v]+(m[v]-p[v])/y}),!(!u.__dragged&&Sg>=Math.sqrt(Wd(["x","y"].map(function(v){return Math.pow(h[v]-p[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,u.__dragged=!0,r.onNodeDrag(u,w))}).on("end",function(h){var u=h.subject,p=u.__initialDragPos,m={x:u.x-p.x,y:u.y-p.y};p.fx===void 0&&(u.fx=void 0),p.fy===void 0&&(u.fy=void 0),delete u.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,u.__dragged&&(delete u.__dragged,r.onNodeDragEnd(u,m))})),r.zoom(r.zoom.__baseElem=Ne(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||X(r.enableZoomInteraction)(h))&&(h.type==="wheel"||X(r.enablePanInteraction)(h))}).on("zoom",function(h){var u=h.transform;[s,o].forEach(function(p){fo(p),p.translate(u.x,u.y),p.scale(u.k,u.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(mt(mt({},u),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(mt(mt({},h.transform),i.centerAt()))}),ar(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Ee(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Cg/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Op(a),["pointermove","pointerdown"].forEach(function(h){return a.addEventListener(h,function(u){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=u),!r.isPointerDragging&&u.type==="pointermove"&&r.onBackgroundClick&&(u.pressure>0||r.isPointerPressed)&&(u.pointerType==="mouse"||u.movementX===void 0||[u.movementX,u.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var p=m(a);l.x=u.pageX-p.left,l.y=u.pageY-p.top;function m(y){var w=y.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop;return{top:w.top+g,left:w.left+v}}},{passive:!0})}),a.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var u=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"Click")];p&&p.apply(void 0,[r.hoverObj.d].concat(u))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,u);if(h.button===2)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"RightClick")];m&&m.apply(void 0,[r.hoverObj.d].concat(u))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,u)})}},{passive:!0}),a.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(o);var d=vh(function(){ja(o,r.width,r.height),r.shadowGraph.linkWidth(function(u){return X(r.linkWidth)(u)+r.linkHoverPrecision});var h=Ee(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},kg);r.flushShadowCanvas=d.flush,(this._animationCycle=function h(){var u=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(j){return j.__photons&&j.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var p=r.isPointerDragging?null:f();if(p!==r.hoverObj){var m=r.hoverObj,y=m?m.type:null,w=p?p.type:null;if(y&&y!==w){var v=r["on".concat(y,"Hover")];v&&v(null,m.d)}if(w){var g=r["on".concat(w,"Hover")];g&&g(p.d,y===w?m.d:null)}r.tooltip.content(p&&X(r["".concat(p.type.toLowerCase(),"Label")])(p.d)||null),r.canvas.classList[(p&&r["on".concat(w,"Click")]||!p&&r.onBackgroundClick)&&X(r.showPointerCursor)(p?.d)?"add":"remove"]("clickable"),r.hoverObj=p}u&&d()}if(u){ja(s,r.width,r.height);var k=Ee(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,k),r.forceGraph.globalScale(k).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,k)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(n){}}),sr={exports:{}},or,ka;function Eg(){if(ka)return or;ka=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return or=e,or}var lr,Ca;function Og(){if(Ca)return lr;Ca=1;var e=Eg();function n(){}function r(){}return r.resetWarningCache=n,lr=function(){function i(o,l,f,d,h,u){if(u!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:n};return s.PropTypes=s,s},lr}var Sa;function Rg(){return Sa||(Sa=1,sr.exports=Og()()),sr.exports}var Ig=Rg();const C=Oo(Ig),Vn={width:C.number,height:C.number,graphData:C.shape({nodes:C.arrayOf(C.object).isRequired,links:C.arrayOf(C.object).isRequired}),backgroundColor:C.string,nodeRelSize:C.number,nodeId:C.string,nodeLabel:C.oneOfType([C.string,C.func]),nodeVal:C.oneOfType([C.number,C.string,C.func]),nodeVisibility:C.oneOfType([C.bool,C.string,C.func]),nodeColor:C.oneOfType([C.string,C.func]),nodeAutoColorBy:C.oneOfType([C.string,C.func]),onNodeHover:C.func,onNodeClick:C.func,linkSource:C.string,linkTarget:C.string,linkLabel:C.oneOfType([C.string,C.func]),linkVisibility:C.oneOfType([C.bool,C.string,C.func]),linkColor:C.oneOfType([C.string,C.func]),linkAutoColorBy:C.oneOfType([C.string,C.func]),linkWidth:C.oneOfType([C.number,C.string,C.func]),linkCurvature:C.oneOfType([C.number,C.string,C.func]),linkDirectionalArrowLength:C.oneOfType([C.number,C.string,C.func]),linkDirectionalArrowColor:C.oneOfType([C.string,C.func]),linkDirectionalArrowRelPos:C.oneOfType([C.number,C.string,C.func]),linkDirectionalParticles:C.oneOfType([C.number,C.string,C.func]),linkDirectionalParticleSpeed:C.oneOfType([C.number,C.string,C.func]),linkDirectionalParticleOffset:C.oneOfType([C.number,C.string,C.func]),linkDirectionalParticleWidth:C.oneOfType([C.number,C.string,C.func]),linkDirectionalParticleColor:C.oneOfType([C.string,C.func]),onLinkHover:C.func,onLinkClick:C.func,dagMode:C.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:C.number,dagNodeFilter:C.func,onDagError:C.func,d3AlphaMin:C.number,d3AlphaDecay:C.number,d3VelocityDecay:C.number,warmupTicks:C.number,cooldownTicks:C.number,cooldownTime:C.number,onEngineTick:C.func,onEngineStop:C.func,getGraphBbox:C.func},ho={zoomToFit:C.func,onNodeRightClick:C.func,onNodeDrag:C.func,onNodeDragEnd:C.func,onLinkRightClick:C.func,linkHoverPrecision:C.number,onBackgroundClick:C.func,onBackgroundRightClick:C.func,showPointerCursor:C.oneOfType([C.bool,C.func]),enablePointerInteraction:C.bool,enableNodeDrag:C.bool},ni={showNavInfo:C.bool,nodeOpacity:C.number,nodeResolution:C.number,nodeThreeObject:C.oneOfType([C.object,C.string,C.func]),nodeThreeObjectExtend:C.oneOfType([C.bool,C.string,C.func]),nodePositionUpdate:C.func,linkOpacity:C.number,linkResolution:C.number,linkCurveRotation:C.oneOfType([C.number,C.string,C.func]),linkMaterial:C.oneOfType([C.object,C.string,C.func]),linkThreeObject:C.oneOfType([C.object,C.string,C.func]),linkThreeObjectExtend:C.oneOfType([C.bool,C.string,C.func]),linkPositionUpdate:C.func,linkDirectionalArrowResolution:C.number,linkDirectionalParticleResolution:C.number,linkDirectionalParticleThreeObject:C.oneOfType([C.object,C.string,C.func]),forceEngine:C.oneOf(["d3","ngraph"]),ngraphPhysics:C.object,numDimensions:C.oneOf([1,2,3])},Dg=Object.assign({},Vn,ho,{linkLineDash:C.oneOfType([C.arrayOf(C.number),C.string,C.func]),nodeCanvasObjectMode:C.oneOfType([C.string,C.func]),nodeCanvasObject:C.func,nodePointerAreaPaint:C.func,linkCanvasObjectMode:C.oneOfType([C.string,C.func]),linkCanvasObject:C.func,linkPointerAreaPaint:C.func,linkDirectionalParticleCanvasObject:C.func,autoPauseRedraw:C.bool,minZoom:C.number,maxZoom:C.number,enableZoomInteraction:C.oneOfType([C.bool,C.func]),enablePanInteraction:C.oneOfType([C.bool,C.func]),onZoom:C.func,onZoomEnd:C.func,onRenderFramePre:C.func,onRenderFramePost:C.func});Object.assign({},Vn,ho,ni,{enableNavigationControls:C.bool,controlType:C.oneOf(["trackball","orbit","fly"]),rendererConfig:C.object,extraRenderers:C.arrayOf(C.shape({render:C.func.isRequired}))});Object.assign({},Vn,ni,{nodeDesc:C.oneOfType([C.string,C.func]),linkDesc:C.oneOfType([C.string,C.func])});Object.assign({},Vn,ni,{markerAttrs:C.object,yOffset:C.number,glScale:C.number});const ri=cc(Pg,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});ri.displayName="ForceGraph2D";ri.propTypes=Dg;const zg={"":"#6366f1",School:"#22d3ee",Clinical:"#f472b6",Research:"#a78bfa",Personal:"#34d399"};function $g(e){const n=e.split("/")[0];return zg[n]||"#6366f1"}function Fg({onNodeClick:e}){const n=D.useRef(null),r=D.useRef(),[i,a]=D.useState({nodes:[],links:[]}),[s,o]=D.useState(!0),[l,f]=D.useState(null),[d,h]=D.useState(null),[u,p]=D.useState(null),[m,y]=D.useState(1);D.useEffect(()=>{const j=n.current;if(!j)return;const b=()=>{const S=j.getBoundingClientRect();h({width:Math.floor(S.width)-2,height:Math.floor(S.height)-2})};b();const _=new ResizeObserver(b);return _.observe(j),()=>_.disconnect()},[]),D.useEffect(()=>{let j=!1;return o(!0),G.obsidian.getGraph().then(b=>{j||(b.success?a({nodes:b.nodes,links:b.links}):f("Failed to load graph data"),o(!1))}).catch(()=>{j||(f("Network error loading graph"),o(!1))}),()=>{j=!0}},[]);const w=D.useCallback(j=>{e?.(j.name)},[e]),v=D.useCallback(j=>{const b=Math.max(.1,Math.min(10,j));y(b);const _=r.current;_?.zoom&&_.zoom(b,200)},[]),g=D.useCallback((j,b,_)=>{const S=j.name,M=Math.max(10/_,2),x=Math.max(4,3+i.links.filter(R=>(typeof R.source=="string"?R.source:R.source.id)===j.id||(typeof R.target=="string"?R.target:R.target.id)===j.id).length*.5),A=$g(j.folder),E=u?.id===j.id;b.beginPath(),b.arc(j.x||0,j.y||0,x,0,2*Math.PI),b.fillStyle=E?"#ffffff":A,b.fill(),(E||_>1.5)&&(b.font=`${M}px monospace`,b.textAlign="center",b.textBaseline="top",b.fillStyle="rgba(255,255,255,0.9)",b.fillText(S,j.x||0,(j.y||0)+x+2))},[i.links,u]),k=!s&&!l&&d;return c.jsxs("div",{ref:n,className:"w-full h-full relative bg-black/80 rounded border border-primary/30 overflow-hidden",children:[s&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-terminal z-10",children:c.jsx("div",{className:"animate-pulse",children:"SCANNING VAULT CONNECTIONS..."})}),l&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-400 font-terminal z-10",children:l}),k&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"absolute top-2 left-2 right-2 z-10 flex items-center justify-between pointer-events-none",children:[c.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto",children:[c.jsxs("span",{className:"text-xs font-terminal text-primary/70",children:[i.nodes.length," notes | ",i.links.length," links"]}),c.jsx("button",{onClick:()=>{r.current?.zoomToFit?.(400,40),setTimeout(()=>{const j=r.current;j?.zoom&&y(j.zoom())},450)},className:"px-2 py-0.5 text-xs font-terminal bg-primary/20 border border-primary/40 text-primary hover:bg-primary/30 rounded-none",children:"CENTER"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 pointer-events-auto bg-black/70 border border-primary/30 rounded-none px-2 py-1",children:[c.jsx("button",{onClick:()=>v(m/1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"-"}),c.jsx("input",{type:"range",min:-2.3,max:2.3,step:.01,value:Math.log(m),onChange:j=>v(Math.exp(parseFloat(j.target.value))),className:"w-24 h-1 accent-primary cursor-pointer"}),c.jsx("button",{onClick:()=>v(m*1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"+"}),c.jsxs("span",{className:"text-[10px] font-terminal text-primary/50 w-8 text-right",children:[Math.round(m*100),"%"]})]})]}),c.jsx(ri,{ref:r,graphData:i,width:d.width,height:d.height,nodeCanvasObject:g,nodePointerAreaPaint:(j,b,_)=>{_.beginPath(),_.arc(j.x||0,j.y||0,6,0,2*Math.PI),_.fillStyle=b,_.fill()},onNodeClick:w,onNodeHover:j=>p(j),onZoom:({k:j})=>y(j),linkColor:()=>"rgba(99, 102, 241, 0.15)",linkWidth:.5,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.02,d3VelocityDecay:.3})]})]})}const Lg=(e,n="MM/dd")=>{if(!e)return"-";try{const r=e instanceof Date?e:new Date(e);return tl(r)?nl(r,n):"-"}catch{return"-"}},yn=e=>{if(Array.isArray(e))return e.filter(n=>typeof n=="string");if(typeof e=="string"){const n=e.trim();if(!n)return[];try{const r=JSON.parse(n);if(Array.isArray(r))return r.filter(i=>typeof i=="string")}catch{}return n.split(",").map(r=>r.trim()).filter(Boolean)}return[]};function t0(){const[e,n]=D.useState(new Set),[r,i]=D.useState(null),[a,s]=D.useState(!1),[o,l]=D.useState([]),[f,d]=D.useState(!1),[h,u]=D.useState(new Set),[p,m]=D.useState(null),[y,w]=D.useState({front:"",back:"",deckName:""}),[v,g]=D.useState("all"),[k,j]=D.useState("all"),[b,_]=D.useState(""),[S,M]=D.useState(""),[x,A]=D.useState({mode:"",minutes:"",cards:"",confusions:"",weakAnchors:"",concepts:"",issues:"",notes:""}),[E,R]=D.useState("School"),[P,z]=D.useState(null),[N,I]=D.useState(""),[O,q]=D.useState(!1),[H,F]=D.useState(!1),[L,V]=D.useState(!1),W=[{name:"EBP",path:"School/Evidence Based Practice"},{name:"ExPhys",path:"School/Exercise Physiology"},{name:"MS1",path:"School/Movement Science 1"},{name:"Neuro",path:"School/Neuroscience"},{name:"TI",path:"School/Theraputic Intervention"}];D.useEffect(()=>{const T=new URLSearchParams(window.location.search),U=T.get("semester")||"all",Q=T.get("start")||"",re=T.get("end")||"";g(U),_(Q),M(re)},[]);const{data:Y=[]}=ie({queryKey:["courses"],queryFn:()=>G.courses.getActive()}),{data:K=[],isLoading:ae}=ie({queryKey:["sessions",v,b,S],queryFn:async()=>{const T=new URLSearchParams;v!=="all"&&T.append("semester",v),b&&T.append("start",b),S&&T.append("end",S);const U=T.toString(),Q=U?`/sessions?${U}`:"/sessions",re=await fetch(`/api${Q}`);if(!re.ok)throw new Error(`API Error: ${re.statusText}`);return re.json()}}),{data:xe}=ie({queryKey:["brain","metrics"],queryFn:G.brain.getMetrics}),se=Dn(),ke=de({mutationFn:T=>G.sessions.deleteMany(T),onSuccess:()=>{se.invalidateQueries({queryKey:["sessions"]}),se.invalidateQueries({queryKey:["brain","metrics"]}),n(new Set)}}),wt=de({mutationFn:({id:T,updates:U})=>G.sessions.update(T,U),onSuccess:()=>{se.invalidateQueries({queryKey:["sessions"]}),se.invalidateQueries({queryKey:["brain","metrics"]}),i(null)}}),po=T=>{n(U=>{const Q=new Set(U);return Q.has(T)?Q.delete(T):Q.add(T),Q})},mo=()=>{e.size===K.length?n(new Set):n(new Set(K.map(T=>T.id)))},go=()=>{e.size!==0&&(l(Array.from(e)),s(!0))},yo=T=>{l([T]),s(!0)},xo=()=>{ke.mutate(o),s(!1),l([])};D.useEffect(()=>{if(r!==null){const T=K.find(U=>U.id===r);T&&A({mode:T.mode||"",minutes:T.minutes?.toString()||"",cards:T.cards?.toString()||"",confusions:yn(T.confusions).join(", "),weakAnchors:yn(T.weakAnchors).join(", "),concepts:yn(T.concepts).join(", "),issues:yn(T.issues).join(", "),notes:T.notes||""})}},[r,K]);const ft=r!==null?K.find(T=>T.id===r):null,Nt=typeof window<"u"&&new URLSearchParams(window.location.search).has("debugModals");D.useEffect(()=>{r!==null&&!ae&&!ft&&(Nt&&console.warn("[ModalDebug][Brain] Missing session for edit; closing.",{editingSession:r,sessionsCount:K.length}),i(null))},[Nt,r,ft,K.length,ae]),D.useEffect(()=>{Nt&&console.info("[ModalDebug][Brain] state",{editingSession:r,hasEditingSessionData:!!ft,deleteDialogOpen:a,sessionsToDelete:o.length,sessionsLoading:ae})},[Nt,a,r,ft,ae,o.length]);const vo=()=>{if(r===null)return;const T=re=>re?re.split(",").map(dt=>dt.trim()).filter(Boolean):[],U=re=>re.length?JSON.stringify(re):null,Q={mode:x.mode||"study",minutes:parseInt(x.minutes)||0,cards:parseInt(x.cards)||0,confusions:U(T(x.confusions)),weakAnchors:U(T(x.weakAnchors)),concepts:U(T(x.concepts)),issues:U(T(x.issues)),notes:x.notes||null};wt.mutate({id:r,updates:Q})},{data:Xe}=ie({queryKey:["obsidian","status"],queryFn:G.obsidian.getStatus,refetchInterval:3e4}),{data:ii}=ie({queryKey:["obsidian","config"],queryFn:G.obsidian.getConfig}),{data:bo}=ie({queryKey:["obsidian","vault-index"],queryFn:()=>G.obsidian.getVaultIndex(),enabled:Xe?.connected===!0}),{data:_o,refetch:qg}=ie({queryKey:["obsidian","files",E],queryFn:()=>G.obsidian.getFiles(E),enabled:Xe?.connected===!0}),Wn=async T=>{try{const U=await G.obsidian.getFile(T);U.success&&U.content!==void 0&&(z(T),I(U.content),F(!1))}catch(U){console.error("Failed to load file:",U)}},ai=async(T,U)=>{if(U){const re=ii?.vaultName||"PT School Semester 2";window.open(`obsidian://open?vault=${encodeURIComponent(re)}&file=${encodeURIComponent(T)}`,"_blank");return}const Q=bo?.paths?.[T];if(Q){await Wn(Q),V(!0);return}for(const re of W)try{await Wn(`${re.path}/${T}.md`),V(!0);return}catch{}console.warn(`Note not found: ${T}`)},wo=async()=>{if(P){q(!0);try{(await G.obsidian.saveFile(P,N)).success&&F(!1)}catch(T){console.error("Failed to save file:",T)}finally{q(!1)}}},jt=T=>{R(T),z(null),I("")},No=()=>{const T=new Date().toISOString().split("T")[0],U=E?`${E}/Session-${T}.md`:`Session-${T}.md`,Q=`# Study Session - ${T}

## Summary


## Concepts Covered
- 

## Strengths
- 

## Areas to Review
- 

## Notes

`;z(U),I(Q),F(!0)},{data:$e,isLoading:jo,refetch:si}=ie({queryKey:["anki","status"],queryFn:G.anki.getStatus,refetchInterval:3e4}),{data:ko}=ie({queryKey:["anki","due"],queryFn:G.anki.getDue,enabled:$e?.connected===!0}),{data:Co=[],refetch:sn}=ie({queryKey:["anki","drafts"],queryFn:G.anki.getDrafts}),et=Co.filter(T=>T.status==="pending"),Gn=de({mutationFn:G.anki.sync,onSuccess:()=>{se.invalidateQueries({queryKey:["anki"]}),sn()}}),oi=de({mutationFn:T=>G.anki.approveDraft(T),onSuccess:()=>{sn()}}),li=de({mutationFn:T=>G.anki.deleteDraft(T),onSuccess:()=>{sn()}}),Kn=de({mutationFn:({id:T,data:U})=>G.anki.updateDraft(T,U),onSuccess:()=>{sn(),m(null)}}),So=T=>{m(T.id),w({front:T.front,back:T.back,deckName:T.deckName})},Ao=()=>{p!==null&&Kn.mutate({id:p,data:y})};return c.jsxs(Do,{children:[Nt&&c.jsxs("div",{className:"fixed bottom-12 right-4 z-[70] bg-black/80 border border-primary text-primary font-terminal text-[10px] px-2 py-1 rounded-none",children:[c.jsx("div",{children:"Brain modals"}),c.jsxs("div",{children:["Edit session: ",r??"none"]}),c.jsxs("div",{children:["Edit data: ",ft?"yes":"no"]}),c.jsxs("div",{children:["Delete open: ",a?"yes":"no"]}),c.jsxs("div",{children:["Delete count: ",o.length]})]}),c.jsxs("div",{className:"space-y-6 min-w-0 overflow-hidden",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("h1",{className:"font-arcade text-xl text-primary flex items-center gap-2",children:[c.jsx(zo,{className:"w-6 h-6"}),"BRAIN ANALYTICS"]})}),c.jsx(zl,{}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SYSTEM STATUS"}),c.jsx(_e,{className:"brain-card rounded-none",children:c.jsx(we,{className:"p-3",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 font-terminal text-xs",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${Xe?.connected?"bg-green-500":"bg-red-500"}`}),c.jsx("span",{className:"text-muted-foreground",children:"Obsidian"}),c.jsx("span",{className:"text-primary",children:Xe?.connected?"Online":"Offline"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${$e?.connected?"bg-green-500":"bg-red-500"}`}),c.jsx("span",{className:"text-muted-foreground",children:"Anki"}),c.jsx("span",{className:"text-primary",children:$e?.connected?"Connected":"Offline"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground",children:[c.jsxs("span",{children:["Cards: ",c.jsx("span",{className:"text-primary",children:xe?.totalCards||0})]}),c.jsxs("span",{children:["Drafts: ",c.jsx("span",{className:"text-primary",children:et.length})]})]})]})})})]}),c.jsxs(Ho,{defaultValue:"ingestion",className:"w-full",children:[c.jsxs(Bo,{className:"grid w-full grid-cols-5 rounded-none bg-black border border-secondary/40",children:[c.jsx(kt,{value:"ingestion",className:"font-arcade text-xs rounded-none data-[state=active]:bg-primary/20 data-[state=active]:text-primary",children:"INGESTION"}),c.jsx(kt,{value:"data",className:"font-arcade text-xs rounded-none data-[state=active]:bg-primary/20 data-[state=active]:text-primary",children:"DATA"}),c.jsx(kt,{value:"integrations",className:"font-arcade text-xs rounded-none data-[state=active]:bg-primary/20 data-[state=active]:text-primary",children:"INTEGRATIONS"}),c.jsx(kt,{value:"syllabus",className:"font-arcade text-xs rounded-none data-[state=active]:bg-primary/20 data-[state=active]:text-primary",children:"SYLLABUS VIEW"}),c.jsx(kt,{value:"graph",className:"font-arcade text-xs rounded-none data-[state=active]:bg-primary/20 data-[state=active]:text-primary",children:"GRAPH VIEW"})]}),c.jsx(Ct,{value:"ingestion",className:"border border-t-0 border-secondary/40 rounded-none",children:c.jsx(Rl,{})}),c.jsx(Ct,{value:"data",className:"border border-t-0 border-secondary/40 rounded-none",children:c.jsx(Il,{})}),c.jsx(Ct,{value:"integrations",className:"border border-t-0 border-secondary/40 rounded-none",children:c.jsxs("div",{className:"space-y-4 p-4 min-w-0",children:[c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsxs(lt,{className:"border-b border-secondary/50 p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(ct,{className:"font-arcade text-sm flex items-center gap-2",children:[c.jsx(Qo,{className:"w-4 h-4"}),"OBSIDIAN VAULT",Xe?.connected?c.jsx(on,{className:"w-3 h-3 text-green-500"}):c.jsx(It,{className:"w-3 h-3 text-red-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(ee,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:No,disabled:!Xe?.connected,children:[c.jsx(el,{className:"w-3 h-3 mr-1"}),"New Note"]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f,onChange:T=>d(T.target.checked),disabled:!Xe?.connected,className:"w-4 h-4 accent-primary"}),c.jsx("span",{className:"font-terminal text-xs",children:"Auto-Sync"})]})]})]}),c.jsx("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:W.map(T=>c.jsx(ee,{size:"sm",variant:E===T.path?"default":"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:()=>jt(T.path),children:T.name},T.path))}),E&&c.jsxs("div",{className:"flex items-center gap-1 mt-2 font-terminal text-xs text-muted-foreground",children:[c.jsx("button",{onClick:()=>jt(""),className:"hover:text-primary",children:"vault"}),E.split("/").map((T,U,Q)=>c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx($o,{className:"w-3 h-3"}),c.jsx("button",{onClick:()=>jt(Q.slice(0,U+1).join("/")),className:"hover:text-primary",children:T})]},U))]})]}),c.jsx(we,{className:"p-0",children:Xe?.connected?c.jsxs("div",{className:"grid md:grid-cols-2 h-[240px] md:h-[300px]",children:[c.jsx("div",{className:"border-r border-secondary/30",children:c.jsx(gt,{className:"h-[240px] md:h-[300px]",children:c.jsxs("div",{className:"p-2 space-y-1",children:[E&&c.jsxs("button",{onClick:()=>{const T=E.split("/");T.pop(),jt(T.join("/"))},className:"w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs text-muted-foreground",children:[c.jsx(gi,{className:"w-3 h-3"}),".."]}),_o?.files?.map(T=>{const U=typeof T=="string"?T:T.path,Q=U.endsWith("/"),re=U.replace(/\/$/,"").split("/").pop()||U;return c.jsxs("button",{onClick:()=>{if(Q){const dt=re.replace(/\/$/,"");jt(E?`${E}/${dt}`:dt)}else{const dt=E?`${E}/${re}`:re;Wn(dt)}},className:`w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs ${P?.endsWith(re)?"bg-primary/20 text-primary":""}`,children:[Q?c.jsx(gi,{className:"w-3 h-3 text-yellow-500"}):c.jsx(ll,{className:"w-3 h-3 text-blue-400"}),re]},U)})]})})}),c.jsx("div",{className:"flex flex-col h-[240px] md:h-[300px]",children:P?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-secondary/30",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[c.jsxs("span",{className:"font-terminal text-xs text-primary truncate",children:[P.split("/").pop(),H&&c.jsx("span",{className:"text-yellow-500 ml-1",children:"*"})]}),c.jsx("button",{onClick:()=>{const T=ii?.vaultName||"PT School Semester 2",U=P.replace(/\.md$/,"");window.open(`obsidian://open?vault=${encodeURIComponent(T)}&file=${encodeURIComponent(U)}`,"_blank")},className:"text-muted-foreground hover:text-primary shrink-0",title:"Open in Obsidian app",children:c.jsx(Ko,{className:"w-3 h-3"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ee,{size:"sm",variant:"ghost",className:"h-6 px-2 text-[10px]",onClick:()=>V(!L),children:L?"Edit":"Preview"}),c.jsxs(ee,{size:"sm",variant:"ghost",onClick:wo,disabled:!H||O,className:"h-6 px-2",children:[c.jsx(Yn,{className:"w-3 h-3 mr-1"}),O?"Saving...":"Save"]})]})]}),L?c.jsx("div",{className:"flex-1 w-full p-3 bg-black/60 font-terminal overflow-y-auto",children:c.jsx(Bl,{content:N,onWikilinkClick:ai})}):c.jsx("textarea",{value:N,onChange:T=>{I(T.target.value),F(!0)},className:"flex-1 w-full p-3 bg-black/60 font-terminal text-sm resize-none focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"File content..."})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center font-terminal text-xs text-muted-foreground",children:"Select a file to edit"})})]}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("p",{className:"font-terminal text-xs text-red-400 mb-2",children:"Obsidian Offline"}),c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Obsidian with Local REST API plugin enabled"})]})})]}),c.jsxs(_e,{className:"brain-card rounded-none",children:[c.jsx(lt,{className:"border-b border-secondary/50 p-3",children:c.jsxs(ct,{className:"font-arcade text-xs flex items-center gap-2 text-muted-foreground",children:[c.jsx(Dr,{className:"w-3 h-3"}),"ANKI INTEGRATION",$e?.connected?c.jsx(on,{className:"w-3 h-3 text-green-500 ml-auto"}):c.jsx(It,{className:"w-3 h-3 text-red-500 ml-auto"})]})}),c.jsx(we,{className:"p-4 space-y-3",children:jo?c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Checking Anki..."}):$e?.connected?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Status:"}),c.jsx(cr,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500",children:"Connected"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Cards Created:"}),c.jsx("span",{className:"font-arcade text-xs text-primary",children:xe?.totalCards||0})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Due Today:"}),c.jsx("span",{className:"font-arcade text-xs text-secondary",children:ko?.dueCount||0})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Reviewed Today:"}),c.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:$e.reviewedToday||0})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Decks:"}),c.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:$e.decks?.length||0})]}),c.jsxs("div",{className:"pt-2 flex gap-2",children:[c.jsxs(ee,{size:"sm",variant:"outline",className:"flex-1 font-terminal text-xs",onClick:()=>si(),children:[c.jsx(mi,{className:"w-3 h-3 mr-1"}),"Refresh"]}),c.jsx(ee,{size:"sm",className:"flex-1 font-terminal text-xs bg-secondary hover:bg-secondary/80",onClick:()=>Gn.mutate(),disabled:Gn.isPending,children:Gn.isPending?"Syncing...":"Sync Cards"})]}),et.length>0&&c.jsxs("div",{className:"pt-3 border-t border-secondary/30",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"font-arcade text-[10px] text-yellow-400",children:["PENDING CARDS (",et.length,")"]}),c.jsx("div",{className:"flex gap-1",children:c.jsx(ee,{size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>{h.size===et.length?u(new Set):u(new Set(et.map(T=>T.id)))},children:h.size===et.length?"None":"All"})})]}),h.size>0&&c.jsxs("div",{className:"flex gap-1 mb-2",children:[c.jsxs(ee,{size:"sm",className:"h-6 px-2 text-[10px] font-terminal bg-green-600 hover:bg-green-700",onClick:()=>{h.forEach(T=>oi.mutate(T)),u(new Set)},children:[c.jsx(on,{className:"w-3 h-3 mr-1"}),"Approve (",h.size,")"]}),c.jsxs(ee,{size:"sm",variant:"destructive",className:"h-6 px-2 text-[10px] font-terminal",onClick:()=>{h.forEach(T=>li.mutate(T)),u(new Set)},children:[c.jsx(ht,{className:"w-3 h-3 mr-1"}),"Delete (",h.size,")"]})]}),c.jsx(gt,{className:"h-[200px]",children:c.jsx("div",{className:"space-y-2",children:et.map(T=>c.jsx("div",{className:`p-2 bg-black/40 border text-xs ${h.has(T.id)?"border-primary":"border-secondary/30"}`,children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(it,{checked:h.has(T.id),onCheckedChange:U=>{const Q=new Set(h);U?Q.add(T.id):Q.delete(T.id),u(Q)},className:"mt-1 border-secondary data-[state=checked]:bg-primary"}),c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[c.jsx("div",{className:"font-terminal text-primary truncate",children:T.front}),c.jsx("div",{className:"font-terminal text-muted-foreground mt-1 truncate",children:T.back}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx(cr,{variant:"outline",className:"text-[9px] border-blue-500/50 text-blue-400 shrink-0",children:T.deckName}),c.jsx(ee,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>So(T),title:"Edit card",children:c.jsx(ln,{className:"w-3 h-3"})}),c.jsx(ee,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-green-500/50 text-green-400 hover:bg-green-500/20",onClick:()=>oi.mutate(T.id),title:"Approve card",children:c.jsx(on,{className:"w-3 h-3"})}),c.jsx(ee,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>li.mutate(T.id),title:"Delete card",children:c.jsx(ht,{className:"w-3 h-3"})})]})]})]})},T.id))})})]})]}):c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"font-terminal text-xs text-red-400",children:$e?.error||"Anki not connected"}),c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Anki with AnkiConnect plugin"}),c.jsxs(ee,{size:"sm",variant:"outline",className:"font-terminal text-xs",onClick:()=>si(),children:[c.jsx(mi,{className:"w-3 h-3 mr-1"}),"Retry"]})]})})]})]})}),c.jsx(Ct,{value:"syllabus",className:"border border-t-0 border-secondary/40 rounded-none",children:c.jsx(Dl,{})}),c.jsx(Ct,{value:"graph",className:"border border-t-0 border-secondary/40 rounded-none overflow-hidden",children:c.jsx("div",{className:"h-[calc(100vh-220px)] min-h-[400px] min-w-0 overflow-hidden",children:c.jsx(Fg,{onNodeClick:T=>ai(T,!1)})})})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SESSION EVIDENCE"}),c.jsx(_e,{className:"brain-card rounded-none",children:c.jsxs(we,{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-arcade text-primary mb-2 block",children:"Semester"}),c.jsxs(Dt,{value:v,onValueChange:T=>{g(T);const U=new URLSearchParams(window.location.search);T==="all"?U.delete("semester"):U.set("semester",T),window.history.replaceState({},"",`?${U.toString()}`)},children:[c.jsx(zt,{className:"rounded-none border-primary",children:c.jsx($t,{})}),c.jsxs(Ft,{className:"bg-black border-primary",children:[c.jsx(oe,{value:"all",children:"All"}),c.jsx(oe,{value:"1",children:"Semester 1 (Fall 2025)"}),c.jsx(oe,{value:"2",children:"Semester 2 (Spring 2026)"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-arcade text-primary mb-2 block",children:"Course"}),c.jsxs(Dt,{value:k,onValueChange:T=>j(T),children:[c.jsx(zt,{className:"rounded-none border-primary",children:c.jsx($t,{})}),c.jsxs(Ft,{className:"bg-black border-primary",children:[c.jsx(oe,{value:"all",children:"All"}),Y.map(T=>c.jsx(oe,{value:String(T.id),children:T.name},T.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-arcade text-primary mb-2 block",children:"Start Date"}),c.jsx(cn,{type:"date",value:b,onChange:T=>{_(T.target.value);const U=new URLSearchParams(window.location.search);T.target.value?U.set("start",T.target.value):U.delete("start"),window.history.replaceState({},"",`?${U.toString()}`)},className:"rounded-none border-primary"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-arcade text-primary mb-2 block",children:"End Date"}),c.jsx(cn,{type:"date",value:S,onChange:T=>{M(T.target.value);const U=new URLSearchParams(window.location.search);T.target.value?U.set("end",T.target.value):U.delete("end"),window.history.replaceState({},"",`?${U.toString()}`)},className:"rounded-none border-primary"})]}),c.jsx("div",{className:"flex items-end",children:c.jsx(ee,{variant:"outline",onClick:()=>{g("all"),j("all"),_(""),M(""),window.history.replaceState({},"",window.location.pathname)},className:"rounded-none border-primary w-full",children:"Clear Filters"})})]}),ae?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Loading sessions..."})}):K.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No sessions found"})}):c.jsx(gt,{className:"h-[400px]",children:c.jsxs(Fa,{children:[c.jsx(La,{children:c.jsxs(ur,{className:"border-secondary/30",children:[c.jsx(He,{className:"w-12",children:c.jsx(it,{checked:e.size===K.length&&K.length>0,onCheckedChange:mo,className:"border-secondary"})}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Date"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Course"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Mode"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Minutes"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Cards"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Concepts"}),c.jsx(He,{className:"font-arcade text-xs text-primary",children:"Actions"})]})}),c.jsx(qa,{children:K.filter(T=>k==="all"||String(T.courseId)===k).map(T=>c.jsxs(ur,{className:"border-secondary/30 hover:bg-secondary/10",children:[c.jsx(Be,{children:c.jsx(it,{checked:e.has(T.id),onCheckedChange:()=>po(T.id),className:"border-secondary"})}),c.jsx(Be,{className:"font-terminal text-xs",children:Lg(T.createdAt,"MMM dd, yyyy")}),c.jsx(Be,{className:"font-terminal text-xs text-muted-foreground",children:T.topic||"-"}),c.jsx(Be,{className:"font-terminal text-xs text-muted-foreground",children:T.mode||"-"}),c.jsx(Be,{className:"font-terminal text-xs text-muted-foreground",children:T.minutes||"-"}),c.jsx(Be,{className:"font-terminal text-xs text-muted-foreground",children:T.cards||"-"}),c.jsx(Be,{className:"font-terminal text-xs text-muted-foreground",children:Array.isArray(T.concepts)?T.concepts.length:0}),c.jsxs(Be,{className:"flex gap-1",children:[c.jsx(ee,{size:"icon",variant:"outline",className:"h-6 w-6 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>i(T.id),children:c.jsx(ln,{className:"w-3 h-3"})}),c.jsx(ee,{size:"icon",variant:"outline",className:"h-6 w-6 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>yo(T.id),children:c.jsx(ht,{className:"w-3 h-3"})})]})]},T.id))})]})}),e.size>0&&c.jsx("div",{className:"flex gap-2 pt-4 border-t border-secondary/30",children:c.jsxs(ee,{size:"sm",className:"flex-1 font-terminal text-xs bg-red-600 hover:bg-red-700",onClick:go,children:[c.jsx(ht,{className:"w-3 h-3 mr-1"}),"Delete Selected (",e.size,")"]})})]})})]})]})]}),c.jsx(ci,{open:!!ft,onOpenChange:T=>{T||i(null)},children:c.jsxs(ui,{"data-modal":"brain-edit-session",className:"bg-black border-2 border-primary rounded-none max-w-2xl translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[c.jsxs(fi,{children:[c.jsxs(di,{className:"font-arcade text-primary flex items-center gap-2",children:[c.jsx(ln,{className:"w-5 h-5"}),"EDIT SESSION #",r]}),c.jsx(hi,{className:"font-terminal text-muted-foreground",children:"Update WRAP methodology fields for this study session"})]}),c.jsxs("div",{className:"space-y-4 font-terminal",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Mode"}),c.jsxs(Dt,{value:x.mode,onValueChange:T=>A(U=>({...U,mode:T})),children:[c.jsx(zt,{className:"rounded-none border-secondary",children:c.jsx($t,{placeholder:"Select mode"})}),c.jsxs(Ft,{className:"rounded-none border-secondary bg-black",children:[c.jsx(oe,{value:"Core",children:"Core"}),c.jsx(oe,{value:"Sprint",children:"Sprint"}),c.jsx(oe,{value:"Drill",children:"Drill"}),c.jsx(oe,{value:"study",children:"Study"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Minutes"}),c.jsx(cn,{type:"number",value:x.minutes,onChange:T=>A(U=>({...U,minutes:T.target.value})),className:"rounded-none border-secondary"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Cards"}),c.jsx(cn,{type:"number",value:x.cards,onChange:T=>A(U=>({...U,cards:T.target.value})),className:"rounded-none border-secondary"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Confusions (comma-separated)"}),c.jsx(tt,{value:x.confusions,onChange:T=>A(U=>({...U,confusions:T.target.value})),placeholder:"e.g., muscle insertion points, nerve pathways",className:"rounded-none border-secondary min-h-[60px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Weak Anchors (comma-separated)"}),c.jsx(tt,{value:x.weakAnchors,onChange:T=>A(U=>({...U,weakAnchors:T.target.value})),placeholder:"e.g., brachial plexus diagram, ROM measurements",className:"rounded-none border-secondary min-h-[60px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Concepts (comma-separated)"}),c.jsx(tt,{value:x.concepts,onChange:T=>A(U=>({...U,concepts:T.target.value})),placeholder:"e.g., upper extremity anatomy, peripheral nerves",className:"rounded-none border-secondary min-h-[60px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Issues (comma-separated)"}),c.jsx(tt,{value:x.issues,onChange:T=>A(U=>({...U,issues:T.target.value})),placeholder:"e.g., interrupted by phone, lost focus after 30 min",className:"rounded-none border-secondary min-h-[60px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Notes"}),c.jsx(tt,{value:x.notes,onChange:T=>A(U=>({...U,notes:T.target.value})),placeholder:"Free-form observations about the session",className:"rounded-none border-secondary min-h-[80px]"})]})]}),c.jsxs(pi,{className:"gap-2",children:[c.jsxs(ee,{variant:"outline",onClick:()=>i(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[c.jsx(It,{className:"w-4 h-4 mr-2"}),"Cancel"]}),c.jsxs(ee,{onClick:vo,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[c.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),c.jsx(Pa,{open:a&&o.length>0,onOpenChange:s,children:c.jsxs(Ea,{"data-modal":"brain-delete-session",className:"bg-black border-2 border-destructive rounded-none translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[c.jsxs(Oa,{children:[c.jsxs(Ra,{className:"font-arcade text-destructive flex items-center gap-2",children:[c.jsx(ht,{className:"w-5 h-5"}),"CONFIRM DELETE"]}),c.jsxs(Ia,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",o.length," session",o.length!==1?"s":"","? This action cannot be undone."]})]}),c.jsxs(Da,{className:"gap-2",children:[c.jsx(za,{className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:"Cancel"}),c.jsxs($a,{onClick:xo,className:"font-terminal rounded-none bg-destructive hover:bg-destructive/80 text-destructive-foreground",children:[c.jsx(ht,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),c.jsx(ci,{open:p!==null,onOpenChange:T=>{T||m(null)},children:c.jsxs(ui,{"data-modal":"brain-edit-draft",className:"bg-black border-2 border-primary rounded-none max-w-lg translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[c.jsxs(fi,{children:[c.jsxs(di,{className:"font-arcade text-primary flex items-center gap-2",children:[c.jsx(ln,{className:"w-5 h-5"}),"EDIT CARD"]}),c.jsx(hi,{className:"font-terminal text-muted-foreground",children:"Edit card content and select target deck"})]}),c.jsxs("div",{className:"space-y-4 font-terminal",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Front (Question)"}),c.jsx(tt,{value:y.front,onChange:T=>w(U=>({...U,front:T.target.value})),placeholder:"Card front...",className:"rounded-none border-secondary min-h-[80px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Back (Answer)"}),c.jsx(tt,{value:y.back,onChange:T=>w(U=>({...U,back:T.target.value})),placeholder:"Card back...",className:"rounded-none border-secondary min-h-[80px]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-muted-foreground",children:"Target Deck"}),c.jsxs(Dt,{value:y.deckName,onValueChange:T=>w(U=>({...U,deckName:T})),children:[c.jsx(zt,{className:"rounded-none border-secondary",children:c.jsx($t,{placeholder:"Select deck"})}),c.jsxs(Ft,{className:"rounded-none border-secondary bg-black max-h-[200px]",children:[c.jsx(oe,{value:"PT::EBP",children:"PT::EBP (Evidence Based Practice)"}),c.jsx(oe,{value:"PT::ExPhys",children:"PT::ExPhys (Exercise Physiology)"}),c.jsx(oe,{value:"PT::MS1",children:"PT::MS1 (Movement Science 1)"}),c.jsx(oe,{value:"PT::Neuro",children:"PT::Neuro (Neuroscience)"}),c.jsx(oe,{value:"PT::TI",children:"PT::TI (Therapeutic Intervention)"}),c.jsx(oe,{value:"PT::General",children:"PT::General"}),$e?.decks?.filter(T=>!T.startsWith("PT::")).map(T=>c.jsx(oe,{value:T,children:T},T))]})]}),c.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:["Current: ",c.jsx("span",{className:"text-blue-400",children:y.deckName})]})]})]}),c.jsxs(pi,{className:"gap-2",children:[c.jsxs(ee,{variant:"outline",onClick:()=>m(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[c.jsx(It,{className:"w-4 h-4 mr-2"}),"Cancel"]}),c.jsxs(ee,{onClick:Ao,disabled:Kn.isPending,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[c.jsx(Yn,{className:"w-4 h-4 mr-2"}),Kn.isPending?"Saving...":"Save"]})]})]})})]})}export{t0 as default};
