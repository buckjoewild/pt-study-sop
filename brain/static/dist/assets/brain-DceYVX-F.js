import{c as Ie,r as j,R as pb,j as g,b as Ye,f as zC,a as gb,P as Fi,u as dd,g as LC,h as $C,d as Hi,X as Mf,e as Bi,i as FC,k as HC,l as hd,m as mb,n as Ur}from"./index-BrVsdrP8.js";import{p as BC,u as Me,o as he,B as ue,I as Rn,S as an,q as VC,r as GC,f as di,h as hi,i as pi,j as gi,k as mi,s as Vi,l as yi,e as At,n as To,m as vr,t as If,v as UC,L as WC}from"./index-DW2dryCV.js";import{B as vi,C as KC}from"./badge-Btz9B40M.js";import{C as YC,B as Tf}from"./circle-check-BR5u5JBV.js";import{C as yb}from"./circle-CbO7ep4f.js";import{A as XC,S as ZC}from"./star-D00XtSh5.js";import{F as vb,a as Gi,b as Sh,M as JC,r as QC,C as e2}from"./index-DFjE7BEt.js";import{S as t2,a as n2,R as Oo}from"./send-DGJBJQmi.js";import{C as en,a as tn,b as nn,c as rn}from"./card-C6NS3DoV.js";import{C as Bt,E as r2}from"./checkbox-CNu-PAEI.js";import{c as xb,R as i2,I as o2,T as a2,a as s2,b as qo,d as Do}from"./tabs-BuZrdiFG.js";import{u as c2,C as l2,S as u2,a as f2,b as d2,c as h2,d as Kt}from"./select-BGyQ_x2B.js";import{C as p2,M as bb,L as On}from"./message-square-BZR_Z8eo.js";import{L as _b}from"./loader-circle-DXXgAXfW.js";import{P as xi}from"./plus-D0aqnPQm.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],m2=Ie("arrow-left-right",g2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],v2=Ie("arrow-left",y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],b2=Ie("arrow-up-down",x2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],w2=Ie("brain-circuit",_2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Ch=Ie("calendar-days",S2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],N2=Ie("columns-2",C2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],k2=Ie("database",E2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ui=Ie("download",R2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],j2=Ie("file",A2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],M2=Ie("image",P2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],Nh=Ie("import",I2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],O2=Ie("layout-grid",T2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],D2=Ie("map",q2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],wb=Ie("maximize-2",z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Sb=Ie("minimize-2",L2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Cb=Ie("network",$2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],H2=Ie("palette",F2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]],V2=Ie("rows-2",B2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],U2=Ie("table-2",G2),Wi=j.createContext(null);Wi.displayName="PanelGroupContext";const Ne={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},pd=10,sn=j.useLayoutEffect,Eh=pb.useId,W2=typeof Eh=="function"?Eh:()=>null;let K2=0;function gd(e=null){const n=W2(),r=j.useRef(e||n||null);return r.current===null&&(r.current=""+K2++),e??r.current}function Nb({children:e,className:n="",collapsedSize:r,collapsible:i,defaultSize:o,forwardedRef:a,id:s,maxSize:c,minSize:l,onCollapse:u,onExpand:d,onResize:f,order:h,style:p,tagName:y="div",...x}){const v=j.useContext(Wi);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:_,getPanelSize:b,getPanelStyle:w,groupId:S,isPanelCollapsed:C,reevaluatePanelConstraints:N,registerPanel:E,resizePanel:k,unregisterPanel:R}=v,A=gd(s),P=j.useRef({callbacks:{onCollapse:u,onExpand:d,onResize:f},constraints:{collapsedSize:r,collapsible:i,defaultSize:o,maxSize:c,minSize:l},id:A,idIsFromProps:s!==void 0,order:h});j.useRef({didLogMissingDefaultSizeWarning:!1}),sn(()=>{const{callbacks:M,constraints:T}=P.current,O={...T};P.current.id=A,P.current.idIsFromProps=s!==void 0,P.current.order=h,M.onCollapse=u,M.onExpand=d,M.onResize=f,T.collapsedSize=r,T.collapsible=i,T.defaultSize=o,T.maxSize=c,T.minSize=l,(O.collapsedSize!==T.collapsedSize||O.collapsible!==T.collapsible||O.maxSize!==T.maxSize||O.minSize!==T.minSize)&&N(P.current,O)}),sn(()=>{const M=P.current;return E(M),()=>{R(M)}},[h,A,E,R]),j.useImperativeHandle(a,()=>({collapse:()=>{m(P.current)},expand:M=>{_(P.current,M)},getId(){return A},getSize(){return b(P.current)},isCollapsed(){return C(P.current)},isExpanded(){return!C(P.current)},resize:M=>{k(P.current,M)}}),[m,_,b,C,A,k]);const q=w(P.current,o);return j.createElement(y,{...x,children:e,className:n,id:A,style:{...q,...p},[Ne.groupId]:S,[Ne.panel]:"",[Ne.panelCollapsible]:i||void 0,[Ne.panelId]:A,[Ne.panelSize]:parseFloat(""+q.flexGrow).toFixed(1)})}const Eb=j.forwardRef((e,n)=>j.createElement(Nb,{...e,forwardedRef:n}));Nb.displayName="Panel";Eb.displayName="forwardRef(Panel)";let Of=null,oi=-1,Ft=null;function Y2(e,n){if(n){const r=(n&Pb)!==0,i=(n&Mb)!==0,o=(n&Ib)!==0,a=(n&Tb)!==0;if(r)return o?"se-resize":a?"ne-resize":"e-resize";if(i)return o?"sw-resize":a?"nw-resize":"w-resize";if(o)return"s-resize";if(a)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function X2(){Ft!==null&&(document.head.removeChild(Ft),Of=null,Ft=null,oi=-1)}function zo(e,n){var r,i;const o=Y2(e,n);if(Of!==o){if(Of=o,Ft===null&&(Ft=document.createElement("style"),document.head.appendChild(Ft)),oi>=0){var a;(a=Ft.sheet)===null||a===void 0||a.removeRule(oi)}oi=(r=(i=Ft.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function kb(e){return e.type==="keydown"}function Rb(e){return e.type.startsWith("pointer")}function Ab(e){return e.type.startsWith("mouse")}function Ki(e){if(Rb(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Ab(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Z2(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function J2(e,n,r){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Q2(e,n){if(e===n)throw new Error("Cannot compare node with itself");const r={a:Ah(e),b:Ah(n)};let i;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),n=r.b.pop(),i=e;de(i,"Stacking order can only be calculated for elements with a common ancestor");const o={a:Rh(kh(r.a)),b:Rh(kh(r.b))};if(o.a===o.b){const a=i.childNodes,s={a:r.a.at(-1),b:r.b.at(-1)};let c=a.length;for(;c--;){const l=a[c];if(l===s.a)return 1;if(l===s.b)return-1}}return Math.sign(o.a-o.b)}const eN=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function tN(e){var n;const r=getComputedStyle((n=jb(e))!==null&&n!==void 0?n:e).display;return r==="flex"||r==="inline-flex"}function nN(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||tN(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||eN.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function kh(e){let n=e.length;for(;n--;){const r=e[n];if(de(r,"Missing node"),nN(r))return r}return null}function Rh(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Ah(e){const n=[];for(;e;)n.push(e),e=jb(e);return n}function jb(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const Pb=1,Mb=2,Ib=4,Tb=8,rN=Z2()==="coarse";let lt=[],Mn=!1,Jt=new Map,Yi=new Map;const xr=new Set;function iN(e,n,r,i,o){var a;const{ownerDocument:s}=n,c={direction:r,element:n,hitAreaMargins:i,setResizeHandlerState:o},l=(a=Jt.get(s))!==null&&a!==void 0?a:0;return Jt.set(s,l+1),xr.add(c),bi(),function(){var d;Yi.delete(e),xr.delete(c);const f=(d=Jt.get(s))!==null&&d!==void 0?d:1;if(Jt.set(s,f-1),bi(),f===1&&Jt.delete(s),lt.includes(c)){const h=lt.indexOf(c);h>=0&&lt.splice(h,1),yd(),o("up",!0,null)}}}function oN(e){const{target:n}=e,{x:r,y:i}=Ki(e);Mn=!0,md({target:n,x:r,y:i}),bi(),lt.length>0&&(_i("down",e),e.preventDefault(),Ob(n)||e.stopImmediatePropagation())}function Lo(e){const{x:n,y:r}=Ki(e);if(Mn&&e.buttons===0&&(Mn=!1,_i("up",e)),!Mn){const{target:i}=e;md({target:i,x:n,y:r})}_i("move",e),yd(),lt.length>0&&e.preventDefault()}function $o(e){const{target:n}=e,{x:r,y:i}=Ki(e);Yi.clear(),Mn=!1,lt.length>0&&(e.preventDefault(),Ob(n)||e.stopImmediatePropagation()),_i("up",e),md({target:n,x:r,y:i}),yd(),bi()}function Ob(e){let n=e;for(;n;){if(n.hasAttribute(Ne.resizeHandle))return!0;n=n.parentElement}return!1}function md({target:e,x:n,y:r}){lt.splice(0);let i=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(i=e),xr.forEach(o=>{const{element:a,hitAreaMargins:s}=o,c=a.getBoundingClientRect(),{bottom:l,left:u,right:d,top:f}=c,h=rN?s.coarse:s.fine;if(n>=u-h&&n<=d+h&&r>=f-h&&r<=l+h){if(i!==null&&document.contains(i)&&a!==i&&!a.contains(i)&&!i.contains(a)&&Q2(i,a)>0){let y=i,x=!1;for(;y&&!y.contains(a);){if(J2(y.getBoundingClientRect(),c)){x=!0;break}y=y.parentElement}if(x)return}lt.push(o)}})}function Fo(e,n){Yi.set(e,n)}function yd(){let e=!1,n=!1;lt.forEach(i=>{const{direction:o}=i;o==="horizontal"?e=!0:n=!0});let r=0;Yi.forEach(i=>{r|=i}),e&&n?zo("intersection",r):e?zo("horizontal",r):n?zo("vertical",r):X2()}let Ho=new AbortController;function bi(){Ho.abort(),Ho=new AbortController;const e={capture:!0,signal:Ho.signal};xr.size&&(Mn?(lt.length>0&&Jt.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("contextmenu",$o,e),i.addEventListener("pointerleave",Lo,e),i.addEventListener("pointermove",Lo,e))}),window.addEventListener("pointerup",$o,e),window.addEventListener("pointercancel",$o,e)):Jt.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("pointerdown",oN,e),i.addEventListener("pointermove",Lo,e))}))}function _i(e,n){xr.forEach(r=>{const{setResizeHandlerState:i}=r,o=lt.includes(r);i(e,o,n)})}function aN(){const[e,n]=j.useState(0);return j.useCallback(()=>n(r=>r+1),[])}function de(e,n){if(!e)throw console.error(n),Error(n)}function fn(e,n,r=pd){return e.toFixed(r)===n.toFixed(r)?0:e>n?1:-1}function Rt(e,n,r=pd){return fn(e,n,r)===0}function Ke(e,n,r){return fn(e,n,r)===0}function sN(e,n,r){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){const o=e[i],a=n[i];if(!Ke(o,a,r))return!1}return!0}function An({panelConstraints:e,panelIndex:n,size:r}){const i=e[n];de(i!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:o=0,collapsible:a,maxSize:s=100,minSize:c=0}=i;if(fn(r,c)<0)if(a){const l=(o+c)/2;fn(r,l)<0?r=o:r=c}else r=c;return r=Math.min(s,r),r=parseFloat(r.toFixed(pd)),r}function ir({delta:e,initialLayout:n,panelConstraints:r,pivotIndices:i,prevLayout:o,trigger:a}){if(Ke(e,0))return n;const s=[...n],[c,l]=i;de(c!=null,"Invalid first pivot index"),de(l!=null,"Invalid second pivot index");let u=0;if(a==="keyboard"){{const f=e<0?l:c,h=r[f];de(h,`Panel constraints not found for index ${f}`);const{collapsedSize:p=0,collapsible:y,minSize:x=0}=h;if(y){const v=n[f];if(de(v!=null,`Previous layout not found for panel index ${f}`),Ke(v,p)){const m=x-v;fn(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}{const f=e<0?c:l,h=r[f];de(h,`No panel constraints found for index ${f}`);const{collapsedSize:p=0,collapsible:y,minSize:x=0}=h;if(y){const v=n[f];if(de(v!=null,`Previous layout not found for panel index ${f}`),Ke(v,x)){const m=v-p;fn(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}}{const f=e<0?1:-1;let h=e<0?l:c,p=0;for(;;){const x=n[h];de(x!=null,`Previous layout not found for panel index ${h}`);const m=An({panelConstraints:r,panelIndex:h,size:100})-x;if(p+=m,h+=f,h<0||h>=r.length)break}const y=Math.min(Math.abs(e),Math.abs(p));e=e<0?0-y:y}{let h=e<0?c:l;for(;h>=0&&h<r.length;){const p=Math.abs(e)-Math.abs(u),y=n[h];de(y!=null,`Previous layout not found for panel index ${h}`);const x=y-p,v=An({panelConstraints:r,panelIndex:h,size:x});if(!Ke(y,v)&&(u+=y-v,s[h]=v,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(sN(o,s))return o;{const f=e<0?l:c,h=n[f];de(h!=null,`Previous layout not found for panel index ${f}`);const p=h+u,y=An({panelConstraints:r,panelIndex:f,size:p});if(s[f]=y,!Ke(y,p)){let x=p-y,m=e<0?l:c;for(;m>=0&&m<r.length;){const _=s[m];de(_!=null,`Previous layout not found for panel index ${m}`);const b=_+x,w=An({panelConstraints:r,panelIndex:m,size:b});if(Ke(_,w)||(x-=w-_,s[m]=w),Ke(x,0))break;e>0?m--:m++}}}const d=s.reduce((f,h)=>h+f,0);return Ke(d,100)?s:o}function cN({layout:e,panelsArray:n,pivotIndices:r}){let i=0,o=100,a=0,s=0;const c=r[0];de(c!=null,"No pivot index found"),n.forEach((f,h)=>{const{constraints:p}=f,{maxSize:y=100,minSize:x=0}=p;h===c?(i=x,o=y):(a+=x,s+=y)});const l=Math.min(o,100-a),u=Math.max(i,100-s),d=e[c];return{valueMax:l,valueMin:u,valueNow:d}}function br(e,n=document){return Array.from(n.querySelectorAll(`[${Ne.resizeHandleId}][data-panel-group-id="${e}"]`))}function qb(e,n,r=document){const o=br(e,r).findIndex(a=>a.getAttribute(Ne.resizeHandleId)===n);return o??null}function Db(e,n,r){const i=qb(e,n,r);return i!=null?[i,i+1]:[-1,-1]}function zb(e,n=document){var r;if(n instanceof HTMLElement&&(n==null||(r=n.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return n;const i=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return i||null}function Xi(e,n=document){const r=n.querySelector(`[${Ne.resizeHandleId}="${e}"]`);return r||null}function lN(e,n,r,i=document){var o,a,s,c;const l=Xi(n,i),u=br(e,i),d=l?u.indexOf(l):-1,f=(o=(a=r[d])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null,h=(s=(c=r[d+1])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null;return[f,h]}function uN({committedValuesRef:e,eagerValuesRef:n,groupId:r,layout:i,panelDataArray:o,panelGroupElement:a,setLayout:s}){j.useRef({didWarnAboutMissingResizeHandle:!1}),sn(()=>{if(!a)return;const c=br(r,a);for(let l=0;l<o.length-1;l++){const{valueMax:u,valueMin:d,valueNow:f}=cN({layout:i,panelsArray:o,pivotIndices:[l,l+1]}),h=c[l];if(h!=null){const p=o[l];de(p,`No panel data found for index "${l}"`),h.setAttribute("aria-controls",p.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(d)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{c.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[r,i,o,a]),j.useEffect(()=>{if(!a)return;const c=n.current;de(c,"Eager values not found");const{panelDataArray:l}=c,u=zb(r,a);de(u!=null,`No group found for id "${r}"`);const d=br(r,a);de(d,`No resize handles found for group id "${r}"`);const f=d.map(h=>{const p=h.getAttribute(Ne.resizeHandleId);de(p,"Resize handle element has no handle id attribute");const[y,x]=lN(r,p,l,a);if(y==null||x==null)return()=>{};const v=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const _=l.findIndex(b=>b.id===y);if(_>=0){const b=l[_];de(b,`No panel data found for index ${_}`);const w=i[_],{collapsedSize:S=0,collapsible:C,minSize:N=0}=b.constraints;if(w!=null&&C){const E=ir({delta:Ke(w,S)?N-S:S-w,initialLayout:i,panelConstraints:l.map(k=>k.constraints),pivotIndices:Db(r,p,a),prevLayout:i,trigger:"keyboard"});i!==E&&s(E)}}break}}};return h.addEventListener("keydown",v),()=>{h.removeEventListener("keydown",v)}});return()=>{f.forEach(h=>h())}},[a,e,n,r,i,o,s])}function jh(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function Lb(e,n){const r=e==="horizontal",{x:i,y:o}=Ki(n);return r?i:o}function fN(e,n,r,i,o){const a=r==="horizontal",s=Xi(n,o);de(s,`No resize handle element found for id "${n}"`);const c=s.getAttribute(Ne.groupId);de(c,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=i;const u=Lb(r,e),d=zb(c,o);de(d,`No group element found for id "${c}"`);const f=d.getBoundingClientRect(),h=a?f.width:f.height;return(u-l)/h*100}function dN(e,n,r,i,o,a){if(kb(e)){const s=r==="horizontal";let c=0;e.shiftKey?c=100:o!=null?c=o:c=10;let l=0;switch(e.key){case"ArrowDown":l=s?0:c;break;case"ArrowLeft":l=s?-c:0;break;case"ArrowRight":l=s?c:0;break;case"ArrowUp":l=s?0:-c;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:fN(e,n,r,i,a)}function hN({panelDataArray:e}){const n=Array(e.length),r=e.map(a=>a.constraints);let i=0,o=100;for(let a=0;a<e.length;a++){const s=r[a];de(s,`Panel constraints not found for index ${a}`);const{defaultSize:c}=s;c!=null&&(i++,n[a]=c,o-=c)}for(let a=0;a<e.length;a++){const s=r[a];de(s,`Panel constraints not found for index ${a}`);const{defaultSize:c}=s;if(c!=null)continue;const l=e.length-i,u=o/l;i++,n[a]=u,o-=u}return n}function _n(e,n,r){n.forEach((i,o)=>{const a=e[o];de(a,`Panel data not found for index ${o}`);const{callbacks:s,constraints:c,id:l}=a,{collapsedSize:u=0,collapsible:d}=c,f=r[l];if(f==null||i!==f){r[l]=i;const{onCollapse:h,onExpand:p,onResize:y}=s;y&&y(i,f),d&&(h||p)&&(p&&(f==null||Rt(f,u))&&!Rt(i,u)&&p(),h&&(f==null||!Rt(f,u))&&Rt(i,u)&&h())}})}function Wr(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=n[r])return!1;return!0}function pN({defaultSize:e,dragState:n,layout:r,panelData:i,panelIndex:o,precision:a=3}){const s=r[o];let c;return s==null?c=e!=null?e.toPrecision(a):"1":i.length===1?c="1":c=s.toPrecision(a),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function gN(e,n=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...o)},n)}}function Ph(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,r)=>{localStorage.setItem(n,r)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function $b(e){return`react-resizable-panels:${e}`}function Fb(e){return e.map(n=>{const{constraints:r,id:i,idIsFromProps:o,order:a}=n;return o?i:a?`${a}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((n,r)=>n.localeCompare(r)).join(",")}function Hb(e,n){try{const r=$b(e),i=n.getItem(r);if(i){const o=JSON.parse(i);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function mN(e,n,r){var i,o;const a=(i=Hb(e,r))!==null&&i!==void 0?i:{},s=Fb(n);return(o=a[s])!==null&&o!==void 0?o:null}function yN(e,n,r,i,o){var a;const s=$b(e),c=Fb(n),l=(a=Hb(e,o))!==null&&a!==void 0?a:{};l[c]={expandToSizes:Object.fromEntries(r.entries()),layout:i};try{o.setItem(s,JSON.stringify(l))}catch(u){console.error(u)}}function Mh({layout:e,panelConstraints:n}){const r=[...e],i=r.reduce((a,s)=>a+s,0);if(r.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${r.map(a=>`${a}%`).join(", ")}`);if(!Ke(i,100)&&r.length>0)for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=100/i*s;r[a]=c}let o=0;for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=An({panelConstraints:n,panelIndex:a,size:s});s!=c&&(o+=s-c,r[a]=c)}if(!Ke(o,0))for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=s+o,l=An({panelConstraints:n,panelIndex:a,size:c});if(s!==l&&(o-=l-s,r[a]=l,Ke(o,0)))break}return r}const vN=100,or={getItem:e=>(Ph(or),or.getItem(e)),setItem:(e,n)=>{Ph(or),or.setItem(e,n)}},Ih={};function Bb({autoSaveId:e=null,children:n,className:r="",direction:i,forwardedRef:o,id:a=null,onLayout:s=null,keyboardResizeBy:c=null,storage:l=or,style:u,tagName:d="div",...f}){const h=gd(a),p=j.useRef(null),[y,x]=j.useState(null),[v,m]=j.useState([]),_=aN(),b=j.useRef({}),w=j.useRef(new Map),S=j.useRef(0),C=j.useRef({autoSaveId:e,direction:i,dragState:y,id:h,keyboardResizeBy:c,onLayout:s,storage:l}),N=j.useRef({layout:v,panelDataArray:[],panelDataArrayChanged:!1});j.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),j.useImperativeHandle(o,()=>({getId:()=>C.current.id,getLayout:()=>{const{layout:D}=N.current;return D},setLayout:D=>{const{onLayout:I}=C.current,{layout:z,panelDataArray:L}=N.current,B=Mh({layout:D,panelConstraints:L.map(U=>U.constraints)});jh(z,B)||(m(B),N.current.layout=B,I&&I(B),_n(L,B,b.current))}}),[]),sn(()=>{C.current.autoSaveId=e,C.current.direction=i,C.current.dragState=y,C.current.id=h,C.current.onLayout=s,C.current.storage=l}),uN({committedValuesRef:C,eagerValuesRef:N,groupId:h,layout:v,panelDataArray:N.current.panelDataArray,setLayout:m,panelGroupElement:p.current}),j.useEffect(()=>{const{panelDataArray:D}=N.current;if(e){if(v.length===0||v.length!==D.length)return;let I=Ih[e];I==null&&(I=gN(yN,vN),Ih[e]=I);const z=[...D],L=new Map(w.current);I(e,z,L,v,l)}},[e,v,l]),j.useEffect(()=>{});const E=j.useCallback(D=>{const{onLayout:I}=C.current,{layout:z,panelDataArray:L}=N.current;if(D.constraints.collapsible){const B=L.map(ne=>ne.constraints),{collapsedSize:U=0,panelSize:Y,pivotIndices:Z}=Yt(L,D,z);if(de(Y!=null,`Panel size not found for panel "${D.id}"`),!Rt(Y,U)){w.current.set(D.id,Y);const te=kn(L,D)===L.length-1?Y-U:U-Y,J=ir({delta:te,initialLayout:z,panelConstraints:B,pivotIndices:Z,prevLayout:z,trigger:"imperative-api"});Wr(z,J)||(m(J),N.current.layout=J,I&&I(J),_n(L,J,b.current))}}},[]),k=j.useCallback((D,I)=>{const{onLayout:z}=C.current,{layout:L,panelDataArray:B}=N.current;if(D.constraints.collapsible){const U=B.map(ie=>ie.constraints),{collapsedSize:Y=0,panelSize:Z=0,minSize:ne=0,pivotIndices:te}=Yt(B,D,L),J=I??ne;if(Rt(Z,Y)){const ie=w.current.get(D.id),re=ie!=null&&ie>=J?ie:J,se=kn(B,D)===B.length-1?Z-re:re-Z,ge=ir({delta:se,initialLayout:L,panelConstraints:U,pivotIndices:te,prevLayout:L,trigger:"imperative-api"});Wr(L,ge)||(m(ge),N.current.layout=ge,z&&z(ge),_n(B,ge,b.current))}}},[]),R=j.useCallback(D=>{const{layout:I,panelDataArray:z}=N.current,{panelSize:L}=Yt(z,D,I);return de(L!=null,`Panel size not found for panel "${D.id}"`),L},[]),A=j.useCallback((D,I)=>{const{panelDataArray:z}=N.current,L=kn(z,D);return pN({defaultSize:I,dragState:y,layout:v,panelData:z,panelIndex:L})},[y,v]),P=j.useCallback(D=>{const{layout:I,panelDataArray:z}=N.current,{collapsedSize:L=0,collapsible:B,panelSize:U}=Yt(z,D,I);return de(U!=null,`Panel size not found for panel "${D.id}"`),B===!0&&Rt(U,L)},[]),q=j.useCallback(D=>{const{layout:I,panelDataArray:z}=N.current,{collapsedSize:L=0,collapsible:B,panelSize:U}=Yt(z,D,I);return de(U!=null,`Panel size not found for panel "${D.id}"`),!B||fn(U,L)>0},[]),M=j.useCallback(D=>{const{panelDataArray:I}=N.current;I.push(D),I.sort((z,L)=>{const B=z.order,U=L.order;return B==null&&U==null?0:B==null?-1:U==null?1:B-U}),N.current.panelDataArrayChanged=!0,_()},[_]);sn(()=>{if(N.current.panelDataArrayChanged){N.current.panelDataArrayChanged=!1;const{autoSaveId:D,onLayout:I,storage:z}=C.current,{layout:L,panelDataArray:B}=N.current;let U=null;if(D){const Z=mN(D,B,z);Z&&(w.current=new Map(Object.entries(Z.expandToSizes)),U=Z.layout)}U==null&&(U=hN({panelDataArray:B}));const Y=Mh({layout:U,panelConstraints:B.map(Z=>Z.constraints)});jh(L,Y)||(m(Y),N.current.layout=Y,I&&I(Y),_n(B,Y,b.current))}}),sn(()=>{const D=N.current;return()=>{D.layout=[]}},[]);const T=j.useCallback(D=>{let I=!1;const z=p.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(I=!0),function(B){B.preventDefault();const U=p.current;if(!U)return()=>null;const{direction:Y,dragState:Z,id:ne,keyboardResizeBy:te,onLayout:J}=C.current,{layout:ie,panelDataArray:re}=N.current,{initialLayout:fe}=Z??{},se=Db(ne,D,U);let ge=dN(B,D,Y,Z,te,U);const Ee=Y==="horizontal";Ee&&I&&(ge=-ge);const ee=re.map(le=>le.constraints),Q=ir({delta:ge,initialLayout:fe??ie,panelConstraints:ee,pivotIndices:se,prevLayout:ie,trigger:kb(B)?"keyboard":"mouse-or-touch"}),ce=!Wr(ie,Q);(Rb(B)||Ab(B))&&S.current!=ge&&(S.current=ge,!ce&&ge!==0?Ee?Fo(D,ge<0?Pb:Mb):Fo(D,ge<0?Ib:Tb):Fo(D,0)),ce&&(m(Q),N.current.layout=Q,J&&J(Q),_n(re,Q,b.current))}},[]),O=j.useCallback((D,I)=>{const{onLayout:z}=C.current,{layout:L,panelDataArray:B}=N.current,U=B.map(ie=>ie.constraints),{panelSize:Y,pivotIndices:Z}=Yt(B,D,L);de(Y!=null,`Panel size not found for panel "${D.id}"`);const te=kn(B,D)===B.length-1?Y-I:I-Y,J=ir({delta:te,initialLayout:L,panelConstraints:U,pivotIndices:Z,prevLayout:L,trigger:"imperative-api"});Wr(L,J)||(m(J),N.current.layout=J,z&&z(J),_n(B,J,b.current))},[]),H=j.useCallback((D,I)=>{const{layout:z,panelDataArray:L}=N.current,{collapsedSize:B=0,collapsible:U}=I,{collapsedSize:Y=0,collapsible:Z,maxSize:ne=100,minSize:te=0}=D.constraints,{panelSize:J}=Yt(L,D,z);J!=null&&(U&&Z&&Rt(J,B)?Rt(B,Y)||O(D,Y):J<te?O(D,te):J>ne&&O(D,ne))},[O]),F=j.useCallback((D,I)=>{const{direction:z}=C.current,{layout:L}=N.current;if(!p.current)return;const B=Xi(D,p.current);de(B,`Drag handle element not found for id "${D}"`);const U=Lb(z,I);x({dragHandleId:D,dragHandleRect:B.getBoundingClientRect(),initialCursorPosition:U,initialLayout:L})},[]),G=j.useCallback(()=>{x(null)},[]),V=j.useCallback(D=>{const{panelDataArray:I}=N.current,z=kn(I,D);z>=0&&(I.splice(z,1),delete b.current[D.id],N.current.panelDataArrayChanged=!0,_())},[_]),W=j.useMemo(()=>({collapsePanel:E,direction:i,dragState:y,expandPanel:k,getPanelSize:R,getPanelStyle:A,groupId:h,isPanelCollapsed:P,isPanelExpanded:q,reevaluatePanelConstraints:H,registerPanel:M,registerResizeHandle:T,resizePanel:O,startDragging:F,stopDragging:G,unregisterPanel:V,panelGroupElement:p.current}),[E,y,i,k,R,A,h,P,q,H,M,T,O,F,G,V]),K={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return j.createElement(Wi.Provider,{value:W},j.createElement(d,{...f,children:n,className:r,id:a,ref:p,style:{...K,...u},[Ne.group]:"",[Ne.groupDirection]:i,[Ne.groupId]:h}))}const Vb=j.forwardRef((e,n)=>j.createElement(Bb,{...e,forwardedRef:n}));Bb.displayName="PanelGroup";Vb.displayName="forwardRef(PanelGroup)";function kn(e,n){return e.findIndex(r=>r===n||r.id===n.id)}function Yt(e,n,r){const i=kn(e,n),a=i===e.length-1?[i-1,i]:[i,i+1],s=r[i];return{...n.constraints,panelSize:s,pivotIndices:a}}function xN({disabled:e,handleId:n,resizeHandler:r,panelGroupElement:i}){j.useEffect(()=>{if(e||r==null||i==null)return;const o=Xi(n,i);if(o==null)return;const a=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),r(s);break}case"F6":{s.preventDefault();const c=o.getAttribute(Ne.groupId);de(c,`No group element found for id "${c}"`);const l=br(c,i),u=qb(c,n,i);de(u!==null,`No resize element found for id "${n}"`);const d=s.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[d].focus();break}}};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}},[i,e,n,r])}function Gb({children:e=null,className:n="",disabled:r=!1,hitAreaMargins:i,id:o,onBlur:a,onClick:s,onDragging:c,onFocus:l,onPointerDown:u,onPointerUp:d,style:f={},tabIndex:h=0,tagName:p="div",...y}){var x,v;const m=j.useRef(null),_=j.useRef({onClick:s,onDragging:c,onPointerDown:u,onPointerUp:d});j.useEffect(()=>{_.current.onClick=s,_.current.onDragging=c,_.current.onPointerDown=u,_.current.onPointerUp=d});const b=j.useContext(Wi);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:w,groupId:S,registerResizeHandle:C,startDragging:N,stopDragging:E,panelGroupElement:k}=b,R=gd(o),[A,P]=j.useState("inactive"),[q,M]=j.useState(!1),[T,O]=j.useState(null),H=j.useRef({state:A});sn(()=>{H.current.state=A}),j.useEffect(()=>{if(r)O(null);else{const W=C(R);O(()=>W)}},[r,R,C]);const F=(x=i?.coarse)!==null&&x!==void 0?x:15,G=(v=i?.fine)!==null&&v!==void 0?v:5;j.useEffect(()=>{if(r||T==null)return;const W=m.current;de(W,"Element ref not attached");let K=!1;return iN(R,W,w,{coarse:F,fine:G},(I,z,L)=>{if(!z){P("inactive");return}switch(I){case"down":{P("drag"),K=!1,de(L,'Expected event to be defined for "down" action'),N(R,L);const{onDragging:B,onPointerDown:U}=_.current;B?.(!0),U?.();break}case"move":{const{state:B}=H.current;K=!0,B!=="drag"&&P("hover"),de(L,'Expected event to be defined for "move" action'),T(L);break}case"up":{P("hover"),E();const{onClick:B,onDragging:U,onPointerUp:Y}=_.current;U?.(!1),Y?.(),K||B?.();break}}})},[F,w,r,G,C,R,T,N,E]),xN({disabled:r,handleId:R,resizeHandler:T,panelGroupElement:k});const V={touchAction:"none",userSelect:"none"};return j.createElement(p,{...y,children:e,className:n,id:o,onBlur:()=>{M(!1),a?.()},onFocus:()=>{M(!0),l?.()},ref:m,role:"separator",style:{...V,...f},tabIndex:h,[Ne.groupDirection]:w,[Ne.groupId]:S,[Ne.resizeHandle]:"",[Ne.resizeHandleActive]:A==="drag"?"pointer":q?"keyboard":void 0,[Ne.resizeHandleEnabled]:!r,[Ne.resizeHandleId]:R,[Ne.resizeHandleState]:A})}Gb.displayName="PanelResizeHandle";const bN=({className:e,...n})=>g.jsx(Vb,{className:Ye("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...n}),Bo=Eb,Th=({withHandle:e,className:n,...r})=>g.jsx(Gb,{className:Ye("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...r,children:e&&g.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:g.jsx(BC,{className:"h-2.5 w-2.5"})})});function Oh(e,n){try{const r=localStorage.getItem(e);if(r!==null)return JSON.parse(r)}catch{}return n}function qh(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch{}}function _N(){const[e,n]=j.useState(()=>Oh("brain-center-mode","edit")),[r,i]=j.useState(()=>Oh("brain-right-mode","map")),[o,a]=j.useState(null),[s,c]=j.useState(""),[l,u]=j.useState(!1),[d,f]=j.useState(!1),[h,p]=j.useState(!1),[y,x]=j.useState(!1),[v,m]=j.useState(!1),_=j.useCallback(O=>{n(O),qh("brain-center-mode",O)},[]),b=j.useCallback(O=>{i(O),qh("brain-right-mode",O)},[]),{data:w}=Me({queryKey:["obsidian","status"],queryFn:he.obsidian.getStatus,refetchInterval:3e4}),{data:S}=Me({queryKey:["obsidian","config"],queryFn:he.obsidian.getConfig}),{data:C}=Me({queryKey:["obsidian","vault-index"],queryFn:()=>he.obsidian.getVaultIndex(),enabled:w?.connected===!0}),{data:N}=Me({queryKey:["anki","status"],queryFn:he.anki.getStatus,refetchInterval:3e4}),{data:E}=Me({queryKey:["brain","metrics"],queryFn:he.brain.getMetrics}),{data:k=[]}=Me({queryKey:["anki","drafts"],queryFn:he.anki.getDrafts}),R=k.filter(O=>O.status==="pending"),A=j.useCallback(async O=>{try{const H=await he.obsidian.getFile(O);H.success&&H.content!==void 0&&(a(O),c(H.content),u(!1),f(!1))}catch(H){console.error("Failed to load file:",H)}},[]),P=j.useCallback(async()=>{if(o){p(!0);try{(await he.obsidian.saveFile(o,s)).success&&u(!1)}catch(O){console.error("Failed to save file:",O)}finally{p(!1)}}},[o,s]),q=j.useCallback(O=>{c(O),u(!0)},[]),M=["School/Evidence Based Practice","School/Exercise Physiology","School/Movement Science 1","School/Neuroscience","School/Therapeutic Intervention"],T=j.useCallback(async(O,H)=>{if(H){const G=S?.vaultName||"Treys School";window.open(`obsidian://open?vault=${encodeURIComponent(G)}&file=${encodeURIComponent(O)}`,"_blank");return}const F=C?.paths?.[O];if(F){await A(F),f(!0);return}for(const G of M)try{const V=await he.obsidian.getFile(`${G}/${O}.md`);if(V.success&&V.content!==void 0){a(`${G}/${O}.md`),c(V.content),u(!1),f(!0);return}}catch{}console.warn(`Note not found: ${O}`)},[S,C,A]);return{centerMode:e,setCenterMode:_,rightMode:r,setRightMode:b,currentFile:o,setCurrentFile:a,fileContent:s,setFileContent:q,hasChanges:l,setHasChanges:u,previewMode:d,setPreviewMode:f,isSaving:h,openFile:A,saveFile:P,importOpen:y,setImportOpen:x,graphOpen:v,setGraphOpen:m,handleWikilinkClick:T,obsidianStatus:w,obsidianConfig:S,vaultIndex:C,ankiStatus:N,metrics:E,ankiDrafts:k,pendingDrafts:R}}const Dh=[{id:"study",label:"Study",tab:null,section:null},{id:"wrap",label:"Wrap",tab:null,section:null},{id:"generate",label:"Generate JSON",tab:null,section:null},{id:"attach",label:"Attach JSON",tab:null,section:null},{id:"planner",label:"Planner",tab:null,section:null},{id:"actions",label:"Actions",tab:null,section:null}];function wN({workspace:e}){const[n,r]=j.useState(!1),{data:i=[]}=Me({queryKey:["sessions"],queryFn:he.sessions.getAll}),{data:o=[]}=Me({queryKey:["planner-queue"],queryFn:he.planner.getQueue}),a=new Date,s=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,c=p=>{const y=typeof p=="string"?new Date(p):p;return`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`===s},l=i.some(p=>c(p.date)),u=o.length>0,d=i.some(p=>c(p.date)&&p.cards>0),f={study:l,wrap:l,generate:d,attach:d,planner:u,actions:u},h=j.useCallback(p=>{p.preventDefault(),r(!1),Array.from(p.dataTransfer.files).length>0&&e.setImportOpen(!0)},[e]);return g.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b-2 border-primary/50 bg-black/60 flex-wrap ${n?"ring-2 ring-primary":""}`,onDragOver:p=>{p.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:h,children:[g.jsx("div",{className:"flex items-center gap-0.5 mr-2",children:Dh.map((p,y)=>{const x=f[p.id]??!1;return g.jsxs("div",{className:"flex items-center gap-0.5",children:[g.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 text-[8px] font-terminal ${x?"text-green-400":"text-muted-foreground"}`,title:p.label,children:[x?g.jsx(YC,{className:"w-2.5 h-2.5"}):g.jsx(yb,{className:"w-2.5 h-2.5"}),g.jsx("span",{className:"hidden xl:inline",children:p.label})]}),y<Dh.length-1&&g.jsx(XC,{className:"w-2 h-2 text-muted-foreground/50"})]},p.id)})}),g.jsx("div",{className:"w-px h-5 bg-primary/30"}),g.jsxs(ue,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-[10px] border-primary/50",onClick:()=>e.setImportOpen(!0),children:[g.jsx(Ui,{className:"w-3 h-3 mr-1"}),"Import"]}),g.jsxs(ue,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-[10px] border-primary/50",onClick:()=>e.setGraphOpen(!0),children:[g.jsx(Cb,{className:"w-3 h-3 mr-1"}),"Graph"]}),g.jsxs("div",{className:"flex items-center gap-3 ml-auto font-terminal text-[10px]",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e.obsidianStatus?.connected?"bg-green-500":"bg-red-500"}`}),g.jsx("span",{className:"text-muted-foreground",children:"Obsidian"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e.ankiStatus?.connected?"bg-green-500":"bg-red-500"}`}),g.jsx("span",{className:"text-muted-foreground",children:"Anki"})]}),e.pendingDrafts.length>0&&g.jsxs(vi,{variant:"outline",className:"h-5 px-1.5 text-[9px] rounded-none border-secondary/50 text-secondary",children:[e.pendingDrafts.length," drafts"]})]})]})}const SN=[{name:"EBP",path:"School/Evidence Based Practice"},{name:"ExPhys",path:"School/Exercise Physiology"},{name:"MS1",path:"School/Movement Science 1"},{name:"Neuro",path:"School/Neuroscience"},{name:"TI",path:"School/Therapeutic Intervention"}];function zh({workspace:e}){const[n,r]=j.useState("School"),[i,o]=j.useState(""),{data:a}=Me({queryKey:["obsidian","files",n],queryFn:()=>he.obsidian.getFiles(n),enabled:e.obsidianStatus?.connected===!0}),s=u=>{r(u)},c=()=>{const u=new Date().toISOString().split("T")[0],d=n?`${n}/Session-${u}.md`:`Session-${u}.md`,f=`# Study Session - ${u}

## Summary


## Concepts Covered
- 

## Notes

`;e.setCurrentFile(d),e.setFileContent(f),e.setHasChanges(!0)},l=j.useMemo(()=>{const u=a?.files||[];if(!i.trim())return u;const d=i.toLowerCase();return u.filter(f=>(typeof f=="string"?f:f.path).toLowerCase().includes(d))},[a,i]);return e.obsidianStatus?.connected?g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"p-2 space-y-1.5 border-b border-primary/30",children:[g.jsxs("div",{className:"relative",children:[g.jsx(t2,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground"}),g.jsx(Rn,{value:i,onChange:u=>o(u.target.value),placeholder:"Search files...",className:"h-6 pl-6 text-[10px] font-terminal rounded-none border-secondary/50 bg-black/40"})]}),g.jsxs(ue,{size:"sm",variant:"outline",className:"w-full h-5 text-[9px] font-terminal rounded-none border-primary/50",onClick:c,children:[g.jsx(Gi,{className:"w-2.5 h-2.5 mr-1"}),"New Note"]})]}),g.jsx("div",{className:"flex flex-col gap-0.5 p-1.5 border-b border-primary/30",children:SN.map(u=>g.jsx("button",{onClick:()=>s(u.path),className:`text-left px-2 py-1 text-[9px] font-terminal rounded-none transition-colors ${n===u.path?"bg-primary/20 text-primary border-l-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary/20"}`,children:u.name},u.path))}),n&&g.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-1 font-terminal text-[9px] text-muted-foreground border-b border-secondary/20 flex-wrap",children:[g.jsx("button",{onClick:()=>s(""),className:"hover:text-primary",children:"vault"}),n.split("/").map((u,d,f)=>g.jsxs("span",{className:"flex items-center gap-0.5",children:[g.jsx(KC,{className:"w-2 h-2"}),g.jsx("button",{onClick:()=>s(f.slice(0,d+1).join("/")),className:"hover:text-primary",children:u})]},d))]}),g.jsx(an,{className:"flex-1",children:g.jsxs("div",{className:"p-1 space-y-0.5",children:[n&&g.jsxs("button",{onClick:()=>{const u=n.split("/");u.pop(),s(u.join("/"))},className:"w-full flex items-center gap-1.5 px-2 py-1 hover:bg-secondary/20 font-terminal text-[10px] text-muted-foreground",children:[g.jsx(Sh,{className:"w-3 h-3"}),".."]}),l.map(u=>{const d=typeof u=="string"?u:u.path,f=d.endsWith("/"),h=d.replace(/\/$/,"").split("/").pop()||d,p=e.currentFile?.endsWith(h);return g.jsxs("button",{onClick:()=>{if(f){const y=h.replace(/\/$/,"");s(n?`${n}/${y}`:y)}else{const y=n?`${n}/${h}`:h;e.openFile(y)}},className:`w-full flex items-center gap-1.5 px-2 py-1 hover:bg-secondary/20 font-terminal text-[10px] ${p?"bg-primary/20 text-primary":""}`,children:[f?g.jsx(Sh,{className:"w-3 h-3 text-yellow-500 shrink-0"}):g.jsx(j2,{className:"w-3 h-3 text-blue-400 shrink-0"}),g.jsx("span",{className:"truncate",children:h})]},d)})]})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[g.jsx(vb,{className:"w-6 h-6 text-red-500 mb-2"}),g.jsx("p",{className:"font-terminal text-[10px] text-red-400 text-center",children:"Obsidian Offline"}),g.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground text-center mt-1",children:"Open Obsidian with Local REST API"})]})}function qf(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return n?.(o)}}var CN=pb[" useInsertionEffect ".trim().toString()]||zC;function NN({prop:e,defaultProp:n,onChange:r=()=>{},caller:i}){const[o,a,s]=EN({defaultProp:n,onChange:r}),c=e!==void 0,l=c?e:o;{const d=j.useRef(e!==void 0);j.useEffect(()=>{const f=d.current;f!==c&&console.warn(`${i} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,i])}const u=j.useCallback(d=>{if(c){const f=kN(d)?d(e):d;f!==e&&s.current?.(f)}else a(d)},[c,e,a,s]);return[l,u]}function EN({defaultProp:e,onChange:n}){const[r,i]=j.useState(e),o=j.useRef(r),a=j.useRef(n);return CN(()=>{a.current=n},[n]),j.useEffect(()=>{o.current!==r&&(a.current?.(r),o.current=r)},[r,o]),[r,i,a]}function kN(e){return typeof e=="function"}var vd="Radio",[RN,Ub]=gb(vd),[AN,jN]=RN(vd),Wb=j.forwardRef((e,n)=>{const{__scopeRadio:r,name:i,checked:o=!1,required:a,disabled:s,value:c="on",onCheck:l,form:u,...d}=e,[f,h]=j.useState(null),p=dd(n,v=>h(v)),y=j.useRef(!1),x=f?u||!!f.closest("form"):!0;return g.jsxs(AN,{scope:r,checked:o,disabled:s,children:[g.jsx(Fi.button,{type:"button",role:"radio","aria-checked":o,"data-state":Zb(o),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:p,onClick:qf(e.onClick,v=>{o||l?.(),x&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),x&&g.jsx(Xb,{control:f,bubbles:!y.current,name:i,value:c,checked:o,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});Wb.displayName=vd;var Kb="RadioIndicator",Yb=j.forwardRef((e,n)=>{const{__scopeRadio:r,forceMount:i,...o}=e,a=jN(Kb,r);return g.jsx(LC,{present:i||a.checked,children:g.jsx(Fi.span,{"data-state":Zb(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:n})})});Yb.displayName=Kb;var PN="RadioBubbleInput",Xb=j.forwardRef(({__scopeRadio:e,control:n,checked:r,bubbles:i=!0,...o},a)=>{const s=j.useRef(null),c=dd(s,a),l=c2(r),u=$C(n);return j.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&p){const y=new Event("click",{bubbles:i});p.call(d,r),d.dispatchEvent(y)}},[l,r,i]),g.jsx(Fi.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:c,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xb.displayName=PN;function Zb(e){return e?"checked":"unchecked"}var MN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Zi="RadioGroup",[IN]=gb(Zi,[xb,Ub]),Jb=xb(),Qb=Ub(),[TN,ON]=IN(Zi),e_=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,name:i,defaultValue:o,value:a,required:s=!1,disabled:c=!1,orientation:l,dir:u,loop:d=!0,onValueChange:f,...h}=e,p=Jb(r),y=VC(u),[x,v]=NN({prop:a,defaultProp:o??null,onChange:f,caller:Zi});return g.jsx(TN,{scope:r,name:i,required:s,disabled:c,value:x,onValueChange:v,children:g.jsx(i2,{asChild:!0,...p,orientation:l,dir:y,loop:d,children:g.jsx(Fi.div,{role:"radiogroup","aria-required":s,"aria-orientation":l,"data-disabled":c?"":void 0,dir:y,...h,ref:n})})})});e_.displayName=Zi;var t_="RadioGroupItem",n_=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,disabled:i,...o}=e,a=ON(t_,r),s=a.disabled||i,c=Jb(r),l=Qb(r),u=j.useRef(null),d=dd(n,u),f=a.value===o.value,h=j.useRef(!1);return j.useEffect(()=>{const p=x=>{MN.includes(x.key)&&(h.current=!0)},y=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",y)}},[]),g.jsx(o2,{asChild:!0,...c,focusable:!s,active:f,children:g.jsx(Wb,{disabled:s,required:a.required,checked:f,...l,...o,name:a.name,ref:d,onCheck:()=>a.onValueChange(o.value),onKeyDown:qf(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:qf(o.onFocus,()=>{h.current&&u.current?.click()})})})});n_.displayName=t_;var qN="RadioGroupIndicator",r_=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,...i}=e,o=Qb(r);return g.jsx(Yb,{...o,...i,ref:n})});r_.displayName=qN;var i_=e_,o_=n_,DN=r_;const a_=j.forwardRef(({className:e,...n},r)=>g.jsx(i_,{className:Ye("grid gap-2",e),...n,ref:r}));a_.displayName=i_.displayName;const s_=j.forwardRef(({className:e,...n},r)=>g.jsx(o_,{ref:r,className:Ye("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:g.jsx(DN,{className:"flex items-center justify-center",children:g.jsx(yb,{className:"h-3.5 w-3.5 fill-primary"})})}));s_.displayName=o_.displayName;const zN=/(\[\[.*?\]\])/g,LN=/!\[\[(.*?)\]\]/g,$N=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp"],FN=/^\[!([\w-]+)\]\s*(.*)?$/,Lh={note:"border-blue-500/50 bg-blue-500/10",tip:"border-green-500/50 bg-green-500/10",important:"border-purple-500/50 bg-purple-500/10",warning:"border-yellow-500/50 bg-yellow-500/10",caution:"border-red-500/50 bg-red-500/10",info:"border-blue-400/50 bg-blue-400/10",abstract:"border-cyan-500/50 bg-cyan-500/10",summary:"border-cyan-500/50 bg-cyan-500/10",todo:"border-blue-500/50 bg-blue-500/10",success:"border-green-500/50 bg-green-500/10",question:"border-yellow-400/50 bg-yellow-400/10",example:"border-purple-400/50 bg-purple-400/10",quote:"border-gray-400/50 bg-gray-400/10",bug:"border-red-400/50 bg-red-400/10",danger:"border-red-500/50 bg-red-500/10",fail:"border-red-500/50 bg-red-500/10",failure:"border-red-500/50 bg-red-500/10"};function Vo(e,n){return e.split(zN).map((r,i)=>{const o=r.match(/^\[\[(.*?)\]\]$/);if(o){const a=o[1].includes("|")?o[1].split("|")[1]:o[1],s=o[1].includes("|")?o[1].split("|")[0]:o[1];return g.jsx("span",{className:"text-blue-400 hover:text-blue-300 cursor-pointer underline decoration-dotted",onClick:c=>n?.(s,c.shiftKey),title:`${s} (Shift+click for Obsidian app)`,children:a},i)}return g.jsx("span",{children:r},i)})}function HN(e){return e.replace(LN,(n,r)=>{const i=r.toLowerCase();return $N.some(a=>i.endsWith(a))?`![${r}](/api/obsidian/vault-file/${encodeURIComponent(r)})`:`[[${r}]]`})}function BN(e){const n=e.split(`
`),r=[];let i=!1,o="",a="",s=[];const c=()=>{if(!i)return;const l=Lh[o.toLowerCase()]||Lh.note,u=a||o.charAt(0).toUpperCase()+o.slice(1);r.push(`<div class="callout ${l} border-l-4 rounded px-3 py-2 my-2">`),r.push(`<div class="font-bold text-xs uppercase tracking-wider mb-1">${u}</div>`),r.push(""),r.push(s.join(`
`)),r.push(""),r.push("</div>"),i=!1,s=[]};for(const l of n){if(l.startsWith("> ")){const u=l.slice(2),d=u.match(FN);if(d&&!i){i=!0,o=d[1],a=d[2]||"";continue}if(i){s.push(u);continue}}else if(l===">"&&i){s.push("");continue}else c();r.push(l)}return c(),r.join(`
`)}function c_({content:e,onWikilinkClick:n}){const r=BN(HN(e)),i={h1:({children:o})=>g.jsx("h1",{className:"text-xl font-bold text-primary border-b border-primary/30 pb-1 mb-3 mt-4",children:o}),h2:({children:o})=>g.jsx("h2",{className:"text-lg font-bold text-primary/90 border-b border-primary/20 pb-1 mb-2 mt-3",children:o}),h3:({children:o})=>g.jsx("h3",{className:"text-base font-semibold text-primary/80 mb-2 mt-3",children:o}),h4:({children:o})=>g.jsx("h4",{className:"text-sm font-semibold text-primary/70 mb-1 mt-2",children:o}),p:({children:o})=>typeof o=="string"?g.jsx("p",{className:"mb-2 leading-relaxed",children:Vo(o,n)}):g.jsx("p",{className:"mb-2 leading-relaxed",children:o}),strong:({children:o})=>g.jsx("strong",{className:"font-bold text-foreground",children:o}),em:({children:o})=>g.jsx("em",{className:"italic text-foreground/90",children:o}),ul:({children:o})=>g.jsx("ul",{className:"list-disc list-inside mb-2 space-y-0.5 ml-2",children:o}),ol:({children:o})=>g.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-0.5 ml-2",children:o}),li:({children:o})=>typeof o=="string"?g.jsx("li",{className:"leading-relaxed",children:Vo(o,n)}):g.jsx("li",{className:"leading-relaxed",children:o}),blockquote:({children:o})=>g.jsx("blockquote",{className:"border-l-4 border-primary/30 pl-3 my-2 text-muted-foreground italic",children:o}),code:({children:o,className:a})=>a?.startsWith("language-")?g.jsx("code",{className:"block bg-black/80 border border-secondary/40 rounded p-3 my-2 text-xs font-mono overflow-x-auto whitespace-pre",children:o}):g.jsx("code",{className:"bg-secondary/40 px-1.5 py-0.5 rounded text-xs font-mono text-primary",children:o}),pre:({children:o})=>g.jsx("pre",{className:"my-2",children:o}),hr:()=>g.jsx("hr",{className:"border-primary/20 my-4"}),a:({href:o,children:a})=>g.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:a}),table:({children:o})=>g.jsx("div",{className:"overflow-x-auto my-2",children:g.jsx("table",{className:"w-full text-xs border-collapse border border-secondary/40",children:o})}),th:({children:o})=>g.jsx("th",{className:"border border-secondary/40 bg-secondary/20 px-2 py-1 text-left font-semibold",children:o}),td:({children:o})=>typeof o=="string"?g.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:Vo(o,n)}):g.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:o}),img:({src:o,alt:a})=>g.jsx("img",{src:o,alt:a||"",className:"max-w-full rounded border border-secondary/40 my-2",loading:"lazy"}),del:({children:o})=>g.jsx("del",{className:"line-through text-muted-foreground",children:o}),input:({checked:o,...a})=>g.jsx("input",{type:"checkbox",checked:o,readOnly:!0,className:"mr-1.5 accent-primary",...a})};return g.jsx("div",{className:"obsidian-preview prose-invert max-w-none text-sm leading-relaxed",children:g.jsx(JC,{remarkPlugins:[QC],components:i,allowedElements:void 0,unwrapDisallowed:!1,children:r})})}function $h(e,n){if(n.length===0)return e;const r=[];for(const i of n)r.push({type:"image_url",image_url:{url:i}});return e.trim()&&r.push({type:"text",text:e}),r}const VN=`Generate Anki flashcards from the following study material. Output ONLY a numbered list in this exact format:

1. Front: [question]
Back: [answer]
Tags: [comma-separated tags like: Module1, Obj2, TopicName]

Rules:
- Front = the question only (no module/objective prefixes)
- Back = concise answer
- Tags = include Module#, Obj#, and topic keywords
- One card per concept
- No extra text before or after the list

Study material:
[PASTE YOUR NOTES HERE]`,GN=(e,n)=>{const r=e.split(`
`),i=n.split(`
`),o=[];let a=0,s=0;for(;a<r.length||s<i.length;){const c=r[a],l=i[s];if(a<r.length&&s<i.length&&c===l){o.push(` ${c}`),a+=1,s+=1;continue}a<r.length&&(o.push(`-${c}`),a+=1),s<i.length&&(o.push(`+${l}`),s+=1)}return o};function UN({embedded:e}={}){const[n,r]=j.useState(!1),[i,o]=j.useState("chat"),[a,s]=j.useState([]),[c,l]=j.useState(""),[u,d]=j.useState([]),[f,h]=j.useState(!1),[p,y]=j.useState("anki"),[x,v]=j.useState(!1),[m,_]=j.useState(!1),[b,w]=j.useState(!1),[S,C]=j.useState(null),[N,E]=j.useState(""),[k,R]=j.useState(null),[A,P]=j.useState(null),[q,M]=j.useState(""),[T,O]=j.useState(""),[H,F]=j.useState({}),[G,V]=j.useState([]),W=j.useRef(null),K=j.useRef(null),D=Hi(),I=j.useCallback(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},[]);j.useEffect(()=>{I()},[a,I]);const z=()=>{_(!1),w(!1),C(null),E(""),R(null),P(null),M(""),O(""),F({}),V([])},L=ee=>{ee?_(!0):z()},B=async ee=>{w(!0),C(null),E(ee);try{const Q=await he.brain.organizePreview(ee);if(!Q.success||!Q.organized||!Q.destination)throw new Error(Q.error||"Unable to organize notes.");R(Q.organized),P(Q.destination),M("recommended");const ce=Q.organized.checklist??[],le={};return ce.forEach(ke=>{le[ke]=!1}),F(le),V(GN(ee,Q.organized.markdown||"")),_(!0),!0}catch(Q){const ce=Q instanceof Error?Q.message:String(Q);return C(ce),!1}finally{w(!1)}},U=ee=>{F(Q=>({...Q,[ee]:!Q[ee]}))},Y=Object.values(H).length===0?!0:Object.values(H).every(Boolean),Z=()=>A?q==="custom"?T.trim():A.options.find(Q=>Q.id===q)?.path||"":"",ne=async()=>{if(!k)return;const ee=Z();if(!ee){C("Select a destination path.");return}C(null),w(!0),h(!0);try{await se(N,{destinationPath:ee,organizedMarkdown:k.markdown,organizedTitle:k.title,confirmWrite:!0}),z()}catch(Q){const ce=Q instanceof Error?Q.message:String(Q);C(ce)}finally{w(!1),h(!1)}},te=(ee,Q)=>{const ce=ee.startsWith("+"),le=ee.startsWith("-");return g.jsx("div",{className:`font-terminal text-[11px] px-2 ${ce?"bg-green-900/30 text-green-400":le?"bg-red-900/30 text-red-400":"text-muted-foreground"}`,children:ee},Q)},J=ee=>{const Q=new FileReader;Q.onload=()=>{typeof Q.result=="string"&&d(ce=>[...ce,Q.result])},Q.readAsDataURL(ee)},ie=ee=>{const Q=ee.clipboardData?.items;if(Q){for(const ce of Array.from(Q))if(ce.type.startsWith("image/")){ee.preventDefault();const le=ce.getAsFile();le&&J(le)}}},re=ee=>{const Q=ee.target.files;if(Q){for(const ce of Array.from(Q))ce.type.startsWith("image/")&&J(ce);ee.target.value=""}},fe=async(ee,Q)=>{s(Re=>[...Re,{role:"assistant",content:""}]);const ce=a.map(Re=>({role:Re.role,content:Re.images?.length?$h(Re.content,Re.images):Re.content})).concat([{role:"user",content:$h(ee,Q)}]),ke=(await fetch("/api/brain/quick-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:ce})})).body?.getReader(),ye=new TextDecoder;if(!ke)throw new Error("No response body");let qe="";for(;;){const{done:Re,value:Te}=await ke.read();if(Re)break;qe+=ye.decode(Te,{stream:!0});const bt=qe.split(`
`);qe=bt.pop()??"";for(const _t of bt){if(!_t.startsWith("data: "))continue;const bn=_t.slice(6);if(bn==="[DONE]")break;try{const wt=JSON.parse(bn);if(wt.error){s(Fe=>{const Pe=[...Fe];return Pe[Pe.length-1]={role:"assistant",content:`Error: ${wt.error}`},Pe});return}wt.content&&s(Fe=>{const Pe=[...Fe],Gr=Pe[Pe.length-1];return Pe[Pe.length-1]={...Gr,content:Gr.content+wt.content},Pe})}catch{}}}},se=async(ee,Q)=>{try{const ke={message:ee,syncToObsidian:p==="obsidian"||p==="both",mode:p==="both"?"all":p,destinationPath:Q?.destinationPath,organizedMarkdown:Q?.organizedMarkdown,organizedTitle:Q?.organizedTitle,confirmWrite:Q?.confirmWrite},ye=await he.brain.chat(ke);let qe=ye.response;const Re={cardsCreated:ye.cardsCreated,sessionSaved:ye.sessionSaved,sessionId:ye.sessionId},Te=[];ye.sessionSaved&&Te.push(`Session saved (ID: ${ye.sessionId})`),ye.cardsCreated&&Te.push(`${ye.cardsCreated} Anki cards created`),ye.obsidianSynced&&Te.push("Synced to Obsidian"),ye.obsidianError&&Te.push(`Obsidian error: ${ye.obsidianError}`),Te.length>0&&(qe=`${Te.join(" | ")}

${qe}`),s(bt=>[...bt,{role:"assistant",content:qe,meta:Re}]),D.invalidateQueries({queryKey:["anki","drafts"]}),D.invalidateQueries({queryKey:["brain","metrics"]}),D.invalidateQueries({queryKey:["sessions"]})}catch(ce){s(le=>[...le,{role:"assistant",content:`Error: ${ce}`}])}},ge=async()=>{const ee=c.trim();if(!ee&&u.length===0)return;const Q={role:"user",content:ee,images:[...u]};s(ce=>[...ce,Q]),l(""),d([]),h(!0);try{i==="chat"?await fe(ee,Q.images??[]):p==="obsidian"||p==="both"?await B(ee)||s(le=>[...le,{role:"assistant",content:"Error: Unable to prepare preview."}]):await se(ee)}catch(ce){s(le=>{const ke=le[le.length-1];if(ke?.role==="assistant"&&!ke.content){const ye=[...le];return ye[ye.length-1]={role:"assistant",content:`Error: ${ce}`},ye}return[...le,{role:"assistant",content:`Error: ${ce}`}]})}finally{h(!1)}},Ee=ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),ge())};return n?g.jsxs(g.Fragment,{children:[g.jsx(di,{open:m,onOpenChange:L,children:g.jsxs(hi,{className:"max-w-6xl w-full h-[85vh] bg-black border-2 border-primary rounded-none p-4 overflow-hidden",children:[g.jsxs(pi,{className:"space-y-1",children:[g.jsxs(gi,{className:"font-arcade text-sm text-primary flex items-center gap-2",children:[g.jsx(Gi,{className:"w-4 h-4"}),"ORGANIZE + REVIEW"]}),g.jsx(mi,{className:"font-terminal text-[11px] text-muted-foreground",children:"Review the organized notes, compare to raw, then choose where to save."})]}),S&&g.jsx("div",{className:"border border-red-500/50 bg-red-900/20 text-red-200 font-terminal text-xs p-2 rounded-none",children:S}),g.jsxs("div",{className:"grid grid-cols-3 gap-4 h-[70vh]",children:[g.jsx("div",{className:"col-span-2 flex flex-col gap-3",children:g.jsxs(a2,{defaultValue:"preview",className:"w-full",children:[g.jsxs(s2,{className:"grid grid-cols-3 rounded-none",children:[g.jsx(qo,{value:"preview",className:"rounded-none text-xs",children:"Preview"}),g.jsx(qo,{value:"raw",className:"rounded-none text-xs",children:"Raw"}),g.jsx(qo,{value:"diff",className:"rounded-none text-xs",children:"Diff"})]}),g.jsx(Do,{value:"preview",className:"mt-2",children:g.jsx(an,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-3",children:g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"font-arcade text-xs text-primary",children:k?.title||"Untitled"}),g.jsx(c_,{content:k?.markdown||""})]})})}),g.jsx(Do,{value:"raw",className:"mt-2",children:g.jsx(an,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-3",children:g.jsx("pre",{className:"whitespace-pre-wrap font-terminal text-[11px] text-foreground",children:N})})}),g.jsx(Do,{value:"diff",className:"mt-2",children:g.jsx(an,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-0",children:g.jsx("div",{className:"p-2",children:G.length===0?g.jsx("div",{className:"text-muted-foreground font-terminal text-xs",children:"No diff available."}):G.map((ee,Q)=>te(ee,Q))})})})]})}),g.jsxs("div",{className:"col-span-1 flex flex-col gap-3",children:[g.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[g.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"DESTINATION"}),g.jsx(a_,{value:q,onValueChange:M,className:"space-y-2",children:(A?.options||[]).map(ee=>g.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[g.jsx(s_,{value:ee.id,className:"mt-1"}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"font-terminal text-[11px] text-foreground flex items-center gap-1",children:[ee.label,ee.exists&&g.jsx(vi,{variant:"outline",className:"text-[9px]",children:"existing"})]}),g.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground break-all",children:ee.path||"Custom path"})]})]},ee.id))}),q==="custom"&&g.jsxs("div",{className:"mt-2 space-y-1",children:[g.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground",children:"Custom path"}),g.jsx(Rn,{value:T,onChange:ee=>O(ee.target.value),placeholder:"School/Therapeutic Intervention/Module 01 - Title.md",className:"bg-black border-secondary/60 rounded-none text-xs font-terminal"})]})]}),g.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[g.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"REVIEW CHECKLIST"}),g.jsx("div",{className:"space-y-2",children:(k?.checklist||[]).map(ee=>g.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[g.jsx(Bt,{checked:!!H[ee],onCheckedChange:()=>U(ee)}),g.jsx("span",{className:"font-terminal text-[11px] text-foreground",children:ee})]},ee))})]}),(k?.suggested_links||[]).length>0&&g.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[g.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"SUGGESTED LINKS"}),g.jsx("div",{className:"space-y-1",children:k?.suggested_links.map(ee=>g.jsxs("div",{className:"font-terminal text-[11px] text-muted-foreground",children:["[[",ee,"]]"]},ee))})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(ue,{variant:"outline",className:"flex-1 rounded-none font-terminal text-xs",onClick:()=>z(),disabled:b,children:"Cancel"}),g.jsxs(ue,{className:"flex-1 bg-primary hover:bg-primary/80 rounded-none font-terminal text-xs",onClick:ne,disabled:!Y||b||!Z(),children:[g.jsx(p2,{className:"w-3 h-3 mr-1"}),b?"Saving...":"Confirm & Save"]})]})]})]})]})}),(()=>{const ee=g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"px-3 py-1 border-b border-border flex items-center justify-between gap-2 shrink-0",children:[g.jsxs("div",{className:"flex bg-secondary/40 border border-secondary/60 rounded overflow-hidden mr-2",children:[g.jsxs("button",{onClick:()=>o("chat"),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${i==="chat"?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(bb,{className:"w-3 h-3"})," CHAT"]}),g.jsxs("button",{onClick:()=>o("ingest"),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${i==="ingest"?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(w2,{className:"w-3 h-3"})," INGEST"]})]}),g.jsx("p",{className:"text-[10px] text-muted-foreground truncate flex-1",children:i==="chat"?"Chat with Gemini Flash":"Paste notes to create cards & save sessions"}),i==="ingest"&&g.jsx("div",{className:"flex bg-secondary/40 border border-secondary/60 rounded overflow-hidden shrink-0",children:["anki","obsidian","both"].map(Q=>g.jsxs("button",{onClick:()=>y(Q),className:`flex items-center gap-1 px-2 py-0.5 text-[10px] transition-colors ${p===Q?"bg-primary/30 text-primary":"text-muted-foreground hover:text-foreground"}`,children:[Q==="anki"&&g.jsxs(g.Fragment,{children:[g.jsx(On,{className:"w-3 h-3"})," ANKI"]}),Q==="obsidian"&&g.jsxs(g.Fragment,{children:[g.jsx(Tf,{className:"w-3 h-3"})," OBSIDIAN"]}),Q==="both"&&g.jsx(g.Fragment,{children:"BOTH"})]},Q))}),i==="ingest"&&g.jsx("button",{type:"button",className:"bg-primary hover:bg-primary/80 px-2 py-0.5 rounded-none text-[10px] font-terminal shrink-0",onClick:()=>{navigator.clipboard.writeText(VN),v(!0),setTimeout(()=>v(!1),2e3)},children:x?"Copied!":"Copy Prompt"})]}),g.jsxs("div",{ref:W,className:`${e?"flex-1":"h-80"} overflow-y-auto px-4 py-2 space-y-3`,children:[a.length===0&&g.jsx("p",{className:"text-muted-foreground text-xs text-center py-8",children:i==="chat"?"Ask anything. Paste screenshots with Ctrl+V.":"Paste your study notes to ingest into Brain."}),a.map((Q,ce)=>g.jsx("div",{className:`flex ${Q.role==="user"?"justify-end":"justify-start"}`,children:g.jsxs("div",{className:`max-w-[80%] rounded px-3 py-2 text-base whitespace-pre-wrap ${Q.role==="user"?"bg-primary/20 text-foreground border border-primary/30":"bg-secondary/40 text-foreground border border-secondary/60"}`,children:[Q.images?.map((le,ke)=>g.jsx("img",{src:le,alt:"attached",className:"max-h-32 rounded mb-1"},ke)),Q.content]})},ce)),f&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-secondary/40 border border-secondary/60 rounded px-3 py-2",children:g.jsx(_b,{className:"w-4 h-4 animate-spin text-primary"})})})]}),u.length>0&&g.jsx("div",{className:"px-4 py-1 flex gap-2 flex-wrap shrink-0",children:u.map((Q,ce)=>g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:Q,alt:"pending",className:"h-12 rounded border border-primary/30"}),g.jsx("button",{onClick:()=>d(le=>le.filter((ke,ye)=>ye!==ce)),className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:g.jsx(Mf,{className:"w-3 h-3"})})]},ce))}),g.jsxs("div",{className:"flex items-end gap-2 px-4 py-2 border-t border-border shrink-0",children:[g.jsx("input",{ref:K,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:re}),i==="chat"&&g.jsx(ue,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:()=>K.current?.click(),children:g.jsx(M2,{className:"w-4 h-4 text-primary"})}),g.jsx("textarea",{value:c,onChange:Q=>l(Q.target.value),onKeyDown:Ee,onPaste:ie,placeholder:i==="chat"?"Ask anything... (Ctrl+V to paste images)":"Paste study notes to ingest...",rows:i==="ingest"?3:1,className:"flex-1 bg-transparent border border-input rounded px-3 py-1.5 text-base resize-none focus:outline-none focus:ring-1 focus:ring-ring"}),g.jsx(ue,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:ge,disabled:f,children:g.jsx(n2,{className:"w-4 h-4 text-primary"})})]})]});return e?g.jsx("div",{className:"flex flex-col h-full",children:ee}):g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none mb-4",children:[g.jsxs(tn,{className:"py-2 px-4 flex flex-row items-center justify-between",children:[g.jsx(nn,{className:"text-xs",children:"BRAIN CHAT"}),g.jsx(ue,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(!1),children:g.jsx(l2,{className:"w-4 h-4"})})]}),g.jsx(rn,{className:"p-0",children:ee})]})})()]}):g.jsxs("button",{onClick:()=>r(!0),className:"w-full flex items-center justify-between bg-black/40 border-2 border-primary rounded-none px-4 py-2 mb-4 text-sm text-primary hover:bg-primary/10 transition-colors",children:[g.jsxs("span",{className:"font-arcade text-xs tracking-widest uppercase flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 bg-primary inline-block"}),"BRAIN CHAT"]}),g.jsx(GC,{className:"w-4 h-4"})]})}function WN({workspace:e}){const[n,r]=j.useState(!1);return j.useEffect(()=>{if(!n)return;const i=o=>{o.key==="Escape"&&r(!1)};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[n]),e.currentFile?g.jsxs("div",{className:Ye("flex flex-col",n?"fixed inset-0 z-[100010] bg-black":"h-full"),children:[g.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-secondary/30 bg-black/40",children:[g.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g.jsxs("span",{className:"font-terminal text-xs text-primary truncate",children:[e.currentFile.split("/").pop(),e.hasChanges&&g.jsx("span",{className:"text-yellow-500 ml-1",children:"*"})]}),g.jsx("button",{onClick:()=>{const i=e.obsidianConfig?.vaultName||"Treys School",o=e.currentFile.replace(/\.md$/,"");window.open(`obsidian://open?vault=${encodeURIComponent(i)}&file=${encodeURIComponent(o)}`,"_blank")},className:"text-muted-foreground hover:text-primary shrink-0",title:"Open in Obsidian",children:g.jsx(r2,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(ue,{size:"sm",variant:"ghost",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>e.setPreviewMode(!e.previewMode),children:e.previewMode?"Edit":"Preview"}),g.jsxs(ue,{size:"sm",variant:"ghost",onClick:e.saveFile,disabled:!e.hasChanges||e.isSaving,className:"h-5 px-2 text-[10px] font-terminal",children:[g.jsx(Vi,{className:"w-3 h-3 mr-1"}),e.isSaving?"Saving...":"Save"]}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-5 px-1.5 text-[10px] font-terminal",onClick:()=>r(!n),title:n?"Exit fullscreen":"Fullscreen",children:n?g.jsx(Sb,{className:"w-3 h-3"}):g.jsx(wb,{className:"w-3 h-3"})})]})]}),e.previewMode?g.jsx("div",{className:"flex-1 p-3 bg-black/60 font-terminal overflow-y-auto",children:g.jsx(c_,{content:e.fileContent,onWikilinkClick:e.handleWikilinkClick})}):g.jsx("textarea",{value:e.fileContent,onChange:i=>e.setFileContent(i.target.value),className:"flex-1 w-full p-3 bg-black/60 font-terminal text-sm resize-none focus:outline-none focus:ring-1 focus:ring-primary overflow-y-auto min-h-[200px]",placeholder:"File content...",style:{height:"100%"}})]}):g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-muted-foreground font-terminal text-xs gap-2",children:[g.jsx(Gi,{className:"w-8 h-8 opacity-30"}),g.jsx("p",{children:"Select a file from the vault sidebar"}),g.jsx("p",{className:"text-[10px]",children:"or create a new note"})]})}function Fh({workspace:e}){return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"flex items-center gap-0 border-b border-primary/40 bg-black/40 shrink-0",children:[g.jsxs("button",{onClick:()=>e.setCenterMode("edit"),className:`flex items-center gap-1 px-3 py-1.5 font-arcade text-[10px] transition-colors ${e.centerMode==="edit"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(yi,{className:"w-3 h-3"}),"EDIT"]}),g.jsxs("button",{onClick:()=>e.setCenterMode("chat"),className:`flex items-center gap-1 px-3 py-1.5 font-arcade text-[10px] transition-colors ${e.centerMode==="chat"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(bb,{className:"w-3 h-3"}),"CHAT"]})]}),g.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.centerMode==="edit"?g.jsx(WN,{workspace:e}):g.jsx(UN,{embedded:!0})})]})}function KN({totalCards:e,compact:n}){const[r,i]=j.useState(new Set),[o,a]=j.useState(null),[s,c]=j.useState({front:"",back:"",deckName:""}),l=Hi(),{toast:u}=Bi(),{data:d,isLoading:f,refetch:h}=Me({queryKey:["anki","status"],queryFn:he.anki.getStatus,refetchInterval:3e4}),{data:p}=Me({queryKey:["anki","due"],queryFn:he.anki.getDue,enabled:d?.connected===!0}),{data:y=[],refetch:x}=Me({queryKey:["anki","drafts"],queryFn:he.anki.getDrafts}),v=y.filter(E=>E.status==="pending"),m=At({mutationFn:he.anki.sync,onSuccess:E=>{l.invalidateQueries({queryKey:["anki"]}),x(),u({title:"Anki sync complete",description:E.output||"Cards synced successfully"})},onError:E=>{u({title:"Anki sync failed",description:E.message,variant:"destructive"})}}),_=At({mutationFn:E=>he.anki.approveDraft(E),onSuccess:()=>x()}),b=At({mutationFn:E=>he.anki.deleteDraft(E),onMutate:async E=>{await l.cancelQueries({queryKey:["anki","drafts"]});const k=l.getQueryData(["anki","drafts"]);return l.setQueryData(["anki","drafts"],R=>R?R.filter(A=>A.id!==E):[]),{prev:k}},onError:(E,k,R)=>{R?.prev&&l.setQueryData(["anki","drafts"],R.prev)},onSettled:()=>x()}),w=At({mutationFn:({id:E,data:k})=>he.anki.updateDraft(E,k),onSuccess:()=>{x(),a(null)}}),S=E=>{a(E.id),c({front:E.front,back:E.back,deckName:E.deckName})},C=()=>{o!==null&&w.mutate({id:o,data:s})},N=g.jsx("div",{className:n?"p-3 space-y-3":"p-4 space-y-3",children:f?g.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Checking Anki..."}):d?.connected?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-4 font-terminal text-xs",children:[g.jsx(vi,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500",children:"Connected"}),g.jsxs("span",{className:"text-muted-foreground",children:["Cards: ",g.jsx("span",{className:"text-primary font-arcade",children:e})]}),g.jsxs("span",{className:"text-muted-foreground",children:["Due: ",g.jsx("span",{className:"text-secondary font-arcade",children:p?.dueCount||0})]}),g.jsxs("span",{className:"text-muted-foreground",children:["Reviewed: ",g.jsx("span",{className:"font-arcade",children:d.reviewedToday||0})]}),g.jsxs("span",{className:"text-muted-foreground",children:["Decks: ",g.jsx("span",{className:"font-arcade",children:d.decks?.length||0})]})]}),g.jsxs("div",{className:"pt-2 flex gap-2",children:[g.jsxs(ue,{size:"sm",variant:"outline",className:"flex-1 font-terminal text-xs",onClick:()=>h(),children:[g.jsx(Oo,{className:"w-3 h-3 mr-1"}),"Refresh"]}),g.jsxs(ue,{size:"sm",className:"flex-1 font-terminal text-xs bg-secondary hover:bg-secondary/80",onClick:()=>m.mutate(),disabled:m.isPending,children:[m.isPending?g.jsx(_b,{className:"w-3 h-3 mr-1 animate-spin"}):g.jsx(Oo,{className:"w-3 h-3 mr-1"}),m.isPending?"Syncing...":"Sync Cards"]})]}),m.isError&&g.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/30 text-red-400 font-terminal text-[10px]",children:[g.jsx("span",{className:"font-arcade",children:"SYNC ERROR:"})," ",m.error?.message||"Unknown error",g.jsx(ue,{size:"sm",variant:"outline",className:"ml-2 h-5 px-2 text-[10px] font-terminal border-red-500/50 text-red-400",onClick:()=>m.mutate(),disabled:m.isPending,children:"Retry"})]}),v.length>0&&g.jsxs("div",{className:"pt-3 border-t border-secondary/30",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:"font-arcade text-[10px] text-yellow-400",children:["PENDING CARDS (",v.length,")"]}),g.jsx("div",{className:"flex gap-1",children:g.jsx(ue,{size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>{r.size===v.length?i(new Set):i(new Set(v.map(E=>E.id)))},children:r.size===v.length?"None":"All"})})]}),r.size>0&&g.jsxs("div",{className:"flex gap-1 mb-2",children:[g.jsxs(ue,{size:"sm",className:"h-6 px-2 text-[10px] font-terminal bg-green-600 hover:bg-green-700",onClick:()=>{r.forEach(E=>_.mutate(E)),i(new Set)},children:[g.jsx(To,{className:"w-3 h-3 mr-1"}),"Approve (",r.size,")"]}),g.jsxs(ue,{size:"sm",variant:"destructive",className:"h-6 px-2 text-[10px] font-terminal",onClick:()=>{r.forEach(E=>b.mutate(E)),i(new Set)},children:[g.jsx(vr,{className:"w-3 h-3 mr-1"}),"Delete (",r.size,")"]})]}),g.jsx(an,{className:"h-[140px]",children:g.jsx("div",{className:"space-y-2",children:v.map(E=>g.jsx("div",{className:`p-2 bg-black/40 border text-xs ${r.has(E.id)?"border-primary":"border-secondary/30"}`,children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Bt,{checked:r.has(E.id),onCheckedChange:k=>{const R=new Set(r);k?R.add(E.id):R.delete(E.id),i(R)},className:"mt-1 border-secondary data-[state=checked]:bg-primary"}),g.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[g.jsx("div",{className:"font-terminal text-primary truncate",children:E.front}),g.jsx("div",{className:"font-terminal text-muted-foreground mt-1 truncate",children:E.back}),g.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.jsx(vi,{variant:"outline",className:"text-[9px] border-blue-500/50 text-blue-400 shrink-0",children:E.deckName}),g.jsx(ue,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>S(E),title:"Edit card",children:g.jsx(yi,{className:"w-3 h-3"})}),g.jsx(ue,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-green-500/50 text-green-400 hover:bg-green-500/20",onClick:()=>_.mutate(E.id),title:"Approve card",children:g.jsx(To,{className:"w-3 h-3"})}),g.jsx(ue,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>b.mutate(E.id),title:"Delete card",children:g.jsx(vr,{className:"w-3 h-3"})})]})]})]})},E.id))})})]})]}):g.jsxs("div",{className:"text-center space-y-2",children:[g.jsx("p",{className:"font-terminal text-xs text-red-400",children:d?.error||"Anki not connected"}),g.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Anki with AnkiConnect plugin"}),g.jsxs(ue,{size:"sm",variant:"outline",className:"font-terminal text-xs",onClick:()=>h(),children:[g.jsx(Oo,{className:"w-3 h-3 mr-1"}),"Retry"]})]})});return g.jsxs(g.Fragment,{children:[n?N:g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-3",children:[g.jsx(On,{className:"w-4 h-4"}),"ANKI INTEGRATION",d?.connected?g.jsx(To,{className:"w-3 h-3 text-green-500 ml-auto"}):g.jsx(Mf,{className:"w-3 h-3 text-red-500 ml-auto"})]})}),g.jsx(rn,{className:"p-0",children:N})]}),g.jsx(di,{open:o!==null,onOpenChange:E=>{E||a(null)},children:g.jsxs(hi,{"data-modal":"brain-edit-draft",className:"bg-black border-2 border-primary rounded-none max-w-lg translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[g.jsxs(pi,{children:[g.jsxs(gi,{className:"font-arcade text-primary flex items-center gap-2",children:[g.jsx(yi,{className:"w-5 h-5"}),"EDIT CARD"]}),g.jsx(mi,{className:"font-terminal text-muted-foreground",children:"Edit card content and select target deck"})]}),g.jsxs("div",{className:"space-y-4 font-terminal",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm text-muted-foreground",children:"Front (Question)"}),g.jsx(If,{value:s.front,onChange:E=>c(k=>({...k,front:E.target.value})),placeholder:"Card front...",className:"rounded-none border-secondary min-h-[80px]"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm text-muted-foreground",children:"Back (Answer)"}),g.jsx(If,{value:s.back,onChange:E=>c(k=>({...k,back:E.target.value})),placeholder:"Card back...",className:"rounded-none border-secondary min-h-[80px]"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm text-muted-foreground",children:"Target Deck"}),g.jsxs(u2,{value:s.deckName,onValueChange:E=>c(k=>({...k,deckName:E})),children:[g.jsx(f2,{className:"rounded-none border-secondary",children:g.jsx(d2,{placeholder:"Select deck"})}),g.jsxs(h2,{className:"rounded-none border-secondary bg-black max-h-[200px]",children:[g.jsx(Kt,{value:"PT::EBP",children:"PT::EBP (Evidence Based Practice)"}),g.jsx(Kt,{value:"PT::ExPhys",children:"PT::ExPhys (Exercise Physiology)"}),g.jsx(Kt,{value:"PT::MS1",children:"PT::MS1 (Movement Science 1)"}),g.jsx(Kt,{value:"PT::Neuro",children:"PT::Neuro (Neuroscience)"}),g.jsx(Kt,{value:"PT::TI",children:"PT::TI (Therapeutic Intervention)"}),g.jsx(Kt,{value:"PT::General",children:"PT::General"}),d?.decks?.filter(E=>!E.startsWith("PT::")).map(E=>g.jsx(Kt,{value:E,children:E},E))]})]}),g.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:["Current: ",g.jsx("span",{className:"text-blue-400",children:s.deckName})]})]})]}),g.jsxs(UC,{className:"gap-2",children:[g.jsxs(ue,{variant:"outline",onClick:()=>a(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[g.jsx(Mf,{className:"w-4 h-4 mr-2"}),"Cancel"]}),g.jsxs(ue,{onClick:C,disabled:w.isPending,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[g.jsx(Vi,{className:"w-4 h-4 mr-2"}),w.isPending?"Saving...":"Save"]})]})]})})]})}function Ae(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,i;r<e.length;r++)(i=Ae(e[r]))!==""&&(n+=(n&&" ")+i);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var YN={value:()=>{}};function Mr(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new ai(r)}function ai(e){this._=e}function XN(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}ai.prototype=Mr.prototype={constructor:ai,on:function(e,n){var r=this._,i=XN(e+"",r),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=ZN(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(o=(e=i[a]).type)r[o]=Hh(r[o],e.name,n);else if(n==null)for(o in r)r[o]=Hh(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new ai(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,a;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}};function ZN(e,n){for(var r=0,i=e.length,o;r<i;++r)if((o=e[r]).name===n)return o.value}function Hh(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=YN,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}var Df="http://www.w3.org/1999/xhtml";const Bh={svg:"http://www.w3.org/2000/svg",xhtml:Df,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ji(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Bh.hasOwnProperty(n)?{space:Bh[n],local:e}:e}function JN(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Df&&n.documentElement.namespaceURI===Df?n.createElement(e):n.createElementNS(r,e)}}function QN(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function l_(e){var n=Ji(e);return(n.local?QN:JN)(n)}function eE(){}function xd(e){return e==null?eE:function(){return this.querySelector(e)}}function tE(e){typeof e!="function"&&(e=xd(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u,d=0;d<s;++d)(l=a[d])&&(u=e.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),c[d]=u);return new Xe(i,this._parents)}function nE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rE(){return[]}function u_(e){return e==null?rE:function(){return this.querySelectorAll(e)}}function iE(e){return function(){return nE(e.apply(this,arguments))}}function oE(e){typeof e=="function"?e=iE(e):e=u_(e);for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s=n[a],c=s.length,l,u=0;u<c;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),o.push(l));return new Xe(i,o)}function f_(e){return function(){return this.matches(e)}}function d_(e){return function(n){return n.matches(e)}}var aE=Array.prototype.find;function sE(e){return function(){return aE.call(this.children,e)}}function cE(){return this.firstElementChild}function lE(e){return this.select(e==null?cE:sE(typeof e=="function"?e:d_(e)))}var uE=Array.prototype.filter;function fE(){return Array.from(this.children)}function dE(e){return function(){return uE.call(this.children,e)}}function hE(e){return this.selectAll(e==null?fE:dE(typeof e=="function"?e:d_(e)))}function pE(e){typeof e!="function"&&(e=f_(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&c.push(l);return new Xe(i,this._parents)}function h_(e){return new Array(e.length)}function gE(){return new Xe(this._enter||this._groups.map(h_),this._parents)}function wi(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}wi.prototype={constructor:wi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function mE(e){return function(){return e}}function yE(e,n,r,i,o,a){for(var s=0,c,l=n.length,u=a.length;s<u;++s)(c=n[s])?(c.__data__=a[s],i[s]=c):r[s]=new wi(e,a[s]);for(;s<l;++s)(c=n[s])&&(o[s]=c)}function vE(e,n,r,i,o,a,s){var c,l,u=new Map,d=n.length,f=a.length,h=new Array(d),p;for(c=0;c<d;++c)(l=n[c])&&(h[c]=p=s.call(l,l.__data__,c,n)+"",u.has(p)?o[c]=l:u.set(p,l));for(c=0;c<f;++c)p=s.call(e,a[c],c,a)+"",(l=u.get(p))?(i[c]=l,l.__data__=a[c],u.delete(p)):r[c]=new wi(e,a[c]);for(c=0;c<d;++c)(l=n[c])&&u.get(h[c])===l&&(o[c]=l)}function xE(e){return e.__data__}function bE(e,n){if(!arguments.length)return Array.from(this,xE);var r=n?vE:yE,i=this._parents,o=this._groups;typeof e!="function"&&(e=mE(e));for(var a=o.length,s=new Array(a),c=new Array(a),l=new Array(a),u=0;u<a;++u){var d=i[u],f=o[u],h=f.length,p=_E(e.call(d,d&&d.__data__,u,i)),y=p.length,x=c[u]=new Array(y),v=s[u]=new Array(y),m=l[u]=new Array(h);r(d,f,x,v,m,p,n);for(var _=0,b=0,w,S;_<y;++_)if(w=x[_]){for(_>=b&&(b=_+1);!(S=v[b])&&++b<y;);w._next=S||null}}return s=new Xe(s,i),s._enter=c,s._exit=l,s}function _E(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wE(){return new Xe(this._exit||this._groups.map(h_),this._parents)}function SE(e,n,r){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),r==null?a.remove():r(a),i&&o?i.merge(o).order():o}function CE(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,a=i.length,s=Math.min(o,a),c=new Array(o),l=0;l<s;++l)for(var u=r[l],d=i[l],f=u.length,h=c[l]=new Array(f),p,y=0;y<f;++y)(p=u[y]||d[y])&&(h[y]=p);for(;l<o;++l)c[l]=r[l];return new Xe(c,this._parents)}function NE(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function EE(e){e||(e=kE);function n(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a){for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,d=0;d<c;++d)(u=s[d])&&(l[d]=u);l.sort(n)}return new Xe(o,this._parents).order()}function kE(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function RE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function AE(){return Array.from(this)}function jE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function PE(){let e=0;for(const n of this)++e;return e}function ME(){return!this.node()}function IE(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length,c;a<s;++a)(c=o[a])&&e.call(c,c.__data__,a,o);return this}function TE(e){return function(){this.removeAttribute(e)}}function OE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qE(e,n){return function(){this.setAttribute(e,n)}}function DE(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function zE(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function LE(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function $E(e,n){var r=Ji(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?OE:TE:typeof n=="function"?r.local?LE:zE:r.local?DE:qE)(r,n))}function p_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FE(e){return function(){this.style.removeProperty(e)}}function HE(e,n,r){return function(){this.style.setProperty(e,n,r)}}function BE(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function VE(e,n,r){return arguments.length>1?this.each((n==null?FE:typeof n=="function"?BE:HE)(e,n,r??"")):qn(this.node(),e)}function qn(e,n){return e.style.getPropertyValue(n)||p_(e).getComputedStyle(e,null).getPropertyValue(n)}function GE(e){return function(){delete this[e]}}function UE(e,n){return function(){this[e]=n}}function WE(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function KE(e,n){return arguments.length>1?this.each((n==null?GE:typeof n=="function"?WE:UE)(e,n)):this.node()[e]}function g_(e){return e.trim().split(/^|\s+/)}function bd(e){return e.classList||new m_(e)}function m_(e){this._node=e,this._names=g_(e.getAttribute("class")||"")}m_.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function y_(e,n){for(var r=bd(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function v_(e,n){for(var r=bd(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function YE(e){return function(){y_(this,e)}}function XE(e){return function(){v_(this,e)}}function ZE(e,n){return function(){(n.apply(this,arguments)?y_:v_)(this,e)}}function JE(e,n){var r=g_(e+"");if(arguments.length<2){for(var i=bd(this.node()),o=-1,a=r.length;++o<a;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof n=="function"?ZE:n?YE:XE)(r,n))}function QE(){this.textContent=""}function ek(e){return function(){this.textContent=e}}function tk(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function nk(e){return arguments.length?this.each(e==null?QE:(typeof e=="function"?tk:ek)(e)):this.node().textContent}function rk(){this.innerHTML=""}function ik(e){return function(){this.innerHTML=e}}function ok(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ak(e){return arguments.length?this.each(e==null?rk:(typeof e=="function"?ok:ik)(e)):this.node().innerHTML}function sk(){this.nextSibling&&this.parentNode.appendChild(this)}function ck(){return this.each(sk)}function lk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uk(){return this.each(lk)}function fk(e){var n=typeof e=="function"?e:l_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function dk(){return null}function hk(e,n){var r=typeof e=="function"?e:l_(e),i=n==null?dk:typeof n=="function"?n:xd(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function pk(){var e=this.parentNode;e&&e.removeChild(this)}function gk(){return this.each(pk)}function mk(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function yk(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function vk(e){return this.select(e?yk:mk)}function xk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bk(e){return function(n){e.call(this,n,this.__data__)}}function _k(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function wk(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,o=n.length,a;r<o;++r)a=n[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):n[++i]=a;++i?n.length=i:delete this.__on}}}function Sk(e,n,r){return function(){var i=this.__on,o,a=bk(n);if(i){for(var s=0,c=i.length;s<c;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=n;return}}this.addEventListener(e.type,a,r),o={type:e.type,name:e.name,value:n,listener:a,options:r},i?i.push(o):this.__on=[o]}}function Ck(e,n,r){var i=_k(e+""),o,a=i.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,u=c.length,d;l<u;++l)for(o=0,d=c[l];o<a;++o)if((s=i[o]).type===d.type&&s.name===d.name)return d.value}return}for(c=n?Sk:wk,o=0;o<a;++o)this.each(c(i[o],n,r));return this}function x_(e,n,r){var i=p_(e),o=i.CustomEvent;typeof o=="function"?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function Nk(e,n){return function(){return x_(this,e,n)}}function Ek(e,n){return function(){return x_(this,e,n.apply(this,arguments))}}function kk(e,n){return this.each((typeof n=="function"?Ek:Nk)(e,n))}function*Rk(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var b_=[null];function Xe(e,n){this._groups=e,this._parents=n}function Ir(){return new Xe([[document.documentElement]],b_)}function Ak(){return this}Xe.prototype=Ir.prototype={constructor:Xe,select:tE,selectAll:oE,selectChild:lE,selectChildren:hE,filter:pE,data:bE,enter:gE,exit:wE,join:SE,merge:CE,selection:Ak,order:NE,sort:EE,call:RE,nodes:AE,node:jE,size:PE,empty:ME,each:IE,attr:$E,style:VE,property:KE,classed:JE,text:nk,html:ak,raise:ck,lower:uk,append:fk,insert:hk,remove:gk,clone:vk,datum:xk,on:Ck,dispatch:kk,[Symbol.iterator]:Rk};function ze(e){return typeof e=="string"?new Xe([[document.querySelector(e)]],[document.documentElement]):new Xe([[e]],b_)}function jk(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Qe(e,n){if(e=jk(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const Pk={passive:!1},_r={capture:!0,passive:!1};function Go(e){e.stopImmediatePropagation()}function In(e){e.preventDefault(),e.stopImmediatePropagation()}function __(e){var n=e.document.documentElement,r=ze(e).on("dragstart.drag",In,_r);"onselectstart"in n?r.on("selectstart.drag",In,_r):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function w_(e,n){var r=e.document.documentElement,i=ze(e).on("dragstart.drag",null);n&&(i.on("click.drag",In,_r),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Kr=e=>()=>e;function zf(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:c,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}zf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mk(e){return!e.ctrlKey&&!e.button}function Ik(){return this.parentNode}function Tk(e,n){return n??{x:e.x,y:e.y}}function Ok(){return navigator.maxTouchPoints||"ontouchstart"in this}function _d(){var e=Mk,n=Ik,r=Tk,i=Ok,o={},a=Mr("start","drag","end"),s=0,c,l,u,d,f=0;function h(w){w.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,Pk).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,S){if(!(d||!e.call(this,w,S))){var C=b(this,n.call(this,w,S),w,S,"mouse");C&&(ze(w.view).on("mousemove.drag",y,_r).on("mouseup.drag",x,_r),__(w.view),Go(w),u=!1,c=w.clientX,l=w.clientY,C("start",w))}}function y(w){if(In(w),!u){var S=w.clientX-c,C=w.clientY-l;u=S*S+C*C>f}o.mouse("drag",w)}function x(w){ze(w.view).on("mousemove.drag mouseup.drag",null),w_(w.view,u),In(w),o.mouse("end",w)}function v(w,S){if(e.call(this,w,S)){var C=w.changedTouches,N=n.call(this,w,S),E=C.length,k,R;for(k=0;k<E;++k)(R=b(this,N,w,S,C[k].identifier,C[k]))&&(Go(w),R("start",w,C[k]))}}function m(w){var S=w.changedTouches,C=S.length,N,E;for(N=0;N<C;++N)(E=o[S[N].identifier])&&(In(w),E("drag",w,S[N]))}function _(w){var S=w.changedTouches,C=S.length,N,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<C;++N)(E=o[S[N].identifier])&&(Go(w),E("end",w,S[N]))}function b(w,S,C,N,E,k){var R=a.copy(),A=Qe(k||C,S),P,q,M;if((M=r.call(w,new zf("beforestart",{sourceEvent:C,target:h,identifier:E,active:s,x:A[0],y:A[1],dx:0,dy:0,dispatch:R}),N))!=null)return P=M.x-A[0]||0,q=M.y-A[1]||0,function T(O,H,F){var G=A,V;switch(O){case"start":o[E]=T,V=s++;break;case"end":delete o[E],--s;case"drag":A=Qe(F||H,S),V=s;break}R.call(O,w,new zf(O,{sourceEvent:H,subject:M,target:h,identifier:E,active:V,x:A[0]+P,y:A[1]+q,dx:A[0]-G[0],dy:A[1]-G[1],dispatch:R}),N)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Kr(!!w),h):e},h.container=function(w){return arguments.length?(n=typeof w=="function"?w:Kr(w),h):n},h.subject=function(w){return arguments.length?(r=typeof w=="function"?w:Kr(w),h):r},h.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Kr(!!w),h):i},h.on=function(){var w=a.on.apply(a,arguments);return w===a?h:w},h.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,h):Math.sqrt(f)},h}function wd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function S_(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function Tr(){}var wr=.7,Si=1/wr,Tn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qk=/^#([0-9a-f]{3,8})$/,Dk=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),zk=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Lk=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Sr}\\)$`),$k=new RegExp(`^rgba\\(${gt},${gt},${gt},${Sr}\\)$`),Fk=new RegExp(`^hsl\\(${Sr},${gt},${gt}\\)$`),Hk=new RegExp(`^hsla\\(${Sr},${gt},${gt},${Sr}\\)$`),Vh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wd(Tr,dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gh,formatHex:Gh,formatHex8:Bk,formatHsl:Vk,formatRgb:Uh,toString:Uh});function Gh(){return this.rgb().formatHex()}function Bk(){return this.rgb().formatHex8()}function Vk(){return C_(this).formatHsl()}function Uh(){return this.rgb().formatRgb()}function dn(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=qk.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Wh(n):r===3?new He(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Yr(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Yr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Dk.exec(e))?new He(n[1],n[2],n[3],1):(n=zk.exec(e))?new He(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Lk.exec(e))?Yr(n[1],n[2],n[3],n[4]):(n=$k.exec(e))?Yr(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Fk.exec(e))?Xh(n[1],n[2]/100,n[3]/100,1):(n=Hk.exec(e))?Xh(n[1],n[2]/100,n[3]/100,n[4]):Vh.hasOwnProperty(e)?Wh(Vh[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function Wh(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Yr(e,n,r,i){return i<=0&&(e=n=r=NaN),new He(e,n,r,i)}function Gk(e){return e instanceof Tr||(e=dn(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function Lf(e,n,r,i){return arguments.length===1?Gk(e):new He(e,n,r,i??1)}function He(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}wd(He,Lf,S_(Tr,{brighter(e){return e=e==null?Si:Math.pow(Si,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(cn(this.r),cn(this.g),cn(this.b),Ci(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kh,formatHex:Kh,formatHex8:Uk,formatRgb:Yh,toString:Yh}));function Kh(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function Uk(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yh(){const e=Ci(this.opacity);return`${e===1?"rgb(":"rgba("}${cn(this.r)}, ${cn(this.g)}, ${cn(this.b)}${e===1?")":`, ${e})`}`}function Ci(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return e=cn(e),(e<16?"0":"")+e.toString(16)}function Xh(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new ot(e,n,r,i)}function C_(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof Tr||(e=dn(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),s=NaN,c=a-o,l=(a+o)/2;return c?(n===a?s=(r-i)/c+(r<i)*6:r===a?s=(i-n)/c+2:s=(n-r)/c+4,c/=l<.5?a+o:2-a-o,s*=60):c=l>0&&l<1?0:s,new ot(s,c,l,e.opacity)}function Wk(e,n,r,i){return arguments.length===1?C_(e):new ot(e,n,r,i??1)}function ot(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}wd(ot,Wk,S_(Tr,{brighter(e){return e=e==null?Si:Math.pow(Si,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new He(Uo(e>=240?e-240:e+120,o,i),Uo(e,o,i),Uo(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new ot(Zh(this.h),Xr(this.s),Xr(this.l),Ci(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ci(this.opacity);return`${e===1?"hsl(":"hsla("}${Zh(this.h)}, ${Xr(this.s)*100}%, ${Xr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zh(e){return e=(e||0)%360,e<0?e+360:e}function Xr(e){return Math.max(0,Math.min(1,e||0))}function Uo(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Sd=e=>()=>e;function Kk(e,n){return function(r){return e+r*n}}function Yk(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function Xk(e){return(e=+e)==1?N_:function(n,r){return r-n?Yk(n,r,e):Sd(isNaN(n)?r:n)}}function N_(e,n){var r=n-e;return r?Kk(e,r):Sd(isNaN(e)?n:e)}const Ni=(function e(n){var r=Xk(n);function i(o,a){var s=r((o=Lf(o)).r,(a=Lf(a)).r),c=r(o.g,a.g),l=r(o.b,a.b),u=N_(o.opacity,a.opacity);return function(d){return o.r=s(d),o.g=c(d),o.b=l(d),o.opacity=u(d),o+""}}return i.gamma=e,i})(1);function Zk(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,i=n.slice(),o;return function(a){for(o=0;o<r;++o)i[o]=e[o]*(1-a)+n[o]*a;return i}}function Jk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qk(e,n){var r=n?n.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r),s;for(s=0;s<i;++s)o[s]=hr(e[s],n[s]);for(;s<r;++s)a[s]=n[s];return function(c){for(s=0;s<i;++s)a[s]=o[s](c);return a}}function eR(e,n){var r=new Date;return e=+e,n=+n,function(i){return r.setTime(e*(1-i)+n*i),r}}function ht(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function tR(e,n){var r={},i={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?r[o]=hr(e[o],n[o]):i[o]=n[o];return function(a){for(o in r)i[o]=r[o](a);return i}}var $f=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wo=new RegExp($f.source,"g");function nR(e){return function(){return e}}function rR(e){return function(n){return e(n)+""}}function E_(e,n){var r=$f.lastIndex=Wo.lastIndex=0,i,o,a,s=-1,c=[],l=[];for(e=e+"",n=n+"";(i=$f.exec(e))&&(o=Wo.exec(n));)(a=o.index)>r&&(a=n.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(i=i[0])===(o=o[0])?c[s]?c[s]+=o:c[++s]=o:(c[++s]=null,l.push({i:s,x:ht(i,o)})),r=Wo.lastIndex;return r<n.length&&(a=n.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?l[0]?rR(l[0].x):nR(n):(n=l.length,function(u){for(var d=0,f;d<n;++d)c[(f=l[d]).i]=f.x(u);return c.join("")})}function hr(e,n){var r=typeof n,i;return n==null||r==="boolean"?Sd(n):(r==="number"?ht:r==="string"?(i=dn(n))?(n=i,Ni):E_:n instanceof dn?Ni:n instanceof Date?eR:Jk(n)?Zk:Array.isArray(n)?Qk:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?tR:ht)(e,n)}var Jh=180/Math.PI,Ff={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function k_(e,n,r,i,o,a){var s,c,l;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(l=e*r+n*i)&&(r-=e*l,i-=n*l),(c=Math.sqrt(r*r+i*i))&&(r/=c,i/=c,l/=c),e*i<n*r&&(e=-e,n=-n,l=-l,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(n,e)*Jh,skewX:Math.atan(l)*Jh,scaleX:s,scaleY:c}}var Zr;function iR(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Ff:k_(n.a,n.b,n.c,n.d,n.e,n.f)}function oR(e){return e==null||(Zr||(Zr=document.createElementNS("http://www.w3.org/2000/svg","g")),Zr.setAttribute("transform",e),!(e=Zr.transform.baseVal.consolidate()))?Ff:(e=e.matrix,k_(e.a,e.b,e.c,e.d,e.e,e.f))}function R_(e,n,r,i){function o(u){return u.length?u.pop()+" ":""}function a(u,d,f,h,p,y){if(u!==f||d!==h){var x=p.push("translate(",null,n,null,r);y.push({i:x-4,x:ht(u,f)},{i:x-2,x:ht(d,h)})}else(f||h)&&p.push("translate("+f+n+h+r)}function s(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,i)-2,x:ht(u,d)})):d&&f.push(o(f)+"rotate("+d+i)}function c(u,d,f,h){u!==d?h.push({i:f.push(o(f)+"skewX(",null,i)-2,x:ht(u,d)}):d&&f.push(o(f)+"skewX("+d+i)}function l(u,d,f,h,p,y){if(u!==f||d!==h){var x=p.push(o(p)+"scale(",null,",",null,")");y.push({i:x-4,x:ht(u,f)},{i:x-2,x:ht(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,f,h),s(u.rotate,d.rotate,f,h),c(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var y=-1,x=h.length,v;++y<x;)f[(v=h[y]).i]=v.x(p);return f.join("")}}}var aR=R_(iR,"px, ","px)","deg)"),sR=R_(oR,", ",")",")"),cR=1e-12;function Qh(e){return((e=Math.exp(e))+1/e)/2}function lR(e){return((e=Math.exp(e))-1/e)/2}function uR(e){return((e=Math.exp(2*e))-1)/(e+1)}const si=(function e(n,r,i){function o(a,s){var c=a[0],l=a[1],u=a[2],d=s[0],f=s[1],h=s[2],p=d-c,y=f-l,x=p*p+y*y,v,m;if(x<cR)m=Math.log(h/u)/n,v=function(N){return[c+N*p,l+N*y,u*Math.exp(n*N*m)]};else{var _=Math.sqrt(x),b=(h*h-u*u+i*x)/(2*u*r*_),w=(h*h-u*u-i*x)/(2*h*r*_),S=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(w*w+1)-w);m=(C-S)/n,v=function(N){var E=N*m,k=Qh(S),R=u/(r*_)*(k*uR(n*E+S)-lR(S));return[c+R*p,l+R*y,u*k/Qh(n*E+S)]}}return v.duration=m*1e3*n/Math.SQRT2,v}return o.rho=function(a){var s=Math.max(.001,+a),c=s*s,l=c*c;return e(s,c,l)},o})(Math.SQRT2,2,4);var Dn=0,ar=0,Xn=0,A_=1e3,Ei,sr,ki=0,hn=0,Qi=0,Cr=typeof performance=="object"&&performance.now?performance:Date,j_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cd(){return hn||(j_(fR),hn=Cr.now()+Qi)}function fR(){hn=0}function Ri(){this._call=this._time=this._next=null}Ri.prototype=Nd.prototype={constructor:Ri,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Cd():+r)+(n==null?0:+n),!this._next&&sr!==this&&(sr?sr._next=this:Ei=this,sr=this),this._call=e,this._time=r,Hf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hf())}};function Nd(e,n,r){var i=new Ri;return i.restart(e,n,r),i}function dR(){Cd(),++Dn;for(var e=Ei,n;e;)(n=hn-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Dn}function ep(){hn=(ki=Cr.now())+Qi,Dn=ar=0;try{dR()}finally{Dn=0,pR(),hn=0}}function hR(){var e=Cr.now(),n=e-ki;n>A_&&(Qi-=n,ki=e)}function pR(){for(var e,n=Ei,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Ei=r);sr=e,Hf(i)}function Hf(e){if(!Dn){ar&&(ar=clearTimeout(ar));var n=e-hn;n>24?(e<1/0&&(ar=setTimeout(ep,e-Cr.now()-Qi)),Xn&&(Xn=clearInterval(Xn))):(Xn||(ki=Cr.now(),Xn=setInterval(hR,A_)),Dn=1,j_(ep))}}function tp(e,n,r){var i=new Ri;return n=n==null?0:+n,i.restart(o=>{i.stop(),e(o+n)},n,r),i}var gR=Mr("start","end","cancel","interrupt"),mR=[],P_=0,np=1,Bf=2,ci=3,rp=4,Vf=5,li=6;function eo(e,n,r,i,o,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;yR(e,r,{name:n,index:i,group:o,on:gR,tween:mR,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:P_})}function Ed(e,n){var r=ft(e,n);if(r.state>P_)throw new Error("too late; already scheduled");return r}function vt(e,n){var r=ft(e,n);if(r.state>ci)throw new Error("too late; already running");return r}function ft(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function yR(e,n,r){var i=e.__transition,o;i[n]=r,r.timer=Nd(a,0,r.time);function a(u){r.state=np,r.timer.restart(s,r.delay,r.time),r.delay<=u&&s(u-r.delay)}function s(u){var d,f,h,p;if(r.state!==np)return l();for(d in i)if(p=i[d],p.name===r.name){if(p.state===ci)return tp(s);p.state===rp?(p.state=li,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[d]):+d<n&&(p.state=li,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[d])}if(tp(function(){r.state===ci&&(r.state=rp,r.timer.restart(c,r.delay,r.time),c(u))}),r.state=Bf,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Bf){for(r.state=ci,o=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(o[++f]=p);o.length=f+1}}function c(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=Vf,1),f=-1,h=o.length;++f<h;)o[f].call(e,d);r.state===Vf&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=li,r.timer.stop(),delete i[n];for(var u in i)return;delete e.__transition}}function ui(e,n){var r=e.__transition,i,o,a=!0,s;if(r){n=n==null?null:n+"";for(s in r){if((i=r[s]).name!==n){a=!1;continue}o=i.state>Bf&&i.state<Vf,i.state=li,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[s]}a&&delete e.__transition}}function vR(e){return this.each(function(){ui(this,e)})}function xR(e,n){var r,i;return function(){var o=vt(this,e),a=o.tween;if(a!==r){i=r=a;for(var s=0,c=i.length;s<c;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function bR(e,n,r){var i,o;if(typeof r!="function")throw new Error;return function(){var a=vt(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var c={name:n,value:r},l=0,u=o.length;l<u;++l)if(o[l].name===n){o[l]=c;break}l===u&&o.push(c)}a.tween=o}}function _R(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=ft(this.node(),r).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((n==null?xR:bR)(r,e,n))}function kd(e,n,r){var i=e._id;return e.each(function(){var o=vt(this,i);(o.value||(o.value={}))[n]=r.apply(this,arguments)}),function(o){return ft(o,i).value[n]}}function M_(e,n){var r;return(typeof n=="number"?ht:n instanceof dn?Ni:(r=dn(n))?(n=r,Ni):E_)(e,n)}function wR(e){return function(){this.removeAttribute(e)}}function SR(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CR(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===i?a:a=n(i=s,r)}}function NR(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?a:a=n(i=s,r)}}function ER(e,n,r){var i,o,a;return function(){var s,c=r(this),l;return c==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=c+"",s===l?null:s===i&&l===o?a:(o=l,a=n(i=s,c)))}}function kR(e,n,r){var i,o,a;return function(){var s,c=r(this),l;return c==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=c+"",s===l?null:s===i&&l===o?a:(o=l,a=n(i=s,c)))}}function RR(e,n){var r=Ji(e),i=r==="transform"?sR:M_;return this.attrTween(e,typeof n=="function"?(r.local?kR:ER)(r,i,kd(this,"attr."+e,n)):n==null?(r.local?SR:wR)(r):(r.local?NR:CR)(r,i,n))}function AR(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function jR(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function PR(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&jR(e,a)),r}return o._value=n,o}function MR(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&AR(e,a)),r}return o._value=n,o}function IR(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=Ji(e);return this.tween(r,(i.local?PR:MR)(i,n))}function TR(e,n){return function(){Ed(this,e).delay=+n.apply(this,arguments)}}function OR(e,n){return n=+n,function(){Ed(this,e).delay=n}}function qR(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?TR:OR)(n,e)):ft(this.node(),n).delay}function DR(e,n){return function(){vt(this,e).duration=+n.apply(this,arguments)}}function zR(e,n){return n=+n,function(){vt(this,e).duration=n}}function LR(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?DR:zR)(n,e)):ft(this.node(),n).duration}function $R(e,n){if(typeof n!="function")throw new Error;return function(){vt(this,e).ease=n}}function FR(e){var n=this._id;return arguments.length?this.each($R(n,e)):ft(this.node(),n).ease}function HR(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;vt(this,e).ease=r}}function BR(e){if(typeof e!="function")throw new Error;return this.each(HR(this._id,e))}function VR(e){typeof e!="function"&&(e=f_(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&c.push(l);return new It(i,this._parents,this._name,this._id)}function GR(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;c<i;++c)s[c]=n[c];return new It(s,this._parents,this._name,this._id)}function UR(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function WR(e,n,r){var i,o,a=UR(n)?Ed:vt;return function(){var s=a(this,e),c=s.on;c!==i&&(o=(i=c).copy()).on(n,r),s.on=o}}function KR(e,n){var r=this._id;return arguments.length<2?ft(this.node(),r).on.on(e):this.each(WR(r,e,n))}function YR(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function XR(){return this.on("end.remove",YR(this._id))}function ZR(e){var n=this._name,r=this._id;typeof e!="function"&&(e=xd(e));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var c=i[s],l=c.length,u=a[s]=new Array(l),d,f,h=0;h<l;++h)(d=c[h])&&(f=e.call(d,d.__data__,h,c))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,eo(u[h],n,r,h,u,ft(d,r)));return new It(a,this._parents,n,r)}function JR(e){var n=this._name,r=this._id;typeof e!="function"&&(e=u_(e));for(var i=this._groups,o=i.length,a=[],s=[],c=0;c<o;++c)for(var l=i[c],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=e.call(d,d.__data__,f,l),p,y=ft(d,r),x=0,v=h.length;x<v;++x)(p=h[x])&&eo(p,n,r,x,h,y);a.push(h),s.push(d)}return new It(a,s,n,r)}var QR=Ir.prototype.constructor;function eA(){return new QR(this._groups,this._parents)}function tA(e,n){var r,i,o;return function(){var a=qn(this,e),s=(this.style.removeProperty(e),qn(this,e));return a===s?null:a===r&&s===i?o:o=n(r=a,i=s)}}function I_(e){return function(){this.style.removeProperty(e)}}function nA(e,n,r){var i,o=r+"",a;return function(){var s=qn(this,e);return s===o?null:s===i?a:a=n(i=s,r)}}function rA(e,n,r){var i,o,a;return function(){var s=qn(this,e),c=r(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(e),qn(this,e))),s===l?null:s===i&&l===o?a:(o=l,a=n(i=s,c))}}function iA(e,n){var r,i,o,a="style."+n,s="end."+a,c;return function(){var l=vt(this,e),u=l.on,d=l.value[a]==null?c||(c=I_(n)):void 0;(u!==r||o!==d)&&(i=(r=u).copy()).on(s,o=d),l.on=i}}function oA(e,n,r){var i=(e+="")=="transform"?aR:M_;return n==null?this.styleTween(e,tA(e,i)).on("end.style."+e,I_(e)):typeof n=="function"?this.styleTween(e,rA(e,i,kd(this,"style."+e,n))).each(iA(this._id,e)):this.styleTween(e,nA(e,i,n),r).on("end.style."+e,null)}function aA(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function sA(e,n,r){var i,o;function a(){var s=n.apply(this,arguments);return s!==o&&(i=(o=s)&&aA(e,s,r)),i}return a._value=n,a}function cA(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,sA(e,n,r??""))}function lA(e){return function(){this.textContent=e}}function uA(e){return function(){var n=e(this);this.textContent=n??""}}function fA(e){return this.tween("text",typeof e=="function"?uA(kd(this,"text",e)):lA(e==null?"":e+""))}function dA(e){return function(n){this.textContent=e.call(this,n)}}function hA(e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&dA(o)),n}return i._value=e,i}function pA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,hA(e))}function gA(){for(var e=this._name,n=this._id,r=T_(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],c=s.length,l,u=0;u<c;++u)if(l=s[u]){var d=ft(l,n);eo(l,e,r,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new It(i,this._parents,e,r)}function mA(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(a,s){var c={value:s},l={value:function(){--o===0&&a()}};r.each(function(){var u=vt(this,i),d=u.on;d!==e&&(n=(e=d).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(l)),u.on=n}),o===0&&a()})}var yA=0;function It(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function T_(){return++yA}var St=Ir.prototype;It.prototype={constructor:It,select:ZR,selectAll:JR,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:VR,merge:GR,selection:eA,transition:gA,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:KR,attr:RR,attrTween:IR,style:oA,styleTween:cA,text:fA,textTween:pA,remove:XR,tween:_R,delay:qR,duration:LR,ease:FR,easeVarying:BR,end:mA,[Symbol.iterator]:St[Symbol.iterator]};function vA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xA={time:null,delay:0,duration:250,ease:vA};function bA(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function _A(e){var n,r;e instanceof It?(n=e._id,e=e._name):(n=T_(),(r=xA).time=Cd(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],c=s.length,l,u=0;u<c;++u)(l=s[u])&&eo(l,e,n,u,s,r||bA(l,n));return new It(i,this._parents,e,n)}Ir.prototype.interrupt=vR;Ir.prototype.transition=_A;const Jr=e=>()=>e;function wA(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function jt(e,n,r){this.k=e,this.x=n,this.y=r}jt.prototype={constructor:jt,scale:function(e){return e===1?this:new jt(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new jt(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var to=new jt(1,0,0);it.prototype=jt.prototype;function it(e){for(;!e.__zoom;)if(!(e=e.parentNode))return to;return e.__zoom}function Ko(e){e.stopImmediatePropagation()}function Zn(e){e.preventDefault(),e.stopImmediatePropagation()}function SA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function CA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ip(){return this.__zoom||to}function NA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function EA(){return navigator.maxTouchPoints||"ontouchstart"in this}function kA(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Rd(){var e=SA,n=CA,r=kA,i=NA,o=EA,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,l=si,u=Mr("start","zoom","end"),d,f,h,p=500,y=150,x=0,v=10;function m(M){M.property("__zoom",ip).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",A).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(M,T,O,H){var F=M.selection?M.selection():M;F.property("__zoom",ip),M!==F?S(M,T,O,H):F.interrupt().each(function(){C(this,arguments).event(H).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},m.scaleBy=function(M,T,O,H){m.scaleTo(M,function(){var F=this.__zoom.k,G=typeof T=="function"?T.apply(this,arguments):T;return F*G},O,H)},m.scaleTo=function(M,T,O,H){m.transform(M,function(){var F=n.apply(this,arguments),G=this.__zoom,V=O==null?w(F):typeof O=="function"?O.apply(this,arguments):O,W=G.invert(V),K=typeof T=="function"?T.apply(this,arguments):T;return r(b(_(G,K),V,W),F,s)},O,H)},m.translateBy=function(M,T,O,H){m.transform(M,function(){return r(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof O=="function"?O.apply(this,arguments):O),n.apply(this,arguments),s)},null,H)},m.translateTo=function(M,T,O,H,F){m.transform(M,function(){var G=n.apply(this,arguments),V=this.__zoom,W=H==null?w(G):typeof H=="function"?H.apply(this,arguments):H;return r(to.translate(W[0],W[1]).scale(V.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof O=="function"?-O.apply(this,arguments):-O),G,s)},H,F)};function _(M,T){return T=Math.max(a[0],Math.min(a[1],T)),T===M.k?M:new jt(T,M.x,M.y)}function b(M,T,O){var H=T[0]-O[0]*M.k,F=T[1]-O[1]*M.k;return H===M.x&&F===M.y?M:new jt(M.k,H,F)}function w(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function S(M,T,O,H){M.on("start.zoom",function(){C(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(H).end()}).tween("zoom",function(){var F=this,G=arguments,V=C(F,G).event(H),W=n.apply(F,G),K=O==null?w(W):typeof O=="function"?O.apply(F,G):O,D=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),I=F.__zoom,z=typeof T=="function"?T.apply(F,G):T,L=l(I.invert(K).concat(D/I.k),z.invert(K).concat(D/z.k));return function(B){if(B===1)B=z;else{var U=L(B),Y=D/U[2];B=new jt(Y,K[0]-U[0]*Y,K[1]-U[1]*Y)}V.zoom(null,B)}})}function C(M,T,O){return!O&&M.__zooming||new N(M,T)}function N(M,T){this.that=M,this.args=T,this.active=0,this.sourceEvent=null,this.extent=n.apply(M,T),this.taps=0}N.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,T){return this.mouse&&M!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var T=ze(this.that).datum();u.call(M,this.that,new wA(M,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),T)}};function E(M,...T){if(!e.apply(this,arguments))return;var O=C(this,T).event(M),H=this.__zoom,F=Math.max(a[0],Math.min(a[1],H.k*Math.pow(2,i.apply(this,arguments)))),G=Qe(M);if(O.wheel)(O.mouse[0][0]!==G[0]||O.mouse[0][1]!==G[1])&&(O.mouse[1]=H.invert(O.mouse[0]=G)),clearTimeout(O.wheel);else{if(H.k===F)return;O.mouse=[G,H.invert(G)],ui(this),O.start()}Zn(M),O.wheel=setTimeout(V,y),O.zoom("mouse",r(b(_(H,F),O.mouse[0],O.mouse[1]),O.extent,s));function V(){O.wheel=null,O.end()}}function k(M,...T){if(h||!e.apply(this,arguments))return;var O=M.currentTarget,H=C(this,T,!0).event(M),F=ze(M.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",D,!0),G=Qe(M,O),V=M.clientX,W=M.clientY;__(M.view),Ko(M),H.mouse=[G,this.__zoom.invert(G)],ui(this),H.start();function K(I){if(Zn(I),!H.moved){var z=I.clientX-V,L=I.clientY-W;H.moved=z*z+L*L>x}H.event(I).zoom("mouse",r(b(H.that.__zoom,H.mouse[0]=Qe(I,O),H.mouse[1]),H.extent,s))}function D(I){F.on("mousemove.zoom mouseup.zoom",null),w_(I.view,H.moved),Zn(I),H.event(I).end()}}function R(M,...T){if(e.apply(this,arguments)){var O=this.__zoom,H=Qe(M.changedTouches?M.changedTouches[0]:M,this),F=O.invert(H),G=O.k*(M.shiftKey?.5:2),V=r(b(_(O,G),H,F),n.apply(this,T),s);Zn(M),c>0?ze(this).transition().duration(c).call(S,V,H,M):ze(this).call(m.transform,V,H,M)}}function A(M,...T){if(e.apply(this,arguments)){var O=M.touches,H=O.length,F=C(this,T,M.changedTouches.length===H).event(M),G,V,W,K;for(Ko(M),V=0;V<H;++V)W=O[V],K=Qe(W,this),K=[K,this.__zoom.invert(K),W.identifier],F.touch0?!F.touch1&&F.touch0[2]!==K[2]&&(F.touch1=K,F.taps=0):(F.touch0=K,G=!0,F.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(F.taps<2&&(f=K[0],d=setTimeout(function(){d=null},p)),ui(this),F.start())}}function P(M,...T){if(this.__zooming){var O=C(this,T).event(M),H=M.changedTouches,F=H.length,G,V,W,K;for(Zn(M),G=0;G<F;++G)V=H[G],W=Qe(V,this),O.touch0&&O.touch0[2]===V.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===V.identifier&&(O.touch1[0]=W);if(V=O.that.__zoom,O.touch1){var D=O.touch0[0],I=O.touch0[1],z=O.touch1[0],L=O.touch1[1],B=(B=z[0]-D[0])*B+(B=z[1]-D[1])*B,U=(U=L[0]-I[0])*U+(U=L[1]-I[1])*U;V=_(V,Math.sqrt(B/U)),W=[(D[0]+z[0])/2,(D[1]+z[1])/2],K=[(I[0]+L[0])/2,(I[1]+L[1])/2]}else if(O.touch0)W=O.touch0[0],K=O.touch0[1];else return;O.zoom("touch",r(b(V,W,K),O.extent,s))}}function q(M,...T){if(this.__zooming){var O=C(this,T).event(M),H=M.changedTouches,F=H.length,G,V;for(Ko(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),G=0;G<F;++G)V=H[G],O.touch0&&O.touch0[2]===V.identifier?delete O.touch0:O.touch1&&O.touch1[2]===V.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(V=Qe(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<v)){var W=ze(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return m.wheelDelta=function(M){return arguments.length?(i=typeof M=="function"?M:Jr(+M),m):i},m.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Jr(!!M),m):e},m.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:Jr(!!M),m):o},m.extent=function(M){return arguments.length?(n=typeof M=="function"?M:Jr([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),m):n},m.scaleExtent=function(M){return arguments.length?(a[0]=+M[0],a[1]=+M[1],m):[a[0],a[1]]},m.translateExtent=function(M){return arguments.length?(s[0][0]=+M[0][0],s[1][0]=+M[1][0],s[0][1]=+M[0][1],s[1][1]=+M[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(M){return arguments.length?(r=M,m):r},m.duration=function(M){return arguments.length?(c=+M,m):c},m.interpolate=function(M){return arguments.length?(l=M,m):l},m.on=function(){var M=u.on.apply(u,arguments);return M===u?m:M},m.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,m):Math.sqrt(x)},m.tapDistance=function(M){return arguments.length?(v=+M,m):v},m}const mt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:i}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Nr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],O_=["Enter"," ","Escape"],q_={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var zn;(function(e){e.Strict="strict",e.Loose="loose"})(zn||(zn={}));var ln;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ln||(ln={}));var Er;(function(e){e.Partial="partial",e.Full="full"})(Er||(Er={}));const D_={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ht;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ht||(Ht={}));var Ln;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ln||(Ln={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));const op={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function z_(e){return e===null?null:e?"valid":"invalid"}const L_=e=>"id"in e&&"source"in e&&"target"in e,RA=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ad=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Or=(e,n=[0,0])=>{const{width:r,height:i}=Tt(e),o=e.origin??n,a=r*o[0],s=i*o[1];return{x:e.position.x-a,y:e.position.y-s}},AA=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((i,o)=>{const a=typeof o=="string";let s=!n.nodeLookup&&!a?o:void 0;n.nodeLookup&&(s=a?n.nodeLookup.get(o):Ad(o)?o:n.nodeLookup.get(o.id));const c=s?Ai(s,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return no(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ro(r)},qr=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(r=no(r,Ai(o)),i=!0)}),i?ro(r):{x:0,y:0,width:0,height:0}},jd=(e,n,[r,i,o]=[0,0,1],a=!1,s=!1)=>{const c={...zr(n,[r,i,o]),width:n.width/o,height:n.height/o},l=[];for(const u of e.values()){const{measured:d,selectable:f=!0,hidden:h=!1}=u;if(s&&!f||h)continue;const p=d.width??u.width??u.initialWidth??null,y=d.height??u.height??u.initialHeight??null,x=kr(c,Fn(u)),v=(p??0)*(y??0),m=a&&x>0;(!u.internals.handleBounds||m||x>=v||u.dragging)&&l.push(u)}return l},jA=(e,n)=>{const r=new Set;return e.forEach(i=>{r.add(i.id)}),n.filter(i=>r.has(i.source)||r.has(i.target))};function PA(e,n){const r=new Map,i=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!i||i.has(o.id))&&r.set(o.id,o)}),r}async function MA({nodes:e,width:n,height:r,panZoom:i,minZoom:o,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const c=PA(e,s),l=qr(c),u=Pd(l,n,r,s?.minZoom??o,s?.maxZoom??a,s?.padding??.1);return await i.setViewport(u,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function $_({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:i=[0,0],nodeExtent:o,onError:a}){const s=r.get(e),c=s.parentId?r.get(s.parentId):void 0,{x:l,y:u}=c?c.internals.positionAbsolute:{x:0,y:0},d=s.origin??i;let f=s.extent||o;if(s.extent==="parent"&&!s.expandParent)if(!c)a?.("005",mt.error005());else{const p=c.measured.width,y=c.measured.height;p&&y&&(f=[[l,u],[l+p,u+y]])}else c&&Hn(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const h=Hn(f)?pn(n,f,s.measured):n;return(s.measured.width===void 0||s.measured.height===void 0)&&a?.("015",mt.error015()),{position:{x:h.x-l+(s.measured.width??0)*d[0],y:h.y-u+(s.measured.height??0)*d[1]},positionAbsolute:h}}async function IA({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:i,onBeforeDelete:o}){const a=new Set(e.map(h=>h.id)),s=[];for(const h of r){if(h.deletable===!1)continue;const p=a.has(h.id),y=!p&&h.parentId&&s.find(x=>x.id===h.parentId);(p||y)&&s.push(h)}const c=new Set(n.map(h=>h.id)),l=i.filter(h=>h.deletable!==!1),d=jA(s,l);for(const h of l)c.has(h.id)&&!d.find(y=>y.id===h.id)&&d.push(h);if(!o)return{edges:d,nodes:s};const f=await o({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const $n=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),pn=(e={x:0,y:0},n,r)=>({x:$n(e.x,n[0][0],n[1][0]-(r?.width??0)),y:$n(e.y,n[0][1],n[1][1]-(r?.height??0))});function F_(e,n,r){const{width:i,height:o}=Tt(r),{x:a,y:s}=r.internals.positionAbsolute;return pn(e,[[a,s],[a+i,s+o]],n)}const ap=(e,n,r)=>e<n?$n(Math.abs(e-n),1,n)/n:e>r?-$n(Math.abs(e-r),1,n)/n:0,H_=(e,n,r=15,i=40)=>{const o=ap(e.x,i,n.width-i)*r,a=ap(e.y,i,n.height-i)*r;return[o,a]},no=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Gf=({x:e,y:n,width:r,height:i})=>({x:e,y:n,x2:e+r,y2:n+i}),ro=({x:e,y:n,x2:r,y2:i})=>({x:e,y:n,width:r-e,height:i-n}),Fn=(e,n=[0,0])=>{const{x:r,y:i}=Ad(e)?e.internals.positionAbsolute:Or(e,n);return{x:r,y:i,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ai=(e,n=[0,0])=>{const{x:r,y:i}=Ad(e)?e.internals.positionAbsolute:Or(e,n);return{x:r,y:i,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:i+(e.measured?.height??e.height??e.initialHeight??0)}},B_=(e,n)=>ro(no(Gf(e),Gf(n))),kr=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),i=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*i)},sp=e=>at(e.width)&&at(e.height)&&at(e.x)&&at(e.y),at=e=>!isNaN(e)&&isFinite(e),TA=(e,n)=>{},Dr=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),zr=({x:e,y:n},[r,i,o],a=!1,s=[1,1])=>{const c={x:(e-r)/o,y:(n-i)/o};return a?Dr(c,s):c},ji=({x:e,y:n},[r,i,o])=>({x:e*o+r,y:n*o+i});function wn(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function OA(e,n,r){if(typeof e=="string"||typeof e=="number"){const i=wn(e,r),o=wn(e,n);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=wn(e.top??e.y??0,r),o=wn(e.bottom??e.y??0,r),a=wn(e.left??e.x??0,n),s=wn(e.right??e.x??0,n);return{top:i,right:s,bottom:o,left:a,x:a+s,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function qA(e,n,r,i,o,a){const{x:s,y:c}=ji(e,[n,r,i]),{x:l,y:u}=ji({x:e.x+e.width,y:e.y+e.height},[n,r,i]),d=o-l,f=a-u;return{left:Math.floor(s),top:Math.floor(c),right:Math.floor(d),bottom:Math.floor(f)}}const Pd=(e,n,r,i,o,a)=>{const s=OA(a,n,r),c=(n-s.x)/e.width,l=(r-s.y)/e.height,u=Math.min(c,l),d=$n(u,i,o),f=e.x+e.width/2,h=e.y+e.height/2,p=n/2-f*d,y=r/2-h*d,x=qA(e,p,y,d,n,r),v={left:Math.min(x.left-s.left,0),top:Math.min(x.top-s.top,0),right:Math.min(x.right-s.right,0),bottom:Math.min(x.bottom-s.bottom,0)};return{x:p-v.left+v.right,y:y-v.top+v.bottom,zoom:d}},Rr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Hn(e){return e!=null&&e!=="parent"}function Tt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function V_(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function G_(e,n={width:0,height:0},r,i,o){const a={...e},s=i.get(r);if(s){const c=s.origin||o;a.x+=s.internals.positionAbsolute.x-(n.width??0)*c[0],a.y+=s.internals.positionAbsolute.y-(n.height??0)*c[1]}return a}function cp(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function DA(){let e,n;return{promise:new Promise((i,o)=>{e=i,n=o}),resolve:e,reject:n}}function zA(e){return{...q_,...e||{}}}function pr(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:i,containerBounds:o}){const{x:a,y:s}=st(e),c=zr({x:a-(o?.left??0),y:s-(o?.top??0)},i),{x:l,y:u}=r?Dr(c,n):c;return{xSnapped:l,ySnapped:u,...c}}const Md=e=>({width:e.offsetWidth,height:e.offsetHeight}),U_=e=>e?.getRootNode?.()||window?.document,LA=["INPUT","SELECT","TEXTAREA"];function W_(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:LA.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const K_=e=>"clientX"in e,st=(e,n)=>{const r=K_(e),i=r?e.clientX:e.touches?.[0].clientX,o=r?e.clientY:e.touches?.[0].clientY;return{x:i-(n?.left??0),y:o-(n?.top??0)}},lp=(e,n,r,i,o)=>{const a=n.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const c=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(c.left-r.left)/i,y:(c.top-r.top)/i,...Md(s)}})};function Y_({sourceX:e,sourceY:n,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:c}){const l=e*.125+o*.375+s*.375+r*.125,u=n*.125+a*.375+c*.375+i*.125,d=Math.abs(l-e),f=Math.abs(u-n);return[l,u,d,f]}function Qr(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function up({pos:e,x1:n,y1:r,x2:i,y2:o,c:a}){switch(e){case oe.Left:return[n-Qr(n-i,a),r];case oe.Right:return[n+Qr(i-n,a),r];case oe.Top:return[n,r-Qr(r-o,a)];case oe.Bottom:return[n,r+Qr(o-r,a)]}}function X_({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,curvature:s=.25}){const[c,l]=up({pos:r,x1:e,y1:n,x2:i,y2:o,c:s}),[u,d]=up({pos:a,x1:i,y1:o,x2:e,y2:n,c:s}),[f,h,p,y]=Y_({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:c,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${n} C${c},${l} ${u},${d} ${i},${o}`,f,h,p,y]}function Z_({sourceX:e,sourceY:n,targetX:r,targetY:i}){const o=Math.abs(r-e)/2,a=r<e?r+o:r-o,s=Math.abs(i-n)/2,c=i<n?i+s:i-s;return[a,c,o,s]}function $A({sourceNode:e,targetNode:n,selected:r=!1,zIndex:i=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if(a==="manual")return i;const s=o&&r?i+1e3:i,c=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return s+c}function FA({sourceNode:e,targetNode:n,width:r,height:i,transform:o}){const a=no(Ai(e),Ai(n));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:i/o[2]};return kr(s,ro(a))>0}const HA=({source:e,sourceHandle:n,target:r,targetHandle:i})=>`xy-edge__${e}${n||""}-${r}${i||""}`,BA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),J_=(e,n,r={})=>{if(!e.source||!e.target)return n;const i=r.getEdgeId||HA;let o;return L_(e)?o={...e}:o={...e,id:i(e)},BA(o,n)?n:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,n.concat(o))};function Q_({sourceX:e,sourceY:n,targetX:r,targetY:i}){const[o,a,s,c]=Z_({sourceX:e,sourceY:n,targetX:r,targetY:i});return[`M ${e},${n}L ${r},${i}`,o,a,s,c]}const fp={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},VA=({source:e,sourcePosition:n=oe.Bottom,target:r})=>n===oe.Left||n===oe.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},dp=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function GA({source:e,sourcePosition:n=oe.Bottom,target:r,targetPosition:i=oe.Top,center:o,offset:a,stepPosition:s}){const c=fp[n],l=fp[i],u={x:e.x+c.x*a,y:e.y+c.y*a},d={x:r.x+l.x*a,y:r.y+l.y*a},f=VA({source:u,sourcePosition:n,target:d}),h=f.x!==0?"x":"y",p=f[h];let y=[],x,v;const m={x:0,y:0},_={x:0,y:0},[,,b,w]=Z_({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(c[h]*l[h]===-1){h==="x"?(x=o.x??u.x+(d.x-u.x)*s,v=o.y??(u.y+d.y)/2):(x=o.x??(u.x+d.x)/2,v=o.y??u.y+(d.y-u.y)*s);const C=[{x,y:u.y},{x,y:d.y}],N=[{x:u.x,y:v},{x:d.x,y:v}];c[h]===p?y=h==="x"?C:N:y=h==="x"?N:C}else{const C=[{x:u.x,y:d.y}],N=[{x:d.x,y:u.y}];if(h==="x"?y=c.x===p?N:C:y=c.y===p?C:N,n===i){const P=Math.abs(e[h]-r[h]);if(P<=a){const q=Math.min(a-1,a-P);c[h]===p?m[h]=(u[h]>e[h]?-1:1)*q:_[h]=(d[h]>r[h]?-1:1)*q}}if(n!==i){const P=h==="x"?"y":"x",q=c[h]===l[P],M=u[P]>d[P],T=u[P]<d[P];(c[h]===1&&(!q&&M||q&&T)||c[h]!==1&&(!q&&T||q&&M))&&(y=h==="x"?C:N)}const E={x:u.x+m.x,y:u.y+m.y},k={x:d.x+_.x,y:d.y+_.y},R=Math.max(Math.abs(E.x-y[0].x),Math.abs(k.x-y[0].x)),A=Math.max(Math.abs(E.y-y[0].y),Math.abs(k.y-y[0].y));R>=A?(x=(E.x+k.x)/2,v=y[0].y):(x=y[0].x,v=(E.y+k.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...y,{x:d.x+_.x,y:d.y+_.y},r],x,v,b,w]}function UA(e,n,r,i){const o=Math.min(dp(e,n)/2,dp(n,r)/2,i),{x:a,y:s}=n;if(e.x===a&&a===r.x||e.y===s&&s===r.y)return`L${a} ${s}`;if(e.y===s){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${a+o*u},${s}Q ${a},${s} ${a},${s+o*d}`}const c=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${a},${s+o*l}Q ${a},${s} ${a+o*c},${s}`}function Uf({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,borderRadius:s=5,centerX:c,centerY:l,offset:u=20,stepPosition:d=.5}){const[f,h,p,y,x]=GA({source:{x:e,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:a,center:{x:c,y:l},offset:u,stepPosition:d});return[f.reduce((m,_,b)=>{let w="";return b>0&&b<f.length-1?w=UA(f[b-1],_,f[b+1],s):w=`${b===0?"M":"L"}${_.x} ${_.y}`,m+=w,m},""),h,p,y,x]}function hp(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function WA(e){const{sourceNode:n,targetNode:r}=e;if(!hp(n)||!hp(r))return null;const i=n.internals.handleBounds||pp(n.handles),o=r.internals.handleBounds||pp(r.handles),a=gp(i?.source??[],e.sourceHandle),s=gp(e.connectionMode===zn.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!a||!s)return e.onError?.("008",mt.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=a?.position||oe.Bottom,l=s?.position||oe.Top,u=gn(n,a,c),d=gn(r,s,l);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:c,targetPosition:l}}function pp(e){if(!e)return null;const n=[],r=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?n.push(i):i.type==="target"&&r.push(i);return{source:n,target:r}}function gn(e,n,r=oe.Left,i=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,a=(n?.y??0)+e.internals.positionAbsolute.y,{width:s,height:c}=n??Tt(e);if(i)return{x:o+s/2,y:a+c/2};switch(n?.position??r){case oe.Top:return{x:o+s/2,y:a};case oe.Right:return{x:o+s,y:a+c/2};case oe.Bottom:return{x:o+s/2,y:a+c};case oe.Left:return{x:o,y:a+c/2}}}function gp(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function Wf(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function KA(e,{id:n,defaultColor:r,defaultMarkerStart:i,defaultMarkerEnd:o}){const a=new Set;return e.reduce((s,c)=>([c.markerStart||i,c.markerEnd||o].forEach(l=>{if(l&&typeof l=="object"){const u=Wf(l,n);a.has(u)||(s.push({id:u,color:l.color||r,...l}),a.add(u))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))}const e1=1e3,YA=10,Id={nodeOrigin:[0,0],nodeExtent:Nr,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},XA={...Id,checkEquality:!0};function Td(e,n){const r={...e};for(const i in n)n[i]!==void 0&&(r[i]=n[i]);return r}function ZA(e,n,r){const i=Td(Id,r);for(const o of e.values())if(o.parentId)qd(o,e,n,i);else{const a=Or(o,i.nodeOrigin),s=Hn(o.extent)?o.extent:i.nodeExtent,c=pn(a,s,Tt(o));o.internals.positionAbsolute=c}}function JA(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const r=[],i=[];for(const o of e.handles){const a={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?r.push(a):o.type==="target"&&i.push(a)}return{source:r,target:i}}function Od(e){return e==="manual"}function Kf(e,n,r,i={}){const o=Td(XA,i),a={i:0},s=new Map(n),c=o?.elevateNodesOnSelect&&!Od(o.zIndexMode)?e1:0;let l=e.length>0;n.clear(),r.clear();for(const u of e){let d=s.get(u.id);if(o.checkEquality&&u===d?.internals.userNode)n.set(u.id,d);else{const f=Or(u,o.nodeOrigin),h=Hn(u.extent)?u.extent:o.nodeExtent,p=pn(f,h,Tt(u));d={...o.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:p,handleBounds:JA(u,d),z:t1(u,c,o.zIndexMode),userNode:u}},n.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(l=!1),u.parentId&&qd(d,n,r,i,a)}return l}function QA(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function qd(e,n,r,i,o){const{elevateNodesOnSelect:a,nodeOrigin:s,nodeExtent:c,zIndexMode:l}=Td(Id,i),u=e.parentId,d=n.get(u);if(!d){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}QA(e,r),o&&!d.parentId&&d.internals.rootParentIndex===void 0&&l==="auto"&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+o.i*YA),o&&d.internals.rootParentIndex!==void 0&&(o.i=d.internals.rootParentIndex);const f=a&&!Od(l)?e1:0,{x:h,y:p,z:y}=ej(e,d,s,c,f,l),{positionAbsolute:x}=e.internals,v=h!==x.x||p!==x.y;(v||y!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:h,y:p}:x,z:y}})}function t1(e,n,r){const i=at(e.zIndex)?e.zIndex:0;return Od(r)?i:i+(e.selected?n:0)}function ej(e,n,r,i,o,a){const{x:s,y:c}=n.internals.positionAbsolute,l=Tt(e),u=Or(e,r),d=Hn(e.extent)?pn(u,e.extent,l):u;let f=pn({x:s+d.x,y:c+d.y},i,l);e.extent==="parent"&&(f=F_(f,l,n));const h=t1(e,o,a),p=n.internals.z??0;return{x:f.x,y:f.y,z:p>=h?p+1:h}}function Dd(e,n,r,i=[0,0]){const o=[],a=new Map;for(const s of e){const c=n.get(s.parentId);if(!c)continue;const l=a.get(s.parentId)?.expandedRect??Fn(c),u=B_(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{const u=c.internals.positionAbsolute,d=Tt(c),f=c.origin??i,h=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,p=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,y=Math.max(d.width,Math.round(s.width)),x=Math.max(d.height,Math.round(s.height)),v=(y-d.width)*f[0],m=(x-d.height)*f[1];(h>0||p>0||v||m)&&(o.push({id:l,type:"position",position:{x:c.position.x-h+v,y:c.position.y-p+m}}),r.get(l)?.forEach(_=>{e.some(b=>b.id===_.id)||o.push({id:_.id,type:"position",position:{x:_.position.x+h,y:_.position.y+p}})})),(d.width<s.width||d.height<s.height||h||p)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?f[0]*h-v:0),height:x+(p?f[1]*p-m:0)}})}),o}function tj(e,n,r,i,o,a,s){const c=i?.querySelector(".xyflow__viewport");let l=!1;if(!c)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const p of e.values()){const y=n.get(p.id);if(!y)continue;if(y.hidden){n.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=Md(p.nodeElement),v=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(v||!y.internals.handleBounds||p.force))){const _=p.nodeElement.getBoundingClientRect(),b=Hn(y.extent)?y.extent:a;let{positionAbsolute:w}=y.internals;y.parentId&&y.extent==="parent"?w=F_(w,x,n.get(y.parentId)):b&&(w=pn(w,b,x));const S={...y,measured:x,internals:{...y.internals,positionAbsolute:w,handleBounds:{source:lp("source",p.nodeElement,_,f,y.id),target:lp("target",p.nodeElement,_,f,y.id)}}};n.set(y.id,S),y.parentId&&qd(S,n,r,{nodeOrigin:o,zIndexMode:s}),l=!0,v&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&h.push({id:y.id,parentId:y.parentId,rect:Fn(S,o)}))}}if(h.length>0){const p=Dd(h,n,r,o);u.push(...p)}return{changes:u,updatedInternals:l}}async function nj({delta:e,panZoom:n,transform:r,translateExtent:i,width:o,height:a}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const s=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[o,a]],i),c=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(c)}function mp(e,n,r,i,o,a){let s=o;const c=i.get(s)||new Map;i.set(s,c.set(r,n)),s=`${o}-${e}`;const l=i.get(s)||new Map;if(i.set(s,l.set(r,n)),a){s=`${o}-${e}-${a}`;const u=i.get(s)||new Map;i.set(s,u.set(r,n))}}function n1(e,n,r){e.clear(),n.clear();for(const i of r){const{source:o,target:a,sourceHandle:s=null,targetHandle:c=null}=i,l={edgeId:i.id,source:o,target:a,sourceHandle:s,targetHandle:c},u=`${o}-${s}--${a}-${c}`,d=`${a}-${c}--${o}-${s}`;mp("source",l,d,e,o,s),mp("target",l,u,e,a,c),n.set(i.id,i)}}function r1(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:r1(r,n):!1}function yp(e,n,r){let i=e;do{if(i?.matches?.(n))return!0;if(i===r)return!1;i=i?.parentElement}while(i);return!1}function rj(e,n,r,i){const o=new Map;for(const[a,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!r1(s,e))&&(s.draggable||n&&typeof s.draggable>"u")){const c=e.get(a);c&&o.set(a,{id:a,position:c.position||{x:0,y:0},distance:{x:r.x-c.internals.positionAbsolute.x,y:r.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return o}function Yo({nodeId:e,dragItems:n,nodeLookup:r,dragging:i=!0}){const o=[];for(const[s,c]of n){const l=r.get(s)?.internals.userNode;l&&o.push({...l,position:c.position,dragging:i})}if(!e)return[o[0],o];const a=r.get(e)?.internals.userNode;return[a?{...a,position:n.get(e)?.position||a.position,dragging:i}:o[0],o]}function ij({dragItems:e,snapGrid:n,x:r,y:i}){const o=e.values().next().value;if(!o)return null;const a={x:r-o.distance.x,y:i-o.distance.y},s=Dr(a,n);return{x:s.x-a.x,y:s.y-a.y}}function oj({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:i,onDragStop:o}){let a={x:null,y:null},s=0,c=new Map,l=!1,u={x:0,y:0},d=null,f=!1,h=null,p=!1,y=!1,x=null;function v({noDragClassName:_,handleSelector:b,domNode:w,isSelectable:S,nodeId:C,nodeClickDistance:N=0}){h=ze(w);function E({x:P,y:q}){const{nodeLookup:M,nodeExtent:T,snapGrid:O,snapToGrid:H,nodeOrigin:F,onNodeDrag:G,onSelectionDrag:V,onError:W,updateNodePositions:K}=n();a={x:P,y:q};let D=!1;const I=c.size>1,z=I&&T?Gf(qr(c)):null,L=I&&H?ij({dragItems:c,snapGrid:O,x:P,y:q}):null;for(const[B,U]of c){if(!M.has(B))continue;let Y={x:P-U.distance.x,y:q-U.distance.y};H&&(Y=L?{x:Math.round(Y.x+L.x),y:Math.round(Y.y+L.y)}:Dr(Y,O));let Z=null;if(I&&T&&!U.extent&&z){const{positionAbsolute:J}=U.internals,ie=J.x-z.x+T[0][0],re=J.x+U.measured.width-z.x2+T[1][0],fe=J.y-z.y+T[0][1],se=J.y+U.measured.height-z.y2+T[1][1];Z=[[ie,fe],[re,se]]}const{position:ne,positionAbsolute:te}=$_({nodeId:B,nextPosition:Y,nodeLookup:M,nodeExtent:Z||T,nodeOrigin:F,onError:W});D=D||U.position.x!==ne.x||U.position.y!==ne.y,U.position=ne,U.internals.positionAbsolute=te}if(y=y||D,!!D&&(K(c,!0),x&&(i||G||!C&&V))){const[B,U]=Yo({nodeId:C,dragItems:c,nodeLookup:M});i?.(x,c,B,U),G?.(x,B,U),C||V?.(x,U)}}async function k(){if(!d)return;const{transform:P,panBy:q,autoPanSpeed:M,autoPanOnNodeDrag:T}=n();if(!T){l=!1,cancelAnimationFrame(s);return}const[O,H]=H_(u,d,M);(O!==0||H!==0)&&(a.x=(a.x??0)-O/P[2],a.y=(a.y??0)-H/P[2],await q({x:O,y:H})&&E(a)),s=requestAnimationFrame(k)}function R(P){const{nodeLookup:q,multiSelectionActive:M,nodesDraggable:T,transform:O,snapGrid:H,snapToGrid:F,selectNodesOnDrag:G,onNodeDragStart:V,onSelectionDragStart:W,unselectNodesAndEdges:K}=n();f=!0,(!G||!S)&&!M&&C&&(q.get(C)?.selected||K()),S&&G&&C&&e?.(C);const D=pr(P.sourceEvent,{transform:O,snapGrid:H,snapToGrid:F,containerBounds:d});if(a=D,c=rj(q,T,D,C),c.size>0&&(r||V||!C&&W)){const[I,z]=Yo({nodeId:C,dragItems:c,nodeLookup:q});r?.(P.sourceEvent,c,I,z),V?.(P.sourceEvent,I,z),C||W?.(P.sourceEvent,z)}}const A=_d().clickDistance(N).on("start",P=>{const{domNode:q,nodeDragThreshold:M,transform:T,snapGrid:O,snapToGrid:H}=n();d=q?.getBoundingClientRect()||null,p=!1,y=!1,x=P.sourceEvent,M===0&&R(P),a=pr(P.sourceEvent,{transform:T,snapGrid:O,snapToGrid:H,containerBounds:d}),u=st(P.sourceEvent,d)}).on("drag",P=>{const{autoPanOnNodeDrag:q,transform:M,snapGrid:T,snapToGrid:O,nodeDragThreshold:H,nodeLookup:F}=n(),G=pr(P.sourceEvent,{transform:M,snapGrid:T,snapToGrid:O,containerBounds:d});if(x=P.sourceEvent,(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||C&&!F.has(C))&&(p=!0),!p){if(!l&&q&&f&&(l=!0,k()),!f){const V=st(P.sourceEvent,d),W=V.x-u.x,K=V.y-u.y;Math.sqrt(W*W+K*K)>H&&R(P)}(a.x!==G.xSnapped||a.y!==G.ySnapped)&&c&&f&&(u=st(P.sourceEvent,d),E(G))}}).on("end",P=>{if(!(!f||p)&&(l=!1,f=!1,cancelAnimationFrame(s),c.size>0)){const{nodeLookup:q,updateNodePositions:M,onNodeDragStop:T,onSelectionDragStop:O}=n();if(y&&(M(c,!1),y=!1),o||T||!C&&O){const[H,F]=Yo({nodeId:C,dragItems:c,nodeLookup:q,dragging:!1});o?.(P.sourceEvent,c,H,F),T?.(P.sourceEvent,H,F),C||O?.(P.sourceEvent,F)}}}).filter(P=>{const q=P.target;return!P.button&&(!_||!yp(q,`.${_}`,w))&&(!b||yp(q,b,w))});h.call(A)}function m(){h?.on(".drag",null)}return{update:v,destroy:m}}function aj(e,n,r){const i=[],o={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const a of n.values())kr(o,Fn(a))>0&&i.push(a);return i}const sj=250;function cj(e,n,r,i){let o=[],a=1/0;const s=aj(e,r,n+sj);for(const c of s){const l=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const u of l){if(i.nodeId===u.nodeId&&i.type===u.type&&i.id===u.id)continue;const{x:d,y:f}=gn(c,u,u.position,!0),h=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(f-e.y,2));h>n||(h<a?(o=[{...u,x:d,y:f}],a=h):h===a&&o.push({...u,x:d,y:f}))}}if(!o.length)return null;if(o.length>1){const c=i.type==="source"?"target":"source";return o.find(l=>l.type===c)??o[0]}return o[0]}function i1(e,n,r,i,o,a=!1){const s=i.get(e);if(!s)return null;const c=o==="strict"?s.internals.handleBounds?.[n]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(r?c?.find(u=>u.id===r):c?.[0])??null;return l&&a?{...l,...gn(s,l,l.position,!0)}:l}function o1(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function lj(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const a1=()=>!0;function uj(e,{connectionMode:n,connectionRadius:r,handleId:i,nodeId:o,edgeUpdaterType:a,isTarget:s,domNode:c,nodeLookup:l,lib:u,autoPanOnConnect:d,flowId:f,panBy:h,cancelConnection:p,onConnectStart:y,onConnect:x,onConnectEnd:v,isValidConnection:m=a1,onReconnectEnd:_,updateConnection:b,getTransform:w,getFromHandle:S,autoPanSpeed:C,dragThreshold:N=1,handleDomNode:E}){const k=U_(e.target);let R=0,A;const{x:P,y:q}=st(e),M=o1(a,E),T=c?.getBoundingClientRect();let O=!1;if(!T||!M)return;const H=i1(o,M,i,l,n);if(!H)return;let F=st(e,T),G=!1,V=null,W=!1,K=null;function D(){if(!d||!T)return;const[ne,te]=H_(F,T,C);h({x:ne,y:te}),R=requestAnimationFrame(D)}const I={...H,nodeId:o,type:M,position:H.position},z=l.get(o);let B={inProgress:!0,isValid:null,from:gn(z,I,oe.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:z,to:F,toHandle:null,toPosition:op[I.position],toNode:null,pointer:F};function U(){O=!0,b(B),y?.(e,{nodeId:o,handleId:i,handleType:M})}N===0&&U();function Y(ne){if(!O){const{x:se,y:ge}=st(ne),Ee=se-P,ee=ge-q;if(!(Ee*Ee+ee*ee>N*N))return;U()}if(!S()||!I){Z(ne);return}const te=w();F=st(ne,T),A=cj(zr(F,te,!1,[1,1]),r,l,I),G||(D(),G=!0);const J=s1(ne,{handle:A,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:m,doc:k,lib:u,flowId:f,nodeLookup:l});K=J.handleDomNode,V=J.connection,W=lj(!!A,J.isValid);const ie=l.get(o),re=ie?gn(ie,I,oe.Left,!0):B.from,fe={...B,from:re,isValid:W,to:J.toHandle&&W?ji({x:J.toHandle.x,y:J.toHandle.y},te):F,toHandle:J.toHandle,toPosition:W&&J.toHandle?J.toHandle.position:op[I.position],toNode:J.toHandle?l.get(J.toHandle.nodeId):null,pointer:F};b(fe),B=fe}function Z(ne){if(!("touches"in ne&&ne.touches.length>0)){if(O){(A||K)&&V&&W&&x?.(V);const{inProgress:te,...J}=B,ie={...J,toPosition:B.toHandle?B.toPosition:null};v?.(ne,ie),a&&_?.(ne,ie)}p(),cancelAnimationFrame(R),G=!1,W=!1,V=null,K=null,k.removeEventListener("mousemove",Y),k.removeEventListener("mouseup",Z),k.removeEventListener("touchmove",Y),k.removeEventListener("touchend",Z)}}k.addEventListener("mousemove",Y),k.addEventListener("mouseup",Z),k.addEventListener("touchmove",Y),k.addEventListener("touchend",Z)}function s1(e,{handle:n,connectionMode:r,fromNodeId:i,fromHandleId:o,fromType:a,doc:s,lib:c,flowId:l,isValidConnection:u=a1,nodeLookup:d}){const f=a==="target",h=n?s.querySelector(`.${c}-flow__handle[data-id="${l}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:p,y}=st(e),x=s.elementFromPoint(p,y),v=x?.classList.contains(`${c}-flow__handle`)?x:h,m={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const _=o1(void 0,v),b=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),S=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!b||!_)return m;const N={source:f?b:i,sourceHandle:f?w:o,target:f?i:b,targetHandle:f?o:w};m.connection=N;const k=S&&C&&(r===zn.Strict?f&&_==="source"||!f&&_==="target":b!==i||w!==o);m.isValid=k&&u(N),m.toHandle=i1(b,_,w,d,r,!0)}return m}const Yf={onPointerDown:uj,isValid:s1};function fj({domNode:e,panZoom:n,getTransform:r,getViewScale:i}){const o=ze(e);function a({translateExtent:c,width:l,height:u,zoomStep:d=1,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const y=b=>{if(b.sourceEvent.type!=="wheel"||!n)return;const w=r(),S=b.sourceEvent.ctrlKey&&Rr()?10:1,C=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*d,N=w[2]*Math.pow(2,C*S);n.scaleTo(N)};let x=[0,0];const v=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(x=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},m=b=>{const w=r();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!n)return;const S=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],C=[S[0]-x[0],S[1]-x[1]];x=S;const N=i()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),E={x:w[0]-C[0]*N,y:w[1]-C[1]*N},k=[[0,0],[l,u]];n.setViewportConstrained({x:E.x,y:E.y,zoom:w[2]},k,c)},_=Rd().on("start",v).on("zoom",f?m:null).on("zoom.wheel",h?y:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:a,destroy:s,pointer:Qe}}const io=e=>({x:e.x,y:e.y,zoom:e.k}),Xo=({x:e,y:n,zoom:r})=>to.translate(e,n).scale(r),jn=(e,n)=>e.target.closest(`.${n}`),c1=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),dj=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Zo=(e,n=0,r=dj,i=()=>{})=>{const o=typeof n=="number"&&n>0;return o||i(),o?e.transition().duration(n).ease(r).on("end",i):e},l1=e=>{const n=e.ctrlKey&&Rr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function hj({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:u}){return d=>{if(jn(d,n))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=r.property("__zoom").k||1;if(d.ctrlKey&&s){const v=Qe(d),m=l1(d),_=f*Math.pow(2,m);i.scaleTo(r,_,v,d);return}const h=d.deltaMode===1?20:1;let p=o===ln.Vertical?0:d.deltaX*h,y=o===ln.Horizontal?0:d.deltaY*h;!Rr()&&d.shiftKey&&o!==ln.Vertical&&(p=d.deltaY*h,y=0),i.translateBy(r,-(p/f)*a,-(y/f)*a,{internal:!0});const x=io(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(d,x),e.panScrollTimeout=setTimeout(()=>{u?.(d,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c?.(d,x))}}function pj({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(i,o){const a=i.type==="wheel",s=!n&&a&&!i.ctrlKey,c=jn(i,e);if(i.ctrlKey&&a&&c&&i.preventDefault(),s||c)return null;i.preventDefault(),r.call(this,i,o)}}function gj({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return i=>{if(i.sourceEvent?.internal)return;const o=io(i.transform);e.mouseButton=i.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,i.sourceEvent?.type==="mousedown"&&n(!0),r&&r?.(i.sourceEvent,o)}}function mj({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:i,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(r&&c1(n,e.mouseButton??0)),a.sourceEvent?.sync||i([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,io(a.transform))}}function yj({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:a}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&c1(n,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o)){const c=io(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(s.sourceEvent,c)},r?150:0)}}}function vj({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:c,noPanClassName:l,lib:u,connectionInProgress:d}){return f=>{const h=e||n,p=r&&f.ctrlKey,y=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(jn(f,`${u}-flow__node`)||jn(f,`${u}-flow__edge`)))return!0;if(!i&&!h&&!o&&!a&&!r||s||d&&!y||jn(f,c)&&y||jn(f,l)&&(!y||o&&y&&!e)||!r&&f.ctrlKey&&y)return!1;if(!r&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!h&&!o&&!p&&y||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const x=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||y)&&x}}function xj({domNode:e,minZoom:n,maxZoom:r,translateExtent:i,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Rd().scaleExtent([n,r]).translateExtent(i),h=ze(e).call(f);_({x:o.x,y:o.y,zoom:$n(o.zoom,n,r)},[[0,0],[d.width,d.height]],i);const p=h.on("wheel.zoom"),y=h.on("dblclick.zoom");f.wheelDelta(l1);function x(A,P){return h?new Promise(q=>{f?.interpolate(P?.interpolate==="linear"?hr:si).transform(Zo(h,P?.duration,P?.ease,()=>q(!0)),A)}):Promise.resolve(!1)}function v({noWheelClassName:A,noPanClassName:P,onPaneContextMenu:q,userSelectionActive:M,panOnScroll:T,panOnDrag:O,panOnScrollMode:H,panOnScrollSpeed:F,preventScrolling:G,zoomOnPinch:V,zoomOnScroll:W,zoomOnDoubleClick:K,zoomActivationKeyPressed:D,lib:I,onTransformChange:z,connectionInProgress:L,paneClickDistance:B,selectionOnDrag:U}){M&&!u.isZoomingOrPanning&&m();const Y=T&&!D&&!M;f.clickDistance(U?1/0:!at(B)||B<0?0:B);const Z=Y?hj({zoomPanValues:u,noWheelClassName:A,d3Selection:h,d3Zoom:f,panOnScrollMode:H,panOnScrollSpeed:F,zoomOnPinch:V,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:c}):pj({noWheelClassName:A,preventScrolling:G,d3ZoomHandler:p});if(h.on("wheel.zoom",Z,{passive:!1}),!M){const te=gj({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",te);const J=mj({zoomPanValues:u,panOnDrag:O,onPaneContextMenu:!!q,onPanZoom:a,onTransformChange:z});f.on("zoom",J);const ie=yj({zoomPanValues:u,panOnDrag:O,panOnScroll:T,onPaneContextMenu:q,onPanZoomEnd:c,onDraggingChange:l});f.on("end",ie)}const ne=vj({zoomActivationKeyPressed:D,panOnDrag:O,zoomOnScroll:W,panOnScroll:T,zoomOnDoubleClick:K,zoomOnPinch:V,userSelectionActive:M,noPanClassName:P,noWheelClassName:A,lib:I,connectionInProgress:L});f.filter(ne),K?h.on("dblclick.zoom",y):h.on("dblclick.zoom",null)}function m(){f.on("zoom",null)}async function _(A,P,q){const M=Xo(A),T=f?.constrain()(M,P,q);return T&&await x(T),new Promise(O=>O(T))}async function b(A,P){const q=Xo(A);return await x(q,P),new Promise(M=>M(q))}function w(A){if(h){const P=Xo(A),q=h.property("__zoom");(q.k!==A.zoom||q.x!==A.x||q.y!==A.y)&&f?.transform(h,P,null,{sync:!0})}}function S(){const A=h?it(h.node()):{x:0,y:0,k:1};return{x:A.x,y:A.y,zoom:A.k}}function C(A,P){return h?new Promise(q=>{f?.interpolate(P?.interpolate==="linear"?hr:si).scaleTo(Zo(h,P?.duration,P?.ease,()=>q(!0)),A)}):Promise.resolve(!1)}function N(A,P){return h?new Promise(q=>{f?.interpolate(P?.interpolate==="linear"?hr:si).scaleBy(Zo(h,P?.duration,P?.ease,()=>q(!0)),A)}):Promise.resolve(!1)}function E(A){f?.scaleExtent(A)}function k(A){f?.translateExtent(A)}function R(A){const P=!at(A)||A<0?0:A;f?.clickDistance(P)}return{update:v,destroy:m,setViewport:b,setViewportConstrained:_,getViewport:S,scaleTo:C,scaleBy:N,setScaleExtent:E,setTranslateExtent:k,syncViewport:w,setClickDistance:R}}var Bn;(function(e){e.Line="line",e.Handle="handle"})(Bn||(Bn={}));function bj({width:e,prevWidth:n,height:r,prevHeight:i,affectsX:o,affectsY:a}){const s=e-n,c=r-i,l=[s>0?1:s<0?-1:0,c>0?1:c<0?-1:0];return s&&o&&(l[0]=l[0]*-1),c&&a&&(l[1]=l[1]*-1),l}function vp(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),i=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:i,affectsY:o}}function Dt(e,n){return Math.max(0,n-e)}function zt(e,n){return Math.max(0,e-n)}function ei(e,n,r){return Math.max(0,n-e,e-r)}function xp(e,n){return e?!n:n}function _j(e,n,r,i,o,a,s,c){let{affectsX:l,affectsY:u}=n;const{isHorizontal:d,isVertical:f}=n,h=d&&f,{xSnapped:p,ySnapped:y}=r,{minWidth:x,maxWidth:v,minHeight:m,maxHeight:_}=i,{x:b,y:w,width:S,height:C,aspectRatio:N}=e;let E=Math.floor(d?p-e.pointerX:0),k=Math.floor(f?y-e.pointerY:0);const R=S+(l?-E:E),A=C+(u?-k:k),P=-a[0]*S,q=-a[1]*C;let M=ei(R,x,v),T=ei(A,m,_);if(s){let F=0,G=0;l&&E<0?F=Dt(b+E+P,s[0][0]):!l&&E>0&&(F=zt(b+R+P,s[1][0])),u&&k<0?G=Dt(w+k+q,s[0][1]):!u&&k>0&&(G=zt(w+A+q,s[1][1])),M=Math.max(M,F),T=Math.max(T,G)}if(c){let F=0,G=0;l&&E>0?F=zt(b+E,c[0][0]):!l&&E<0&&(F=Dt(b+R,c[1][0])),u&&k>0?G=zt(w+k,c[0][1]):!u&&k<0&&(G=Dt(w+A,c[1][1])),M=Math.max(M,F),T=Math.max(T,G)}if(o){if(d){const F=ei(R/N,m,_)*N;if(M=Math.max(M,F),s){let G=0;!l&&!u||l&&!u&&h?G=zt(w+q+R/N,s[1][1])*N:G=Dt(w+q+(l?E:-E)/N,s[0][1])*N,M=Math.max(M,G)}if(c){let G=0;!l&&!u||l&&!u&&h?G=Dt(w+R/N,c[1][1])*N:G=zt(w+(l?E:-E)/N,c[0][1])*N,M=Math.max(M,G)}}if(f){const F=ei(A*N,x,v)/N;if(T=Math.max(T,F),s){let G=0;!l&&!u||u&&!l&&h?G=zt(b+A*N+P,s[1][0])/N:G=Dt(b+(u?k:-k)*N+P,s[0][0])/N,T=Math.max(T,G)}if(c){let G=0;!l&&!u||u&&!l&&h?G=Dt(b+A*N,c[1][0])/N:G=zt(b+(u?k:-k)*N,c[0][0])/N,T=Math.max(T,G)}}}k=k+(k<0?T:-T),E=E+(E<0?M:-M),o&&(h?R>A*N?k=(xp(l,u)?-E:E)/N:E=(xp(l,u)?-k:k)*N:d?(k=E/N,u=l):(E=k*N,l=u));const O=l?b+E:b,H=u?w+k:w;return{width:S+(l?-E:E),height:C+(u?-k:k),x:a[0]*E*(l?-1:1)+O,y:a[1]*k*(u?-1:1)+H}}const u1={width:0,height:0,x:0,y:0},wj={...u1,pointerX:0,pointerY:0,aspectRatio:1};function Sj(e){return[[0,0],[e.measured.width,e.measured.height]]}function Cj(e,n,r){const i=n.position.x+e.position.x,o=n.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,c=r[0]*a,l=r[1]*s;return[[i-c,o-l],[i+a-c,o+s-l]]}function Nj({domNode:e,nodeId:n,getStoreItems:r,onChange:i,onEnd:o}){const a=ze(e);let s={controlDirection:vp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:u,boundaries:d,keepAspectRatio:f,resizeDirection:h,onResizeStart:p,onResize:y,onResizeEnd:x,shouldResize:v}){let m={...u1},_={...wj};s={boundaries:d,resizeDirection:h,keepAspectRatio:f,controlDirection:vp(u)};let b,w=null,S=[],C,N,E,k=!1;const R=_d().on("start",A=>{const{nodeLookup:P,transform:q,snapGrid:M,snapToGrid:T,nodeOrigin:O,paneDomNode:H}=r();if(b=P.get(n),!b)return;w=H?.getBoundingClientRect()??null;const{xSnapped:F,ySnapped:G}=pr(A.sourceEvent,{transform:q,snapGrid:M,snapToGrid:T,containerBounds:w});m={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},_={...m,pointerX:F,pointerY:G,aspectRatio:m.width/m.height},C=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(C=P.get(b.parentId),N=C&&b.extent==="parent"?Sj(C):void 0),S=[],E=void 0;for(const[V,W]of P)if(W.parentId===n&&(S.push({id:V,position:{...W.position},extent:W.extent}),W.extent==="parent"||W.expandParent)){const K=Cj(W,b,W.origin??O);E?E=[[Math.min(K[0][0],E[0][0]),Math.min(K[0][1],E[0][1])],[Math.max(K[1][0],E[1][0]),Math.max(K[1][1],E[1][1])]]:E=K}p?.(A,{...m})}).on("drag",A=>{const{transform:P,snapGrid:q,snapToGrid:M,nodeOrigin:T}=r(),O=pr(A.sourceEvent,{transform:P,snapGrid:q,snapToGrid:M,containerBounds:w}),H=[];if(!b)return;const{x:F,y:G,width:V,height:W}=m,K={},D=b.origin??T,{width:I,height:z,x:L,y:B}=_j(_,s.controlDirection,O,s.boundaries,s.keepAspectRatio,D,N,E),U=I!==V,Y=z!==W,Z=L!==F&&U,ne=B!==G&&Y;if(!Z&&!ne&&!U&&!Y)return;if((Z||ne||D[0]===1||D[1]===1)&&(K.x=Z?L:m.x,K.y=ne?B:m.y,m.x=K.x,m.y=K.y,S.length>0)){const re=L-F,fe=B-G;for(const se of S)se.position={x:se.position.x-re+D[0]*(I-V),y:se.position.y-fe+D[1]*(z-W)},H.push(se)}if((U||Y)&&(K.width=U&&(!s.resizeDirection||s.resizeDirection==="horizontal")?I:m.width,K.height=Y&&(!s.resizeDirection||s.resizeDirection==="vertical")?z:m.height,m.width=K.width,m.height=K.height),C&&b.expandParent){const re=D[0]*(K.width??0);K.x&&K.x<re&&(m.x=re,_.x=_.x-(K.x-re));const fe=D[1]*(K.height??0);K.y&&K.y<fe&&(m.y=fe,_.y=_.y-(K.y-fe))}const te=bj({width:m.width,prevWidth:V,height:m.height,prevHeight:W,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),J={...m,direction:te};v?.(A,J)!==!1&&(k=!0,y?.(A,J),i(K,H))}).on("end",A=>{k&&(x?.(A,{...m}),o?.({...m}),k=!1)});a.call(R)}function l(){a.on(".drag",null)}return{update:c,destroy:l}}var Jo={exports:{}},Qo={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Ej(){if(bp)return Qo;bp=1;var e=FC(),n=HC();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var i=typeof Object.is=="function"?Object.is:r,o=n.useSyncExternalStore,a=e.useRef,s=e.useEffect,c=e.useMemo,l=e.useDebugValue;return Qo.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var y=a(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=c(function(){function m(C){if(!_){if(_=!0,b=C,C=h(C),p!==void 0&&x.hasValue){var N=x.value;if(p(N,C))return w=N}return w=C}if(N=w,i(b,C))return N;var E=h(C);return p!==void 0&&p(N,E)?(b=C,N):(b=C,w=E)}var _=!1,b,w,S=f===void 0?null:f;return[function(){return m(d())},S===null?void 0:function(){return m(S())}]},[d,f,h,p]);var v=o(u,y[0],y[1]);return s(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},Qo}var _p;function kj(){return _p||(_p=1,Jo.exports=Ej()),Jo.exports}var Rj=kj();const Aj=hd(Rj),jj={},wp=e=>{let n;const r=new Set,i=(d,f)=>{const h=typeof d=="function"?d(n):d;if(!Object.is(h,n)){const p=n;n=f??(typeof h!="object"||h===null)?h:Object.assign({},n,h),r.forEach(y=>y(n,p))}},o=()=>n,l={setState:i,getState:o,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(jj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=n=e(i,o,l);return l},Pj=e=>e?wp(e):wp,{useDebugValue:Mj}=mb,{useSyncExternalStoreWithSelector:Ij}=Aj,Tj=e=>e;function f1(e,n=Tj,r){const i=Ij(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return Mj(i),i}const Sp=(e,n)=>{const r=Pj(e),i=(o,a=n)=>f1(r,o,a);return Object.assign(i,r),i},Oj=(e,n)=>e?Sp(e,n):Sp;function we(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[i,o]of e)if(!Object.is(o,n.get(i)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(e[i],n[i]))return!1;return!0}const oo=j.createContext(null),qj=oo.Provider,d1=mt.error001();function pe(e,n){const r=j.useContext(oo);if(r===null)throw new Error(d1);return f1(r,e,n)}function Se(){const e=j.useContext(oo);if(e===null)throw new Error(d1);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Cp={display:"none"},Dj={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},h1="react-flow__node-desc",p1="react-flow__edge-desc",zj="react-flow__aria-live",Lj=e=>e.ariaLiveMessage,$j=e=>e.ariaLabelConfig;function Fj({rfId:e}){const n=pe(Lj);return g.jsx("div",{id:`${zj}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Dj,children:n})}function Hj({rfId:e,disableKeyboardA11y:n}){const r=pe($j);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:`${h1}-${e}`,style:Cp,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),g.jsx("div",{id:`${p1}-${e}`,style:Cp,children:r["edge.a11yDescription.default"]}),!n&&g.jsx(Fj,{rfId:e})]})}const ao=j.forwardRef(({position:e="top-left",children:n,className:r,style:i,...o},a)=>{const s=`${e}`.split("-");return g.jsx("div",{className:Ae(["react-flow__panel",r,...s]),style:i,ref:a,...o,children:n})});ao.displayName="Panel";function Bj({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:g.jsx(ao,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Vj=e=>{const n=[],r=[];for(const[,i]of e.nodeLookup)i.selected&&n.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&r.push(i);return{selectedNodes:n,selectedEdges:r}},ti=e=>e.id;function Gj(e,n){return we(e.selectedNodes.map(ti),n.selectedNodes.map(ti))&&we(e.selectedEdges.map(ti),n.selectedEdges.map(ti))}function Uj({onSelectionChange:e}){const n=Se(),{selectedNodes:r,selectedEdges:i}=pe(Vj,Gj);return j.useEffect(()=>{const o={nodes:r,edges:i};e?.(o),n.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[r,i,e]),null}const Wj=e=>!!e.onSelectionChangeHandlers;function Kj({onSelectionChange:e}){const n=pe(Wj);return e||n?g.jsx(Uj,{onSelectionChange:e}):null}const g1=[0,0],Yj={x:0,y:0,zoom:1},Xj=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Np=[...Xj,"rfId"],Zj=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Ep={translateExtent:Nr,nodeOrigin:g1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Jj(e){const{setNodes:n,setEdges:r,setMinZoom:i,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:s,reset:c,setDefaultNodesAndEdges:l}=pe(Zj,we),u=Se();j.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=Ep,c()}),[]);const d=j.useRef(Ep);return j.useEffect(()=>{for(const f of Np){const h=e[f],p=d.current[f];h!==p&&(typeof e[f]>"u"||(f==="nodes"?n(h):f==="edges"?r(h):f==="minZoom"?i(h):f==="maxZoom"?o(h):f==="translateExtent"?a(h):f==="nodeExtent"?s(h):f==="ariaLabelConfig"?u.setState({ariaLabelConfig:zA(h)}):f==="fitView"?u.setState({fitViewQueued:h}):f==="fitViewOptions"?u.setState({fitViewOptions:h}):u.setState({[f]:h})))}d.current=e},Np.map(f=>e[f])),null}function kp(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Qj(e){const[n,r]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){r(e);return}const i=kp(),o=()=>r(i?.matches?"dark":"light");return o(),i?.addEventListener("change",o),()=>{i?.removeEventListener("change",o)}},[e]),n!==null?n:kp()?.matches?"dark":"light"}const Rp=typeof document<"u"?document:null;function Ar(e=null,n={target:Rp,actInsideInputWithModifier:!0}){const[r,i]=j.useState(!1),o=j.useRef(!1),a=j.useRef(new Set([])),[s,c]=j.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return j.useEffect(()=>{const l=n?.target??Rp,u=n?.actInsideInputWithModifier??!0;if(e!==null){const d=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!o.current||o.current&&!u)&&W_(p))return!1;const x=jp(p.code,c);if(a.current.add(p[x]),Ap(s,a.current,!1)){const v=p.composedPath?.()?.[0]||p.target,m=v?.nodeName==="BUTTON"||v?.nodeName==="A";n.preventDefault!==!1&&(o.current||!m)&&p.preventDefault(),i(!0)}},f=p=>{const y=jp(p.code,c);Ap(s,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(p[y]),p.key==="Meta"&&a.current.clear(),o.current=!1},h=()=>{a.current.clear(),i(!1)};return l?.addEventListener("keydown",d),l?.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{l?.removeEventListener("keydown",d),l?.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),r}function Ap(e,n,r){return e.filter(i=>r||i.length===n.size).some(i=>i.every(o=>n.has(o)))}function jp(e,n){return n.includes(e)?"code":"key"}const eP=()=>{const e=Se();return j.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(n,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[i,o,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:n.x??i,y:n.y??o,zoom:n.zoom??a},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,i]=e.getState().transform;return{x:n,y:r,zoom:i}},setCenter:async(n,r,i)=>e.getState().setCenter(n,r,i),fitBounds:async(n,r)=>{const{width:i,height:o,minZoom:a,maxZoom:s,panZoom:c}=e.getState(),l=Pd(n,i,o,a,s,r?.padding??.1);return c?(await c.setViewport(l,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:i,snapGrid:o,snapToGrid:a,domNode:s}=e.getState();if(!s)return n;const{x:c,y:l}=s.getBoundingClientRect(),u={x:n.x-c,y:n.y-l},d=r.snapGrid??o,f=r.snapToGrid??a;return zr(u,i,f,d)},flowToScreenPosition:n=>{const{transform:r,domNode:i}=e.getState();if(!i)return n;const{x:o,y:a}=i.getBoundingClientRect(),s=ji(n,r);return{x:s.x+o,y:s.y+a}}}),[])};function m1(e,n){const r=[],i=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")i.set(a.id,[a]);else{const s=i.get(a.id);s?s.push(a):i.set(a.id,[a])}for(const a of n){const s=i.get(a.id);if(!s){r.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){r.push({...s[0].item});continue}const c={...a};for(const l of s)tP(l,c);r.push(c)}return o.length&&o.forEach(a=>{a.index!==void 0?r.splice(a.index,0,{...a.item}):r.push({...a.item})}),r}function tP(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function y1(e,n){return m1(e,n)}function v1(e,n){return m1(e,n)}function Zt(e,n){return{id:e,type:"select",selected:n}}function Pn(e,n=new Set,r=!1){const i=[];for(const[o,a]of e){const s=n.has(o);!(a.selected===void 0&&!s)&&a.selected!==s&&(r&&(a.selected=s),i.push(Zt(a.id,s)))}return i}function Pp({items:e=[],lookup:n}){const r=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,a]of e.entries()){const s=n.get(a.id),c=s?.internals?.userNode??s;c!==void 0&&c!==a&&r.push({id:a.id,item:a,type:"replace"}),c===void 0&&r.push({item:a,type:"add",index:o})}for(const[o]of n)i.get(o)===void 0&&r.push({id:o,type:"remove"});return r}function Mp(e){return{id:e.id,type:"remove"}}const Ip=e=>RA(e),nP=e=>L_(e);function x1(e){return j.forwardRef(e)}const rP=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Tp(e){const[n,r]=j.useState(BigInt(0)),[i]=j.useState(()=>iP(()=>r(o=>o+BigInt(1))));return rP(()=>{const o=i.get();o.length&&(e(o),i.reset())},[n]),i}function iP(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const b1=j.createContext(null);function oP({children:e}){const n=Se(),r=j.useCallback(c=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:d,onNodesChange:f,nodeLookup:h,fitViewQueued:p,onNodesChangeMiddlewareMap:y}=n.getState();let x=l;for(const m of c)x=typeof m=="function"?m(x):m;let v=Pp({items:x,lookup:h});for(const m of y.values())v=m(v);d&&u(x),v.length>0?f?.(v):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:m,nodes:_,setNodes:b}=n.getState();m&&b(_)})},[]),i=Tp(r),o=j.useCallback(c=>{const{edges:l=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:h}=n.getState();let p=l;for(const y of c)p=typeof y=="function"?y(p):y;d?u(p):f&&f(Pp({items:p,lookup:h}))},[]),a=Tp(o),s=j.useMemo(()=>({nodeQueue:i,edgeQueue:a}),[]);return g.jsx(b1.Provider,{value:s,children:e})}function aP(){const e=j.useContext(b1);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const sP=e=>!!e.panZoom;function zd(){const e=eP(),n=Se(),r=aP(),i=pe(sP),o=j.useMemo(()=>{const a=f=>n.getState().nodeLookup.get(f),s=f=>{r.nodeQueue.push(f)},c=f=>{r.edgeQueue.push(f)},l=f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState(),y=Ip(f)?f:h.get(f.id),x=y.parentId?G_(y.position,y.measured,y.parentId,h,p):y.position,v={...y,position:x,width:y.measured?.width??y.width,height:y.measured?.height??y.height};return Fn(v)},u=(f,h,p={replace:!1})=>{s(y=>y.map(x=>{if(x.id===f){const v=typeof h=="function"?h(x):h;return p.replace&&Ip(v)?v:{...x,...v}}return x}))},d=(f,h,p={replace:!1})=>{c(y=>y.map(x=>{if(x.id===f){const v=typeof h=="function"?h(x):h;return p.replace&&nP(v)?v:{...x,...v}}return x}))};return{getNodes:()=>n.getState().nodes.map(f=>({...f})),getNode:f=>a(f)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:f=[]}=n.getState();return f.map(h=>({...h}))},getEdge:f=>n.getState().edgeLookup.get(f),setNodes:s,setEdges:c,addNodes:f=>{const h=Array.isArray(f)?f:[f];r.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];r.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=n.getState(),[y,x,v]=p;return{nodes:f.map(m=>({...m})),edges:h.map(m=>({...m})),viewport:{x:y,y:x,zoom:v}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:y,onNodesDelete:x,onEdgesDelete:v,triggerNodeChanges:m,triggerEdgeChanges:_,onDelete:b,onBeforeDelete:w}=n.getState(),{nodes:S,edges:C}=await IA({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:y,onBeforeDelete:w}),N=C.length>0,E=S.length>0;if(N){const k=C.map(Mp);v?.(C),_(k)}if(E){const k=S.map(Mp);x?.(S),m(k)}return(E||N)&&b?.({nodes:S,edges:C}),{deletedNodes:S,deletedEdges:C}},getIntersectingNodes:(f,h=!0,p)=>{const y=sp(f),x=y?f:l(f),v=p!==void 0;return x?(p||n.getState().nodes).filter(m=>{const _=n.getState().nodeLookup.get(m.id);if(_&&!y&&(m.id===f.id||!_.internals.positionAbsolute))return!1;const b=Fn(v?m:_),w=kr(b,x);return h&&w>0||w>=b.width*b.height||w>=x.width*x.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const x=sp(f)?f:l(f);if(!x)return!1;const v=kr(x,h);return p&&v>0||v>=h.width*h.height||v>=x.width*x.height},updateNode:u,updateNodeData:(f,h,p={replace:!1})=>{u(f,y=>{const x=typeof h=="function"?h(y):h;return p.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},p)},updateEdge:d,updateEdgeData:(f,h,p={replace:!1})=>{d(f,y=>{const x=typeof h=="function"?h(y):h;return p.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState();return AA(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}-${f}${h?`-${h}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}${f?h?`-${f}-${h}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const h=n.getState().fitViewResolver??DA();return n.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),r.nodeQueue.push(p=>[...p]),h.promise}}},[]);return j.useMemo(()=>({...o,...e,viewportInitialized:i}),[i])}const Op=e=>e.selected,cP=typeof window<"u"?window:void 0;function lP({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=Se(),{deleteElements:i}=zd(),o=Ar(e,{actInsideInputWithModifier:!1}),a=Ar(n,{target:cP});j.useEffect(()=>{if(o){const{edges:s,nodes:c}=r.getState();i({nodes:c.filter(Op),edges:s.filter(Op)}),r.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])}function uP(e){const n=Se();j.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const i=Md(e.current);(i.height===0||i.width===0)&&n.getState().onError?.("004",mt.error004()),n.setState({width:i.width||500,height:i.height||500})};if(e.current){r(),window.addEventListener("resize",r);const i=new ResizeObserver(()=>r());return i.observe(e.current),()=>{window.removeEventListener("resize",r),i&&e.current&&i.unobserve(e.current)}}},[])}const so={position:"absolute",width:"100%",height:"100%",top:0,left:0},fP=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function dP({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=ln.Free,zoomOnDoubleClick:s=!0,panOnDrag:c=!0,defaultViewport:l,translateExtent:u,minZoom:d,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:y,noWheelClassName:x,noPanClassName:v,onViewportChange:m,isControlledViewport:_,paneClickDistance:b,selectionOnDrag:w}){const S=Se(),C=j.useRef(null),{userSelectionActive:N,lib:E,connectionInProgress:k}=pe(fP,we),R=Ar(h),A=j.useRef();uP(C);const P=j.useCallback(q=>{m?.({x:q[0],y:q[1],zoom:q[2]}),_||S.setState({transform:q})},[m,_]);return j.useEffect(()=>{if(C.current){A.current=xj({domNode:C.current,minZoom:d,maxZoom:f,translateExtent:u,viewport:l,onDraggingChange:O=>S.setState({paneDragging:O}),onPanZoomStart:(O,H)=>{const{onViewportChangeStart:F,onMoveStart:G}=S.getState();G?.(O,H),F?.(H)},onPanZoom:(O,H)=>{const{onViewportChange:F,onMove:G}=S.getState();G?.(O,H),F?.(H)},onPanZoomEnd:(O,H)=>{const{onViewportChangeEnd:F,onMoveEnd:G}=S.getState();G?.(O,H),F?.(H)}});const{x:q,y:M,zoom:T}=A.current.getViewport();return S.setState({panZoom:A.current,transform:[q,M,T],domNode:C.current.closest(".react-flow")}),()=>{A.current?.destroy()}}},[]),j.useEffect(()=>{A.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:c,zoomActivationKeyPressed:R,preventScrolling:p,noPanClassName:v,userSelectionActive:N,noWheelClassName:x,lib:E,onTransformChange:P,connectionInProgress:k,selectionOnDrag:w,paneClickDistance:b})},[e,n,r,i,o,a,s,c,R,p,v,N,x,E,P,k,w,b]),g.jsx("div",{className:"react-flow__renderer",ref:C,style:so,children:y})}const hP=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function pP(){const{userSelectionActive:e,userSelectionRect:n}=pe(hP,we);return e&&n?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const ea=(e,n)=>r=>{r.target===n.current&&e?.(r)},gP=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function mP({isSelecting:e,selectionKeyPressed:n,selectionMode:r=Er.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:c,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:y}){const x=Se(),{userSelectionActive:v,elementsSelectable:m,dragging:_,connectionInProgress:b}=pe(gP,we),w=m&&(e||v),S=j.useRef(null),C=j.useRef(),N=j.useRef(new Set),E=j.useRef(new Set),k=j.useRef(!1),R=F=>{if(k.current||b){k.current=!1;return}l?.(F),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},A=F=>{if(Array.isArray(i)&&i?.includes(2)){F.preventDefault();return}u?.(F)},P=d?F=>d(F):void 0,q=F=>{k.current&&(F.stopPropagation(),k.current=!1)},M=F=>{const{domNode:G}=x.getState();if(C.current=G?.getBoundingClientRect(),!C.current)return;const V=F.target===S.current;if(!V&&!!F.target.closest(".nokey")||!e||!(a&&V||n)||F.button!==0||!F.isPrimary)return;F.target?.setPointerCapture?.(F.pointerId),k.current=!1;const{x:D,y:I}=st(F.nativeEvent,C.current);x.setState({userSelectionRect:{width:0,height:0,startX:D,startY:I,x:D,y:I}}),V||(F.stopPropagation(),F.preventDefault())},T=F=>{const{userSelectionRect:G,transform:V,nodeLookup:W,edgeLookup:K,connectionLookup:D,triggerNodeChanges:I,triggerEdgeChanges:z,defaultEdgeOptions:L,resetSelectedElements:B}=x.getState();if(!C.current||!G)return;const{x:U,y:Y}=st(F.nativeEvent,C.current),{startX:Z,startY:ne}=G;if(!k.current){const fe=n?0:o;if(Math.hypot(U-Z,Y-ne)<=fe)return;B(),s?.(F)}k.current=!0;const te={startX:Z,startY:ne,x:U<Z?U:Z,y:Y<ne?Y:ne,width:Math.abs(U-Z),height:Math.abs(Y-ne)},J=N.current,ie=E.current;N.current=new Set(jd(W,te,V,r===Er.Partial,!0).map(fe=>fe.id)),E.current=new Set;const re=L?.selectable??!0;for(const fe of N.current){const se=D.get(fe);if(se)for(const{edgeId:ge}of se.values()){const Ee=K.get(ge);Ee&&(Ee.selectable??re)&&E.current.add(ge)}}if(!cp(J,N.current)){const fe=Pn(W,N.current,!0);I(fe)}if(!cp(ie,E.current)){const fe=Pn(K,E.current);z(fe)}x.setState({userSelectionRect:te,userSelectionActive:!0,nodesSelectionActive:!1})},O=F=>{F.button===0&&(F.target?.releasePointerCapture?.(F.pointerId),!v&&F.target===S.current&&x.getState().userSelectionRect&&R?.(F),x.setState({userSelectionActive:!1,userSelectionRect:null}),k.current&&(c?.(F),x.setState({nodesSelectionActive:N.current.size>0})))},H=i===!0||Array.isArray(i)&&i.includes(0);return g.jsxs("div",{className:Ae(["react-flow__pane",{draggable:H,dragging:_,selection:e}]),onClick:w?void 0:ea(R,S),onContextMenu:ea(A,S),onWheel:ea(P,S),onPointerEnter:w?void 0:f,onPointerMove:w?T:h,onPointerUp:w?O:void 0,onPointerDownCapture:w?M:void 0,onClickCapture:w?q:void 0,onPointerLeave:p,ref:S,style:so,children:[y,g.jsx(pP,{})]})}function Xf({id:e,store:n,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:c,onError:l}=n.getState(),u=c.get(e);if(!u){l?.("012",mt.error012(e));return}n.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&s)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function _1({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:o,isSelectable:a,nodeClickDistance:s}){const c=Se(),[l,u]=j.useState(!1),d=j.useRef();return j.useEffect(()=>{d.current=oj({getStoreItems:()=>c.getState(),onNodeMouseDown:f=>{Xf({id:f,store:c,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),j.useEffect(()=>{if(n)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:r,handleSelector:i,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:s}),()=>{d.current?.destroy()}},[r,i,n,a,e,o]),l}const yP=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function w1(){const e=Se();return j.useCallback(r=>{const{nodeExtent:i,snapToGrid:o,snapGrid:a,nodesDraggable:s,onError:c,updateNodePositions:l,nodeLookup:u,nodeOrigin:d}=e.getState(),f=new Map,h=yP(s),p=o?a[0]:5,y=o?a[1]:5,x=r.direction.x*p*r.factor,v=r.direction.y*y*r.factor;for(const[,m]of u){if(!h(m))continue;let _={x:m.internals.positionAbsolute.x+x,y:m.internals.positionAbsolute.y+v};o&&(_=Dr(_,a));const{position:b,positionAbsolute:w}=$_({nodeId:m.id,nextPosition:_,nodeLookup:u,nodeExtent:i,nodeOrigin:d,onError:c});m.position=b,m.internals.positionAbsolute=w,f.set(m.id,m)}l(f)},[])}const Ld=j.createContext(null),vP=Ld.Provider;Ld.Consumer;const S1=()=>j.useContext(Ld),xP=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),bP=(e,n,r)=>i=>{const{connectionClickStartHandle:o,connectionMode:a,connection:s}=i,{fromHandle:c,toHandle:l,isValid:u}=s,d=l?.nodeId===e&&l?.id===n&&l?.type===r;return{connectingFrom:c?.nodeId===e&&c?.id===n&&c?.type===r,connectingTo:d,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===r,isPossibleEndHandle:a===zn.Strict?c?.type!==r:e!==c?.nodeId||n!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!o,valid:d&&u}};function _P({type:e="source",position:n=oe.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:s,onConnect:c,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p){const y=s||null,x=e==="target",v=Se(),m=S1(),{connectOnClick:_,noPanClassName:b,rfId:w}=pe(xP,we),{connectingFrom:S,connectingTo:C,clickConnecting:N,isPossibleEndHandle:E,connectionInProcess:k,clickConnectionInProcess:R,valid:A}=pe(bP(m,y,e),we);m||v.getState().onError?.("010",mt.error010());const P=T=>{const{defaultEdgeOptions:O,onConnect:H,hasDefaultEdges:F}=v.getState(),G={...O,...T};if(F){const{edges:V,setEdges:W}=v.getState();W(J_(G,V))}H?.(G),c?.(G)},q=T=>{if(!m)return;const O=K_(T.nativeEvent);if(o&&(O&&T.button===0||!O)){const H=v.getState();Yf.onPointerDown(T.nativeEvent,{handleDomNode:T.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:x,handleId:y,nodeId:m,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:P,isValidConnection:r||H.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}O?d?.(T):f?.(T)},M=T=>{const{onClickConnectStart:O,onClickConnectEnd:H,connectionClickStartHandle:F,connectionMode:G,isValidConnection:V,lib:W,rfId:K,nodeLookup:D,connection:I}=v.getState();if(!m||!F&&!o)return;if(!F){O?.(T.nativeEvent,{nodeId:m,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,id:y}});return}const z=U_(T.target),L=r||V,{connection:B,isValid:U}=Yf.isValid(T.nativeEvent,{handle:{nodeId:m,id:y,type:e},connectionMode:G,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:L,flowId:K,doc:z,lib:W,nodeLookup:D});U&&B&&P(B);const Y=structuredClone(I);delete Y.inProgress,Y.toPosition=Y.toHandle?Y.toHandle.position:null,H?.(T,Y),v.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":n,"data-id":`${w}-${m}-${y}-${e}`,className:Ae(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",b,u,{source:!x,target:x,connectable:i,connectablestart:o,connectableend:a,clickconnecting:N,connectingfrom:S,connectingto:C,valid:A,connectionindicator:i&&(!k||E)&&(k||R?a:o)}]),onMouseDown:q,onTouchStart:q,onClick:_?M:void 0,ref:p,...h,children:l})}const Vt=j.memo(x1(_P));function wP({data:e,isConnectable:n,sourcePosition:r=oe.Bottom}){return g.jsxs(g.Fragment,{children:[e?.label,g.jsx(Vt,{type:"source",position:r,isConnectable:n})]})}function SP({data:e,isConnectable:n,targetPosition:r=oe.Top,sourcePosition:i=oe.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Vt,{type:"target",position:r,isConnectable:n}),e?.label,g.jsx(Vt,{type:"source",position:i,isConnectable:n})]})}function CP(){return null}function NP({data:e,isConnectable:n,targetPosition:r=oe.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Vt,{type:"target",position:r,isConnectable:n}),e?.label]})}const Pi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},qp={input:wP,default:SP,output:NP,group:CP};function EP(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const kP=e=>{const{width:n,height:r,x:i,y:o}=qr(e.nodeLookup,{filter:a=>!!a.selected});return{width:at(n)?n:null,height:at(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${o}px)`}};function RP({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const i=Se(),{width:o,height:a,transformString:s,userSelectionActive:c}=pe(kP,we),l=w1(),u=j.useRef(null);if(j.useEffect(()=>{r||u.current?.focus({preventScroll:!0})},[r]),_1({nodeRef:u}),c||!o||!a)return null;const d=e?h=>{const p=i.getState().nodes.filter(y=>y.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(Pi,h.key)&&(h.preventDefault(),l({direction:Pi[h.key],factor:h.shiftKey?4:1}))};return g.jsx("div",{className:Ae(["react-flow__nodesselection","react-flow__container",n]),style:{transform:s},children:g.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:r?void 0:-1,onKeyDown:r?void 0:f,style:{width:o,height:a}})})}const Dp=typeof window<"u"?window:void 0,AP=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function C1({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:d,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:v,elementsSelectable:m,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:w,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:E,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:P,preventScrolling:q,onSelectionContextMenu:M,noWheelClassName:T,noPanClassName:O,disableKeyboardA11y:H,onViewportChange:F,isControlledViewport:G}){const{nodesSelectionActive:V,userSelectionActive:W}=pe(AP,we),K=Ar(u,{target:Dp}),D=Ar(x,{target:Dp}),I=D||E,z=D||w,L=d&&I!==!0,B=K||W||L;return lP({deleteKeyCode:l,multiSelectionKeyCode:y}),g.jsx(dP,{onPaneContextMenu:a,elementsSelectable:m,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:z,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!K&&I,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:q,noWheelClassName:T,noPanClassName:O,onViewportChange:F,isControlledViewport:G,paneClickDistance:c,selectionOnDrag:L,children:g.jsxs(mP,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:I,isSelecting:!!B,selectionMode:f,selectionKeyPressed:K,paneClickDistance:c,selectionOnDrag:L,children:[e,V&&g.jsx(RP,{onSelectionContextMenu:M,noPanClassName:O,disableKeyboardA11y:H})]})})}C1.displayName="FlowRenderer";const jP=j.memo(C1),PP=e=>n=>e?jd(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function MP(e){return pe(j.useCallback(PP(e),[e]),we)}const IP=e=>e.updateNodeInternals;function TP(){const e=pe(IP),[n]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const i=new Map;r.forEach(o=>{const a=o.target.getAttribute("data-id");i.set(a,{id:a,nodeElement:o.target,force:!0})}),e(i)}));return j.useEffect(()=>()=>{n?.disconnect()},[n]),n}function OP({node:e,nodeType:n,hasDimensions:r,resizeObserver:i}){const o=Se(),a=j.useRef(null),s=j.useRef(null),c=j.useRef(e.sourcePosition),l=j.useRef(e.targetPosition),u=j.useRef(n),d=r&&!!e.internals.handleBounds;return j.useEffect(()=>{a.current&&!e.hidden&&(!d||s.current!==a.current)&&(s.current&&i?.unobserve(s.current),i?.observe(a.current),s.current=a.current)},[d,e.hidden]),j.useEffect(()=>()=>{s.current&&(i?.unobserve(s.current),s.current=null)},[]),j.useEffect(()=>{if(a.current){const f=u.current!==n,h=c.current!==e.sourcePosition,p=l.current!==e.targetPosition;(f||h||p)&&(u.current=n,c.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),a}function qP({id:e,onClick:n,onMouseEnter:r,onMouseMove:i,onMouseLeave:o,onContextMenu:a,onDoubleClick:s,nodesDraggable:c,elementsSelectable:l,nodesConnectable:u,nodesFocusable:d,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:y,rfId:x,nodeTypes:v,nodeClickDistance:m,onError:_}){const{node:b,internals:w,isParent:S}=pe(U=>{const Y=U.nodeLookup.get(e),Z=U.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:Z}},we);let C=b.type||"default",N=v?.[C]||qp[C];N===void 0&&(_?.("003",mt.error003(C)),C="default",N=v?.default||qp.default);const E=!!(b.draggable||c&&typeof b.draggable>"u"),k=!!(b.selectable||l&&typeof b.selectable>"u"),R=!!(b.connectable||u&&typeof b.connectable>"u"),A=!!(b.focusable||d&&typeof b.focusable>"u"),P=Se(),q=V_(b),M=OP({node:b,nodeType:C,hasDimensions:q,resizeObserver:f}),T=_1({nodeRef:M,disabled:b.hidden||!E,noDragClassName:h,handleSelector:b.dragHandle,nodeId:e,isSelectable:k,nodeClickDistance:m}),O=w1();if(b.hidden)return null;const H=Tt(b),F=EP(b),G=k||E||n||r||i||o,V=r?U=>r(U,{...w.userNode}):void 0,W=i?U=>i(U,{...w.userNode}):void 0,K=o?U=>o(U,{...w.userNode}):void 0,D=a?U=>a(U,{...w.userNode}):void 0,I=s?U=>s(U,{...w.userNode}):void 0,z=U=>{const{selectNodesOnDrag:Y,nodeDragThreshold:Z}=P.getState();k&&(!Y||!E||Z>0)&&Xf({id:e,store:P,nodeRef:M}),n&&n(U,{...w.userNode})},L=U=>{if(!(W_(U.nativeEvent)||y)){if(O_.includes(U.key)&&k){const Y=U.key==="Escape";Xf({id:e,store:P,unselect:Y,nodeRef:M})}else if(E&&b.selected&&Object.prototype.hasOwnProperty.call(Pi,U.key)){U.preventDefault();const{ariaLabelConfig:Y}=P.getState();P.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:U.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),O({direction:Pi[U.key],factor:U.shiftKey?4:1})}}},B=()=>{if(y||!M.current?.matches(":focus-visible"))return;const{transform:U,width:Y,height:Z,autoPanOnNodeFocus:ne,setCenter:te}=P.getState();if(!ne)return;jd(new Map([[e,b]]),{x:0,y:0,width:Y,height:Z},U,!0).length>0||te(b.position.x+H.width/2,b.position.y+H.height/2,{zoom:U[2]})};return g.jsx("div",{className:Ae(["react-flow__node",`react-flow__node-${C}`,{[p]:E},b.className,{selected:b.selected,selectable:k,parent:S,draggable:E,dragging:T}]),ref:M,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:G?"all":"none",visibility:q?"visible":"hidden",...b.style,...F},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:V,onMouseMove:W,onMouseLeave:K,onContextMenu:D,onClick:z,onDoubleClick:I,onKeyDown:A?L:void 0,tabIndex:A?0:void 0,onFocus:A?B:void 0,role:b.ariaRole??(A?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${h1}-${x}`,"aria-label":b.ariaLabel,...b.domAttributes,children:g.jsx(vP,{value:e,children:g.jsx(N,{id:e,data:b.data,type:C,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:b.selected??!1,selectable:k,draggable:E,deletable:b.deletable??!0,isConnectable:R,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:T,dragHandle:b.dragHandle,zIndex:w.z,parentId:b.parentId,...H})})})}var DP=j.memo(qP);const zP=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function N1(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,onError:a}=pe(zP,we),s=MP(e.onlyRenderVisibleElements),c=TP();return g.jsx("div",{className:"react-flow__nodes",style:so,children:s.map(l=>g.jsx(DP,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},l))})}N1.displayName="NodeRenderer";const LP=j.memo(N1);function $P(e){return pe(j.useCallback(r=>{if(!e)return r.edges.map(o=>o.id);const i=[];if(r.width&&r.height)for(const o of r.edges){const a=r.nodeLookup.get(o.source),s=r.nodeLookup.get(o.target);a&&s&&FA({sourceNode:a,targetNode:s,width:r.width,height:r.height,transform:r.transform})&&i.push(o.id)}return i},[e]),we)}const FP=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return g.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},HP=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return g.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},zp={[Ln.Arrow]:FP,[Ln.ArrowClosed]:HP};function BP(e){const n=Se();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(zp,e)?zp[e]:(n.getState().onError?.("009",mt.error009(e)),null),[e])}const VP=({id:e,type:n,color:r,width:i=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const l=BP(n);return l?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0",children:g.jsx(l,{color:r,strokeWidth:s})}):null},E1=({defaultColor:e,rfId:n})=>{const r=pe(a=>a.edges),i=pe(a=>a.defaultEdgeOptions),o=j.useMemo(()=>KA(r,{id:n,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[r,i,n,e]);return o.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:o.map(a=>g.jsx(VP,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};E1.displayName="MarkerDefinitions";var GP=j.memo(E1);function k1({x:e,y:n,label:r,labelStyle:i,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:l,className:u,...d}){const[f,h]=j.useState({x:1,y:0,width:0,height:0}),p=Ae(["react-flow__edge-textwrapper",u]),y=j.useRef(null);return j.useEffect(()=>{if(y.current){const x=y.current.getBBox();h({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),r?g.jsxs("g",{transform:`translate(${e-f.width/2} ${n-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...d,children:[o&&g.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:c,ry:c}),g.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:y,style:i,children:r}),l]}):null}k1.displayName="EdgeText";const UP=j.memo(k1);function co({path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,interactionWidth:u=20,...d}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...d,d:e,fill:"none",className:Ae(["react-flow__edge-path",d.className])}),u?g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,i&&at(n)&&at(r)?g.jsx(UP,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function Lp({pos:e,x1:n,y1:r,x2:i,y2:o}){return e===oe.Left||e===oe.Right?[.5*(n+i),r]:[n,.5*(r+o)]}function R1({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top}){const[s,c]=Lp({pos:r,x1:e,y1:n,x2:i,y2:o}),[l,u]=Lp({pos:a,x1:i,y1:o,x2:e,y2:n}),[d,f,h,p]=Y_({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${n} C${s},${c} ${l},${u} ${i},${o}`,d,f,h,p]}function A1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s,targetPosition:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:m})=>{const[_,b,w]=R1({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:c}),S=e.isInternal?void 0:n;return g.jsx(co,{id:S,path:_,labelX:b,labelY:w,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:m})})}const WP=A1({isInternal:!1}),j1=A1({isInternal:!0});WP.displayName="SimpleBezierEdge";j1.displayName="SimpleBezierEdgeInternal";function P1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:p=oe.Bottom,targetPosition:y=oe.Top,markerEnd:x,markerStart:v,pathOptions:m,interactionWidth:_})=>{const[b,w,S]=Uf({sourceX:r,sourceY:i,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:m?.borderRadius,offset:m?.offset,stepPosition:m?.stepPosition}),C=e.isInternal?void 0:n;return g.jsx(co,{id:C,path:b,labelX:w,labelY:S,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:x,markerStart:v,interactionWidth:_})})}const M1=P1({isInternal:!1}),I1=P1({isInternal:!0});M1.displayName="SmoothStepEdge";I1.displayName="SmoothStepEdgeInternal";function T1(e){return j.memo(({id:n,...r})=>{const i=e.isInternal?void 0:n;return g.jsx(M1,{...r,id:i,pathOptions:j.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const KP=T1({isInternal:!1}),O1=T1({isInternal:!0});KP.displayName="StepEdge";O1.displayName="StepEdgeInternal";function q1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})=>{const[v,m,_]=Q_({sourceX:r,sourceY:i,targetX:o,targetY:a}),b=e.isInternal?void 0:n;return g.jsx(co,{id:b,path:v,labelX:m,labelY:_,label:s,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})})}const YP=q1({isInternal:!1}),D1=q1({isInternal:!0});YP.displayName="StraightEdge";D1.displayName="StraightEdgeInternal";function z1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s=oe.Bottom,targetPosition:c=oe.Top,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,pathOptions:m,interactionWidth:_})=>{const[b,w,S]=X_({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:c,curvature:m?.curvature}),C=e.isInternal?void 0:n;return g.jsx(co,{id:C,path:b,labelX:w,labelY:S,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:_})})}const XP=z1({isInternal:!1}),L1=z1({isInternal:!0});XP.displayName="BezierEdge";L1.displayName="BezierEdgeInternal";const $p={default:L1,straight:D1,step:O1,smoothstep:I1,simplebezier:j1},Fp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ZP=(e,n,r)=>r===oe.Left?e-n:r===oe.Right?e+n:e,JP=(e,n,r)=>r===oe.Top?e-n:r===oe.Bottom?e+n:e,Hp="react-flow__edgeupdater";function Bp({position:e,centerX:n,centerY:r,radius:i=10,onMouseDown:o,onMouseEnter:a,onMouseOut:s,type:c}){return g.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:s,className:Ae([Hp,`${Hp}-${c}`]),cx:ZP(n,i,e),cy:JP(r,i,e),r:i,stroke:"transparent",fill:"transparent"})}function QP({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:i,sourceY:o,targetX:a,targetY:s,sourcePosition:c,targetPosition:l,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const y=Se(),x=(w,S)=>{if(w.button!==0)return;const{autoPanOnConnect:C,domNode:N,isValidConnection:E,connectionMode:k,connectionRadius:R,lib:A,onConnectStart:P,onConnectEnd:q,cancelConnection:M,nodeLookup:T,rfId:O,panBy:H,updateConnection:F}=y.getState(),G=S.type==="target",V=(D,I)=>{h(!1),f?.(D,r,S.type,I)},W=D=>u?.(r,D),K=(D,I)=>{h(!0),d?.(w,r,S.type),P?.(D,I)};Yf.onPointerDown(w.nativeEvent,{autoPanOnConnect:C,connectionMode:k,connectionRadius:R,domNode:N,handleId:S.id,nodeId:S.nodeId,nodeLookup:T,isTarget:G,edgeUpdaterType:S.type,lib:A,flowId:O,cancelConnection:M,panBy:H,isValidConnection:E,onConnect:W,onConnectStart:K,onConnectEnd:q,onReconnectEnd:V,updateConnection:F,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold,handleDomNode:w.currentTarget})},v=w=>x(w,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),m=w=>x(w,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>p(!0),b=()=>p(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Bp,{position:c,centerX:i,centerY:o,radius:n,onMouseDown:v,onMouseEnter:_,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&g.jsx(Bp,{position:l,centerX:a,centerY:s,radius:n,onMouseDown:m,onMouseEnter:_,onMouseOut:b,type:"target"})]})}function eM({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:i,onClick:o,onDoubleClick:a,onContextMenu:s,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:y,edgeTypes:x,noPanClassName:v,onError:m,disableKeyboardA11y:_}){let b=pe(te=>te.edgeLookup.get(e));const w=pe(te=>te.defaultEdgeOptions);b=w?{...w,...b}:b;let S=b.type||"default",C=x?.[S]||$p[S];C===void 0&&(m?.("011",mt.error011(S)),S="default",C=x?.default||$p.default);const N=!!(b.focusable||n&&typeof b.focusable>"u"),E=typeof f<"u"&&(b.reconnectable||r&&typeof b.reconnectable>"u"),k=!!(b.selectable||i&&typeof b.selectable>"u"),R=j.useRef(null),[A,P]=j.useState(!1),[q,M]=j.useState(!1),T=Se(),{zIndex:O,sourceX:H,sourceY:F,targetX:G,targetY:V,sourcePosition:W,targetPosition:K}=pe(j.useCallback(te=>{const J=te.nodeLookup.get(b.source),ie=te.nodeLookup.get(b.target);if(!J||!ie)return{zIndex:b.zIndex,...Fp};const re=WA({id:e,sourceNode:J,targetNode:ie,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:te.connectionMode,onError:m});return{zIndex:$A({selected:b.selected,zIndex:b.zIndex,sourceNode:J,targetNode:ie,elevateOnSelect:te.elevateEdgesOnSelect,zIndexMode:te.zIndexMode}),...re||Fp}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),we),D=j.useMemo(()=>b.markerStart?`url('#${Wf(b.markerStart,y)}')`:void 0,[b.markerStart,y]),I=j.useMemo(()=>b.markerEnd?`url('#${Wf(b.markerEnd,y)}')`:void 0,[b.markerEnd,y]);if(b.hidden||H===null||F===null||G===null||V===null)return null;const z=te=>{const{addSelectedEdges:J,unselectNodesAndEdges:ie,multiSelectionActive:re}=T.getState();k&&(T.setState({nodesSelectionActive:!1}),b.selected&&re?(ie({nodes:[],edges:[b]}),R.current?.blur()):J([e])),o&&o(te,b)},L=a?te=>{a(te,{...b})}:void 0,B=s?te=>{s(te,{...b})}:void 0,U=c?te=>{c(te,{...b})}:void 0,Y=l?te=>{l(te,{...b})}:void 0,Z=u?te=>{u(te,{...b})}:void 0,ne=te=>{if(!_&&O_.includes(te.key)&&k){const{unselectNodesAndEdges:J,addSelectedEdges:ie}=T.getState();te.key==="Escape"?(R.current?.blur(),J({edges:[b]})):ie([e])}};return g.jsx("svg",{style:{zIndex:O},children:g.jsxs("g",{className:Ae(["react-flow__edge",`react-flow__edge-${S}`,b.className,v,{selected:b.selected,animated:b.animated,inactive:!k&&!o,updating:A,selectable:k}]),onClick:z,onDoubleClick:L,onContextMenu:B,onMouseEnter:U,onMouseMove:Y,onMouseLeave:Z,onKeyDown:N?ne:void 0,tabIndex:N?0:void 0,role:b.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":N?`${p1}-${y}`:void 0,ref:R,...b.domAttributes,children:[!q&&g.jsx(C,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:k,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:H,sourceY:F,targetX:G,targetY:V,sourcePosition:W,targetPosition:K,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:D,markerEnd:I,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),E&&g.jsx(QP,{edge:b,isReconnectable:E,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:H,sourceY:F,targetX:G,targetY:V,sourcePosition:W,targetPosition:K,setUpdateHover:P,setReconnecting:M})]})})}var tM=j.memo(eM);const nM=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function $1({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:i,noPanClassName:o,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:x}){const{edgesFocusable:v,edgesReconnectable:m,elementsSelectable:_,onError:b}=pe(nM,we),w=$P(n);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(GP,{defaultColor:e,rfId:r}),w.map(S=>g.jsx(tM,{id:S,edgesFocusable:v,edgesReconnectable:m,elementsSelectable:_,noPanClassName:o,onReconnect:a,onContextMenu:s,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,onClick:d,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:y,rfId:r,onError:b,edgeTypes:i,disableKeyboardA11y:x},S))]})}$1.displayName="EdgeRenderer";const rM=j.memo($1),iM=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oM({children:e}){const n=pe(iM);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function aM(e){const n=zd(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const sM=e=>e.panZoom?.syncViewport;function cM(e){const n=pe(sM),r=Se();return j.useEffect(()=>{e&&(n?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function lM(e){return e.connection.inProgress?{...e.connection,to:zr(e.connection.to,e.transform)}:{...e.connection}}function uM(e){return lM}function fM(e){const n=uM();return pe(n,we)}const dM=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function hM({containerStyle:e,style:n,type:r,component:i}){const{nodesConnectable:o,width:a,height:s,isValid:c,inProgress:l}=pe(dM,we);return!(a&&o&&l)?null:g.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:Ae(["react-flow__connection",z_(c)]),children:g.jsx(F1,{style:n,type:r,CustomComponent:i,isValid:c})})})}const F1=({style:e,type:n=Ht.Bezier,CustomComponent:r,isValid:i})=>{const{inProgress:o,from:a,fromNode:s,fromHandle:c,fromPosition:l,to:u,toNode:d,toHandle:f,toPosition:h,pointer:p}=fM();if(!o)return;if(r)return g.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:s,fromHandle:c,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:z_(i),toNode:d,toHandle:f,pointer:p});let y="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(n){case Ht.Bezier:[y]=X_(x);break;case Ht.SimpleBezier:[y]=R1(x);break;case Ht.Step:[y]=Uf({...x,borderRadius:0});break;case Ht.SmoothStep:[y]=Uf(x);break;default:[y]=Q_(x)}return g.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};F1.displayName="ConnectionLine";const pM={};function Vp(e=pM){j.useRef(e),Se(),j.useEffect(()=>{},[e])}function gM(){Se(),j.useRef(!1),j.useEffect(()=>{},[])}function H1({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:x,connectionLineComponent:v,connectionLineContainerStyle:m,selectionKeyCode:_,selectionOnDrag:b,selectionMode:w,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:N,deleteKeyCode:E,onlyRenderVisibleElements:k,elementsSelectable:R,defaultViewport:A,translateExtent:P,minZoom:q,maxZoom:M,preventScrolling:T,defaultMarkerColor:O,zoomOnScroll:H,zoomOnPinch:F,panOnScroll:G,panOnScrollSpeed:V,panOnScrollMode:W,zoomOnDoubleClick:K,panOnDrag:D,onPaneClick:I,onPaneMouseEnter:z,onPaneMouseMove:L,onPaneMouseLeave:B,onPaneScroll:U,onPaneContextMenu:Y,paneClickDistance:Z,nodeClickDistance:ne,onEdgeContextMenu:te,onEdgeMouseEnter:J,onEdgeMouseMove:ie,onEdgeMouseLeave:re,reconnectRadius:fe,onReconnect:se,onReconnectStart:ge,onReconnectEnd:Ee,noDragClassName:ee,noWheelClassName:Q,noPanClassName:ce,disableKeyboardA11y:le,nodeExtent:ke,rfId:ye,viewport:qe,onViewportChange:Re}){return Vp(e),Vp(n),gM(),aM(r),cM(qe),g.jsx(jP,{onPaneClick:I,onPaneMouseEnter:z,onPaneMouseMove:L,onPaneMouseLeave:B,onPaneContextMenu:Y,onPaneScroll:U,paneClickDistance:Z,deleteKeyCode:E,selectionKeyCode:_,selectionOnDrag:b,selectionMode:w,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:R,zoomOnScroll:H,zoomOnPinch:F,zoomOnDoubleClick:K,panOnScroll:G,panOnScrollSpeed:V,panOnScrollMode:W,panOnDrag:D,defaultViewport:A,translateExtent:P,minZoom:q,maxZoom:M,onSelectionContextMenu:f,preventScrolling:T,noDragClassName:ee,noWheelClassName:Q,noPanClassName:ce,disableKeyboardA11y:le,onViewportChange:Re,isControlledViewport:!!qe,children:g.jsxs(oM,{children:[g.jsx(rM,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:se,onReconnectStart:ge,onReconnectEnd:Ee,onlyRenderVisibleElements:k,onEdgeContextMenu:te,onEdgeMouseEnter:J,onEdgeMouseMove:ie,onEdgeMouseLeave:re,reconnectRadius:fe,defaultMarkerColor:O,noPanClassName:ce,disableKeyboardA11y:le,rfId:ye}),g.jsx(hM,{style:x,type:y,component:v,containerStyle:m}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(LP,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:ne,onlyRenderVisibleElements:k,noPanClassName:ce,noDragClassName:ee,disableKeyboardA11y:le,nodeExtent:ke,rfId:ye}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}H1.displayName="GraphView";const mM=j.memo(H1),Gp=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:l=.5,maxZoom:u=2,nodeOrigin:d,nodeExtent:f,zIndexMode:h="basic"}={})=>{const p=new Map,y=new Map,x=new Map,v=new Map,m=i??n??[],_=r??e??[],b=d??[0,0],w=f??Nr;n1(x,v,m);const S=Kf(_,p,y,{nodeOrigin:b,nodeExtent:w,zIndexMode:h});let C=[0,0,1];if(s&&o&&a){const N=qr(p,{filter:A=>!!((A.width||A.initialWidth)&&(A.height||A.initialHeight))}),{x:E,y:k,zoom:R}=Pd(N,o,a,l,u,c?.padding??.1);C=[E,k,R]}return{rfId:"1",width:o??0,height:a??0,transform:C,nodes:_,nodesInitialized:S,nodeLookup:p,parentLookup:y,edges:m,edgeLookup:v,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:Nr,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:zn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:c,fitViewResolver:null,connection:{...D_},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:TA,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:q_,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},yM=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:l,maxZoom:u,nodeOrigin:d,nodeExtent:f,zIndexMode:h})=>Oj((p,y)=>{async function x(){const{nodeLookup:v,panZoom:m,fitViewOptions:_,fitViewResolver:b,width:w,height:S,minZoom:C,maxZoom:N}=y();m&&(await MA({nodes:v,width:w,height:S,panZoom:m,minZoom:C,maxZoom:N},_),b?.resolve(!0),p({fitViewResolver:null}))}return{...Gp({nodes:e,edges:n,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:l,maxZoom:u,nodeOrigin:d,nodeExtent:f,defaultNodes:r,defaultEdges:i,zIndexMode:h}),setNodes:v=>{const{nodeLookup:m,parentLookup:_,nodeOrigin:b,elevateNodesOnSelect:w,fitViewQueued:S,zIndexMode:C}=y(),N=Kf(v,m,_,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:w,checkEquality:!0,zIndexMode:C});S&&N?(x(),p({nodes:v,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:v,nodesInitialized:N})},setEdges:v=>{const{connectionLookup:m,edgeLookup:_}=y();n1(m,_,v),p({edges:v})},setDefaultNodesAndEdges:(v,m)=>{if(v){const{setNodes:_}=y();_(v),p({hasDefaultNodes:!0})}if(m){const{setEdges:_}=y();_(m),p({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:m,nodeLookup:_,parentLookup:b,domNode:w,nodeOrigin:S,nodeExtent:C,debug:N,fitViewQueued:E,zIndexMode:k}=y(),{changes:R,updatedInternals:A}=tj(v,_,b,w,S,C,k);A&&(ZA(_,b,{nodeOrigin:S,nodeExtent:C,zIndexMode:k}),E?(x(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),R?.length>0&&(N&&console.log("React Flow: trigger node changes",R),m?.(R)))},updateNodePositions:(v,m=!1)=>{const _=[];let b=[];const{nodeLookup:w,triggerNodeChanges:S,connection:C,updateConnection:N,onNodesChangeMiddlewareMap:E}=y();for(const[k,R]of v){const A=w.get(k),P=!!(A?.expandParent&&A?.parentId&&R?.position),q={id:k,type:"position",position:P?{x:Math.max(0,R.position.x),y:Math.max(0,R.position.y)}:R.position,dragging:m};if(A&&C.inProgress&&C.fromNode.id===A.id){const M=gn(A,C.fromHandle,oe.Left,!0);N({...C,from:M})}P&&A.parentId&&_.push({id:k,parentId:A.parentId,rect:{...R.internals.positionAbsolute,width:R.measured.width??0,height:R.measured.height??0}}),b.push(q)}if(_.length>0){const{parentLookup:k,nodeOrigin:R}=y(),A=Dd(_,w,k,R);b.push(...A)}for(const k of E.values())b=k(b);S(b)},triggerNodeChanges:v=>{const{onNodesChange:m,setNodes:_,nodes:b,hasDefaultNodes:w,debug:S}=y();if(v?.length){if(w){const C=y1(v,b);_(C)}S&&console.log("React Flow: trigger node changes",v),m?.(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:m,setEdges:_,edges:b,hasDefaultEdges:w,debug:S}=y();if(v?.length){if(w){const C=v1(v,b);_(C)}S&&console.log("React Flow: trigger edge changes",v),m?.(v)}},addSelectedNodes:v=>{const{multiSelectionActive:m,edgeLookup:_,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=y();if(m){const C=v.map(N=>Zt(N,!0));w(C);return}w(Pn(b,new Set([...v]),!0)),S(Pn(_))},addSelectedEdges:v=>{const{multiSelectionActive:m,edgeLookup:_,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=y();if(m){const C=v.map(N=>Zt(N,!0));S(C);return}S(Pn(_,new Set([...v]))),w(Pn(b,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:m}={})=>{const{edges:_,nodes:b,nodeLookup:w,triggerNodeChanges:S,triggerEdgeChanges:C}=y(),N=v||b,E=m||_,k=N.map(A=>{const P=w.get(A.id);return P&&(P.selected=!1),Zt(A.id,!1)}),R=E.map(A=>Zt(A.id,!1));S(k),C(R)},setMinZoom:v=>{const{panZoom:m,maxZoom:_}=y();m?.setScaleExtent([v,_]),p({minZoom:v})},setMaxZoom:v=>{const{panZoom:m,minZoom:_}=y();m?.setScaleExtent([_,v]),p({maxZoom:v})},setTranslateExtent:v=>{y().panZoom?.setTranslateExtent(v),p({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:m,triggerNodeChanges:_,triggerEdgeChanges:b,elementsSelectable:w}=y();if(!w)return;const S=m.reduce((N,E)=>E.selected?[...N,Zt(E.id,!1)]:N,[]),C=v.reduce((N,E)=>E.selected?[...N,Zt(E.id,!1)]:N,[]);_(S),b(C)},setNodeExtent:v=>{const{nodes:m,nodeLookup:_,parentLookup:b,nodeOrigin:w,elevateNodesOnSelect:S,nodeExtent:C,zIndexMode:N}=y();v[0][0]===C[0][0]&&v[0][1]===C[0][1]&&v[1][0]===C[1][0]&&v[1][1]===C[1][1]||(Kf(m,_,b,{nodeOrigin:w,nodeExtent:v,elevateNodesOnSelect:S,checkEquality:!1,zIndexMode:N}),p({nodeExtent:v}))},panBy:v=>{const{transform:m,width:_,height:b,panZoom:w,translateExtent:S}=y();return nj({delta:v,panZoom:w,transform:m,translateExtent:S,width:_,height:b})},setCenter:async(v,m,_)=>{const{width:b,height:w,maxZoom:S,panZoom:C}=y();if(!C)return Promise.resolve(!1);const N=typeof _?.zoom<"u"?_.zoom:S;return await C.setViewport({x:b/2-v*N,y:w/2-m*N,zoom:N},{duration:_?.duration,ease:_?.ease,interpolate:_?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...D_}})},updateConnection:v=>{p({connection:v})},reset:()=>p({...Gp()})}},Object.is);function vM({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:a,initialMinZoom:s,initialMaxZoom:c,initialFitViewOptions:l,fitView:u,nodeOrigin:d,nodeExtent:f,zIndexMode:h,children:p}){const[y]=j.useState(()=>yM({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:u,minZoom:s,maxZoom:c,fitViewOptions:l,nodeOrigin:d,nodeExtent:f,zIndexMode:h}));return g.jsx(qj,{value:y,children:g.jsx(oP,{children:p})})}function xM({children:e,nodes:n,edges:r,defaultNodes:i,defaultEdges:o,width:a,height:s,fitView:c,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}){return j.useContext(oo)?g.jsx(g.Fragment,{children:e}):g.jsx(vM,{initialNodes:n,initialEdges:r,defaultNodes:i,defaultEdges:o,initialWidth:a,initialHeight:s,fitView:c,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p,children:e})}const bM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function _M({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,className:o,nodeTypes:a,edgeTypes:s,onNodeClick:c,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:C,onNodeDragStart:N,onNodeDrag:E,onNodeDragStop:k,onNodesDelete:R,onEdgesDelete:A,onDelete:P,onSelectionChange:q,onSelectionDragStart:M,onSelectionDrag:T,onSelectionDragStop:O,onSelectionContextMenu:H,onSelectionStart:F,onSelectionEnd:G,onBeforeDelete:V,connectionMode:W,connectionLineType:K=Ht.Bezier,connectionLineStyle:D,connectionLineComponent:I,connectionLineContainerStyle:z,deleteKeyCode:L="Backspace",selectionKeyCode:B="Shift",selectionOnDrag:U=!1,selectionMode:Y=Er.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:ne=Rr()?"Meta":"Control",zoomActivationKeyCode:te=Rr()?"Meta":"Control",snapToGrid:J,snapGrid:ie,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:fe,nodesDraggable:se,autoPanOnNodeFocus:ge,nodesConnectable:Ee,nodesFocusable:ee,nodeOrigin:Q=g1,edgesFocusable:ce,edgesReconnectable:le,elementsSelectable:ke=!0,defaultViewport:ye=Yj,minZoom:qe=.5,maxZoom:Re=2,translateExtent:Te=Nr,preventScrolling:bt=!0,nodeExtent:_t,defaultMarkerColor:bn="#b1b1b7",zoomOnScroll:wt=!0,zoomOnPinch:Fe=!0,panOnScroll:Pe=!1,panOnScrollSpeed:Gr=.5,panOnScrollMode:FS=ln.Free,zoomOnDoubleClick:HS=!0,panOnDrag:BS=!0,onPaneClick:VS,onPaneMouseEnter:GS,onPaneMouseMove:US,onPaneMouseLeave:WS,onPaneScroll:KS,onPaneContextMenu:YS,paneClickDistance:XS=1,nodeClickDistance:ZS=0,children:JS,onReconnect:QS,onReconnectStart:eC,onReconnectEnd:tC,onEdgeContextMenu:nC,onEdgeDoubleClick:rC,onEdgeMouseEnter:iC,onEdgeMouseMove:oC,onEdgeMouseLeave:aC,reconnectRadius:sC=10,onNodesChange:cC,onEdgesChange:lC,noDragClassName:uC="nodrag",noWheelClassName:fC="nowheel",noPanClassName:gh="nopan",fitView:mh,fitViewOptions:yh,connectOnClick:dC,attributionPosition:hC,proOptions:pC,defaultEdgeOptions:gC,elevateNodesOnSelect:mC=!0,elevateEdgesOnSelect:yC=!1,disableKeyboardA11y:vh=!1,autoPanOnConnect:vC,autoPanOnNodeDrag:xC,autoPanSpeed:bC,connectionRadius:_C,isValidConnection:wC,onError:SC,style:CC,id:xh,nodeDragThreshold:NC,connectionDragThreshold:EC,viewport:kC,onViewportChange:RC,width:AC,height:jC,colorMode:PC="light",debug:MC,onScroll:bh,ariaLabelConfig:IC,zIndexMode:_h="basic",...TC},OC){const Io=xh||"1",qC=Qj(PC),DC=j.useCallback(wh=>{wh.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),bh?.(wh)},[bh]);return g.jsx("div",{"data-testid":"rf__wrapper",...TC,onScroll:DC,style:{...CC,...bM},ref:OC,className:Ae(["react-flow",o,qC]),id:xh,role:"application",children:g.jsxs(xM,{nodes:e,edges:n,width:AC,height:jC,fitView:mh,fitViewOptions:yh,minZoom:qe,maxZoom:Re,nodeOrigin:Q,nodeExtent:_t,zIndexMode:_h,children:[g.jsx(mM,{onInit:u,onNodeClick:c,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:C,nodeTypes:a,edgeTypes:s,connectionLineType:K,connectionLineStyle:D,connectionLineComponent:I,connectionLineContainerStyle:z,selectionKeyCode:B,selectionOnDrag:U,selectionMode:Y,deleteKeyCode:L,multiSelectionKeyCode:ne,panActivationKeyCode:Z,zoomActivationKeyCode:te,onlyRenderVisibleElements:re,defaultViewport:ye,translateExtent:Te,minZoom:qe,maxZoom:Re,preventScrolling:bt,zoomOnScroll:wt,zoomOnPinch:Fe,zoomOnDoubleClick:HS,panOnScroll:Pe,panOnScrollSpeed:Gr,panOnScrollMode:FS,panOnDrag:BS,onPaneClick:VS,onPaneMouseEnter:GS,onPaneMouseMove:US,onPaneMouseLeave:WS,onPaneScroll:KS,onPaneContextMenu:YS,paneClickDistance:XS,nodeClickDistance:ZS,onSelectionContextMenu:H,onSelectionStart:F,onSelectionEnd:G,onReconnect:QS,onReconnectStart:eC,onReconnectEnd:tC,onEdgeContextMenu:nC,onEdgeDoubleClick:rC,onEdgeMouseEnter:iC,onEdgeMouseMove:oC,onEdgeMouseLeave:aC,reconnectRadius:sC,defaultMarkerColor:bn,noDragClassName:uC,noWheelClassName:fC,noPanClassName:gh,rfId:Io,disableKeyboardA11y:vh,nodeExtent:_t,viewport:kC,onViewportChange:RC}),g.jsx(Jj,{nodes:e,edges:n,defaultNodes:r,defaultEdges:i,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:se,autoPanOnNodeFocus:ge,nodesConnectable:Ee,nodesFocusable:ee,edgesFocusable:ce,edgesReconnectable:le,elementsSelectable:ke,elevateNodesOnSelect:mC,elevateEdgesOnSelect:yC,minZoom:qe,maxZoom:Re,nodeExtent:_t,onNodesChange:cC,onEdgesChange:lC,snapToGrid:J,snapGrid:ie,connectionMode:W,translateExtent:Te,connectOnClick:dC,defaultEdgeOptions:gC,fitView:mh,fitViewOptions:yh,onNodesDelete:R,onEdgesDelete:A,onDelete:P,onNodeDragStart:N,onNodeDrag:E,onNodeDragStop:k,onSelectionDrag:T,onSelectionDragStart:M,onSelectionDragStop:O,onMove:d,onMoveStart:f,onMoveEnd:h,noPanClassName:gh,nodeOrigin:Q,rfId:Io,autoPanOnConnect:vC,autoPanOnNodeDrag:xC,autoPanSpeed:bC,onError:SC,connectionRadius:_C,isValidConnection:wC,selectNodesOnDrag:fe,nodeDragThreshold:NC,connectionDragThreshold:EC,onBeforeDelete:V,debug:MC,ariaLabelConfig:IC,zIndexMode:_h}),g.jsx(Kj,{onSelectionChange:q}),JS,g.jsx(Bj,{proOptions:pC,position:hC}),g.jsx(Hj,{rfId:Io,disableKeyboardA11y:vh})]})})}var wM=x1(_M);function SM(e){const[n,r]=j.useState(e),i=j.useCallback(o=>r(a=>y1(o,a)),[]);return[n,r,i]}function CM(e){const[n,r]=j.useState(e),i=j.useCallback(o=>r(a=>v1(o,a)),[]);return[n,r,i]}function NM({dimensions:e,lineWidth:n,variant:r,className:i}){return g.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ae(["react-flow__background-pattern",r,i])})}function EM({radius:e,className:n}){return g.jsx("circle",{cx:e,cy:e,r:e,className:Ae(["react-flow__background-pattern","dots",n])})}var Gt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Gt||(Gt={}));const kM={[Gt.Dots]:1,[Gt.Lines]:1,[Gt.Cross]:6},RM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function B1({id:e,variant:n=Gt.Dots,gap:r=20,size:i,lineWidth:o=1,offset:a=0,color:s,bgColor:c,style:l,className:u,patternClassName:d}){const f=j.useRef(null),{transform:h,patternId:p}=pe(RM,we),y=i||kM[n],x=n===Gt.Dots,v=n===Gt.Cross,m=Array.isArray(r)?r:[r,r],_=[m[0]*h[2]||1,m[1]*h[2]||1],b=y*h[2],w=Array.isArray(a)?a:[a,a],S=v?[b,b]:_,C=[w[0]*h[2]||1+S[0]/2,w[1]*h[2]||1+S[1]/2],N=`${p}${e||""}`;return g.jsxs("svg",{className:Ae(["react-flow__background",u]),style:{...l,...so,"--xy-background-color-props":c,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[g.jsx("pattern",{id:N,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:x?g.jsx(EM,{radius:b/2,className:d}):g.jsx(NM,{dimensions:S,lineWidth:o,variant:n,className:d})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}B1.displayName="Background";const AM=j.memo(B1);function jM(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function PM(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function MM(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function IM(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function TM(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ni({children:e,className:n,...r}){return g.jsx("button",{type:"button",className:Ae(["react-flow__controls-button",n]),...r,children:e})}const OM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function V1({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:s,onFitView:c,onInteractiveChange:l,className:u,children:d,position:f="bottom-left",orientation:h="vertical","aria-label":p}){const y=Se(),{isInteractive:x,minZoomReached:v,maxZoomReached:m,ariaLabelConfig:_}=pe(OM,we),{zoomIn:b,zoomOut:w,fitView:S}=zd(),C=()=>{b(),a?.()},N=()=>{w(),s?.()},E=()=>{S(o),c?.()},k=()=>{y.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l?.(!x)},R=h==="horizontal"?"horizontal":"vertical";return g.jsxs(ao,{className:Ae(["react-flow__controls",R,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":p??_["controls.ariaLabel"],children:[n&&g.jsxs(g.Fragment,{children:[g.jsx(ni,{onClick:C,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:m,children:g.jsx(jM,{})}),g.jsx(ni,{onClick:N,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:v,children:g.jsx(PM,{})})]}),r&&g.jsx(ni,{className:"react-flow__controls-fitview",onClick:E,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:g.jsx(MM,{})}),i&&g.jsx(ni,{className:"react-flow__controls-interactive",onClick:k,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:x?g.jsx(TM,{}):g.jsx(IM,{})}),d]})}V1.displayName="Controls";const qM=j.memo(V1);function DM({id:e,x:n,y:r,width:i,height:o,style:a,color:s,strokeColor:c,strokeWidth:l,className:u,borderRadius:d,shapeRendering:f,selected:h,onClick:p}){const{background:y,backgroundColor:x}=a||{},v=s||y||x;return g.jsx("rect",{className:Ae(["react-flow__minimap-node",{selected:h},u]),x:n,y:r,rx:d,ry:d,width:i,height:o,style:{fill:v,stroke:c,strokeWidth:l},shapeRendering:f,onClick:p?m=>p(m,e):void 0})}const zM=j.memo(DM),LM=e=>e.nodes.map(n=>n.id),ta=e=>e instanceof Function?e:()=>e;function $M({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:a=zM,onClick:s}){const c=pe(LM,we),l=ta(n),u=ta(e),d=ta(r),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:c.map(h=>g.jsx(HM,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:a,onClick:s,shapeRendering:f},h))})}function FM({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:c,onClick:l}){const{node:u,x:d,y:f,width:h,height:p}=pe(y=>{const{internals:x}=y.nodeLookup.get(e),v=x.userNode,{x:m,y:_}=x.positionAbsolute,{width:b,height:w}=Tt(v);return{node:v,x:m,y:_,width:b,height:w}},we);return!u||u.hidden||!V_(u)?null:g.jsx(c,{x:d,y:f,width:h,height:p,style:u.style,selected:!!u.selected,className:i(u),color:n(u),borderRadius:o,strokeColor:r(u),strokeWidth:a,shapeRendering:s,onClick:l,id:u.id})}const HM=j.memo(FM);var BM=j.memo($M);const VM=200,GM=150,UM=e=>!e.hidden,WM=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?B_(qr(e.nodeLookup,{filter:UM}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},KM="react-flow__minimap-desc";function G1({style:e,className:n,nodeStrokeColor:r,nodeColor:i,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:c,bgColor:l,maskColor:u,maskStrokeColor:d,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:y,pannable:x=!1,zoomable:v=!1,ariaLabel:m,inversePan:_,zoomStep:b=1,offsetScale:w=5}){const S=Se(),C=j.useRef(null),{boundingRect:N,viewBB:E,rfId:k,panZoom:R,translateExtent:A,flowWidth:P,flowHeight:q,ariaLabelConfig:M}=pe(WM,we),T=e?.width??VM,O=e?.height??GM,H=N.width/T,F=N.height/O,G=Math.max(H,F),V=G*T,W=G*O,K=w*G,D=N.x-(V-N.width)/2-K,I=N.y-(W-N.height)/2-K,z=V+K*2,L=W+K*2,B=`${KM}-${k}`,U=j.useRef(0),Y=j.useRef();U.current=G,j.useEffect(()=>{if(C.current&&R)return Y.current=fj({domNode:C.current,panZoom:R,getTransform:()=>S.getState().transform,getViewScale:()=>U.current}),()=>{Y.current?.destroy()}},[R]),j.useEffect(()=>{Y.current?.update({translateExtent:A,width:P,height:q,inversePan:_,pannable:x,zoomStep:b,zoomable:v})},[x,v,_,b,A,P,q]);const Z=p?J=>{const[ie,re]=Y.current?.pointer(J)||[0,0];p(J,{x:ie,y:re})}:void 0,ne=y?j.useCallback((J,ie)=>{const re=S.getState().nodeLookup.get(ie).internals.userNode;y(J,re)},[]):void 0,te=m??M["minimap.ariaLabel"];return g.jsx(ao,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*G:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Ae(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:T,height:O,viewBox:`${D} ${I} ${z} ${L}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":B,ref:C,onClick:Z,children:[te&&g.jsx("title",{id:B,children:te}),g.jsx(BM,{onClick:ne,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:c}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${D-K},${I-K}h${z+K*2}v${L+K*2}h${-z-K*2}z
        M${E.x},${E.y}h${E.width}v${E.height}h${-E.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}G1.displayName="MiniMap";const YM=j.memo(G1),XM=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,ZM={[Bn.Line]:"right",[Bn.Handle]:"bottom-right"};function JM({nodeId:e,position:n,variant:r=Bn.Handle,className:i,style:o=void 0,children:a,color:s,minWidth:c=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,autoScale:p=!0,shouldResize:y,onResizeStart:x,onResize:v,onResizeEnd:m}){const _=S1(),b=typeof e=="string"?e:_,w=Se(),S=j.useRef(null),C=r===Bn.Handle,N=pe(j.useCallback(XM(C&&p),[C,p]),we),E=j.useRef(null),k=n??ZM[r];j.useEffect(()=>{if(!(!S.current||!b))return E.current||(E.current=Nj({domNode:S.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:A,transform:P,snapGrid:q,snapToGrid:M,nodeOrigin:T,domNode:O}=w.getState();return{nodeLookup:A,transform:P,snapGrid:q,snapToGrid:M,nodeOrigin:T,paneDomNode:O}},onChange:(A,P)=>{const{triggerNodeChanges:q,nodeLookup:M,parentLookup:T,nodeOrigin:O}=w.getState(),H=[],F={x:A.x,y:A.y},G=M.get(b);if(G&&G.expandParent&&G.parentId){const V=G.origin??O,W=A.width??G.measured.width??0,K=A.height??G.measured.height??0,D={id:G.id,parentId:G.parentId,rect:{width:W,height:K,...G_({x:A.x??G.position.x,y:A.y??G.position.y},{width:W,height:K},G.parentId,M,V)}},I=Dd([D],M,T,O);H.push(...I),F.x=A.x?Math.max(V[0]*W,A.x):void 0,F.y=A.y?Math.max(V[1]*K,A.y):void 0}if(F.x!==void 0&&F.y!==void 0){const V={id:b,type:"position",position:{...F}};H.push(V)}if(A.width!==void 0&&A.height!==void 0){const W={id:b,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:A.width,height:A.height}};H.push(W)}for(const V of P){const W={...V,type:"position"};H.push(W)}q(H)},onEnd:({width:A,height:P})=>{const q={id:b,type:"dimensions",resizing:!1,dimensions:{width:A,height:P}};w.getState().triggerNodeChanges([q])}})),E.current.update({controlPosition:k,boundaries:{minWidth:c,minHeight:l,maxWidth:u,maxHeight:d},keepAspectRatio:f,resizeDirection:h,onResizeStart:x,onResize:v,onResizeEnd:m,shouldResize:y}),()=>{E.current?.destroy()}},[k,c,l,u,d,f,x,v,m,y]);const R=k.split("-");return g.jsx("div",{className:Ae(["react-flow__resize-control","nodrag",...R,r,i]),ref:S,style:{...o,scale:N,...s&&{[C?"backgroundColor":"borderColor"]:s}},children:a})}j.memo(JM);function QM(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),i=r.createElement("base"),o=r.createElement("a");return r.head.appendChild(i),r.body.appendChild(o),n&&(i.href=n),o.href=e,o.href}const eI=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ut(e){const n=[];for(let r=0,i=e.length;r<i;r++)n.push(e[r]);return n}let Sn=null;function U1(e={}){return Sn||(e.includeStyleProperties?(Sn=e.includeStyleProperties,Sn):(Sn=Ut(window.getComputedStyle(document.documentElement)),Sn))}function Mi(e,n){const i=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return i?parseFloat(i.replace("px","")):0}function tI(e){const n=Mi(e,"border-left-width"),r=Mi(e,"border-right-width");return e.clientWidth+n+r}function nI(e){const n=Mi(e,"border-top-width"),r=Mi(e,"border-bottom-width");return e.clientHeight+n+r}function W1(e,n={}){const r=n.width||tI(e),i=n.height||nI(e);return{width:r,height:i}}function rI(){let e,n;try{n=process}catch{}const r=n&&n.env?n.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ue=16384;function iI(e){(e.width>Ue||e.height>Ue)&&(e.width>Ue&&e.height>Ue?e.width>e.height?(e.height*=Ue/e.width,e.width=Ue):(e.width*=Ue/e.height,e.height=Ue):e.width>Ue?(e.height*=Ue/e.width,e.width=Ue):(e.width*=Ue/e.height,e.height=Ue))}function Ii(e){return new Promise((n,r)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>n(i))})},i.onerror=r,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function oI(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function aI(e,n,r){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${r}`),o.setAttribute("viewBox",`0 0 ${n} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),o.appendChild(a),a.appendChild(e),oI(o)}const Be=(e,n)=>{if(e instanceof n)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===n.name||Be(r,n)};function sI(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function cI(e,n){return U1(n).map(r=>{const i=e.getPropertyValue(r),o=e.getPropertyPriority(r);return`${r}: ${i}${o?" !important":""};`}).join(" ")}function lI(e,n,r,i){const o=`.${e}:${n}`,a=r.cssText?sI(r):cI(r,i);return document.createTextNode(`${o}{${a}}`)}function Up(e,n,r,i){const o=window.getComputedStyle(e,r),a=o.getPropertyValue("content");if(a===""||a==="none")return;const s=eI();try{n.className=`${n.className} ${s}`}catch{return}const c=document.createElement("style");c.appendChild(lI(s,r,o,i)),n.appendChild(c)}function uI(e,n,r){Up(e,n,":before",r),Up(e,n,":after",r)}const Wp="application/font-woff",Kp="image/jpeg",fI={woff:Wp,woff2:Wp,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Kp,jpeg:Kp,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function dI(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function $d(e){const n=dI(e).toLowerCase();return fI[n]||""}function hI(e){return e.split(/,/)[1]}function Zf(e){return e.search(/^(data:)/)!==-1}function pI(e,n){return`data:${n};base64,${e}`}async function K1(e,n,r){const i=await fetch(e,n);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise((a,s)=>{const c=new FileReader;c.onerror=s,c.onloadend=()=>{try{a(r({res:i,result:c.result}))}catch(l){s(l)}},c.readAsDataURL(o)})}const na={};function gI(e,n,r){let i=e.replace(/\?.*/,"");return r&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),n?`[${n}]${i}`:i}async function Fd(e,n,r){const i=gI(e,n,r.includeQueryParams);if(na[i]!=null)return na[i];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const a=await K1(e,r.fetchRequestInit,({res:s,result:c})=>(n||(n=s.headers.get("Content-Type")||""),hI(c)));o=pI(a,n)}catch(a){o=r.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;a&&(s=typeof a=="string"?a:a.message),s&&console.warn(s)}return na[i]=o,o}async function mI(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):Ii(n)}async function yI(e,n){if(e.currentSrc){const a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.clientWidth,a.height=e.clientHeight,s?.drawImage(e,0,0,a.width,a.height);const c=a.toDataURL();return Ii(c)}const r=e.poster,i=$d(r),o=await Fd(r,i,n);return Ii(o)}async function vI(e,n){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await lo(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function xI(e,n){return Be(e,HTMLCanvasElement)?mI(e):Be(e,HTMLVideoElement)?yI(e,n):Be(e,HTMLIFrameElement)?vI(e,n):e.cloneNode(Y1(e))}const bI=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Y1=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function _I(e,n,r){var i,o;if(Y1(n))return n;let a=[];return bI(e)&&e.assignedNodes?a=Ut(e.assignedNodes()):Be(e,HTMLIFrameElement)&&(!((i=e.contentDocument)===null||i===void 0)&&i.body)?a=Ut(e.contentDocument.body.childNodes):a=Ut(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),a.length===0||Be(e,HTMLVideoElement)||await a.reduce((s,c)=>s.then(()=>lo(c,r)).then(l=>{l&&n.appendChild(l)}),Promise.resolve()),n}function wI(e,n,r){const i=n.style;if(!i)return;const o=window.getComputedStyle(e);o.cssText?(i.cssText=o.cssText,i.transformOrigin=o.transformOrigin):U1(r).forEach(a=>{let s=o.getPropertyValue(a);a==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Be(e,HTMLIFrameElement)&&a==="display"&&s==="inline"&&(s="block"),a==="d"&&n.getAttribute("d")&&(s=`path(${n.getAttribute("d")})`),i.setProperty(a,s,o.getPropertyPriority(a))})}function SI(e,n){Be(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Be(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function CI(e,n){if(Be(e,HTMLSelectElement)){const r=n,i=Array.from(r.children).find(o=>e.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function NI(e,n,r){return Be(n,Element)&&(wI(e,n,r),uI(e,n,r),SI(e,n),CI(e,n)),n}async function EI(e,n){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const i={};for(let a=0;a<r.length;a++){const c=r[a].getAttribute("xlink:href");if(c){const l=e.querySelector(c),u=document.querySelector(c);!l&&u&&!i[c]&&(i[c]=await lo(u,n,!0))}}const o=Object.values(i);if(o.length){const a="http://www.w3.org/1999/xhtml",s=document.createElementNS(a,"svg");s.setAttribute("xmlns",a),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const c=document.createElementNS(a,"defs");s.appendChild(c);for(let l=0;l<o.length;l++)c.appendChild(o[l]);e.appendChild(s)}return e}async function lo(e,n,r){return!r&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(i=>xI(i,n)).then(i=>_I(e,i,n)).then(i=>NI(e,i,n)).then(i=>EI(i,n))}const X1=/url\((['"]?)([^'"]+?)\1\)/g,kI=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,RI=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function AI(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function jI(e){const n=[];return e.replace(X1,(r,i,o)=>(n.push(o),r)),n.filter(r=>!Zf(r))}async function PI(e,n,r,i,o){try{const a=r?QM(n,r):n,s=$d(n);let c;return o||(c=await Fd(a,s,i)),e.replace(AI(n),`$1${c}$3`)}catch{}return e}function MI(e,{preferredFontFormat:n}){return n?e.replace(RI,r=>{for(;;){const[i,,o]=kI.exec(r)||[];if(!o)return"";if(o===n)return`src: ${i};`}}):e}function Z1(e){return e.search(X1)!==-1}async function J1(e,n,r){if(!Z1(e))return e;const i=MI(e,r);return jI(i).reduce((a,s)=>a.then(c=>PI(c,s,n,r)),Promise.resolve(i))}async function Cn(e,n,r){var i;const o=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(e);if(o){const a=await J1(o,null,r);return n.style.setProperty(e,a,n.style.getPropertyPriority(e)),!0}return!1}async function II(e,n){await Cn("background",e,n)||await Cn("background-image",e,n),await Cn("mask",e,n)||await Cn("-webkit-mask",e,n)||await Cn("mask-image",e,n)||await Cn("-webkit-mask-image",e,n)}async function TI(e,n){const r=Be(e,HTMLImageElement);if(!(r&&!Zf(e.src))&&!(Be(e,SVGImageElement)&&!Zf(e.href.baseVal)))return;const i=r?e.src:e.href.baseVal,o=await Fd(i,$d(i),n);await new Promise((a,s)=>{e.onload=a,e.onerror=n.onImageErrorHandler?(...l)=>{try{a(n.onImageErrorHandler(...l))}catch(u){s(u)}}:s;const c=e;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),r?(e.srcset="",e.src=o):e.href.baseVal=o})}async function OI(e,n){const i=Ut(e.childNodes).map(o=>Q1(o,n));await Promise.all(i).then(()=>e)}async function Q1(e,n){Be(e,Element)&&(await II(e,n),await TI(e,n),await OI(e,n))}function qI(e,n){const{style:r}=e;n.backgroundColor&&(r.backgroundColor=n.backgroundColor),n.width&&(r.width=`${n.width}px`),n.height&&(r.height=`${n.height}px`);const i=n.style;return i!=null&&Object.keys(i).forEach(o=>{r[o]=i[o]}),e}const Yp={};async function Xp(e){let n=Yp[e];if(n!=null)return n;const i=await(await fetch(e)).text();return n={url:e,cssText:i},Yp[e]=n,n}async function Zp(e,n){let r=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async s=>{let c=s.replace(i,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),K1(c,n.fetchRequestInit,({result:l})=>(r=r.replace(s,`url(${l})`),[s,l]))});return Promise.all(a).then(()=>r)}function Jp(e){if(e==null)return[];const n=[],r=/(\/\*[\s\S]*?\*\/)/gi;let i=e.replace(r,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=o.exec(i);if(l===null)break;n.push(l[0])}i=i.replace(o,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(s,"gi");for(;;){let l=a.exec(i);if(l===null){if(l=c.exec(i),l===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;n.push(l[0])}return n}async function DI(e,n){const r=[],i=[];return e.forEach(o=>{if("cssRules"in o)try{Ut(o.cssRules||[]).forEach((a,s)=>{if(a.type===CSSRule.IMPORT_RULE){let c=s+1;const l=a.href,u=Xp(l).then(d=>Zp(d,n)).then(d=>Jp(d).forEach(f=>{try{o.insertRule(f,f.startsWith("@import")?c+=1:o.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});i.push(u)}})}catch(a){const s=e.find(c=>c.href==null)||document.styleSheets[0];o.href!=null&&i.push(Xp(o.href).then(c=>Zp(c,n)).then(c=>Jp(c).forEach(l=>{s.insertRule(l,s.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(i).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ut(o.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${o.href}`,a)}}),r))}function zI(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Z1(n.style.getPropertyValue("src")))}async function LI(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Ut(e.ownerDocument.styleSheets),i=await DI(r,n);return zI(i)}function ew(e){return e.trim().replace(/["']/g,"")}function $I(e){const n=new Set;function r(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(a=>{n.add(ew(a))}),Array.from(i.children).forEach(a=>{a instanceof HTMLElement&&r(a)})}return r(e),n}async function FI(e,n){const r=await LI(e,n),i=$I(e);return(await Promise.all(r.filter(a=>i.has(ew(a.style.fontFamily))).map(a=>{const s=a.parentStyleSheet?a.parentStyleSheet.href:null;return J1(a.cssText,s,n)}))).join(`
`)}async function HI(e,n){const r=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await FI(e,n);if(r){const i=document.createElement("style"),o=document.createTextNode(r);i.appendChild(o),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}}async function BI(e,n={}){const{width:r,height:i}=W1(e,n),o=await lo(e,n,!0);return await HI(o,n),await Q1(o,n),qI(o,n),await aI(o,r,i)}async function VI(e,n={}){const{width:r,height:i}=W1(e,n),o=await BI(e,n),a=await Ii(o),s=document.createElement("canvas"),c=s.getContext("2d"),l=n.pixelRatio||rI(),u=n.canvasWidth||r,d=n.canvasHeight||i;return s.width=u*l,s.height=d*l,n.skipAutoScale||iI(s),s.style.width=`${u}`,s.style.height=`${d}`,n.backgroundColor&&(c.fillStyle=n.backgroundColor,c.fillRect(0,0,s.width,s.height)),c.drawImage(a,0,0,s.width,s.height),s}async function tw(e,n={}){return(await VI(e,n)).toDataURL()}function Hd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ra,Qp;function GI(){if(Qp)return ra;Qp=1;function e(){this.__data__=[],this.size=0}return ra=e,ra}var ia,eg;function Gn(){if(eg)return ia;eg=1;function e(n,r){return n===r||n!==n&&r!==r}return ia=e,ia}var oa,tg;function uo(){if(tg)return oa;tg=1;var e=Gn();function n(r,i){for(var o=r.length;o--;)if(e(r[o][0],i))return o;return-1}return oa=n,oa}var aa,ng;function UI(){if(ng)return aa;ng=1;var e=uo(),n=Array.prototype,r=n.splice;function i(o){var a=this.__data__,s=e(a,o);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():r.call(a,s,1),--this.size,!0}return aa=i,aa}var sa,rg;function WI(){if(rg)return sa;rg=1;var e=uo();function n(r){var i=this.__data__,o=e(i,r);return o<0?void 0:i[o][1]}return sa=n,sa}var ca,ig;function KI(){if(ig)return ca;ig=1;var e=uo();function n(r){return e(this.__data__,r)>-1}return ca=n,ca}var la,og;function YI(){if(og)return la;og=1;var e=uo();function n(r,i){var o=this.__data__,a=e(o,r);return a<0?(++this.size,o.push([r,i])):o[a][1]=i,this}return la=n,la}var ua,ag;function fo(){if(ag)return ua;ag=1;var e=GI(),n=UI(),r=WI(),i=KI(),o=YI();function a(s){var c=-1,l=s==null?0:s.length;for(this.clear();++c<l;){var u=s[c];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,ua=a,ua}var fa,sg;function XI(){if(sg)return fa;sg=1;var e=fo();function n(){this.__data__=new e,this.size=0}return fa=n,fa}var da,cg;function ZI(){if(cg)return da;cg=1;function e(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i}return da=e,da}var ha,lg;function JI(){if(lg)return ha;lg=1;function e(n){return this.__data__.get(n)}return ha=e,ha}var pa,ug;function QI(){if(ug)return pa;ug=1;function e(n){return this.__data__.has(n)}return pa=e,pa}var ga,fg;function nw(){if(fg)return ga;fg=1;var e=typeof Ur=="object"&&Ur&&Ur.Object===Object&&Ur;return ga=e,ga}var ma,dg;function dt(){if(dg)return ma;dg=1;var e=nw(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return ma=r,ma}var ya,hg;function Un(){if(hg)return ya;hg=1;var e=dt(),n=e.Symbol;return ya=n,ya}var va,pg;function eT(){if(pg)return va;pg=1;var e=Un(),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=e?e.toStringTag:void 0;function a(s){var c=r.call(s,o),l=s[o];try{s[o]=void 0;var u=!0}catch{}var d=i.call(s);return u&&(c?s[o]=l:delete s[o]),d}return va=a,va}var xa,gg;function tT(){if(gg)return xa;gg=1;var e=Object.prototype,n=e.toString;function r(i){return n.call(i)}return xa=r,xa}var ba,mg;function mn(){if(mg)return ba;mg=1;var e=Un(),n=eT(),r=tT(),i="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function s(c){return c==null?c===void 0?o:i:a&&a in Object(c)?n(c):r(c)}return ba=s,ba}var _a,yg;function tt(){if(yg)return _a;yg=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return _a=e,_a}var wa,vg;function Lr(){if(vg)return wa;vg=1;var e=mn(),n=tt(),r="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!n(c))return!1;var l=e(c);return l==i||l==o||l==r||l==a}return wa=s,wa}var Sa,xg;function nT(){if(xg)return Sa;xg=1;var e=dt(),n=e["__core-js_shared__"];return Sa=n,Sa}var Ca,bg;function rT(){if(bg)return Ca;bg=1;var e=nT(),n=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function r(i){return!!n&&n in i}return Ca=r,Ca}var Na,_g;function rw(){if(_g)return Na;_g=1;var e=Function.prototype,n=e.toString;function r(i){if(i!=null){try{return n.call(i)}catch{}try{return i+""}catch{}}return""}return Na=r,Na}var Ea,wg;function iT(){if(wg)return Ea;wg=1;var e=Lr(),n=rT(),r=tt(),i=rw(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,u=c.hasOwnProperty,d=RegExp("^"+l.call(u).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||n(h))return!1;var p=e(h)?d:a;return p.test(i(h))}return Ea=f,Ea}var ka,Sg;function oT(){if(Sg)return ka;Sg=1;function e(n,r){return n?.[r]}return ka=e,ka}var Ra,Cg;function yn(){if(Cg)return Ra;Cg=1;var e=iT(),n=oT();function r(i,o){var a=n(i,o);return e(a)?a:void 0}return Ra=r,Ra}var Aa,Ng;function Bd(){if(Ng)return Aa;Ng=1;var e=yn(),n=dt(),r=e(n,"Map");return Aa=r,Aa}var ja,Eg;function ho(){if(Eg)return ja;Eg=1;var e=yn(),n=e(Object,"create");return ja=n,ja}var Pa,kg;function aT(){if(kg)return Pa;kg=1;var e=ho();function n(){this.__data__=e?e(null):{},this.size=0}return Pa=n,Pa}var Ma,Rg;function sT(){if(Rg)return Ma;Rg=1;function e(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}return Ma=e,Ma}var Ia,Ag;function cT(){if(Ag)return Ia;Ag=1;var e=ho(),n="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function o(a){var s=this.__data__;if(e){var c=s[a];return c===n?void 0:c}return i.call(s,a)?s[a]:void 0}return Ia=o,Ia}var Ta,jg;function lT(){if(jg)return Ta;jg=1;var e=ho(),n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;return e?a[o]!==void 0:r.call(a,o)}return Ta=i,Ta}var Oa,Pg;function uT(){if(Pg)return Oa;Pg=1;var e=ho(),n="__lodash_hash_undefined__";function r(i,o){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&o===void 0?n:o,this}return Oa=r,Oa}var qa,Mg;function fT(){if(Mg)return qa;Mg=1;var e=aT(),n=sT(),r=cT(),i=lT(),o=uT();function a(s){var c=-1,l=s==null?0:s.length;for(this.clear();++c<l;){var u=s[c];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,qa=a,qa}var Da,Ig;function dT(){if(Ig)return Da;Ig=1;var e=fT(),n=fo(),r=Bd();function i(){this.size=0,this.__data__={hash:new e,map:new(r||n),string:new e}}return Da=i,Da}var za,Tg;function hT(){if(Tg)return za;Tg=1;function e(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}return za=e,za}var La,Og;function po(){if(Og)return La;Og=1;var e=hT();function n(r,i){var o=r.__data__;return e(i)?o[typeof i=="string"?"string":"hash"]:o.map}return La=n,La}var $a,qg;function pT(){if(qg)return $a;qg=1;var e=po();function n(r){var i=e(this,r).delete(r);return this.size-=i?1:0,i}return $a=n,$a}var Fa,Dg;function gT(){if(Dg)return Fa;Dg=1;var e=po();function n(r){return e(this,r).get(r)}return Fa=n,Fa}var Ha,zg;function mT(){if(zg)return Ha;zg=1;var e=po();function n(r){return e(this,r).has(r)}return Ha=n,Ha}var Ba,Lg;function yT(){if(Lg)return Ba;Lg=1;var e=po();function n(r,i){var o=e(this,r),a=o.size;return o.set(r,i),this.size+=o.size==a?0:1,this}return Ba=n,Ba}var Va,$g;function Vd(){if($g)return Va;$g=1;var e=dT(),n=pT(),r=gT(),i=mT(),o=yT();function a(s){var c=-1,l=s==null?0:s.length;for(this.clear();++c<l;){var u=s[c];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Va=a,Va}var Ga,Fg;function vT(){if(Fg)return Ga;Fg=1;var e=fo(),n=Bd(),r=Vd(),i=200;function o(a,s){var c=this.__data__;if(c instanceof e){var l=c.__data__;if(!n||l.length<i-1)return l.push([a,s]),this.size=++c.size,this;c=this.__data__=new r(l)}return c.set(a,s),this.size=c.size,this}return Ga=o,Ga}var Ua,Hg;function go(){if(Hg)return Ua;Hg=1;var e=fo(),n=XI(),r=ZI(),i=JI(),o=QI(),a=vT();function s(c){var l=this.__data__=new e(c);this.size=l.size}return s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=o,s.prototype.set=a,Ua=s,Ua}var Wa,Bg;function Gd(){if(Bg)return Wa;Bg=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o&&r(n[i],i,n)!==!1;);return n}return Wa=e,Wa}var Ka,Vg;function iw(){if(Vg)return Ka;Vg=1;var e=yn(),n=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Ka=n,Ka}var Ya,Gg;function mo(){if(Gg)return Ya;Gg=1;var e=iw();function n(r,i,o){i=="__proto__"&&e?e(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o}return Ya=n,Ya}var Xa,Ug;function yo(){if(Ug)return Xa;Ug=1;var e=mo(),n=Gn(),r=Object.prototype,i=r.hasOwnProperty;function o(a,s,c){var l=a[s];(!(i.call(a,s)&&n(l,c))||c===void 0&&!(s in a))&&e(a,s,c)}return Xa=o,Xa}var Za,Wg;function $r(){if(Wg)return Za;Wg=1;var e=yo(),n=mo();function r(i,o,a,s){var c=!a;a||(a={});for(var l=-1,u=o.length;++l<u;){var d=o[l],f=s?s(a[d],i[d],d,a,i):void 0;f===void 0&&(f=i[d]),c?n(a,d,f):e(a,d,f)}return a}return Za=r,Za}var Ja,Kg;function xT(){if(Kg)return Ja;Kg=1;function e(n,r){for(var i=-1,o=Array(n);++i<n;)o[i]=r(i);return o}return Ja=e,Ja}var Qa,Yg;function xt(){if(Yg)return Qa;Yg=1;function e(n){return n!=null&&typeof n=="object"}return Qa=e,Qa}var es,Xg;function bT(){if(Xg)return es;Xg=1;var e=mn(),n=xt(),r="[object Arguments]";function i(o){return n(o)&&e(o)==r}return es=i,es}var ts,Zg;function Fr(){if(Zg)return ts;Zg=1;var e=bT(),n=xt(),r=Object.prototype,i=r.hasOwnProperty,o=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(s){return n(s)&&i.call(s,"callee")&&!o.call(s,"callee")};return ts=a,ts}var ns,Jg;function je(){if(Jg)return ns;Jg=1;var e=Array.isArray;return ns=e,ns}var cr={exports:{}},rs,Qg;function _T(){if(Qg)return rs;Qg=1;function e(){return!1}return rs=e,rs}cr.exports;var em;function Wn(){return em||(em=1,(function(e,n){var r=dt(),i=_T(),o=n&&!n.nodeType&&n,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,c=s?r.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||i;e.exports=u})(cr,cr.exports)),cr.exports}var is,tm;function vo(){if(tm)return is;tm=1;var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(i,o){var a=typeof i;return o=o??e,!!o&&(a=="number"||a!="symbol"&&n.test(i))&&i>-1&&i%1==0&&i<o}return is=r,is}var os,nm;function Ud(){if(nm)return os;nm=1;var e=9007199254740991;function n(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return os=n,os}var as,rm;function wT(){if(rm)return as;rm=1;var e=mn(),n=Ud(),r=xt(),i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",l="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",y="[object String]",x="[object WeakMap]",v="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",N="[object Uint8Array]",E="[object Uint8ClampedArray]",k="[object Uint16Array]",R="[object Uint32Array]",A={};A[_]=A[b]=A[w]=A[S]=A[C]=A[N]=A[E]=A[k]=A[R]=!0,A[i]=A[o]=A[v]=A[a]=A[m]=A[s]=A[c]=A[l]=A[u]=A[d]=A[f]=A[h]=A[p]=A[y]=A[x]=!1;function P(q){return r(q)&&n(q.length)&&!!A[e(q)]}return as=P,as}var ss,im;function xo(){if(im)return ss;im=1;function e(n){return function(r){return n(r)}}return ss=e,ss}var lr={exports:{}};lr.exports;var om;function Wd(){return om||(om=1,(function(e,n){var r=nw(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,c=(function(){try{var l=o&&o.require&&o.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();e.exports=c})(lr,lr.exports)),lr.exports}var cs,am;function Hr(){if(am)return cs;am=1;var e=wT(),n=xo(),r=Wd(),i=r&&r.isTypedArray,o=i?n(i):e;return cs=o,cs}var ls,sm;function ow(){if(sm)return ls;sm=1;var e=xT(),n=Fr(),r=je(),i=Wn(),o=vo(),a=Hr(),s=Object.prototype,c=s.hasOwnProperty;function l(u,d){var f=r(u),h=!f&&n(u),p=!f&&!h&&i(u),y=!f&&!h&&!p&&a(u),x=f||h||p||y,v=x?e(u.length,String):[],m=v.length;for(var _ in u)(d||c.call(u,_))&&!(x&&(_=="length"||p&&(_=="offset"||_=="parent")||y&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||o(_,m)))&&v.push(_);return v}return ls=l,ls}var us,cm;function bo(){if(cm)return us;cm=1;var e=Object.prototype;function n(r){var i=r&&r.constructor,o=typeof i=="function"&&i.prototype||e;return r===o}return us=n,us}var fs,lm;function aw(){if(lm)return fs;lm=1;function e(n,r){return function(i){return n(r(i))}}return fs=e,fs}var ds,um;function ST(){if(um)return ds;um=1;var e=aw(),n=e(Object.keys,Object);return ds=n,ds}var hs,fm;function Kd(){if(fm)return hs;fm=1;var e=bo(),n=ST(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!e(a))return n(a);var s=[];for(var c in Object(a))i.call(a,c)&&c!="constructor"&&s.push(c);return s}return hs=o,hs}var ps,dm;function Ot(){if(dm)return ps;dm=1;var e=Lr(),n=Ud();function r(i){return i!=null&&n(i.length)&&!e(i)}return ps=r,ps}var gs,hm;function Wt(){if(hm)return gs;hm=1;var e=ow(),n=Kd(),r=Ot();function i(o){return r(o)?e(o):n(o)}return gs=i,gs}var ms,pm;function CT(){if(pm)return ms;pm=1;var e=$r(),n=Wt();function r(i,o){return i&&e(o,n(o),i)}return ms=r,ms}var ys,gm;function NT(){if(gm)return ys;gm=1;function e(n){var r=[];if(n!=null)for(var i in Object(n))r.push(i);return r}return ys=e,ys}var vs,mm;function ET(){if(mm)return vs;mm=1;var e=tt(),n=bo(),r=NT(),i=Object.prototype,o=i.hasOwnProperty;function a(s){if(!e(s))return r(s);var c=n(s),l=[];for(var u in s)u=="constructor"&&(c||!o.call(s,u))||l.push(u);return l}return vs=a,vs}var xs,ym;function vn(){if(ym)return xs;ym=1;var e=ow(),n=ET(),r=Ot();function i(o){return r(o)?e(o,!0):n(o)}return xs=i,xs}var bs,vm;function kT(){if(vm)return bs;vm=1;var e=$r(),n=vn();function r(i,o){return i&&e(o,n(o),i)}return bs=r,bs}var ur={exports:{}};ur.exports;var xm;function sw(){return xm||(xm=1,(function(e,n){var r=dt(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,c=s?s.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var f=u.length,h=c?c(f):new u.constructor(f);return u.copy(h),h}e.exports=l})(ur,ur.exports)),ur.exports}var _s,bm;function cw(){if(bm)return _s;bm=1;function e(n,r){var i=-1,o=n.length;for(r||(r=Array(o));++i<o;)r[i]=n[i];return r}return _s=e,_s}var ws,_m;function lw(){if(_m)return ws;_m=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=0,s=[];++i<o;){var c=n[i];r(c,i,n)&&(s[a++]=c)}return s}return ws=e,ws}var Ss,wm;function uw(){if(wm)return Ss;wm=1;function e(){return[]}return Ss=e,Ss}var Cs,Sm;function Yd(){if(Sm)return Cs;Sm=1;var e=lw(),n=uw(),r=Object.prototype,i=r.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(s){return s==null?[]:(s=Object(s),e(o(s),function(c){return i.call(s,c)}))}:n;return Cs=a,Cs}var Ns,Cm;function RT(){if(Cm)return Ns;Cm=1;var e=$r(),n=Yd();function r(i,o){return e(i,n(i),o)}return Ns=r,Ns}var Es,Nm;function Xd(){if(Nm)return Es;Nm=1;function e(n,r){for(var i=-1,o=r.length,a=n.length;++i<o;)n[a+i]=r[i];return n}return Es=e,Es}var ks,Em;function _o(){if(Em)return ks;Em=1;var e=aw(),n=e(Object.getPrototypeOf,Object);return ks=n,ks}var Rs,km;function fw(){if(km)return Rs;km=1;var e=Xd(),n=_o(),r=Yd(),i=uw(),o=Object.getOwnPropertySymbols,a=o?function(s){for(var c=[];s;)e(c,r(s)),s=n(s);return c}:i;return Rs=a,Rs}var As,Rm;function AT(){if(Rm)return As;Rm=1;var e=$r(),n=fw();function r(i,o){return e(i,n(i),o)}return As=r,As}var js,Am;function dw(){if(Am)return js;Am=1;var e=Xd(),n=je();function r(i,o,a){var s=o(i);return n(i)?s:e(s,a(i))}return js=r,js}var Ps,jm;function hw(){if(jm)return Ps;jm=1;var e=dw(),n=Yd(),r=Wt();function i(o){return e(o,r,n)}return Ps=i,Ps}var Ms,Pm;function jT(){if(Pm)return Ms;Pm=1;var e=dw(),n=fw(),r=vn();function i(o){return e(o,r,n)}return Ms=i,Ms}var Is,Mm;function PT(){if(Mm)return Is;Mm=1;var e=yn(),n=dt(),r=e(n,"DataView");return Is=r,Is}var Ts,Im;function MT(){if(Im)return Ts;Im=1;var e=yn(),n=dt(),r=e(n,"Promise");return Ts=r,Ts}var Os,Tm;function pw(){if(Tm)return Os;Tm=1;var e=yn(),n=dt(),r=e(n,"Set");return Os=r,Os}var qs,Om;function IT(){if(Om)return qs;Om=1;var e=yn(),n=dt(),r=e(n,"WeakMap");return qs=r,qs}var Ds,qm;function Kn(){if(qm)return Ds;qm=1;var e=PT(),n=Bd(),r=MT(),i=pw(),o=IT(),a=mn(),s=rw(),c="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=s(e),y=s(n),x=s(r),v=s(i),m=s(o),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=h||n&&_(new n)!=c||r&&_(r.resolve())!=u||i&&_(new i)!=d||o&&_(new o)!=f)&&(_=function(b){var w=a(b),S=w==l?b.constructor:void 0,C=S?s(S):"";if(C)switch(C){case p:return h;case y:return c;case x:return u;case v:return d;case m:return f}return w}),Ds=_,Ds}var zs,Dm;function TT(){if(Dm)return zs;Dm=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=i.length,a=new i.constructor(o);return o&&typeof i[0]=="string"&&n.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return zs=r,zs}var Ls,zm;function gw(){if(zm)return Ls;zm=1;var e=dt(),n=e.Uint8Array;return Ls=n,Ls}var $s,Lm;function Zd(){if(Lm)return $s;Lm=1;var e=gw();function n(r){var i=new r.constructor(r.byteLength);return new e(i).set(new e(r)),i}return $s=n,$s}var Fs,$m;function OT(){if($m)return Fs;$m=1;var e=Zd();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}return Fs=n,Fs}var Hs,Fm;function qT(){if(Fm)return Hs;Fm=1;var e=/\w*$/;function n(r){var i=new r.constructor(r.source,e.exec(r));return i.lastIndex=r.lastIndex,i}return Hs=n,Hs}var Bs,Hm;function DT(){if(Hm)return Bs;Hm=1;var e=Un(),n=e?e.prototype:void 0,r=n?n.valueOf:void 0;function i(o){return r?Object(r.call(o)):{}}return Bs=i,Bs}var Vs,Bm;function mw(){if(Bm)return Vs;Bm=1;var e=Zd();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}return Vs=n,Vs}var Gs,Vm;function zT(){if(Vm)return Gs;Vm=1;var e=Zd(),n=OT(),r=qT(),i=DT(),o=mw(),a="[object Boolean]",s="[object Date]",c="[object Map]",l="[object Number]",u="[object RegExp]",d="[object Set]",f="[object String]",h="[object Symbol]",p="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",v="[object Float64Array]",m="[object Int8Array]",_="[object Int16Array]",b="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]";function E(k,R,A){var P=k.constructor;switch(R){case p:return e(k);case a:case s:return new P(+k);case y:return n(k,A);case x:case v:case m:case _:case b:case w:case S:case C:case N:return o(k,A);case c:return new P;case l:case f:return new P(k);case u:return r(k);case d:return new P;case h:return i(k)}}return Gs=E,Gs}var Us,Gm;function yw(){if(Gm)return Us;Gm=1;var e=tt(),n=Object.create,r=(function(){function i(){}return function(o){if(!e(o))return{};if(n)return n(o);i.prototype=o;var a=new i;return i.prototype=void 0,a}})();return Us=r,Us}var Ws,Um;function vw(){if(Um)return Ws;Um=1;var e=yw(),n=_o(),r=bo();function i(o){return typeof o.constructor=="function"&&!r(o)?e(n(o)):{}}return Ws=i,Ws}var Ks,Wm;function LT(){if(Wm)return Ks;Wm=1;var e=Kn(),n=xt(),r="[object Map]";function i(o){return n(o)&&e(o)==r}return Ks=i,Ks}var Ys,Km;function $T(){if(Km)return Ys;Km=1;var e=LT(),n=xo(),r=Wd(),i=r&&r.isMap,o=i?n(i):e;return Ys=o,Ys}var Xs,Ym;function FT(){if(Ym)return Xs;Ym=1;var e=Kn(),n=xt(),r="[object Set]";function i(o){return n(o)&&e(o)==r}return Xs=i,Xs}var Zs,Xm;function HT(){if(Xm)return Zs;Xm=1;var e=FT(),n=xo(),r=Wd(),i=r&&r.isSet,o=i?n(i):e;return Zs=o,Zs}var Js,Zm;function xw(){if(Zm)return Js;Zm=1;var e=go(),n=Gd(),r=yo(),i=CT(),o=kT(),a=sw(),s=cw(),c=RT(),l=AT(),u=hw(),d=jT(),f=Kn(),h=TT(),p=zT(),y=vw(),x=je(),v=Wn(),m=$T(),_=tt(),b=HT(),w=Wt(),S=vn(),C=1,N=2,E=4,k="[object Arguments]",R="[object Array]",A="[object Boolean]",P="[object Date]",q="[object Error]",M="[object Function]",T="[object GeneratorFunction]",O="[object Map]",H="[object Number]",F="[object Object]",G="[object RegExp]",V="[object Set]",W="[object String]",K="[object Symbol]",D="[object WeakMap]",I="[object ArrayBuffer]",z="[object DataView]",L="[object Float32Array]",B="[object Float64Array]",U="[object Int8Array]",Y="[object Int16Array]",Z="[object Int32Array]",ne="[object Uint8Array]",te="[object Uint8ClampedArray]",J="[object Uint16Array]",ie="[object Uint32Array]",re={};re[k]=re[R]=re[I]=re[z]=re[A]=re[P]=re[L]=re[B]=re[U]=re[Y]=re[Z]=re[O]=re[H]=re[F]=re[G]=re[V]=re[W]=re[K]=re[ne]=re[te]=re[J]=re[ie]=!0,re[q]=re[M]=re[D]=!1;function fe(se,ge,Ee,ee,Q,ce){var le,ke=ge&C,ye=ge&N,qe=ge&E;if(Ee&&(le=Q?Ee(se,ee,Q,ce):Ee(se)),le!==void 0)return le;if(!_(se))return se;var Re=x(se);if(Re){if(le=h(se),!ke)return s(se,le)}else{var Te=f(se),bt=Te==M||Te==T;if(v(se))return a(se,ke);if(Te==F||Te==k||bt&&!Q){if(le=ye||bt?{}:y(se),!ke)return ye?l(se,o(le,se)):c(se,i(le,se))}else{if(!re[Te])return Q?se:{};le=p(se,Te,ke)}}ce||(ce=new e);var _t=ce.get(se);if(_t)return _t;ce.set(se,le),b(se)?se.forEach(function(Fe){le.add(fe(Fe,ge,Ee,Fe,se,ce))}):m(se)&&se.forEach(function(Fe,Pe){le.set(Pe,fe(Fe,ge,Ee,Pe,se,ce))});var bn=qe?ye?d:u:ye?S:w,wt=Re?void 0:bn(se);return n(wt||se,function(Fe,Pe){wt&&(Pe=Fe,Fe=se[Pe]),r(le,Pe,fe(Fe,ge,Ee,Pe,se,ce))}),le}return Js=fe,Js}var Qs,Jm;function BT(){if(Jm)return Qs;Jm=1;var e=xw(),n=4;function r(i){return e(i,n)}return Qs=r,Qs}var ec,Qm;function Jd(){if(Qm)return ec;Qm=1;function e(n){return function(){return n}}return ec=e,ec}var tc,ey;function VT(){if(ey)return tc;ey=1;function e(n){return function(r,i,o){for(var a=-1,s=Object(r),c=o(r),l=c.length;l--;){var u=c[n?l:++a];if(i(s[u],u,s)===!1)break}return r}}return tc=e,tc}var nc,ty;function Qd(){if(ty)return nc;ty=1;var e=VT(),n=e();return nc=n,nc}var rc,ny;function eh(){if(ny)return rc;ny=1;var e=Qd(),n=Wt();function r(i,o){return i&&e(i,o,n)}return rc=r,rc}var ic,ry;function GT(){if(ry)return ic;ry=1;var e=Ot();function n(r,i){return function(o,a){if(o==null)return o;if(!e(o))return r(o,a);for(var s=o.length,c=i?s:-1,l=Object(o);(i?c--:++c<s)&&a(l[c],c,l)!==!1;);return o}}return ic=n,ic}var oc,iy;function wo(){if(iy)return oc;iy=1;var e=eh(),n=GT(),r=n(e);return oc=r,oc}var ac,oy;function xn(){if(oy)return ac;oy=1;function e(n){return n}return ac=e,ac}var sc,ay;function bw(){if(ay)return sc;ay=1;var e=xn();function n(r){return typeof r=="function"?r:e}return sc=n,sc}var cc,sy;function _w(){if(sy)return cc;sy=1;var e=Gd(),n=wo(),r=bw(),i=je();function o(a,s){var c=i(a)?e:n;return c(a,r(s))}return cc=o,cc}var lc,cy;function ww(){return cy||(cy=1,lc=_w()),lc}var uc,ly;function UT(){if(ly)return uc;ly=1;var e=wo();function n(r,i){var o=[];return e(r,function(a,s,c){i(a,s,c)&&o.push(a)}),o}return uc=n,uc}var fc,uy;function WT(){if(uy)return fc;uy=1;var e="__lodash_hash_undefined__";function n(r){return this.__data__.set(r,e),this}return fc=n,fc}var dc,fy;function KT(){if(fy)return dc;fy=1;function e(n){return this.__data__.has(n)}return dc=e,dc}var hc,dy;function Sw(){if(dy)return hc;dy=1;var e=Vd(),n=WT(),r=KT();function i(o){var a=-1,s=o==null?0:o.length;for(this.__data__=new e;++a<s;)this.add(o[a])}return i.prototype.add=i.prototype.push=n,i.prototype.has=r,hc=i,hc}var pc,hy;function YT(){if(hy)return pc;hy=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o;)if(r(n[i],i,n))return!0;return!1}return pc=e,pc}var gc,py;function Cw(){if(py)return gc;py=1;function e(n,r){return n.has(r)}return gc=e,gc}var mc,gy;function Nw(){if(gy)return mc;gy=1;var e=Sw(),n=YT(),r=Cw(),i=1,o=2;function a(s,c,l,u,d,f){var h=l&i,p=s.length,y=c.length;if(p!=y&&!(h&&y>p))return!1;var x=f.get(s),v=f.get(c);if(x&&v)return x==c&&v==s;var m=-1,_=!0,b=l&o?new e:void 0;for(f.set(s,c),f.set(c,s);++m<p;){var w=s[m],S=c[m];if(u)var C=h?u(S,w,m,c,s,f):u(w,S,m,s,c,f);if(C!==void 0){if(C)continue;_=!1;break}if(b){if(!n(c,function(N,E){if(!r(b,E)&&(w===N||d(w,N,l,u,f)))return b.push(E)})){_=!1;break}}else if(!(w===S||d(w,S,l,u,f))){_=!1;break}}return f.delete(s),f.delete(c),_}return mc=a,mc}var yc,my;function XT(){if(my)return yc;my=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o,a){i[++r]=[a,o]}),i}return yc=e,yc}var vc,yy;function th(){if(yy)return vc;yy=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o){i[++r]=o}),i}return vc=e,vc}var xc,vy;function ZT(){if(vy)return xc;vy=1;var e=Un(),n=gw(),r=Gn(),i=Nw(),o=XT(),a=th(),s=1,c=2,l="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",y="[object Set]",x="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",_="[object DataView]",b=e?e.prototype:void 0,w=b?b.valueOf:void 0;function S(C,N,E,k,R,A,P){switch(E){case _:if(C.byteLength!=N.byteLength||C.byteOffset!=N.byteOffset)return!1;C=C.buffer,N=N.buffer;case m:return!(C.byteLength!=N.byteLength||!A(new n(C),new n(N)));case l:case u:case h:return r(+C,+N);case d:return C.name==N.name&&C.message==N.message;case p:case x:return C==N+"";case f:var q=o;case y:var M=k&s;if(q||(q=a),C.size!=N.size&&!M)return!1;var T=P.get(C);if(T)return T==N;k|=c,P.set(C,N);var O=i(q(C),q(N),k,R,A,P);return P.delete(C),O;case v:if(w)return w.call(C)==w.call(N)}return!1}return xc=S,xc}var bc,xy;function JT(){if(xy)return bc;xy=1;var e=hw(),n=1,r=Object.prototype,i=r.hasOwnProperty;function o(a,s,c,l,u,d){var f=c&n,h=e(a),p=h.length,y=e(s),x=y.length;if(p!=x&&!f)return!1;for(var v=p;v--;){var m=h[v];if(!(f?m in s:i.call(s,m)))return!1}var _=d.get(a),b=d.get(s);if(_&&b)return _==s&&b==a;var w=!0;d.set(a,s),d.set(s,a);for(var S=f;++v<p;){m=h[v];var C=a[m],N=s[m];if(l)var E=f?l(N,C,m,s,a,d):l(C,N,m,a,s,d);if(!(E===void 0?C===N||u(C,N,c,l,d):E)){w=!1;break}S||(S=m=="constructor")}if(w&&!S){var k=a.constructor,R=s.constructor;k!=R&&"constructor"in a&&"constructor"in s&&!(typeof k=="function"&&k instanceof k&&typeof R=="function"&&R instanceof R)&&(w=!1)}return d.delete(a),d.delete(s),w}return bc=o,bc}var _c,by;function QT(){if(by)return _c;by=1;var e=go(),n=Nw(),r=ZT(),i=JT(),o=Kn(),a=je(),s=Wn(),c=Hr(),l=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function y(x,v,m,_,b,w){var S=a(x),C=a(v),N=S?d:o(x),E=C?d:o(v);N=N==u?f:N,E=E==u?f:E;var k=N==f,R=E==f,A=N==E;if(A&&s(x)){if(!s(v))return!1;S=!0,k=!1}if(A&&!k)return w||(w=new e),S||c(x)?n(x,v,m,_,b,w):r(x,v,N,m,_,b,w);if(!(m&l)){var P=k&&p.call(x,"__wrapped__"),q=R&&p.call(v,"__wrapped__");if(P||q){var M=P?x.value():x,T=q?v.value():v;return w||(w=new e),b(M,T,m,_,w)}}return A?(w||(w=new e),i(x,v,m,_,b,w)):!1}return _c=y,_c}var wc,_y;function Ew(){if(_y)return wc;_y=1;var e=QT(),n=xt();function r(i,o,a,s,c){return i===o?!0:i==null||o==null||!n(i)&&!n(o)?i!==i&&o!==o:e(i,o,a,s,r,c)}return wc=r,wc}var Sc,wy;function eO(){if(wy)return Sc;wy=1;var e=go(),n=Ew(),r=1,i=2;function o(a,s,c,l){var u=c.length,d=u,f=!l;if(a==null)return!d;for(a=Object(a);u--;){var h=c[u];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++u<d;){h=c[u];var p=h[0],y=a[p],x=h[1];if(f&&h[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(l)var m=l(y,x,p,a,s,v);if(!(m===void 0?n(x,y,r|i,l,v):m))return!1}}return!0}return Sc=o,Sc}var Cc,Sy;function kw(){if(Sy)return Cc;Sy=1;var e=tt();function n(r){return r===r&&!e(r)}return Cc=n,Cc}var Nc,Cy;function tO(){if(Cy)return Nc;Cy=1;var e=kw(),n=Wt();function r(i){for(var o=n(i),a=o.length;a--;){var s=o[a],c=i[s];o[a]=[s,c,e(c)]}return o}return Nc=r,Nc}var Ec,Ny;function Rw(){if(Ny)return Ec;Ny=1;function e(n,r){return function(i){return i==null?!1:i[n]===r&&(r!==void 0||n in Object(i))}}return Ec=e,Ec}var kc,Ey;function nO(){if(Ey)return kc;Ey=1;var e=eO(),n=tO(),r=Rw();function i(o){var a=n(o);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===o||e(s,o,a)}}return kc=i,kc}var Rc,ky;function Yn(){if(ky)return Rc;ky=1;var e=mn(),n=xt(),r="[object Symbol]";function i(o){return typeof o=="symbol"||n(o)&&e(o)==r}return Rc=i,Rc}var Ac,Ry;function nh(){if(Ry)return Ac;Ry=1;var e=je(),n=Yn(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(a,s){if(e(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||n(a)?!0:i.test(a)||!r.test(a)||s!=null&&a in Object(s)}return Ac=o,Ac}var jc,Ay;function rO(){if(Ay)return jc;Ay=1;var e=Vd(),n="Expected a function";function r(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError(n);var a=function(){var s=arguments,c=o?o.apply(this,s):s[0],l=a.cache;if(l.has(c))return l.get(c);var u=i.apply(this,s);return a.cache=l.set(c,u)||l,u};return a.cache=new(r.Cache||e),a}return r.Cache=e,jc=r,jc}var Pc,jy;function iO(){if(jy)return Pc;jy=1;var e=rO(),n=500;function r(i){var o=e(i,function(s){return a.size===n&&a.clear(),s}),a=o.cache;return o}return Pc=r,Pc}var Mc,Py;function oO(){if(Py)return Mc;Py=1;var e=iO(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(n,function(s,c,l,u){a.push(l?u.replace(r,"$1"):c||s)}),a});return Mc=i,Mc}var Ic,My;function So(){if(My)return Ic;My=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=Array(o);++i<o;)a[i]=r(n[i],i,n);return a}return Ic=e,Ic}var Tc,Iy;function aO(){if(Iy)return Tc;Iy=1;var e=Un(),n=So(),r=je(),i=Yn(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return n(c,s)+"";if(i(c))return a?a.call(c):"";var l=c+"";return l=="0"&&1/c==-1/0?"-0":l}return Tc=s,Tc}var Oc,Ty;function Aw(){if(Ty)return Oc;Ty=1;var e=aO();function n(r){return r==null?"":e(r)}return Oc=n,Oc}var qc,Oy;function Co(){if(Oy)return qc;Oy=1;var e=je(),n=nh(),r=oO(),i=Aw();function o(a,s){return e(a)?a:n(a,s)?[a]:r(i(a))}return qc=o,qc}var Dc,qy;function Br(){if(qy)return Dc;qy=1;var e=Yn();function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return Dc=n,Dc}var zc,Dy;function No(){if(Dy)return zc;Dy=1;var e=Co(),n=Br();function r(i,o){o=e(o,i);for(var a=0,s=o.length;i!=null&&a<s;)i=i[n(o[a++])];return a&&a==s?i:void 0}return zc=r,zc}var Lc,zy;function sO(){if(zy)return Lc;zy=1;var e=No();function n(r,i,o){var a=r==null?void 0:e(r,i);return a===void 0?o:a}return Lc=n,Lc}var $c,Ly;function cO(){if(Ly)return $c;Ly=1;function e(n,r){return n!=null&&r in Object(n)}return $c=e,$c}var Fc,$y;function jw(){if($y)return Fc;$y=1;var e=Co(),n=Fr(),r=je(),i=vo(),o=Ud(),a=Br();function s(c,l,u){l=e(l,c);for(var d=-1,f=l.length,h=!1;++d<f;){var p=a(l[d]);if(!(h=c!=null&&u(c,p)))break;c=c[p]}return h||++d!=f?h:(f=c==null?0:c.length,!!f&&o(f)&&i(p,f)&&(r(c)||n(c)))}return Fc=s,Fc}var Hc,Fy;function Pw(){if(Fy)return Hc;Fy=1;var e=cO(),n=jw();function r(i,o){return i!=null&&n(i,o,e)}return Hc=r,Hc}var Bc,Hy;function lO(){if(Hy)return Bc;Hy=1;var e=Ew(),n=sO(),r=Pw(),i=nh(),o=kw(),a=Rw(),s=Br(),c=1,l=2;function u(d,f){return i(d)&&o(f)?a(s(d),f):function(h){var p=n(h,d);return p===void 0&&p===f?r(h,d):e(f,p,c|l)}}return Bc=u,Bc}var Vc,By;function Mw(){if(By)return Vc;By=1;function e(n){return function(r){return r?.[n]}}return Vc=e,Vc}var Gc,Vy;function uO(){if(Vy)return Gc;Vy=1;var e=No();function n(r){return function(i){return e(i,r)}}return Gc=n,Gc}var Uc,Gy;function fO(){if(Gy)return Uc;Gy=1;var e=Mw(),n=uO(),r=nh(),i=Br();function o(a){return r(a)?e(i(a)):n(a)}return Uc=o,Uc}var Wc,Uy;function qt(){if(Uy)return Wc;Uy=1;var e=nO(),n=lO(),r=xn(),i=je(),o=fO();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?i(s)?n(s[0],s[1]):e(s):o(s)}return Wc=a,Wc}var Kc,Wy;function Iw(){if(Wy)return Kc;Wy=1;var e=lw(),n=UT(),r=qt(),i=je();function o(a,s){var c=i(a)?e:n;return c(a,r(s,3))}return Kc=o,Kc}var Yc,Ky;function dO(){if(Ky)return Yc;Ky=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i,o){return i!=null&&n.call(i,o)}return Yc=r,Yc}var Xc,Yy;function Tw(){if(Yy)return Xc;Yy=1;var e=dO(),n=jw();function r(i,o){return i!=null&&n(i,o,e)}return Xc=r,Xc}var Zc,Xy;function hO(){if(Xy)return Zc;Xy=1;var e=Kd(),n=Kn(),r=Fr(),i=je(),o=Ot(),a=Wn(),s=bo(),c=Hr(),l="[object Map]",u="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(p){if(p==null)return!0;if(o(p)&&(i(p)||typeof p=="string"||typeof p.splice=="function"||a(p)||c(p)||r(p)))return!p.length;var y=n(p);if(y==l||y==u)return!p.size;if(s(p))return!e(p).length;for(var x in p)if(f.call(p,x))return!1;return!0}return Zc=h,Zc}var Jc,Zy;function Ow(){if(Zy)return Jc;Zy=1;function e(n){return n===void 0}return Jc=e,Jc}var Qc,Jy;function qw(){if(Jy)return Qc;Jy=1;var e=wo(),n=Ot();function r(i,o){var a=-1,s=n(i)?Array(i.length):[];return e(i,function(c,l,u){s[++a]=o(c,l,u)}),s}return Qc=r,Qc}var el,Qy;function Dw(){if(Qy)return el;Qy=1;var e=So(),n=qt(),r=qw(),i=je();function o(a,s){var c=i(a)?e:r;return c(a,n(s,3))}return el=o,el}var tl,ev;function pO(){if(ev)return tl;ev=1;function e(n,r,i,o){var a=-1,s=n==null?0:n.length;for(o&&s&&(i=n[++a]);++a<s;)i=r(i,n[a],a,n);return i}return tl=e,tl}var nl,tv;function gO(){if(tv)return nl;tv=1;function e(n,r,i,o,a){return a(n,function(s,c,l){i=o?(o=!1,s):r(i,s,c,l)}),i}return nl=e,nl}var rl,nv;function zw(){if(nv)return rl;nv=1;var e=pO(),n=wo(),r=qt(),i=gO(),o=je();function a(s,c,l){var u=o(s)?e:i,d=arguments.length<3;return u(s,r(c,4),l,d,n)}return rl=a,rl}var il,rv;function mO(){if(rv)return il;rv=1;var e=mn(),n=je(),r=xt(),i="[object String]";function o(a){return typeof a=="string"||!n(a)&&r(a)&&e(a)==i}return il=o,il}var ol,iv;function yO(){if(iv)return ol;iv=1;var e=Mw(),n=e("length");return ol=n,ol}var al,ov;function vO(){if(ov)return al;ov=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+e+o+a+"]");function l(u){return c.test(u)}return al=l,al}var sl,av;function xO(){if(av)return sl;av=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="["+e+"]",c="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+c+"|"+l+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=u+"?",x="["+a+"]?",v="(?:"+p+"(?:"+[d,f,h].join("|")+")"+x+y+")*",m=x+y+v,_="(?:"+[d+c+"?",c,f,h,s].join("|")+")",b=RegExp(l+"(?="+l+")|"+_+m,"g");function w(S){for(var C=b.lastIndex=0;b.test(S);)++C;return C}return sl=w,sl}var cl,sv;function bO(){if(sv)return cl;sv=1;var e=yO(),n=vO(),r=xO();function i(o){return n(o)?r(o):e(o)}return cl=i,cl}var ll,cv;function _O(){if(cv)return ll;cv=1;var e=Kd(),n=Kn(),r=Ot(),i=mO(),o=bO(),a="[object Map]",s="[object Set]";function c(l){if(l==null)return 0;if(r(l))return i(l)?o(l):l.length;var u=n(l);return u==a||u==s?l.size:e(l).length}return ll=c,ll}var ul,lv;function wO(){if(lv)return ul;lv=1;var e=Gd(),n=yw(),r=eh(),i=qt(),o=_o(),a=je(),s=Wn(),c=Lr(),l=tt(),u=Hr();function d(f,h,p){var y=a(f),x=y||s(f)||u(f);if(h=i(h,4),p==null){var v=f&&f.constructor;x?p=y?new v:[]:l(f)?p=c(v)?n(o(f)):{}:p={}}return(x?e:r)(f,function(m,_,b){return h(p,m,_,b)}),p}return ul=d,ul}var fl,uv;function SO(){if(uv)return fl;uv=1;var e=Un(),n=Fr(),r=je(),i=e?e.isConcatSpreadable:void 0;function o(a){return r(a)||n(a)||!!(i&&a&&a[i])}return fl=o,fl}var dl,fv;function rh(){if(fv)return dl;fv=1;var e=Xd(),n=SO();function r(i,o,a,s,c){var l=-1,u=i.length;for(a||(a=n),c||(c=[]);++l<u;){var d=i[l];o>0&&a(d)?o>1?r(d,o-1,a,s,c):e(c,d):s||(c[c.length]=d)}return c}return dl=r,dl}var hl,dv;function CO(){if(dv)return hl;dv=1;function e(n,r,i){switch(i.length){case 0:return n.call(r);case 1:return n.call(r,i[0]);case 2:return n.call(r,i[0],i[1]);case 3:return n.call(r,i[0],i[1],i[2])}return n.apply(r,i)}return hl=e,hl}var pl,hv;function Lw(){if(hv)return pl;hv=1;var e=CO(),n=Math.max;function r(i,o,a){return o=n(o===void 0?i.length-1:o,0),function(){for(var s=arguments,c=-1,l=n(s.length-o,0),u=Array(l);++c<l;)u[c]=s[o+c];c=-1;for(var d=Array(o+1);++c<o;)d[c]=s[c];return d[o]=a(u),e(i,this,d)}}return pl=r,pl}var gl,pv;function NO(){if(pv)return gl;pv=1;var e=Jd(),n=iw(),r=xn(),i=n?function(o,a){return n(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return gl=i,gl}var ml,gv;function EO(){if(gv)return ml;gv=1;var e=800,n=16,r=Date.now;function i(o){var a=0,s=0;return function(){var c=r(),l=n-(c-s);if(s=c,l>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return ml=i,ml}var yl,mv;function $w(){if(mv)return yl;mv=1;var e=NO(),n=EO(),r=n(e);return yl=r,yl}var vl,yv;function Eo(){if(yv)return vl;yv=1;var e=xn(),n=Lw(),r=$w();function i(o,a){return r(n(o,a,e),o+"")}return vl=i,vl}var xl,vv;function Fw(){if(vv)return xl;vv=1;function e(n,r,i,o){for(var a=n.length,s=i+(o?1:-1);o?s--:++s<a;)if(r(n[s],s,n))return s;return-1}return xl=e,xl}var bl,xv;function kO(){if(xv)return bl;xv=1;function e(n){return n!==n}return bl=e,bl}var _l,bv;function RO(){if(bv)return _l;bv=1;function e(n,r,i){for(var o=i-1,a=n.length;++o<a;)if(n[o]===r)return o;return-1}return _l=e,_l}var wl,_v;function AO(){if(_v)return wl;_v=1;var e=Fw(),n=kO(),r=RO();function i(o,a,s){return a===a?r(o,a,s):e(o,n,s)}return wl=i,wl}var Sl,wv;function jO(){if(wv)return Sl;wv=1;var e=AO();function n(r,i){var o=r==null?0:r.length;return!!o&&e(r,i,0)>-1}return Sl=n,Sl}var Cl,Sv;function PO(){if(Sv)return Cl;Sv=1;function e(n,r,i){for(var o=-1,a=n==null?0:n.length;++o<a;)if(i(r,n[o]))return!0;return!1}return Cl=e,Cl}var Nl,Cv;function MO(){if(Cv)return Nl;Cv=1;function e(){}return Nl=e,Nl}var El,Nv;function IO(){if(Nv)return El;Nv=1;var e=pw(),n=MO(),r=th(),i=1/0,o=e&&1/r(new e([,-0]))[1]==i?function(a){return new e(a)}:n;return El=o,El}var kl,Ev;function TO(){if(Ev)return kl;Ev=1;var e=Sw(),n=jO(),r=PO(),i=Cw(),o=IO(),a=th(),s=200;function c(l,u,d){var f=-1,h=n,p=l.length,y=!0,x=[],v=x;if(d)y=!1,h=r;else if(p>=s){var m=u?null:o(l);if(m)return a(m);y=!1,h=i,v=new e}else v=u?[]:x;e:for(;++f<p;){var _=l[f],b=u?u(_):_;if(_=d||_!==0?_:0,y&&b===b){for(var w=v.length;w--;)if(v[w]===b)continue e;u&&v.push(b),x.push(_)}else h(v,b,d)||(v!==x&&v.push(b),x.push(_))}return x}return kl=c,kl}var Rl,kv;function Hw(){if(kv)return Rl;kv=1;var e=Ot(),n=xt();function r(i){return n(i)&&e(i)}return Rl=r,Rl}var Al,Rv;function OO(){if(Rv)return Al;Rv=1;var e=rh(),n=Eo(),r=TO(),i=Hw(),o=n(function(a){return r(e(a,1,i,!0))});return Al=o,Al}var jl,Av;function qO(){if(Av)return jl;Av=1;var e=So();function n(r,i){return e(i,function(o){return r[o]})}return jl=n,jl}var Pl,jv;function Bw(){if(jv)return Pl;jv=1;var e=qO(),n=Wt();function r(i){return i==null?[]:e(i,n(i))}return Pl=r,Pl}var Ml,Pv;function nt(){if(Pv)return Ml;Pv=1;var e;if(typeof Hd=="function")try{e={clone:BT(),constant:Jd(),each:ww(),filter:Iw(),has:Tw(),isArray:je(),isEmpty:hO(),isFunction:Lr(),isUndefined:Ow(),keys:Wt(),map:Dw(),reduce:zw(),size:_O(),transform:wO(),union:OO(),values:Bw()}}catch{}return e||(e=window._),Ml=e,Ml}var Il,Mv;function ih(){if(Mv)return Il;Mv=1;var e=nt();Il=o;var n="\0",r="\0",i="";function o(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(d){return this._label=d,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._in[f])})},o.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._out[f])})},o.prototype.setNodes=function(d,f){var h=arguments,p=this;return e.each(d,function(y){h.length>1?p.setNode(y,f):p.setNode(y)}),this},o.prototype.setNode=function(d,f){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},o.prototype.node=function(d){return this._nodes[d]},o.prototype.hasNode=function(d){return e.has(this._nodes,d)},o.prototype.removeNode=function(d){var f=this;if(e.has(this._nodes,d)){var h=function(p){f.removeEdge(f._edgeObjs[p])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(p){f.setParent(p)}),delete this._children[d]),e.each(e.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},o.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=r;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},o.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},o.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==r)return f}},o.prototype.children=function(d){if(e.isUndefined(d)&&(d=r),this._isCompound){var f=this._children[d];if(f)return e.keys(f)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},o.prototype.predecessors=function(d){var f=this._preds[d];if(f)return e.keys(f)},o.prototype.successors=function(d){var f=this._sucs[d];if(f)return e.keys(f)},o.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return e.union(f,this.successors(d))},o.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},o.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(x,v){d(v)&&f.setNode(v,x)}),e.each(this._edgeObjs,function(x){f.hasNode(x.v)&&f.hasNode(x.w)&&f.setEdge(x,h.edge(x))});var p={};function y(x){var v=h.parent(x);return v===void 0||f.hasNode(v)?(p[x]=v,v):v in p?p[v]:y(v)}return this._isCompound&&e.each(f.nodes(),function(x){f.setParent(x,y(x))}),f},o.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(d,f){var h=this,p=arguments;return e.reduce(d,function(y,x){return p.length>1?h.setEdge(y,x,f):h.setEdge(y,x),x}),this},o.prototype.setEdge=function(){var d,f,h,p,y=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(d=x.v,f=x.w,h=x.name,arguments.length===2&&(p=arguments[1],y=!0)):(d=x,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],y=!0)),d=""+d,f=""+f,e.isUndefined(h)||(h=""+h);var v=c(this._isDirected,d,f,h);if(e.has(this._edgeLabels,v))return y&&(this._edgeLabels[v]=p),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[v]=y?p:this._defaultEdgeLabelFn(d,f,h);var m=l(this._isDirected,d,f,h);return d=m.v,f=m.w,Object.freeze(m),this._edgeObjs[v]=m,a(this._preds[f],d),a(this._sucs[d],f),this._in[f][v]=m,this._out[d][v]=m,this._edgeCount++,this},o.prototype.edge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):c(this._isDirected,d,f,h);return this._edgeLabels[p]},o.prototype.hasEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):c(this._isDirected,d,f,h);return e.has(this._edgeLabels,p)},o.prototype.removeEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):c(this._isDirected,d,f,h),y=this._edgeObjs[p];return y&&(d=y.v,f=y.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[f],d),s(this._sucs[d],f),delete this._in[f][p],delete this._out[d][p],this._edgeCount--),this},o.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var p=e.values(h);return f?e.filter(p,function(y){return y.v===f}):p}},o.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var p=e.values(h);return f?e.filter(p,function(y){return y.w===f}):p}},o.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function a(d,f){d[f]?d[f]++:d[f]=1}function s(d,f){--d[f]||delete d[f]}function c(d,f,h,p){var y=""+f,x=""+h;if(!d&&y>x){var v=y;y=x,x=v}return y+i+x+i+(e.isUndefined(p)?n:p)}function l(d,f,h,p){var y=""+f,x=""+h;if(!d&&y>x){var v=y;y=x,x=v}var m={v:y,w:x};return p&&(m.name=p),m}function u(d,f){return c(d,f.v,f.w,f.name)}return Il}var Tl,Iv;function DO(){return Iv||(Iv=1,Tl="2.1.8"),Tl}var Ol,Tv;function zO(){return Tv||(Tv=1,Ol={Graph:ih(),version:DO()}),Ol}var ql,Ov;function LO(){if(Ov)return ql;Ov=1;var e=nt(),n=ih();ql={write:r,read:a};function r(s){var c={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:i(s),edges:o(s)};return e.isUndefined(s.graph())||(c.value=e.clone(s.graph())),c}function i(s){return e.map(s.nodes(),function(c){var l=s.node(c),u=s.parent(c),d={v:c};return e.isUndefined(l)||(d.value=l),e.isUndefined(u)||(d.parent=u),d})}function o(s){return e.map(s.edges(),function(c){var l=s.edge(c),u={v:c.v,w:c.w};return e.isUndefined(c.name)||(u.name=c.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var c=new n(s.options).setGraph(s.value);return e.each(s.nodes,function(l){c.setNode(l.v,l.value),l.parent&&c.setParent(l.v,l.parent)}),e.each(s.edges,function(l){c.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),c}return ql}var Dl,qv;function $O(){if(qv)return Dl;qv=1;var e=nt();Dl=n;function n(r){var i={},o=[],a;function s(c){e.has(i,c)||(i[c]=!0,a.push(c),e.each(r.successors(c),s),e.each(r.predecessors(c),s))}return e.each(r.nodes(),function(c){a=[],s(c),a.length&&o.push(a)}),o}return Dl}var zl,Dv;function Vw(){if(Dv)return zl;Dv=1;var e=nt();zl=n;function n(){this._arr=[],this._keyIndices={}}return n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(r){return r.key})},n.prototype.has=function(r){return e.has(this._keyIndices,r)},n.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},n.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(r,i){var o=this._keyIndices;if(r=String(r),!e.has(o,r)){var a=this._arr,s=a.length;return o[r]=s,a.push({key:r,priority:i}),this._decrease(s),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},n.prototype.decrease=function(r,i){var o=this._keyIndices[r];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},n.prototype._heapify=function(r){var i=this._arr,o=2*r,a=o+1,s=r;o<i.length&&(s=i[o].priority<i[s].priority?o:s,a<i.length&&(s=i[a].priority<i[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},n.prototype._decrease=function(r){for(var i=this._arr,o=i[r].priority,a;r!==0&&(a=r>>1,!(i[a].priority<o));)this._swap(r,a),r=a},n.prototype._swap=function(r,i){var o=this._arr,a=this._keyIndices,s=o[r],c=o[i];o[r]=c,o[i]=s,a[c.key]=r,a[s.key]=i},zl}var Ll,zv;function Gw(){if(zv)return Ll;zv=1;var e=nt(),n=Vw();Ll=i;var r=e.constant(1);function i(a,s,c,l){return o(a,String(s),c||r,l||function(u){return a.outEdges(u)})}function o(a,s,c,l){var u={},d=new n,f,h,p=function(y){var x=y.v!==f?y.v:y.w,v=u[x],m=c(y),_=h.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+m);_<v.distance&&(v.distance=_,v.predecessor=f,d.decrease(x,_))};for(a.nodes().forEach(function(y){var x=y===s?0:Number.POSITIVE_INFINITY;u[y]={distance:x},d.add(y,x)});d.size()>0&&(f=d.removeMin(),h=u[f],h.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(p);return u}return Ll}var $l,Lv;function FO(){if(Lv)return $l;Lv=1;var e=Gw(),n=nt();$l=r;function r(i,o,a){return n.transform(i.nodes(),function(s,c){s[c]=e(i,c,o,a)},{})}return $l}var Fl,$v;function Uw(){if($v)return Fl;$v=1;var e=nt();Fl=n;function n(r){var i=0,o=[],a={},s=[];function c(l){var u=a[l]={onStack:!0,lowlink:i,index:i++};if(o.push(l),r.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(u.lowlink=Math.min(u.lowlink,a[h].index)):(c(h),u.lowlink=Math.min(u.lowlink,a[h].lowlink))}),u.lowlink===u.index){var d=[],f;do f=o.pop(),a[f].onStack=!1,d.push(f);while(l!==f);s.push(d)}}return r.nodes().forEach(function(l){e.has(a,l)||c(l)}),s}return Fl}var Hl,Fv;function HO(){if(Fv)return Hl;Fv=1;var e=nt(),n=Uw();Hl=r;function r(i){return e.filter(n(i),function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})}return Hl}var Bl,Hv;function BO(){if(Hv)return Bl;Hv=1;var e=nt();Bl=r;var n=e.constant(1);function r(o,a,s){return i(o,a||n,s||function(c){return o.outEdges(c)})}function i(o,a,s){var c={},l=o.nodes();return l.forEach(function(u){c[u]={},c[u][u]={distance:0},l.forEach(function(d){u!==d&&(c[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var f=d.v===u?d.w:d.v,h=a(d);c[u][f]={distance:h,predecessor:u}})}),l.forEach(function(u){var d=c[u];l.forEach(function(f){var h=c[f];l.forEach(function(p){var y=h[u],x=d[p],v=h[p],m=y.distance+x.distance;m<v.distance&&(v.distance=m,v.predecessor=x.predecessor)})})}),c}return Bl}var Vl,Bv;function Ww(){if(Bv)return Vl;Bv=1;var e=nt();Vl=n,n.CycleException=r;function n(i){var o={},a={},s=[];function c(l){if(e.has(a,l))throw new r;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(i.predecessors(l),c),delete a[l],s.push(l))}if(e.each(i.sinks(),c),e.size(o)!==i.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Vl}var Gl,Vv;function VO(){if(Vv)return Gl;Vv=1;var e=Ww();Gl=n;function n(r){try{e(r)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Gl}var Ul,Gv;function Kw(){if(Gv)return Ul;Gv=1;var e=nt();Ul=n;function n(i,o,a){e.isArray(o)||(o=[o]);var s=(i.isDirected()?i.successors:i.neighbors).bind(i),c=[],l={};return e.each(o,function(u){if(!i.hasNode(u))throw new Error("Graph does not have node: "+u);r(i,u,a==="post",l,s,c)}),c}function r(i,o,a,s,c,l){e.has(s,o)||(s[o]=!0,a||l.push(o),e.each(c(o),function(u){r(i,u,a,s,c,l)}),a&&l.push(o))}return Ul}var Wl,Uv;function GO(){if(Uv)return Wl;Uv=1;var e=Kw();Wl=n;function n(r,i){return e(r,i,"post")}return Wl}var Kl,Wv;function UO(){if(Wv)return Kl;Wv=1;var e=Kw();Kl=n;function n(r,i){return e(r,i,"pre")}return Kl}var Yl,Kv;function WO(){if(Kv)return Yl;Kv=1;var e=nt(),n=ih(),r=Vw();Yl=i;function i(o,a){var s=new n,c={},l=new r,u;function d(h){var p=h.v===u?h.w:h.v,y=l.priority(p);if(y!==void 0){var x=a(h);x<y&&(c[p]=u,l.decrease(p,x))}}if(o.nodeCount()===0)return s;e.each(o.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(u=l.removeMin(),e.has(c,u))s.setEdge(u,c[u]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(u).forEach(d)}return s}return Yl}var Xl,Yv;function KO(){return Yv||(Yv=1,Xl={components:$O(),dijkstra:Gw(),dijkstraAll:FO(),findCycles:HO(),floydWarshall:BO(),isAcyclic:VO(),postorder:GO(),preorder:UO(),prim:WO(),tarjan:Uw(),topsort:Ww()}),Xl}var Zl,Xv;function YO(){if(Xv)return Zl;Xv=1;var e=zO();return Zl={Graph:e.Graph,json:LO(),alg:KO(),version:e.version},Zl}var Jl,Zv;function ut(){if(Zv)return Jl;Zv=1;var e;if(typeof Hd=="function")try{e=YO()}catch{}return e||(e=window.graphlib),Jl=e,Jl}var Ql,Jv;function XO(){if(Jv)return Ql;Jv=1;var e=xw(),n=1,r=4;function i(o){return e(o,n|r)}return Ql=i,Ql}var eu,Qv;function ko(){if(Qv)return eu;Qv=1;var e=Gn(),n=Ot(),r=vo(),i=tt();function o(a,s,c){if(!i(c))return!1;var l=typeof s;return(l=="number"?n(c)&&r(s,c.length):l=="string"&&s in c)?e(c[s],a):!1}return eu=o,eu}var tu,e0;function ZO(){if(e0)return tu;e0=1;var e=Eo(),n=Gn(),r=ko(),i=vn(),o=Object.prototype,a=o.hasOwnProperty,s=e(function(c,l){c=Object(c);var u=-1,d=l.length,f=d>2?l[2]:void 0;for(f&&r(l[0],l[1],f)&&(d=1);++u<d;)for(var h=l[u],p=i(h),y=-1,x=p.length;++y<x;){var v=p[y],m=c[v];(m===void 0||n(m,o[v])&&!a.call(c,v))&&(c[v]=h[v])}return c});return tu=s,tu}var nu,t0;function JO(){if(t0)return nu;t0=1;var e=qt(),n=Ot(),r=Wt();function i(o){return function(a,s,c){var l=Object(a);if(!n(a)){var u=e(s,3);a=r(a),s=function(f){return u(l[f],f,l)}}var d=o(a,s,c);return d>-1?l[u?a[d]:d]:void 0}}return nu=i,nu}var ru,n0;function QO(){if(n0)return ru;n0=1;var e=/\s/;function n(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return ru=n,ru}var iu,r0;function e3(){if(r0)return iu;r0=1;var e=QO(),n=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(n,"")}return iu=r,iu}var ou,i0;function t3(){if(i0)return ou;i0=1;var e=e3(),n=tt(),r=Yn(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return i;if(n(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=n(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||s.test(u)?c(u.slice(2),f?2:8):o.test(u)?i:+u}return ou=l,ou}var au,o0;function Yw(){if(o0)return au;o0=1;var e=t3(),n=1/0,r=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=e(o),o===n||o===-n){var a=o<0?-1:1;return a*r}return o===o?o:0}return au=i,au}var su,a0;function n3(){if(a0)return su;a0=1;var e=Yw();function n(r){var i=e(r),o=i%1;return i===i?o?i-o:i:0}return su=n,su}var cu,s0;function r3(){if(s0)return cu;s0=1;var e=Fw(),n=qt(),r=n3(),i=Math.max;function o(a,s,c){var l=a==null?0:a.length;if(!l)return-1;var u=c==null?0:r(c);return u<0&&(u=i(l+u,0)),e(a,n(s,3),u)}return cu=o,cu}var lu,c0;function i3(){if(c0)return lu;c0=1;var e=JO(),n=r3(),r=e(n);return lu=r,lu}var uu,l0;function Xw(){if(l0)return uu;l0=1;var e=rh();function n(r){var i=r==null?0:r.length;return i?e(r,1):[]}return uu=n,uu}var fu,u0;function o3(){if(u0)return fu;u0=1;var e=Qd(),n=bw(),r=vn();function i(o,a){return o==null?o:e(o,n(a),r)}return fu=i,fu}var du,f0;function a3(){if(f0)return du;f0=1;function e(n){var r=n==null?0:n.length;return r?n[r-1]:void 0}return du=e,du}var hu,d0;function s3(){if(d0)return hu;d0=1;var e=mo(),n=eh(),r=qt();function i(o,a){var s={};return a=r(a,3),n(o,function(c,l,u){e(s,l,a(c,l,u))}),s}return hu=i,hu}var pu,h0;function oh(){if(h0)return pu;h0=1;var e=Yn();function n(r,i,o){for(var a=-1,s=r.length;++a<s;){var c=r[a],l=i(c);if(l!=null&&(u===void 0?l===l&&!e(l):o(l,u)))var u=l,d=c}return d}return pu=n,pu}var gu,p0;function c3(){if(p0)return gu;p0=1;function e(n,r){return n>r}return gu=e,gu}var mu,g0;function l3(){if(g0)return mu;g0=1;var e=oh(),n=c3(),r=xn();function i(o){return o&&o.length?e(o,r,n):void 0}return mu=i,mu}var yu,m0;function Zw(){if(m0)return yu;m0=1;var e=mo(),n=Gn();function r(i,o,a){(a!==void 0&&!n(i[o],a)||a===void 0&&!(o in i))&&e(i,o,a)}return yu=r,yu}var vu,y0;function u3(){if(y0)return vu;y0=1;var e=mn(),n=_o(),r=xt(),i="[object Object]",o=Function.prototype,a=Object.prototype,s=o.toString,c=a.hasOwnProperty,l=s.call(Object);function u(d){if(!r(d)||e(d)!=i)return!1;var f=n(d);if(f===null)return!0;var h=c.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return vu=u,vu}var xu,v0;function Jw(){if(v0)return xu;v0=1;function e(n,r){if(!(r==="constructor"&&typeof n[r]=="function")&&r!="__proto__")return n[r]}return xu=e,xu}var bu,x0;function f3(){if(x0)return bu;x0=1;var e=$r(),n=vn();function r(i){return e(i,n(i))}return bu=r,bu}var _u,b0;function d3(){if(b0)return _u;b0=1;var e=Zw(),n=sw(),r=mw(),i=cw(),o=vw(),a=Fr(),s=je(),c=Hw(),l=Wn(),u=Lr(),d=tt(),f=u3(),h=Hr(),p=Jw(),y=f3();function x(v,m,_,b,w,S,C){var N=p(v,_),E=p(m,_),k=C.get(E);if(k){e(v,_,k);return}var R=S?S(N,E,_+"",v,m,C):void 0,A=R===void 0;if(A){var P=s(E),q=!P&&l(E),M=!P&&!q&&h(E);R=E,P||q||M?s(N)?R=N:c(N)?R=i(N):q?(A=!1,R=n(E,!0)):M?(A=!1,R=r(E,!0)):R=[]:f(E)||a(E)?(R=N,a(N)?R=y(N):(!d(N)||u(N))&&(R=o(E))):A=!1}A&&(C.set(E,R),w(R,E,b,S,C),C.delete(E)),e(v,_,R)}return _u=x,_u}var wu,_0;function h3(){if(_0)return wu;_0=1;var e=go(),n=Zw(),r=Qd(),i=d3(),o=tt(),a=vn(),s=Jw();function c(l,u,d,f,h){l!==u&&r(u,function(p,y){if(h||(h=new e),o(p))i(l,u,y,d,c,f,h);else{var x=f?f(s(l,y),p,y+"",l,u,h):void 0;x===void 0&&(x=p),n(l,y,x)}},a)}return wu=c,wu}var Su,w0;function p3(){if(w0)return Su;w0=1;var e=Eo(),n=ko();function r(i){return e(function(o,a){var s=-1,c=a.length,l=c>1?a[c-1]:void 0,u=c>2?a[2]:void 0;for(l=i.length>3&&typeof l=="function"?(c--,l):void 0,u&&n(a[0],a[1],u)&&(l=c<3?void 0:l,c=1),o=Object(o);++s<c;){var d=a[s];d&&i(o,d,s,l)}return o})}return Su=r,Su}var Cu,S0;function g3(){if(S0)return Cu;S0=1;var e=h3(),n=p3(),r=n(function(i,o,a){e(i,o,a)});return Cu=r,Cu}var Nu,C0;function Qw(){if(C0)return Nu;C0=1;function e(n,r){return n<r}return Nu=e,Nu}var Eu,N0;function m3(){if(N0)return Eu;N0=1;var e=oh(),n=Qw(),r=xn();function i(o){return o&&o.length?e(o,r,n):void 0}return Eu=i,Eu}var ku,E0;function y3(){if(E0)return ku;E0=1;var e=oh(),n=qt(),r=Qw();function i(o,a){return o&&o.length?e(o,n(a,2),r):void 0}return ku=i,ku}var Ru,k0;function v3(){if(k0)return Ru;k0=1;var e=dt(),n=function(){return e.Date.now()};return Ru=n,Ru}var Au,R0;function x3(){if(R0)return Au;R0=1;var e=yo(),n=Co(),r=vo(),i=tt(),o=Br();function a(s,c,l,u){if(!i(s))return s;c=n(c,s);for(var d=-1,f=c.length,h=f-1,p=s;p!=null&&++d<f;){var y=o(c[d]),x=l;if(y==="__proto__"||y==="constructor"||y==="prototype")return s;if(d!=h){var v=p[y];x=u?u(v,y,p):void 0,x===void 0&&(x=i(v)?v:r(c[d+1])?[]:{})}e(p,y,x),p=p[y]}return s}return Au=a,Au}var ju,A0;function b3(){if(A0)return ju;A0=1;var e=No(),n=x3(),r=Co();function i(o,a,s){for(var c=-1,l=a.length,u={};++c<l;){var d=a[c],f=e(o,d);s(f,d)&&n(u,r(d,o),f)}return u}return ju=i,ju}var Pu,j0;function _3(){if(j0)return Pu;j0=1;var e=b3(),n=Pw();function r(i,o){return e(i,o,function(a,s){return n(i,s)})}return Pu=r,Pu}var Mu,P0;function w3(){if(P0)return Mu;P0=1;var e=Xw(),n=Lw(),r=$w();function i(o){return r(n(o,void 0,e),o+"")}return Mu=i,Mu}var Iu,M0;function S3(){if(M0)return Iu;M0=1;var e=_3(),n=w3(),r=n(function(i,o){return i==null?{}:e(i,o)});return Iu=r,Iu}var Tu,I0;function C3(){if(I0)return Tu;I0=1;var e=Math.ceil,n=Math.max;function r(i,o,a,s){for(var c=-1,l=n(e((o-i)/(a||1)),0),u=Array(l);l--;)u[s?l:++c]=i,i+=a;return u}return Tu=r,Tu}var Ou,T0;function N3(){if(T0)return Ou;T0=1;var e=C3(),n=ko(),r=Yw();function i(o){return function(a,s,c){return c&&typeof c!="number"&&n(a,s,c)&&(s=c=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),c=c===void 0?a<s?1:-1:r(c),e(a,s,c,o)}}return Ou=i,Ou}var qu,O0;function E3(){if(O0)return qu;O0=1;var e=N3(),n=e();return qu=n,qu}var Du,q0;function k3(){if(q0)return Du;q0=1;function e(n,r){var i=n.length;for(n.sort(r);i--;)n[i]=n[i].value;return n}return Du=e,Du}var zu,D0;function R3(){if(D0)return zu;D0=1;var e=Yn();function n(r,i){if(r!==i){var o=r!==void 0,a=r===null,s=r===r,c=e(r),l=i!==void 0,u=i===null,d=i===i,f=e(i);if(!u&&!f&&!c&&r>i||c&&l&&d&&!u&&!f||a&&l&&d||!o&&d||!s)return 1;if(!a&&!c&&!f&&r<i||f&&o&&s&&!a&&!c||u&&o&&s||!l&&s||!d)return-1}return 0}return zu=n,zu}var Lu,z0;function A3(){if(z0)return Lu;z0=1;var e=R3();function n(r,i,o){for(var a=-1,s=r.criteria,c=i.criteria,l=s.length,u=o.length;++a<l;){var d=e(s[a],c[a]);if(d){if(a>=u)return d;var f=o[a];return d*(f=="desc"?-1:1)}}return r.index-i.index}return Lu=n,Lu}var $u,L0;function j3(){if(L0)return $u;L0=1;var e=So(),n=No(),r=qt(),i=qw(),o=k3(),a=xo(),s=A3(),c=xn(),l=je();function u(d,f,h){f.length?f=e(f,function(x){return l(x)?function(v){return n(v,x.length===1?x[0]:x)}:x}):f=[c];var p=-1;f=e(f,a(r));var y=i(d,function(x,v,m){var _=e(f,function(b){return b(x)});return{criteria:_,index:++p,value:x}});return o(y,function(x,v){return s(x,v,h)})}return $u=u,$u}var Fu,$0;function P3(){if($0)return Fu;$0=1;var e=rh(),n=j3(),r=Eo(),i=ko(),o=r(function(a,s){if(a==null)return[];var c=s.length;return c>1&&i(a,s[0],s[1])?s=[]:c>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),n(a,e(s,1),[])});return Fu=o,Fu}var Hu,F0;function M3(){if(F0)return Hu;F0=1;var e=Aw(),n=0;function r(i){var o=++n;return e(i)+o}return Hu=r,Hu}var Bu,H0;function I3(){if(H0)return Bu;H0=1;function e(n,r,i){for(var o=-1,a=n.length,s=r.length,c={};++o<a;){var l=o<s?r[o]:void 0;i(c,n[o],l)}return c}return Bu=e,Bu}var Vu,B0;function T3(){if(B0)return Vu;B0=1;var e=yo(),n=I3();function r(i,o){return n(i||[],o||[],e)}return Vu=r,Vu}var Gu,V0;function Ce(){if(V0)return Gu;V0=1;var e;if(typeof Hd=="function")try{e={cloneDeep:XO(),constant:Jd(),defaults:ZO(),each:ww(),filter:Iw(),find:i3(),flatten:Xw(),forEach:_w(),forIn:o3(),has:Tw(),isUndefined:Ow(),last:a3(),map:Dw(),mapValues:s3(),max:l3(),merge:g3(),min:m3(),minBy:y3(),now:v3(),pick:S3(),range:E3(),reduce:zw(),sortBy:P3(),uniqueId:M3(),values:Bw(),zipObject:T3()}}catch{}return e||(e=window._),Gu=e,Gu}var Uu,G0;function O3(){if(G0)return Uu;G0=1,Uu=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,o=i._prev;if(o!==i)return n(o),o},e.prototype.enqueue=function(i){var o=this._sentinel;i._prev&&i._next&&n(i),i._next=o._next,o._next._prev=i,o._next=i,i._prev=o},e.prototype.toString=function(){for(var i=[],o=this._sentinel,a=o._prev;a!==o;)i.push(JSON.stringify(a,r)),a=a._prev;return"["+i.join(", ")+"]"};function n(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function r(i,o){if(i!=="_next"&&i!=="_prev")return o}return Uu}var Wu,U0;function q3(){if(U0)return Wu;U0=1;var e=Ce(),n=ut().Graph,r=O3();Wu=o;var i=e.constant(1);function o(u,d){if(u.nodeCount()<=1)return[];var f=c(u,d||i),h=a(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(h,function(p){return u.outEdges(p.v,p.w)}),!0)}function a(u,d,f){for(var h=[],p=d[d.length-1],y=d[0],x;u.nodeCount();){for(;x=y.dequeue();)s(u,d,f,x);for(;x=p.dequeue();)s(u,d,f,x);if(u.nodeCount()){for(var v=d.length-2;v>0;--v)if(x=d[v].dequeue(),x){h=h.concat(s(u,d,f,x,!0));break}}}return h}function s(u,d,f,h,p){var y=p?[]:void 0;return e.forEach(u.inEdges(h.v),function(x){var v=u.edge(x),m=u.node(x.v);p&&y.push({v:x.v,w:x.w}),m.out-=v,l(d,f,m)}),e.forEach(u.outEdges(h.v),function(x){var v=u.edge(x),m=x.w,_=u.node(m);_.in-=v,l(d,f,_)}),u.removeNode(h.v),y}function c(u,d){var f=new n,h=0,p=0;e.forEach(u.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),e.forEach(u.edges(),function(v){var m=f.edge(v.v,v.w)||0,_=d(v),b=m+_;f.setEdge(v.v,v.w,b),p=Math.max(p,f.node(v.v).out+=_),h=Math.max(h,f.node(v.w).in+=_)});var y=e.range(p+h+3).map(function(){return new r}),x=h+1;return e.forEach(f.nodes(),function(v){l(y,x,f.node(v))}),{graph:f,buckets:y,zeroIdx:x}}function l(u,d,f){f.out?f.in?u[f.out-f.in+d].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}return Wu}var Ku,W0;function D3(){if(W0)return Ku;W0=1;var e=Ce(),n=q3();Ku={run:r,undo:o};function r(a){var s=a.graph().acyclicer==="greedy"?n(a,c(a)):i(a);e.forEach(s,function(l){var u=a.edge(l);a.removeEdge(l),u.forwardName=l.name,u.reversed=!0,a.setEdge(l.w,l.v,u,e.uniqueId("rev"))});function c(l){return function(u){return l.edge(u).weight}}}function i(a){var s=[],c={},l={};function u(d){e.has(l,d)||(l[d]=!0,c[d]=!0,e.forEach(a.outEdges(d),function(f){e.has(c,f.w)?s.push(f):u(f.w)}),delete c[d])}return e.forEach(a.nodes(),u),s}function o(a){e.forEach(a.edges(),function(s){var c=a.edge(s);if(c.reversed){a.removeEdge(s);var l=c.forwardName;delete c.reversed,delete c.forwardName,a.setEdge(s.w,s.v,c,l)}})}return Ku}var Yu,K0;function Ve(){if(K0)return Yu;K0=1;var e=Ce(),n=ut().Graph;Yu={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:c,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:d,addBorderNode:f,maxRank:h,partition:p,time:y,notime:x};function r(v,m,_,b){var w;do w=e.uniqueId(b);while(v.hasNode(w));return _.dummy=m,v.setNode(w,_),w}function i(v){var m=new n().setGraph(v.graph());return e.forEach(v.nodes(),function(_){m.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){var b=m.edge(_.v,_.w)||{weight:0,minlen:1},w=v.edge(_);m.setEdge(_.v,_.w,{weight:b.weight+w.weight,minlen:Math.max(b.minlen,w.minlen)})}),m}function o(v){var m=new n({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(_){v.children(_).length||m.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){m.setEdge(_,v.edge(_))}),m}function a(v){var m=e.map(v.nodes(),function(_){var b={};return e.forEach(v.outEdges(_),function(w){b[w.w]=(b[w.w]||0)+v.edge(w).weight}),b});return e.zipObject(v.nodes(),m)}function s(v){var m=e.map(v.nodes(),function(_){var b={};return e.forEach(v.inEdges(_),function(w){b[w.v]=(b[w.v]||0)+v.edge(w).weight}),b});return e.zipObject(v.nodes(),m)}function c(v,m){var _=v.x,b=v.y,w=m.x-_,S=m.y-b,C=v.width/2,N=v.height/2;if(!w&&!S)throw new Error("Not possible to find intersection inside of the rectangle");var E,k;return Math.abs(S)*C>Math.abs(w)*N?(S<0&&(N=-N),E=N*w/S,k=N):(w<0&&(C=-C),E=C,k=C*S/w),{x:_+E,y:b+k}}function l(v){var m=e.map(e.range(h(v)+1),function(){return[]});return e.forEach(v.nodes(),function(_){var b=v.node(_),w=b.rank;e.isUndefined(w)||(m[w][b.order]=_)}),m}function u(v){var m=e.min(e.map(v.nodes(),function(_){return v.node(_).rank}));e.forEach(v.nodes(),function(_){var b=v.node(_);e.has(b,"rank")&&(b.rank-=m)})}function d(v){var m=e.min(e.map(v.nodes(),function(S){return v.node(S).rank})),_=[];e.forEach(v.nodes(),function(S){var C=v.node(S).rank-m;_[C]||(_[C]=[]),_[C].push(S)});var b=0,w=v.graph().nodeRankFactor;e.forEach(_,function(S,C){e.isUndefined(S)&&C%w!==0?--b:b&&e.forEach(S,function(N){v.node(N).rank+=b})})}function f(v,m,_,b){var w={width:0,height:0};return arguments.length>=4&&(w.rank=_,w.order=b),r(v,"border",w,m)}function h(v){return e.max(e.map(v.nodes(),function(m){var _=v.node(m).rank;if(!e.isUndefined(_))return _}))}function p(v,m){var _={lhs:[],rhs:[]};return e.forEach(v,function(b){m(b)?_.lhs.push(b):_.rhs.push(b)}),_}function y(v,m){var _=e.now();try{return m()}finally{console.log(v+" time: "+(e.now()-_)+"ms")}}function x(v,m){return m()}return Yu}var Xu,Y0;function z3(){if(Y0)return Xu;Y0=1;var e=Ce(),n=Ve();Xu={run:r,undo:o};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){i(a,s)})}function i(a,s){var c=s.v,l=a.node(c).rank,u=s.w,d=a.node(u).rank,f=s.name,h=a.edge(s),p=h.labelRank;if(d!==l+1){a.removeEdge(s);var y,x,v;for(v=0,++l;l<d;++v,++l)h.points=[],x={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},y=n.addDummyNode(a,"edge",x,"_d"),l===p&&(x.width=h.width,x.height=h.height,x.dummy="edge-label",x.labelpos=h.labelpos),a.setEdge(c,y,{weight:h.weight},f),v===0&&a.graph().dummyChains.push(y),c=y;a.setEdge(c,u,{weight:h.weight},f)}}function o(a){e.forEach(a.graph().dummyChains,function(s){var c=a.node(s),l=c.edgeLabel,u;for(a.setEdge(c.edgeObj,l);c.dummy;)u=a.successors(s)[0],a.removeNode(s),l.points.push({x:c.x,y:c.y}),c.dummy==="edge-label"&&(l.x=c.x,l.y=c.y,l.width=c.width,l.height=c.height),s=u,c=a.node(s)})}return Xu}var Zu,X0;function Ti(){if(X0)return Zu;X0=1;var e=Ce();Zu={longestPath:n,slack:r};function n(i){var o={};function a(s){var c=i.node(s);if(e.has(o,s))return c.rank;o[s]=!0;var l=e.min(e.map(i.outEdges(s),function(u){return a(u.w)-i.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),c.rank=l}e.forEach(i.sources(),a)}function r(i,o){return i.node(o.w).rank-i.node(o.v).rank-i.edge(o).minlen}return Zu}var Ju,Z0;function eS(){if(Z0)return Ju;Z0=1;var e=Ce(),n=ut().Graph,r=Ti().slack;Ju=i;function i(c){var l=new n({directed:!1}),u=c.nodes()[0],d=c.nodeCount();l.setNode(u,{});for(var f,h;o(l,c)<d;)f=a(l,c),h=l.hasNode(f.v)?r(c,f):-r(c,f),s(l,c,h);return l}function o(c,l){function u(d){e.forEach(l.nodeEdges(d),function(f){var h=f.v,p=d===h?f.w:h;!c.hasNode(p)&&!r(l,f)&&(c.setNode(p,{}),c.setEdge(d,p,{}),u(p))})}return e.forEach(c.nodes(),u),c.nodeCount()}function a(c,l){return e.minBy(l.edges(),function(u){if(c.hasNode(u.v)!==c.hasNode(u.w))return r(l,u)})}function s(c,l,u){e.forEach(c.nodes(),function(d){l.node(d).rank+=u})}return Ju}var Qu,J0;function L3(){if(J0)return Qu;J0=1;var e=Ce(),n=eS(),r=Ti().slack,i=Ti().longestPath,o=ut().alg.preorder,a=ut().alg.postorder,s=Ve().simplify;Qu=c,c.initLowLimValues=f,c.initCutValues=l,c.calcCutValue=d,c.leaveEdge=p,c.enterEdge=y,c.exchangeEdges=x;function c(b){b=s(b),i(b);var w=n(b);f(w),l(w,b);for(var S,C;S=p(w);)C=y(w,b,S),x(w,b,S,C)}function l(b,w){var S=a(b,b.nodes());S=S.slice(0,S.length-1),e.forEach(S,function(C){u(b,w,C)})}function u(b,w,S){var C=b.node(S),N=C.parent;b.edge(S,N).cutvalue=d(b,w,S)}function d(b,w,S){var C=b.node(S),N=C.parent,E=!0,k=w.edge(S,N),R=0;return k||(E=!1,k=w.edge(N,S)),R=k.weight,e.forEach(w.nodeEdges(S),function(A){var P=A.v===S,q=P?A.w:A.v;if(q!==N){var M=P===E,T=w.edge(A).weight;if(R+=M?T:-T,m(b,S,q)){var O=b.edge(S,q).cutvalue;R+=M?-O:O}}}),R}function f(b,w){arguments.length<2&&(w=b.nodes()[0]),h(b,{},1,w)}function h(b,w,S,C,N){var E=S,k=b.node(C);return w[C]=!0,e.forEach(b.neighbors(C),function(R){e.has(w,R)||(S=h(b,w,S,R,C))}),k.low=E,k.lim=S++,N?k.parent=N:delete k.parent,S}function p(b){return e.find(b.edges(),function(w){return b.edge(w).cutvalue<0})}function y(b,w,S){var C=S.v,N=S.w;w.hasEdge(C,N)||(C=S.w,N=S.v);var E=b.node(C),k=b.node(N),R=E,A=!1;E.lim>k.lim&&(R=k,A=!0);var P=e.filter(w.edges(),function(q){return A===_(b,b.node(q.v),R)&&A!==_(b,b.node(q.w),R)});return e.minBy(P,function(q){return r(w,q)})}function x(b,w,S,C){var N=S.v,E=S.w;b.removeEdge(N,E),b.setEdge(C.v,C.w,{}),f(b),l(b,w),v(b,w)}function v(b,w){var S=e.find(b.nodes(),function(N){return!w.node(N).parent}),C=o(b,S);C=C.slice(1),e.forEach(C,function(N){var E=b.node(N).parent,k=w.edge(N,E),R=!1;k||(k=w.edge(E,N),R=!0),w.node(N).rank=w.node(E).rank+(R?k.minlen:-k.minlen)})}function m(b,w,S){return b.hasEdge(w,S)}function _(b,w,S){return S.low<=w.lim&&w.lim<=S.lim}return Qu}var ef,Q0;function $3(){if(Q0)return ef;Q0=1;var e=Ti(),n=e.longestPath,r=eS(),i=L3();ef=o;function o(l){switch(l.graph().ranker){case"network-simplex":c(l);break;case"tight-tree":s(l);break;case"longest-path":a(l);break;default:c(l)}}var a=n;function s(l){n(l),r(l)}function c(l){i(l)}return ef}var tf,ex;function F3(){if(ex)return tf;ex=1;var e=Ce();tf=n;function n(o){var a=i(o);e.forEach(o.graph().dummyChains,function(s){for(var c=o.node(s),l=c.edgeObj,u=r(o,a,l.v,l.w),d=u.path,f=u.lca,h=0,p=d[h],y=!0;s!==l.w;){if(c=o.node(s),y){for(;(p=d[h])!==f&&o.node(p).maxRank<c.rank;)h++;p===f&&(y=!1)}if(!y){for(;h<d.length-1&&o.node(p=d[h+1]).minRank<=c.rank;)h++;p=d[h]}o.setParent(s,p),s=o.successors(s)[0]}})}function r(o,a,s,c){var l=[],u=[],d=Math.min(a[s].low,a[c].low),f=Math.max(a[s].lim,a[c].lim),h,p;h=s;do h=o.parent(h),l.push(h);while(h&&(a[h].low>d||f>a[h].lim));for(p=h,h=c;(h=o.parent(h))!==p;)u.push(h);return{path:l.concat(u.reverse()),lca:p}}function i(o){var a={},s=0;function c(l){var u=s;e.forEach(o.children(l),c),a[l]={low:u,lim:s++}}return e.forEach(o.children(),c),a}return tf}var nf,tx;function H3(){if(tx)return nf;tx=1;var e=Ce(),n=Ve();nf={run:r,cleanup:s};function r(c){var l=n.addDummyNode(c,"root",{},"_root"),u=o(c),d=e.max(e.values(u))-1,f=2*d+1;c.graph().nestingRoot=l,e.forEach(c.edges(),function(p){c.edge(p).minlen*=f});var h=a(c)+1;e.forEach(c.children(),function(p){i(c,l,f,h,d,u,p)}),c.graph().nodeRankFactor=f}function i(c,l,u,d,f,h,p){var y=c.children(p);if(!y.length){p!==l&&c.setEdge(l,p,{weight:0,minlen:u});return}var x=n.addBorderNode(c,"_bt"),v=n.addBorderNode(c,"_bb"),m=c.node(p);c.setParent(x,p),m.borderTop=x,c.setParent(v,p),m.borderBottom=v,e.forEach(y,function(_){i(c,l,u,d,f,h,_);var b=c.node(_),w=b.borderTop?b.borderTop:_,S=b.borderBottom?b.borderBottom:_,C=b.borderTop?d:2*d,N=w!==S?1:f-h[p]+1;c.setEdge(x,w,{weight:C,minlen:N,nestingEdge:!0}),c.setEdge(S,v,{weight:C,minlen:N,nestingEdge:!0})}),c.parent(p)||c.setEdge(l,x,{weight:0,minlen:f+h[p]})}function o(c){var l={};function u(d,f){var h=c.children(d);h&&h.length&&e.forEach(h,function(p){u(p,f+1)}),l[d]=f}return e.forEach(c.children(),function(d){u(d,1)}),l}function a(c){return e.reduce(c.edges(),function(l,u){return l+c.edge(u).weight},0)}function s(c){var l=c.graph();c.removeNode(l.nestingRoot),delete l.nestingRoot,e.forEach(c.edges(),function(u){var d=c.edge(u);d.nestingEdge&&c.removeEdge(u)})}return nf}var rf,nx;function B3(){if(nx)return rf;nx=1;var e=Ce(),n=Ve();rf=r;function r(o){function a(s){var c=o.children(s),l=o.node(s);if(c.length&&e.forEach(c,a),e.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,d=l.maxRank+1;u<d;++u)i(o,"borderLeft","_bl",s,l,u),i(o,"borderRight","_br",s,l,u)}}e.forEach(o.children(),a)}function i(o,a,s,c,l,u){var d={width:0,height:0,rank:u,borderType:a},f=l[a][u-1],h=n.addDummyNode(o,"border",d,s);l[a][u]=h,o.setParent(h,c),f&&o.setEdge(f,h,{weight:1})}return rf}var of,rx;function V3(){if(rx)return of;rx=1;var e=Ce();of={adjust:n,undo:r};function n(u){var d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&i(u)}function r(u){var d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&a(u),(d==="lr"||d==="rl")&&(c(u),i(u))}function i(u){e.forEach(u.nodes(),function(d){o(u.node(d))}),e.forEach(u.edges(),function(d){o(u.edge(d))})}function o(u){var d=u.width;u.width=u.height,u.height=d}function a(u){e.forEach(u.nodes(),function(d){s(u.node(d))}),e.forEach(u.edges(),function(d){var f=u.edge(d);e.forEach(f.points,s),e.has(f,"y")&&s(f)})}function s(u){u.y=-u.y}function c(u){e.forEach(u.nodes(),function(d){l(u.node(d))}),e.forEach(u.edges(),function(d){var f=u.edge(d);e.forEach(f.points,l),e.has(f,"x")&&l(f)})}function l(u){var d=u.x;u.x=u.y,u.y=d}return of}var af,ix;function G3(){if(ix)return af;ix=1;var e=Ce();af=n;function n(r){var i={},o=e.filter(r.nodes(),function(u){return!r.children(u).length}),a=e.max(e.map(o,function(u){return r.node(u).rank})),s=e.map(e.range(a+1),function(){return[]});function c(u){if(!e.has(i,u)){i[u]=!0;var d=r.node(u);s[d.rank].push(u),e.forEach(r.successors(u),c)}}var l=e.sortBy(o,function(u){return r.node(u).rank});return e.forEach(l,c),s}return af}var sf,ox;function U3(){if(ox)return sf;ox=1;var e=Ce();sf=n;function n(i,o){for(var a=0,s=1;s<o.length;++s)a+=r(i,o[s-1],o[s]);return a}function r(i,o,a){for(var s=e.zipObject(a,e.map(a,function(h,p){return p})),c=e.flatten(e.map(o,function(h){return e.sortBy(e.map(i.outEdges(h),function(p){return{pos:s[p.w],weight:i.edge(p).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var u=2*l-1;l-=1;var d=e.map(new Array(u),function(){return 0}),f=0;return e.forEach(c.forEach(function(h){var p=h.pos+l;d[p]+=h.weight;for(var y=0;p>0;)p%2&&(y+=d[p+1]),p=p-1>>1,d[p]+=h.weight;f+=h.weight*y})),f}return sf}var cf,ax;function W3(){if(ax)return cf;ax=1;var e=Ce();cf=n;function n(r,i){return e.map(i,function(o){var a=r.inEdges(o);if(a.length){var s=e.reduce(a,function(c,l){var u=r.edge(l),d=r.node(l.v);return{sum:c.sum+u.weight*d.order,weight:c.weight+u.weight}},{sum:0,weight:0});return{v:o,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:o}})}return cf}var lf,sx;function K3(){if(sx)return lf;sx=1;var e=Ce();lf=n;function n(o,a){var s={};e.forEach(o,function(l,u){var d=s[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};e.isUndefined(l.barycenter)||(d.barycenter=l.barycenter,d.weight=l.weight)}),e.forEach(a.edges(),function(l){var u=s[l.v],d=s[l.w];!e.isUndefined(u)&&!e.isUndefined(d)&&(d.indegree++,u.out.push(s[l.w]))});var c=e.filter(s,function(l){return!l.indegree});return r(c)}function r(o){var a=[];function s(u){return function(d){d.merged||(e.isUndefined(d.barycenter)||e.isUndefined(u.barycenter)||d.barycenter>=u.barycenter)&&i(u,d)}}function c(u){return function(d){d.in.push(u),--d.indegree===0&&o.push(d)}}for(;o.length;){var l=o.pop();a.push(l),e.forEach(l.in.reverse(),s(l)),e.forEach(l.out,c(l))}return e.map(e.filter(a,function(u){return!u.merged}),function(u){return e.pick(u,["vs","i","barycenter","weight"])})}function i(o,a){var s=0,c=0;o.weight&&(s+=o.barycenter*o.weight,c+=o.weight),a.weight&&(s+=a.barycenter*a.weight,c+=a.weight),o.vs=a.vs.concat(o.vs),o.barycenter=s/c,o.weight=c,o.i=Math.min(a.i,o.i),a.merged=!0}return lf}var uf,cx;function Y3(){if(cx)return uf;cx=1;var e=Ce(),n=Ve();uf=r;function r(a,s){var c=n.partition(a,function(x){return e.has(x,"barycenter")}),l=c.lhs,u=e.sortBy(c.rhs,function(x){return-x.i}),d=[],f=0,h=0,p=0;l.sort(o(!!s)),p=i(d,u,p),e.forEach(l,function(x){p+=x.vs.length,d.push(x.vs),f+=x.barycenter*x.weight,h+=x.weight,p=i(d,u,p)});var y={vs:e.flatten(d,!0)};return h&&(y.barycenter=f/h,y.weight=h),y}function i(a,s,c){for(var l;s.length&&(l=e.last(s)).i<=c;)s.pop(),a.push(l.vs),c++;return c}function o(a){return function(s,c){return s.barycenter<c.barycenter?-1:s.barycenter>c.barycenter?1:a?c.i-s.i:s.i-c.i}}return uf}var ff,lx;function X3(){if(lx)return ff;lx=1;var e=Ce(),n=W3(),r=K3(),i=Y3();ff=o;function o(c,l,u,d){var f=c.children(l),h=c.node(l),p=h?h.borderLeft:void 0,y=h?h.borderRight:void 0,x={};p&&(f=e.filter(f,function(S){return S!==p&&S!==y}));var v=n(c,f);e.forEach(v,function(S){if(c.children(S.v).length){var C=o(c,S.v,u,d);x[S.v]=C,e.has(C,"barycenter")&&s(S,C)}});var m=r(v,u);a(m,x);var _=i(m,d);if(p&&(_.vs=e.flatten([p,_.vs,y],!0),c.predecessors(p).length)){var b=c.node(c.predecessors(p)[0]),w=c.node(c.predecessors(y)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+b.order+w.order)/(_.weight+2),_.weight+=2}return _}function a(c,l){e.forEach(c,function(u){u.vs=e.flatten(u.vs.map(function(d){return l[d]?l[d].vs:d}),!0)})}function s(c,l){e.isUndefined(c.barycenter)?(c.barycenter=l.barycenter,c.weight=l.weight):(c.barycenter=(c.barycenter*c.weight+l.barycenter*l.weight)/(c.weight+l.weight),c.weight+=l.weight)}return ff}var df,ux;function Z3(){if(ux)return df;ux=1;var e=Ce(),n=ut().Graph;df=r;function r(o,a,s){var c=i(o),l=new n({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(u){return o.node(u)});return e.forEach(o.nodes(),function(u){var d=o.node(u),f=o.parent(u);(d.rank===a||d.minRank<=a&&a<=d.maxRank)&&(l.setNode(u),l.setParent(u,f||c),e.forEach(o[s](u),function(h){var p=h.v===u?h.w:h.v,y=l.edge(p,u),x=e.isUndefined(y)?0:y.weight;l.setEdge(p,u,{weight:o.edge(h).weight+x})}),e.has(d,"minRank")&&l.setNode(u,{borderLeft:d.borderLeft[a],borderRight:d.borderRight[a]}))}),l}function i(o){for(var a;o.hasNode(a=e.uniqueId("_root")););return a}return df}var hf,fx;function J3(){if(fx)return hf;fx=1;var e=Ce();hf=n;function n(r,i,o){var a={},s;e.forEach(o,function(c){for(var l=r.parent(c),u,d;l;){if(u=r.parent(l),u?(d=a[u],a[u]=l):(d=s,s=l),d&&d!==l){i.setEdge(d,l);return}l=u}})}return hf}var pf,dx;function Q3(){if(dx)return pf;dx=1;var e=Ce(),n=G3(),r=U3(),i=X3(),o=Z3(),a=J3(),s=ut().Graph,c=Ve();pf=l;function l(h){var p=c.maxRank(h),y=u(h,e.range(1,p+1),"inEdges"),x=u(h,e.range(p-1,-1,-1),"outEdges"),v=n(h);f(h,v);for(var m=Number.POSITIVE_INFINITY,_,b=0,w=0;w<4;++b,++w){d(b%2?y:x,b%4>=2),v=c.buildLayerMatrix(h);var S=r(h,v);S<m&&(w=0,_=e.cloneDeep(v),m=S)}f(h,_)}function u(h,p,y){return e.map(p,function(x){return o(h,x,y)})}function d(h,p){var y=new s;e.forEach(h,function(x){var v=x.graph().root,m=i(x,v,y,p);e.forEach(m.vs,function(_,b){x.node(_).order=b}),a(x,y,m.vs)})}function f(h,p){e.forEach(p,function(y){e.forEach(y,function(x,v){h.node(x).order=v})})}return pf}var gf,hx;function e5(){if(hx)return gf;hx=1;var e=Ce(),n=ut().Graph,r=Ve();gf={positionX:y,findType1Conflicts:i,findType2Conflicts:o,addConflict:s,hasConflict:c,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:f,balance:p};function i(m,_){var b={};function w(S,C){var N=0,E=0,k=S.length,R=e.last(C);return e.forEach(C,function(A,P){var q=a(m,A),M=q?m.node(q).order:k;(q||A===R)&&(e.forEach(C.slice(E,P+1),function(T){e.forEach(m.predecessors(T),function(O){var H=m.node(O),F=H.order;(F<N||M<F)&&!(H.dummy&&m.node(T).dummy)&&s(b,O,T)})}),E=P+1,N=M)}),C}return e.reduce(_,w),b}function o(m,_){var b={};function w(C,N,E,k,R){var A;e.forEach(e.range(N,E),function(P){A=C[P],m.node(A).dummy&&e.forEach(m.predecessors(A),function(q){var M=m.node(q);M.dummy&&(M.order<k||M.order>R)&&s(b,q,A)})})}function S(C,N){var E=-1,k,R=0;return e.forEach(N,function(A,P){if(m.node(A).dummy==="border"){var q=m.predecessors(A);q.length&&(k=m.node(q[0]).order,w(N,R,P,E,k),R=P,E=k)}w(N,R,N.length,k,C.length)}),N}return e.reduce(_,S),b}function a(m,_){if(m.node(_).dummy)return e.find(m.predecessors(_),function(b){return m.node(b).dummy})}function s(m,_,b){if(_>b){var w=_;_=b,b=w}var S=m[_];S||(m[_]=S={}),S[b]=!0}function c(m,_,b){if(_>b){var w=_;_=b,b=w}return e.has(m[_],b)}function l(m,_,b,w){var S={},C={},N={};return e.forEach(_,function(E){e.forEach(E,function(k,R){S[k]=k,C[k]=k,N[k]=R})}),e.forEach(_,function(E){var k=-1;e.forEach(E,function(R){var A=w(R);if(A.length){A=e.sortBy(A,function(O){return N[O]});for(var P=(A.length-1)/2,q=Math.floor(P),M=Math.ceil(P);q<=M;++q){var T=A[q];C[R]===R&&k<N[T]&&!c(b,R,T)&&(C[T]=R,C[R]=S[R]=S[T],k=N[T])}}})}),{root:S,align:C}}function u(m,_,b,w,S){var C={},N=d(m,_,b,S),E=S?"borderLeft":"borderRight";function k(P,q){for(var M=N.nodes(),T=M.pop(),O={};T;)O[T]?P(T):(O[T]=!0,M.push(T),M=M.concat(q(T))),T=M.pop()}function R(P){C[P]=N.inEdges(P).reduce(function(q,M){return Math.max(q,C[M.v]+N.edge(M))},0)}function A(P){var q=N.outEdges(P).reduce(function(T,O){return Math.min(T,C[O.w]-N.edge(O))},Number.POSITIVE_INFINITY),M=m.node(P);q!==Number.POSITIVE_INFINITY&&M.borderType!==E&&(C[P]=Math.max(C[P],q))}return k(R,N.predecessors.bind(N)),k(A,N.successors.bind(N)),e.forEach(w,function(P){C[P]=C[b[P]]}),C}function d(m,_,b,w){var S=new n,C=m.graph(),N=x(C.nodesep,C.edgesep,w);return e.forEach(_,function(E){var k;e.forEach(E,function(R){var A=b[R];if(S.setNode(A),k){var P=b[k],q=S.edge(P,A);S.setEdge(P,A,Math.max(N(m,R,k),q||0))}k=R})}),S}function f(m,_){return e.minBy(e.values(_),function(b){var w=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;return e.forIn(b,function(C,N){var E=v(m,N)/2;w=Math.max(C+E,w),S=Math.min(C-E,S)}),w-S})}function h(m,_){var b=e.values(_),w=e.min(b),S=e.max(b);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(N){var E=C+N,k=m[E],R;if(k!==_){var A=e.values(k);R=N==="l"?w-e.min(A):S-e.max(A),R&&(m[E]=e.mapValues(k,function(P){return P+R}))}})})}function p(m,_){return e.mapValues(m.ul,function(b,w){if(_)return m[_.toLowerCase()][w];var S=e.sortBy(e.map(m,w));return(S[1]+S[2])/2})}function y(m){var _=r.buildLayerMatrix(m),b=e.merge(i(m,_),o(m,_)),w={},S;e.forEach(["u","d"],function(N){S=N==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(E){E==="r"&&(S=e.map(S,function(P){return e.values(P).reverse()}));var k=(N==="u"?m.predecessors:m.successors).bind(m),R=l(m,S,b,k),A=u(m,S,R.root,R.align,E==="r");E==="r"&&(A=e.mapValues(A,function(P){return-P})),w[N+E]=A})});var C=f(m,w);return h(w,C),p(w,m.graph().align)}function x(m,_,b){return function(w,S,C){var N=w.node(S),E=w.node(C),k=0,R;if(k+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":R=-N.width/2;break;case"r":R=N.width/2;break}if(R&&(k+=b?R:-R),R=0,k+=(N.dummy?_:m)/2,k+=(E.dummy?_:m)/2,k+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":R=E.width/2;break;case"r":R=-E.width/2;break}return R&&(k+=b?R:-R),R=0,k}}function v(m,_){return m.node(_).width}return gf}var mf,px;function t5(){if(px)return mf;px=1;var e=Ce(),n=Ve(),r=e5().positionX;mf=i;function i(a){a=n.asNonCompoundGraph(a),o(a),e.forEach(r(a),function(s,c){a.node(c).x=s})}function o(a){var s=n.buildLayerMatrix(a),c=a.graph().ranksep,l=0;e.forEach(s,function(u){var d=e.max(e.map(u,function(f){return a.node(f).height}));e.forEach(u,function(f){a.node(f).y=l+d/2}),l+=d+c})}return mf}var yf,gx;function n5(){if(gx)return yf;gx=1;var e=Ce(),n=D3(),r=z3(),i=$3(),o=Ve().normalizeRanks,a=F3(),s=Ve().removeEmptyRanks,c=H3(),l=B3(),u=V3(),d=Q3(),f=t5(),h=Ve(),p=ut().Graph;yf=y;function y(I,z){var L=z&&z.debugTiming?h.time:h.notime;L("layout",function(){var B=L("  buildLayoutGraph",function(){return k(I)});L("  runLayout",function(){x(B,L)}),L("  updateInputGraph",function(){v(I,B)})})}function x(I,z){z("    makeSpaceForEdgeLabels",function(){R(I)}),z("    removeSelfEdges",function(){G(I)}),z("    acyclic",function(){n.run(I)}),z("    nestingGraph.run",function(){c.run(I)}),z("    rank",function(){i(h.asNonCompoundGraph(I))}),z("    injectEdgeLabelProxies",function(){A(I)}),z("    removeEmptyRanks",function(){s(I)}),z("    nestingGraph.cleanup",function(){c.cleanup(I)}),z("    normalizeRanks",function(){o(I)}),z("    assignRankMinMax",function(){P(I)}),z("    removeEdgeLabelProxies",function(){q(I)}),z("    normalize.run",function(){r.run(I)}),z("    parentDummyChains",function(){a(I)}),z("    addBorderSegments",function(){l(I)}),z("    order",function(){d(I)}),z("    insertSelfEdges",function(){V(I)}),z("    adjustCoordinateSystem",function(){u.adjust(I)}),z("    position",function(){f(I)}),z("    positionSelfEdges",function(){W(I)}),z("    removeBorderNodes",function(){F(I)}),z("    normalize.undo",function(){r.undo(I)}),z("    fixupEdgeLabelCoords",function(){O(I)}),z("    undoCoordinateSystem",function(){u.undo(I)}),z("    translateGraph",function(){M(I)}),z("    assignNodeIntersects",function(){T(I)}),z("    reversePoints",function(){H(I)}),z("    acyclic.undo",function(){n.undo(I)})}function v(I,z){e.forEach(I.nodes(),function(L){var B=I.node(L),U=z.node(L);B&&(B.x=U.x,B.y=U.y,z.children(L).length&&(B.width=U.width,B.height=U.height))}),e.forEach(I.edges(),function(L){var B=I.edge(L),U=z.edge(L);B.points=U.points,e.has(U,"x")&&(B.x=U.x,B.y=U.y)}),I.graph().width=z.graph().width,I.graph().height=z.graph().height}var m=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],S={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function k(I){var z=new p({multigraph:!0,compound:!0}),L=D(I.graph());return z.setGraph(e.merge({},_,K(L,m),e.pick(L,b))),e.forEach(I.nodes(),function(B){var U=D(I.node(B));z.setNode(B,e.defaults(K(U,w),S)),z.setParent(B,I.parent(B))}),e.forEach(I.edges(),function(B){var U=D(I.edge(B));z.setEdge(B,e.merge({},N,K(U,C),e.pick(U,E)))}),z}function R(I){var z=I.graph();z.ranksep/=2,e.forEach(I.edges(),function(L){var B=I.edge(L);B.minlen*=2,B.labelpos.toLowerCase()!=="c"&&(z.rankdir==="TB"||z.rankdir==="BT"?B.width+=B.labeloffset:B.height+=B.labeloffset)})}function A(I){e.forEach(I.edges(),function(z){var L=I.edge(z);if(L.width&&L.height){var B=I.node(z.v),U=I.node(z.w),Y={rank:(U.rank-B.rank)/2+B.rank,e:z};h.addDummyNode(I,"edge-proxy",Y,"_ep")}})}function P(I){var z=0;e.forEach(I.nodes(),function(L){var B=I.node(L);B.borderTop&&(B.minRank=I.node(B.borderTop).rank,B.maxRank=I.node(B.borderBottom).rank,z=e.max(z,B.maxRank))}),I.graph().maxRank=z}function q(I){e.forEach(I.nodes(),function(z){var L=I.node(z);L.dummy==="edge-proxy"&&(I.edge(L.e).labelRank=L.rank,I.removeNode(z))})}function M(I){var z=Number.POSITIVE_INFINITY,L=0,B=Number.POSITIVE_INFINITY,U=0,Y=I.graph(),Z=Y.marginx||0,ne=Y.marginy||0;function te(J){var ie=J.x,re=J.y,fe=J.width,se=J.height;z=Math.min(z,ie-fe/2),L=Math.max(L,ie+fe/2),B=Math.min(B,re-se/2),U=Math.max(U,re+se/2)}e.forEach(I.nodes(),function(J){te(I.node(J))}),e.forEach(I.edges(),function(J){var ie=I.edge(J);e.has(ie,"x")&&te(ie)}),z-=Z,B-=ne,e.forEach(I.nodes(),function(J){var ie=I.node(J);ie.x-=z,ie.y-=B}),e.forEach(I.edges(),function(J){var ie=I.edge(J);e.forEach(ie.points,function(re){re.x-=z,re.y-=B}),e.has(ie,"x")&&(ie.x-=z),e.has(ie,"y")&&(ie.y-=B)}),Y.width=L-z+Z,Y.height=U-B+ne}function T(I){e.forEach(I.edges(),function(z){var L=I.edge(z),B=I.node(z.v),U=I.node(z.w),Y,Z;L.points?(Y=L.points[0],Z=L.points[L.points.length-1]):(L.points=[],Y=U,Z=B),L.points.unshift(h.intersectRect(B,Y)),L.points.push(h.intersectRect(U,Z))})}function O(I){e.forEach(I.edges(),function(z){var L=I.edge(z);if(e.has(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function H(I){e.forEach(I.edges(),function(z){var L=I.edge(z);L.reversed&&L.points.reverse()})}function F(I){e.forEach(I.nodes(),function(z){if(I.children(z).length){var L=I.node(z),B=I.node(L.borderTop),U=I.node(L.borderBottom),Y=I.node(e.last(L.borderLeft)),Z=I.node(e.last(L.borderRight));L.width=Math.abs(Z.x-Y.x),L.height=Math.abs(U.y-B.y),L.x=Y.x+L.width/2,L.y=B.y+L.height/2}}),e.forEach(I.nodes(),function(z){I.node(z).dummy==="border"&&I.removeNode(z)})}function G(I){e.forEach(I.edges(),function(z){if(z.v===z.w){var L=I.node(z.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:z,label:I.edge(z)}),I.removeEdge(z)}})}function V(I){var z=h.buildLayerMatrix(I);e.forEach(z,function(L){var B=0;e.forEach(L,function(U,Y){var Z=I.node(U);Z.order=Y+B,e.forEach(Z.selfEdges,function(ne){h.addDummyNode(I,"selfedge",{width:ne.label.width,height:ne.label.height,rank:Z.rank,order:Y+ ++B,e:ne.e,label:ne.label},"_se")}),delete Z.selfEdges})})}function W(I){e.forEach(I.nodes(),function(z){var L=I.node(z);if(L.dummy==="selfedge"){var B=I.node(L.e.v),U=B.x+B.width/2,Y=B.y,Z=L.x-U,ne=B.height/2;I.setEdge(L.e,L.label),I.removeNode(z),L.label.points=[{x:U+2*Z/3,y:Y-ne},{x:U+5*Z/6,y:Y-ne},{x:U+Z,y:Y},{x:U+5*Z/6,y:Y+ne},{x:U+2*Z/3,y:Y+ne}],L.label.x=L.x,L.label.y=L.y}})}function K(I,z){return e.mapValues(e.pick(I,z),Number)}function D(I){var z={};return e.forEach(I,function(L,B){z[B.toLowerCase()]=L}),z}return yf}var vf,mx;function r5(){if(mx)return vf;mx=1;var e=Ce(),n=Ve(),r=ut().Graph;vf={debugOrdering:i};function i(o){var a=n.buildLayerMatrix(o),s=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(c){s.setNode(c,{label:c}),s.setParent(c,"layer"+o.node(c).rank)}),e.forEach(o.edges(),function(c){s.setEdge(c.v,c.w,{},c.name)}),e.forEach(a,function(c,l){var u="layer"+l;s.setNode(u,{rank:"same"}),e.reduce(c,function(d,f){return s.setEdge(d,f,{style:"invis"}),f})}),s}return vf}var xf,yx;function i5(){return yx||(yx=1,xf="0.8.5"),xf}var bf,vx;function o5(){return vx||(vx=1,bf={graphlib:ut(),layout:n5(),debug:r5(),util:{time:Ve().time,notime:Ve().notime},version:i5()}),bf}var a5=o5();const xx=hd(a5),s5=/^graph\s+(TD|TB|LR|RL|BT)/i,c5=/^\s*(\w+)\["([^"]+)"\]/,l5=/^\s*(\w+)\(["']?([^)"']+)["']?\)/,u5=/^\s*(\w+)\{["']?([^}"']+)["']?\}/,f5=/^\s*(\w+)\s*-->\s*\|([^|]+)\|\s*(\w+)/,d5=/^\s*(\w+)\s*-->\s*(\w+)/,h5=/^\s*(\w+)\s*-->\s*(\w+)\["([^"]+)"\]/;function p5(e){const n=e.split(`
`).map(c=>c.trim()).filter(Boolean);let r="TB";const i=new Map,o=[];let a=0;for(const c of n){const l=c.match(s5);if(l){const x=l[1].toUpperCase();r=x==="LR"||x==="RL"?"LR":"TB";continue}if(/^(subgraph|end|style|class|classDef|linkStyle)\b/i.test(c))continue;const u=c.match(f5);if(u){const[,x,v,m]=u;i.has(x)||i.set(x,x),i.has(m)||i.set(m,m),o.push({id:`e${a++}`,source:x,target:m,label:v.trim()});continue}const d=c.match(h5);if(d){const[,x,v,m]=d;i.has(x)||i.set(x,x),i.set(v,m),o.push({id:`e${a++}`,source:x,target:v});continue}const f=c.match(d5);if(f){const[,x,v]=f;i.has(x)||i.set(x,x),i.has(v)||i.set(v,v),o.push({id:`e${a++}`,source:x,target:v});continue}const h=c.match(c5);if(h){const[,x,v]=h;i.set(x,v);continue}const p=c.match(l5);if(p){const[,x,v]=p;i.set(x,v);continue}const y=c.match(u5);if(y){const[,x,v]=y;i.set(x,v);continue}}return{nodes:Array.from(i.entries()).map(([c,l])=>({id:c,type:"arcade",position:{x:0,y:0},data:{label:l}})),edges:o,direction:r}}function _f(e,n,r="TB"){const i=[`graph ${r}`];for(const o of e){const a=o.data.label||o.id;i.push(`    ${o.id}["${a}"]`)}i.push("");for(const o of n)o.label?i.push(`    ${o.source} -->|${o.label}| ${o.target}`):i.push(`    ${o.source} --> ${o.target}`);return i.join(`
`)}function wf(e,n,r){const{direction:i,nodeWidth:o=180,nodeHeight:a=50,rankSep:s=80,nodeSep:c=40}=r,l=new xx.graphlib.Graph;l.setDefaultEdgeLabel(()=>({})),l.setGraph({rankdir:i,ranksep:s,nodesep:c});for(const u of e)l.setNode(u.id,{width:o,height:a});for(const u of n)l.setEdge(u.source,u.target);return xx.layout(l),e.map(u=>{const d=l.node(u.id);return{...u,position:{x:d.x-o/2,y:d.y-a/2}}})}const g5=[{id:"basic-concept-map",name:"Concept Map",description:"Central concept with labeled branches",category:"concept-map",mermaid:`graph TD
    A["Central Concept"]
    B["Related Idea 1"]
    C["Related Idea 2"]
    D["Related Idea 3"]
    E["Related Idea 4"]
    A -->|"causes"| B
    A -->|"includes"| C
    A -->|"affects"| D
    B -->|"leads to"| E`},{id:"process-flowchart",name:"Process Flowchart",description:"Linear process with decision point",category:"flowchart",mermaid:`graph TD
    A["Start / Input"]
    B["Step 1"]
    C{"Decision?"}
    D["Path A"]
    E["Path B"]
    F["Outcome"]
    A --> B
    B --> C
    C -->|"Yes"| D
    C -->|"No"| E
    D --> F
    E --> F`},{id:"clinical-decision-tree",name:"Clinical Decision Tree",description:"Presentation to diagnosis reasoning",category:"decision-tree",mermaid:`graph TD
    A["Patient Presentation"]
    B{"Key Finding 1?"}
    C{"Key Finding 2?"}
    D["Differential A"]
    E["Differential B"]
    F["Confirm: Test X"]
    G["Confirm: Test Y"]
    A --> B
    B -->|"Present"| D
    B -->|"Absent"| C
    C -->|"Positive"| E
    C -->|"Negative"| D
    D --> F
    E --> G`},{id:"physiological-pathway",name:"Physiological Pathway",description:"Stimulus to response cascade",category:"pathway",mermaid:`graph TD
    A["Stimulus"]
    B["Receptor / Sensor"]
    C["Signal Transduction"]
    D["Effector Response"]
    E["Outcome / Adaptation"]
    F["Feedback Loop"]
    A --> B
    B --> C
    C --> D
    D --> E
    E -->|"negative feedback"| A
    E -->|"modulates"| F
    F --> B`},{id:"compare-contrast",name:"Compare & Contrast",description:"Two concepts with shared and unique features",category:"compare",mermaid:`graph LR
    A["Concept A"]
    B["Shared Feature 1"]
    C["Shared Feature 2"]
    D["Concept B"]
    E["Unique to A"]
    F["Unique to B"]
    A --> B
    D --> B
    A --> C
    D --> C
    A --> E
    D --> F`}],Jf=[{name:"Default",border:"border-secondary",bg:"bg-black/80",text:"text-secondary-foreground",hex:""},{name:"Red",border:"border-red-500",bg:"bg-red-500/10",text:"text-red-400",hex:"#ef4444"},{name:"Blue",border:"border-blue-500",bg:"bg-blue-500/10",text:"text-blue-400",hex:"#3b82f6"},{name:"Green",border:"border-green-500",bg:"bg-green-500/10",text:"text-green-400",hex:"#22c55e"},{name:"Yellow",border:"border-yellow-500",bg:"bg-yellow-500/10",text:"text-yellow-400",hex:"#eab308"},{name:"Purple",border:"border-purple-500",bg:"bg-purple-500/10",text:"text-purple-400",hex:"#a855f7"},{name:"Cyan",border:"border-cyan-400",bg:"bg-cyan-400/10",text:"text-cyan-400",hex:"#22d3ee"},{name:"Orange",border:"border-orange-500",bg:"bg-orange-500/10",text:"text-orange-400",hex:"#f97316"},{name:"Pink",border:"border-pink-500",bg:"bg-pink-500/10",text:"text-pink-400",hex:"#ec4899"}],m5=[{name:"Primary",stroke:"hsl(var(--primary))"},{name:"Red",stroke:"#ef4444"},{name:"Blue",stroke:"#3b82f6"},{name:"Green",stroke:"#22c55e"},{name:"Yellow",stroke:"#eab308"},{name:"Purple",stroke:"#a855f7"},{name:"Cyan",stroke:"#22d3ee"},{name:"Orange",stroke:"#f97316"},{name:"Pink",stroke:"#ec4899"}];function y5({data:e,selected:n}){const r=e.label,i=e.colorIdx||0,o=Jf[i]||Jf[0];return g.jsxs("div",{className:Ye("px-3 py-2 font-terminal text-xs border-2 rounded-none min-w-[100px] text-center",n?"border-primary text-primary ring-1 ring-primary":`${o.border} ${o.text}`,o.bg),children:[g.jsx(Vt,{type:"target",position:oe.Top,className:"!bg-primary !border-primary !w-2 !h-2"}),g.jsx(Vt,{type:"target",position:oe.Left,className:"!bg-primary !border-primary !w-2 !h-2"}),r,g.jsx(Vt,{type:"source",position:oe.Bottom,className:"!bg-primary !border-primary !w-2 !h-2"}),g.jsx(Vt,{type:"source",position:oe.Right,className:"!bg-primary !border-primary !w-2 !h-2"})]})}const v5={arcade:y5},x5={type:"smoothstep",style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:Ln.ArrowClosed,color:"hsl(var(--primary))"}};function b5({initialMermaid:e,onSave:n,className:r}){const[i,o,a]=SM([]),[s,c,l]=CM([]),[u,d]=j.useState("TB"),[f,h]=j.useState(!e&&i.length===0),[p,y]=j.useState(e||""),[x,v]=j.useState(0),[m,_]=j.useState(!1),[b,w]=j.useState(null),S=j.useRef(null),{toast:C}=Bi();j.useEffect(()=>{if(!m)return;const V=W=>{W.key==="Escape"&&_(!1)};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[m]);const N=j.useCallback(V=>{c(W=>J_(V,W))},[c]),E=j.useCallback(V=>{if(!V.trim())return;const W=p5(V);d(W.direction);const K=wf(W.nodes,W.edges,{direction:W.direction});o(K),c(W.edges),v(W.nodes.length),h(!1)},[o,c]),k=j.useCallback(()=>{const V=wf(i,s,{direction:u});o(V)},[i,s,u,o]),R=j.useCallback(()=>{const V=u==="TB"?"LR":"TB";d(V);const W=wf(i,s,{direction:V});o(W)},[u,i,s,o]),A=j.useCallback(()=>{const V=`N${x+1}`;v(K=>K+1);const W={id:V,type:"arcade",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{label:`New Node ${x+1}`,colorIdx:0}};o(K=>[...K,W])},[x,o]),P=j.useCallback(()=>{o(V=>V.filter(W=>!W.selected)),c(V=>V.filter(W=>!W.selected))},[o,c]),q=j.useCallback(V=>{o(W=>W.map(K=>K.selected?{...K,data:{...K.data,colorIdx:V}}:K)),w(null)},[o]),M=j.useCallback(V=>{c(W=>W.map(K=>K.selected?{...K,style:{...K.style,stroke:V,strokeWidth:2},markerEnd:{type:Ln.ArrowClosed,color:V}}:K)),w(null)},[c]),T=j.useCallback(async()=>{if(S.current)try{const V=S.current.querySelector(".react-flow__viewport");if(!V)return;const W=await tw(V,{backgroundColor:"#000",quality:1}),K=document.createElement("a");K.download="concept-map.png",K.href=W,K.click(),C({title:"PNG exported"})}catch(V){C({title:"Export failed",description:String(V),variant:"destructive"})}},[C]),O=j.useCallback(()=>{const V=_f(i,s,u);navigator.clipboard.writeText(V),C({title:"Mermaid copied to clipboard"})},[i,s,u,C]),H=j.useCallback(async()=>{const V=_f(i,s,u),W=(i[0]?.data?.label||"Untitled").replace(/[/\\?%*:|"<>]/g,"-"),K=`---
type: concept-map
created: ${new Date().toISOString()}
---

# ${W} Concept Map

\`\`\`mermaid
${V}
\`\`\`
`,D=`Concept Maps/${W}.md`;try{await he.obsidian.saveFile(D,K),C({title:"Saved to vault",description:D}),n?.(V)}catch(I){C({title:"Save failed",description:String(I),variant:"destructive"})}},[i,s,u,C,n]),F=j.useCallback(()=>{h(!0),y(i.length>0?_f(i,s,u):"")},[i,s,u]);return f&&i.length===0?g.jsxs("div",{className:Ye("flex flex-col items-center h-full p-4 gap-3 overflow-auto",r),children:[g.jsx("p",{className:"font-arcade text-[10px] text-primary",children:"CONCEPT MAP EDITOR"}),g.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground",children:"START FROM TEMPLATE"}),g.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-md",children:g5.map(V=>g.jsxs("button",{onClick:()=>E(V.mermaid),className:"border-2 border-secondary/50 hover:border-primary p-3 cursor-pointer text-left transition-colors bg-black/40",children:[g.jsx("p",{className:"font-terminal text-[10px] text-primary",children:V.name}),g.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground mt-0.5",children:V.description})]},V.id))}),g.jsx("div",{className:"w-px h-2"}),g.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground",children:"OR PASTE MERMAID CODE"}),g.jsx(If,{value:p,onChange:V=>y(V.target.value),placeholder:`graph TD
    A["Main Topic"]
    B["Subtopic 1"]
    C["Subtopic 2"]
    A --> B
    A --> C`,className:"w-full max-w-md h-32 font-mono text-xs rounded-none border-secondary bg-black/60"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(ue,{size:"sm",className:"font-terminal text-xs rounded-none",onClick:()=>E(p),disabled:!p.trim(),children:[g.jsx(Nh,{className:"w-3 h-3 mr-1"}),"Import"]}),g.jsxs(ue,{size:"sm",variant:"outline",className:"font-terminal text-xs rounded-none",onClick:()=>{h(!1),A()},children:[g.jsx(xi,{className:"w-3 h-3 mr-1"}),"Blank Canvas"]})]})]}):g.jsxs("div",{className:Ye("flex flex-col",m?"fixed inset-0 z-[100010] bg-black":"h-full",r),children:[g.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:F,title:"Back to import",children:g.jsx(v2,{className:"w-3 h-3"})}),g.jsx("div",{className:"w-px h-4 bg-secondary/30"}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:A,title:"Add node",children:g.jsx(xi,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:P,title:"Delete selected",children:g.jsx(vr,{className:"w-3 h-3"})}),g.jsxs("div",{className:"relative",children:[g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>w(b?null:"node"),title:"Color selected",children:g.jsx(H2,{className:"w-3 h-3"})}),b&&g.jsxs("div",{className:"absolute top-full left-0 mt-1 p-2 bg-black border-2 border-primary/50 z-50 space-y-2 min-w-[160px]",children:[g.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground",children:"NODE COLORS"}),g.jsx("div",{className:"flex flex-wrap gap-1",children:Jf.map((V,W)=>g.jsx("button",{onClick:()=>q(W),className:Ye("w-5 h-5 border-2 rounded-none",V.border,V.bg),title:V.name},V.name))}),g.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground pt-1",children:"EDGE COLORS"}),g.jsx("div",{className:"flex flex-wrap gap-1",children:m5.map(V=>g.jsx("button",{onClick:()=>M(V.stroke),className:"w-5 h-5 border-2 border-secondary/50 rounded-none",style:{backgroundColor:V.stroke},title:V.name},V.name))})]})]}),g.jsx("div",{className:"w-px h-4 bg-secondary/30"}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:k,title:"Auto layout",children:g.jsx(O2,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:R,title:`Direction: ${u}`,children:u==="TB"?g.jsx(b2,{className:"w-3 h-3"}):g.jsx(m2,{className:"w-3 h-3"})}),g.jsx("div",{className:"w-px h-4 bg-secondary/30"}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:O,title:"Copy Mermaid",children:g.jsx(Gi,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:T,title:"Export PNG",children:g.jsx(Ui,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:H,title:"Save to vault",children:g.jsx(Vi,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>_(!m),title:m?"Exit fullscreen":"Fullscreen",children:m?g.jsx(Sb,{className:"w-3 h-3"}):g.jsx(wb,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>{h(!0),o([]),c([])},title:"Import Mermaid",children:g.jsx(Nh,{className:"w-3 h-3"})}),g.jsxs("span",{className:"ml-auto text-[9px] font-terminal text-muted-foreground",children:[i.length,"N / ",s.length,"E"]})]}),g.jsx("div",{className:"flex-1 min-h-0",ref:S,children:g.jsxs(wM,{nodes:i,edges:s,onNodesChange:a,onEdgesChange:l,onConnect:N,nodeTypes:v5,defaultEdgeOptions:x5,fitView:!0,className:"bg-black/80",proOptions:{hideAttribution:!0},onPaneClick:()=>w(null),children:[g.jsx(AM,{color:"hsl(var(--primary) / 0.1)",gap:20}),g.jsx(qM,{className:"!bg-black !border-primary [&_button]:!bg-black/80 [&_button]:!border-primary/50 [&_button]:!text-primary"}),g.jsx(YM,{className:"!bg-black/80 !border-primary",nodeColor:"hsl(var(--primary))",maskColor:"rgba(0,0,0,0.5)"})]})})]})}const Sf={title:"Untitled Comparison",columns:["Concept A","Concept B"],rows:[{feature:"Feature 1",values:["",""],isKey:!1},{feature:"Feature 2",values:["",""],isKey:!1},{feature:"Feature 3",values:["",""],isKey:!1}]};function bx(e){const n=`| Feature | ${e.columns.join(" | ")} |`,r=`|${"----|".repeat(e.columns.length+1)}`,i=e.rows.map(o=>`| ${o.isKey?`**${o.feature}**`:o.feature} | ${o.values.join(" | ")} |`);return[n,r,...i].join(`
`)}function _5({className:e}){const[n,r]=j.useState(()=>({...Sf,columns:[...Sf.columns],rows:Sf.rows.map(m=>({...m,values:[...m.values]}))})),i=j.useRef(null),{toast:o}=Bi(),a=j.useCallback(m=>{r(_=>({..._,title:m}))},[]),s=j.useCallback((m,_)=>{r(b=>{const w=[...b.columns];return w[m]=_,{...b,columns:w}})},[]),c=j.useCallback((m,_)=>{r(b=>{const w=b.rows.map((S,C)=>C===m?{...S,feature:_}:S);return{...b,rows:w}})},[]),l=j.useCallback((m,_,b)=>{r(w=>{const S=w.rows.map((C,N)=>{if(N!==m)return C;const E=[...C.values];return E[_]=b,{...C,values:E}});return{...w,rows:S}})},[]),u=j.useCallback(m=>{r(_=>{const b=_.rows.map((w,S)=>S===m?{...w,isKey:!w.isKey}:w);return{..._,rows:b}})},[]),d=j.useCallback(()=>{r(m=>{if(m.columns.length>=4)return m;const _=[...m.columns,`Concept ${m.columns.length+1}`],b=m.rows.map(w=>({...w,values:[...w.values,""]}));return{...m,columns:_,rows:b}})},[]),f=j.useCallback(m=>{r(_=>{if(_.columns.length<=2)return _;const b=_.columns.filter((S,C)=>C!==m),w=_.rows.map(S=>({...S,values:S.values.filter((C,N)=>N!==m)}));return{..._,columns:b,rows:w}})},[]),h=j.useCallback(()=>{r(m=>({...m,rows:[...m.rows,{feature:`Feature ${m.rows.length+1}`,values:m.columns.map(()=>""),isKey:!1}]}))},[]),p=j.useCallback(m=>{r(_=>_.rows.length<=1?_:{..._,rows:_.rows.filter((b,w)=>w!==m)})},[]),y=j.useCallback(()=>{const m=bx(n);navigator.clipboard.writeText(m),o({title:"Markdown copied to clipboard"})},[n,o]),x=j.useCallback(async()=>{if(i.current)try{const m=await tw(i.current,{backgroundColor:"#000",quality:1}),_=document.createElement("a");_.download=`${n.title.replace(/[/\\?%*:|"<>]/g,"-")}.png`,_.href=m,_.click(),o({title:"PNG exported"})}catch(m){o({title:"Export failed",description:String(m),variant:"destructive"})}},[n.title,o]),v=j.useCallback(async()=>{const m=bx(n),_=n.title.replace(/[/\\?%*:|"<>]/g,"-"),b=`---
type: comparison-table
created: ${new Date().toISOString()}
---

# ${n.title}

${m}
`,w=`Comparison Tables/${_}.md`;try{await he.obsidian.saveFile(w,b),o({title:"Saved to vault",description:w})}catch(S){o({title:"Save failed",description:String(S),variant:"destructive"})}},[n,o]);return g.jsxs("div",{className:Ye("flex flex-col h-full",e),children:[g.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[g.jsxs(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:d,disabled:n.columns.length>=4,title:"Add column",children:[g.jsx(N2,{className:"w-3 h-3"}),g.jsx(xi,{className:"w-2 h-2"})]}),g.jsxs(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:h,title:"Add row",children:[g.jsx(V2,{className:"w-3 h-3"}),g.jsx(xi,{className:"w-2 h-2"})]}),g.jsx("div",{className:"w-px h-4 bg-secondary/30"}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:y,title:"Copy markdown",children:g.jsx(e2,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:x,title:"Export PNG",children:g.jsx(Ui,{className:"w-3 h-3"})}),g.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:v,title:"Save to vault",children:g.jsx(Vi,{className:"w-3 h-3"})}),g.jsxs("span",{className:"ml-auto text-[9px] font-terminal text-muted-foreground",children:[n.columns.length,"C / ",n.rows.length,"R"]})]}),g.jsx("div",{className:"px-2 py-1 border-b border-secondary/20",children:g.jsx(Rn,{value:n.title,onChange:m=>a(m.target.value),className:"h-6 text-xs font-arcade bg-transparent border-none px-1 text-primary focus-visible:ring-0",placeholder:"Table title..."})}),g.jsx("div",{className:"flex-1 overflow-auto p-2",children:g.jsxs("div",{ref:i,className:"bg-black/80 border-2 border-primary/50",children:[g.jsxs("div",{className:"flex border-b-2 border-primary/50",children:[g.jsx("div",{className:"w-28 shrink-0 p-1 border-r border-secondary/30 bg-black/60",children:g.jsx("span",{className:"font-arcade text-[9px] text-muted-foreground",children:"FEATURE"})}),n.columns.map((m,_)=>g.jsxs("div",{className:"flex-1 min-w-[100px] p-1 border-r border-secondary/30 bg-black/60 flex items-center gap-1",children:[g.jsx(Rn,{value:m,onChange:b=>s(_,b.target.value),className:"h-5 text-[10px] font-arcade bg-transparent border-none px-0 text-primary focus-visible:ring-0 flex-1"}),n.columns.length>2&&g.jsx("button",{onClick:()=>f(_),className:"text-muted-foreground hover:text-destructive shrink-0",children:g.jsx(vr,{className:"w-2.5 h-2.5"})})]},_))]}),n.rows.map((m,_)=>g.jsxs("div",{className:Ye("flex border-b border-secondary/20",m.isKey&&"border-l-2 border-l-primary"),children:[g.jsxs("div",{className:"w-28 shrink-0 p-1 border-r border-secondary/30 flex items-center gap-1",children:[g.jsx("button",{onClick:()=>u(_),className:Ye("shrink-0",m.isKey?"text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),title:"Toggle key feature",children:g.jsx(ZC,{className:"w-2.5 h-2.5",fill:m.isKey?"currentColor":"none"})}),g.jsx(Rn,{value:m.feature,onChange:b=>c(_,b.target.value),className:Ye("h-5 text-[10px] font-terminal bg-transparent border-none px-0 focus-visible:ring-0 flex-1",m.isKey?"text-primary font-bold":"text-secondary-foreground")}),n.rows.length>1&&g.jsx("button",{onClick:()=>p(_),className:"text-muted-foreground hover:text-destructive shrink-0",children:g.jsx(vr,{className:"w-2.5 h-2.5"})})]}),m.values.map((b,w)=>g.jsx("div",{className:"flex-1 min-w-[100px] p-1 border-r border-secondary/30",children:g.jsx(Rn,{value:b,onChange:S=>l(_,w,S.target.value),className:"h-5 text-[10px] font-terminal bg-transparent border-none px-0 text-secondary-foreground focus-visible:ring-0",placeholder:"..."})},w))]},_))]})})]})}function _x({workspace:e}){return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsxs("div",{className:"flex items-center gap-0 border-b border-primary/40 bg-black/40 shrink-0",children:[g.jsxs("button",{onClick:()=>e.setRightMode("map"),className:`flex items-center gap-1 px-3 py-1.5 font-arcade text-[10px] transition-colors ${e.rightMode==="map"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(D2,{className:"w-3 h-3"}),"MAP"]}),g.jsxs("button",{onClick:()=>e.setRightMode("table"),className:`flex items-center gap-1 px-3 py-1.5 font-arcade text-[10px] transition-colors ${e.rightMode==="table"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(U2,{className:"w-3 h-3"}),"TABLE"]}),g.jsxs("button",{onClick:()=>e.setRightMode("anki"),className:`flex items-center gap-1 px-3 py-1.5 font-arcade text-[10px] transition-colors ${e.rightMode==="anki"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[g.jsx(On,{className:"w-3 h-3"}),"ANKI",e.pendingDrafts.length>0&&g.jsx("span",{className:"ml-1 px-1 py-0 text-[8px] bg-secondary text-black font-arcade",children:e.pendingDrafts.length})]})]}),g.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:e.rightMode==="map"?g.jsx(b5,{}):e.rightMode==="table"?g.jsx(_5,{}):g.jsx(KN,{totalCards:e.metrics?.totalCards||0,compact:!0})})]})}function w5(){const[e,n]=j.useState(""),[r,i]=j.useState(null),[o,a]=j.useState("auto"),[s,c]=j.useState([]),l=Hi(),{toast:u}=Bi(),{data:d=[]}=Me({queryKey:["sessions"],queryFn:he.sessions.getAll}),f=d.slice().sort((x,v)=>{const m=x.date||x.createdAt||"";return(v.date||v.createdAt||"").localeCompare(m)}).slice(0,20),h=At({mutationFn:()=>he.planner.generate(),onSuccess:x=>{u({title:"Planner tasks generated",description:`${x.tasks_created} review tasks created`}),l.invalidateQueries({queryKey:["planner","queue"]})},onError:x=>{u({title:"Failed to generate tasks",description:x.message,variant:"destructive"})}}),p=At({mutationFn:async()=>{if(!r)throw new Error("Select a session first");let x;try{x=JSON.parse(e)}catch{throw new Error("Invalid JSON  check syntax")}let v=o;if(v==="auto"){const b=Object.keys(x),w=["source_lock","plan_of_attack","frameworks_used","buckets","confusables_interleaved","anki_cards","glossary","exit_ticket_blurt","exit_ticket_muddiest","exit_ticket_next_action","retrospective_status","spaced_reviews","next_session","errors_by_type","errors_by_severity","error_patterns","spacing_algorithm","rsr_adaptive_adjustment","adaptive_multipliers"];v=b.some(S=>w.includes(S))?"enhanced":"tracker"}const m=v==="tracker"?x:void 0,_=v==="enhanced"?x:void 0;return he.brain.ingestSessionJson(r,m,_)},onSuccess:x=>{u({title:"JSON ingested",description:`${x.fields_updated} fields updated on session #${x.session_id}`}),l.invalidateQueries({queryKey:["sessions"]}),l.invalidateQueries({queryKey:["brain","metrics"]}),u({title:"Next step: Generate planner tasks?",description:"Create review tasks from weak anchors",duration:1e4,action:g.jsx(ue,{size:"sm",onClick:()=>h.mutate(),disabled:h.isPending,className:"bg-primary text-black hover:bg-primary/80",children:h.isPending?"Generating...":"Generate Now"})}),n(""),c([])},onError:x=>{u({title:"Ingestion failed",description:x.message,variant:"destructive"})}});function y(){const x=[];if(r||x.push("Select a session"),!e.trim())x.push("Paste JSON first");else try{const v=JSON.parse(e);(typeof v!="object"||Array.isArray(v))&&x.push("JSON must be an object, not array"),v.schema_version&&v.schema_version!=="9.4"&&x.push(`Expected schema_version 9.4, got ${v.schema_version}`)}catch{x.push("Invalid JSON syntax")}return c(x),x.length===0}return g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 bg-primary inline-block"}),"SESSION_JSON_INGEST"]})}),g.jsxs(rn,{className:"p-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"TARGET SESSION"}),g.jsxs("select",{value:r??"",onChange:x=>i(x.target.value?Number(x.target.value):null),className:"w-full bg-black border border-primary/50 text-white font-terminal text-xs p-2 rounded-none focus:border-primary outline-none",children:[g.jsx("option",{value:"",children:"-- select session --"}),f.map(x=>g.jsxs("option",{value:x.id,children:["#",x.id," | ",x.date?.slice(0,10)||"?"," | ",x.topic||x.mainTopic||"Untitled"," | ",x.mode||"?"]},x.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"JSON TYPE"}),g.jsx("div",{className:"flex gap-2",children:["auto","tracker","enhanced"].map(x=>g.jsx("button",{onClick:()=>a(x),className:`px-3 py-1 font-arcade text-xs rounded-none border ${o===x?"bg-primary text-black border-primary":"border-primary/30 text-muted-foreground hover:text-white"}`,children:x.toUpperCase()},x))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"PASTE TRACKER OR ENHANCED JSON"}),g.jsx("textarea",{value:e,onChange:x=>n(x.target.value),placeholder:'{"schema_version": "9.4", "topic": "...", "mode": "Core", ...}',rows:10,className:"w-full bg-black border border-primary/50 text-green-400 font-terminal text-xs p-2 rounded-none focus:border-primary outline-none resize-y"})]}),s.length>0&&g.jsx("div",{className:"border border-red-500/50 bg-red-500/10 p-2 font-terminal text-xs text-red-400 space-y-1",children:s.map((x,v)=>g.jsxs("div",{children:["- ",x]},v))}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{y()&&p.mutate()},disabled:p.isPending,className:"px-4 py-2 bg-primary text-black font-arcade text-xs rounded-none hover:bg-primary/80 disabled:opacity-50",children:p.isPending?"INGESTING...":"INGEST"}),g.jsx("button",{onClick:y,className:"px-4 py-2 border border-primary/50 text-primary font-arcade text-xs rounded-none hover:bg-primary/10",children:"VALIDATE"}),g.jsx("button",{onClick:()=>{n(""),c([])},className:"px-4 py-2 border border-primary/30 text-muted-foreground font-arcade text-xs rounded-none hover:text-white",children:"CLEAR"})]})]})]})}const S5=`You are extracting a course schedule for ingestion.

Return ONLY a valid JSON object with NO additional text, NO markdown code blocks, NO explanation.

Structure:
{
  "name": "Course Name (e.g. Anatomy & Physiology II)",
  "term": {
    "startDate": "2026-01-05",
    "endDate": "2026-04-24",
    "timezone": "America/Chicago"
  },
  "events": [
    {
      "type": "class" | "lecture" | "reading" | "topic" | "assignment" | "quiz" | "exam" | "assessment",
      "title": "string",
      "date": "YYYY-MM-DD",
      "dueDate": "YYYY-MM-DD | null",
      "startTime": "HH:MM | null",
      "endTime": "HH:MM | null",
      "daysOfWeek": ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],
      "delivery": "in_person" | "virtual_sync" | "virtual_async" | "hybrid",
      "assessmentType": "EA | null",
      "moduleName": "Module 1: ... | null",
      "notes": "string | null"
    }
  ]
}

Rules:
1. Include ALL schedule items: class meetings, assignments, quizzes, exams, readings, virtual activities, and learning assessments (EA).
2. For repeating class meetings, set daysOfWeek + startTime/endTime, and include term start/end.
3. For one-off items, set date or dueDate.
4. Do NOT include a "modules" array  schedule only.
5. Return ONLY the JSON object, nothing else.

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,C5=`You are extracting course module structure for ingestion.

Return ONLY a valid JSON object with NO additional text, NO markdown code blocks, NO explanation.

Structure:
{
  "modules": [
    {
      "name": "Module 1: Topic Name",
      "orderIndex": 1,
      "topics": ["Topic A", "Topic B"],
      "readings": ["Chapter 1", "Article X"],
      "assessments": ["Quiz 1", "Exam 1"]
    }
  ]
}

Rules:
1. Include ALL modules/units with their topics, readings, and assessments.
2. orderIndex should be sequential starting at 1.
3. Do NOT include dates or events  structure only.
4. Return ONLY the JSON object, nothing else.

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,N5=`I need you to extract learning objectives from my course material.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "loCode": "string",
  "title": "string"
}

Rules:
1. loCode: Preserve original numbering if present, or create sequential "1", "2", "3"...
2. title: Keep the objective text exactly as written
3. Return ONLY the JSON array, nothing else

Here are my learning objectives:

[PASTE YOUR LOs BELOW]`,E5=`I need you to convert my study session notes into WRAP format.

WRAP format has 4 sections:

Section A: Obsidian Notes
- Main concepts and insights from the session
- Key points to remember

Section B: Anki Cards
- Format: "front: [question]" on one line, "back: [answer]" on next line
- Create cards for important facts and concepts

Section C: Spaced Schedule
- R1=tomorrow
- R2=3d
- R3=1w
- R4=2w

Section D: JSON Logs
\`\`\`json
{
  "merged": {
    "topic": "[main topic]",
    "mode": "Core",
    "duration_minutes": [number],
    "understanding": [1-5],
    "retention": [1-5]
  }
}
\`\`\`

Return ONLY the WRAP formatted content, NO additional text or explanation.

Here are my study notes:

[PASTE YOUR NOTES BELOW]`;function k5(){const e=Hi(),[n,r]=j.useState(null),[i,o]=j.useState(null),[a,s]=j.useState("schedule"),[c,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(""),[p,y]=j.useState(""),[x,v]=j.useState(null),[m,_]=j.useState(null),[b,w]=j.useState(null),[S,C]=j.useState(null),[N,E]=j.useState(null),[k,R]=j.useState(null),{data:A=[]}=Me({queryKey:["courses"],queryFn:()=>he.courses.getActive()}),{data:P=[]}=Me({queryKey:["modules",n],queryFn:()=>n?he.modules.getByCourse(n):Promise.resolve([]),enabled:!!n}),{data:q=[]}=Me({queryKey:["learningObjectives",n],queryFn:()=>n?he.learningObjectives.getByCourse(n):Promise.resolve([]),enabled:!!n}),M=D=>{const I=D.trim();if(!I)return"";const z=I.match(/```json\s*([\s\S]*?)```/i)||I.match(/```\s*([\s\S]*?)```/i),L=z?z[1].trim():I,B=L.indexOf("["),U=L.lastIndexOf("]"),Y=L.indexOf("{"),Z=L.lastIndexOf("}");return B!==-1&&U!==-1&&U>B&&(Y===-1||B<Y)?L.slice(B,U+1).trim():Y!==-1&&Z!==-1&&Z>Y?L.slice(Y,Z+1).trim():L},T=D=>{navigator.clipboard.writeText(D)},O=At({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const z={...JSON.parse(M(D)),modules:[]};return he.syllabus.importBulk(n,z)},onSuccess:D=>{e.invalidateQueries({queryKey:["scheduleEvents"]}),l(""),E(null),w({type:"success",message:`Imported: ${D.eventsCreated} events (${D.classMeetingsExpanded} class meetings expanded)`}),v(null)},onError:D=>{w({type:"error",message:D.message||"Failed to import schedule"})}}),H=At({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const I=JSON.parse(M(D)),z=I.modules||I;return he.modules.createBulk(n,z)},onSuccess:()=>{e.invalidateQueries({queryKey:["modules"]}),d(""),R(null),C({type:"success",message:"Modules imported successfully"}),v(null)},onError:D=>{C({type:"error",message:D.message||"Failed to import modules"})}}),F=At({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const I=JSON.parse(M(D));return he.learningObjectives.createBulk(n,i,I)},onSuccess:()=>{e.invalidateQueries({queryKey:["learningObjectives"]}),h(""),v(null)},onError:D=>{v(D.message||"Failed to import LOs")}}),G=D=>{const I=[];try{const z=M(D);if(!z){E({isValid:!1,errors:["No JSON found"]});return}const L=JSON.parse(z);(!L||typeof L!="object")&&I.push("JSON must be an object"),(!L.name||typeof L.name!="string")&&I.push("Missing 'name' field"),!L.term||typeof L.term!="object"?I.push("Missing 'term' object"):(L.term.startDate||I.push("term.startDate is required"),L.term.endDate||I.push("term.endDate is required")),Array.isArray(L.events)||I.push("Missing 'events' array"),I.length===0?E({isValid:!0,errors:[],preview:{courseName:L.name,eventCount:L.events.length,startDate:L.term?.startDate,endDate:L.term?.endDate}}):E({isValid:!1,errors:I})}catch(z){E({isValid:!1,errors:[`Invalid JSON: ${z.message}`]})}},V=D=>{const I=[];try{const z=M(D);if(!z){R({isValid:!1,errors:["No JSON found"]});return}const L=JSON.parse(z),B=L.modules||(Array.isArray(L)?L:null);Array.isArray(B)?B.length===0&&I.push("modules array is empty"):I.push("Missing 'modules' array"),I.length===0?R({isValid:!0,errors:[],preview:{moduleCount:B.length}}):R({isValid:!1,errors:I})}catch(z){R({isValid:!1,errors:[`Invalid JSON: ${z.message}`]})}},W=async()=>{try{_(null);const D=await he.brain.ingest(p,"pasted_wrap.md");D.sessionSaved?(_({type:"success",message:`Session saved! ID: ${D.sessionId}, Cards: ${D.cardsCreated||0}`}),y("")):_({type:"error",message:D.errors?.join(", ")||D.message})}catch(D){_({type:"error",message:D.message||"Failed to ingest"})}},K=[{key:"schedule",label:"SCHEDULE",icon:g.jsx(Ch,{className:"w-3.5 h-3.5"})},{key:"modules",label:"MODULES",icon:g.jsx(On,{className:"w-3.5 h-3.5"})},{key:"objectives",label:"OBJECTIVES",icon:g.jsx(Tf,{className:"w-3.5 h-3.5"})}];return g.jsxs("div",{className:"space-y-6 p-4",children:[g.jsx(w5,{}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),g.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:n||"",onChange:D=>{r(D.target.value?parseInt(D.target.value):null),o(null)},children:[g.jsx("option",{value:"",children:"-- Select Course --"}),A.map(D=>g.jsx("option",{value:D.id,children:D.name},D.id))]})]}),!n&&g.jsx("p",{className:"text-center text-muted-foreground font-terminal text-sm py-8",children:"Select a course above to begin ingestion."}),n&&g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none mb-6",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-2",children:[g.jsx(k2,{className:"w-4 h-4"}),"WRAP SESSION INGESTION"]})}),g.jsxs(rn,{className:"p-4",children:[m&&g.jsx("div",{className:`mb-4 p-3 rounded-none font-terminal text-sm ${m.type==="success"?"bg-green-900/30 border border-green-500 text-green-400":"bg-red-900/30 border border-red-500 text-red-400"}`,children:m.message}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("button",{onClick:()=>T(E5),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),g.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Use ChatGPT to convert your notes to WRAP format, then paste or upload below:"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Paste WRAP Content"}),g.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-48 font-terminal text-sm",placeholder:"Paste your WRAP session here...",value:p,onChange:D=>{y(D.target.value),_(null)}})]}),g.jsx("button",{onClick:W,disabled:!p,className:"bg-primary hover:bg-primary/80 disabled:opacity-50 px-6 py-3 rounded-none font-arcade text-sm w-full",type:"button",children:"INGEST WRAP SESSION"})]})]})]}),n&&x&&g.jsx("div",{className:"bg-destructive/20 border border-destructive rounded-none p-3 text-destructive font-terminal",children:x}),n&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"flex border-b border-primary/50",children:K.map(D=>g.jsxs("button",{onClick:()=>s(D.key),className:`flex items-center gap-1.5 px-4 py-2 font-arcade text-xs border-b-2 transition-colors ${a===D.key?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-primary/70"}`,type:"button",children:[D.icon,D.label]},D.key))}),a==="schedule"&&g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-2",children:[g.jsx(Ch,{className:"w-4 h-4"}),"SCHEDULE IMPORT"]})}),g.jsxs(rn,{className:"p-4 space-y-4",children:[g.jsx("button",{onClick:()=>T(S5),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),g.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (schedule JSON) below:"}),g.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-40 font-terminal text-sm",placeholder:'{"name":"...","term":{...},"events":[...]}',value:c,onChange:D=>{l(D.target.value),w(null),D.target.value.trim()?G(D.target.value):E(null)}}),N&&!N.isValid&&g.jsxs("div",{className:"p-2 border border-red-500 bg-red-900/30 rounded-none font-terminal text-xs text-red-400",children:[g.jsx("div",{className:"font-bold mb-1",children:"Validation Errors:"}),N.errors.map((D,I)=>g.jsxs("div",{children:[" ",D]},I))]}),N?.isValid&&N.preview&&g.jsxs("div",{className:"p-3 border border-primary bg-primary/10 rounded-none font-terminal text-xs text-primary",children:[g.jsx("div",{className:"font-bold mb-2",children:"Valid JSON Preview:"}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"Course:"})," ",N.preview.courseName]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"Events:"})," ",N.preview.eventCount]}),N.preview.startDate&&g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"Start:"})," ",N.preview.startDate]}),N.preview.endDate&&g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"End:"})," ",N.preview.endDate]})]})]}),g.jsx("button",{onClick:()=>O.mutate(c),disabled:!N?.isValid||O.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:O.isPending?"Importing...":"Import Schedule"}),b&&g.jsx("div",{className:`p-2 border font-terminal text-xs ${b.type==="success"?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:b.message})]})]}),a==="modules"&&g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-2",children:[g.jsx(On,{className:"w-4 h-4"}),"MODULES IMPORT"]})}),g.jsxs(rn,{className:"p-4 space-y-4",children:[g.jsx("button",{onClick:()=>T(C5),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),g.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (modules JSON) below:"}),g.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-40 font-terminal text-sm",placeholder:'{"modules":[{"name":"Module 1: ...","orderIndex":1,"topics":[...],"readings":[...],"assessments":[...]}]}',value:u,onChange:D=>{d(D.target.value),C(null),D.target.value.trim()?V(D.target.value):R(null)}}),k&&!k.isValid&&g.jsxs("div",{className:"p-2 border border-red-500 bg-red-900/30 rounded-none font-terminal text-xs text-red-400",children:[g.jsx("div",{className:"font-bold mb-1",children:"Validation Errors:"}),k.errors.map((D,I)=>g.jsxs("div",{children:[" ",D]},I))]}),k?.isValid&&k.preview&&g.jsxs("div",{className:"p-3 border border-primary bg-primary/10 rounded-none font-terminal text-xs text-primary",children:[g.jsx("div",{className:"font-bold mb-2",children:"Valid JSON Preview:"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-muted-foreground",children:"Modules:"})," ",k.preview.moduleCount]})]}),g.jsx("button",{onClick:()=>H.mutate(u),disabled:!k?.isValid||H.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:H.isPending?"Importing...":"Import Modules"}),S&&g.jsx("div",{className:`p-2 border font-terminal text-xs ${S.type==="success"?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:S.message})]})]}),a==="objectives"&&g.jsxs(en,{className:"bg-black/40 border-2 border-primary rounded-none",children:[g.jsx(tn,{className:"border-b border-primary/50 p-4",children:g.jsxs(nn,{className:"font-arcade text-sm flex items-center gap-2",children:[g.jsx(Tf,{className:"w-4 h-4"}),"LEARNING OBJECTIVES IMPORT"]})}),g.jsxs(rn,{className:"p-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-1 font-terminal text-muted-foreground",children:"Target Module (optional)"}),g.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:i||"",onChange:D=>o(D.target.value?parseInt(D.target.value):null),children:[g.jsx("option",{value:"",children:"-- No Module (Course-level) --"}),P.map(D=>g.jsx("option",{value:D.id,children:D.name},D.id))]})]}),g.jsx("button",{onClick:()=>T(N5),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),g.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),g.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"loCode": "1.1", "title": "Define..."}]',value:f,onChange:D=>h(D.target.value)}),g.jsx("button",{onClick:()=>F.mutate(f),disabled:!f||F.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:F.isPending?"Importing...":"Import LOs"}),q.length>0&&g.jsxs("div",{children:[g.jsxs("h4",{className:"font-terminal text-xs mb-2",children:["Current LOs (",q.length,")"]}),g.jsx("div",{className:"max-h-48 overflow-y-auto",children:q.map(D=>g.jsxs("div",{className:"text-xs py-1 border-b border-secondary/30 font-terminal",children:[g.jsx("span",{className:"text-primary",children:D.loCode}),": ",D.title,g.jsx("span",{className:`ml-2 text-[10px] px-1 rounded ${D.status==="solid"?"bg-green-600":D.status==="in_progress"?"bg-yellow-600":D.status==="need_review"?"bg-orange-600":"bg-gray-600"}`,children:D.status})]},D.id))})]})]})]})]})]})}function R5(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function A5(e,n,r){return n=D5(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function wx(e,n){return M5(e)||R5(e,n)||tS(e,n)||O5()}function j5(e){return P5(e)||I5(e)||tS(e)||T5()}function P5(e){if(Array.isArray(e))return Qf(e)}function M5(e){if(Array.isArray(e))return e}function I5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tS(e,n){if(e){if(typeof e=="string")return Qf(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qf(e,n)}}function Qf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}function T5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function D5(e){var n=q5(e,"string");return typeof n=="symbol"?n:String(n)}var z5=function(n,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(j5(Object.entries(n).filter(function(o){var a=wx(o,1),s=a[0];return!i.has(s)}).map(function(o){var a=wx(o,2),s=a[0],c=a[1];return A5({},s,c)}))))};function ed(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function L5(e){if(Array.isArray(e))return e}function $5(e){if(Array.isArray(e))return ed(e)}function F5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function H5(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function B5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G5(e,n){return L5(e)||H5(e,n)||nS(e,n)||B5()}function Sx(e){return $5(e)||F5(e)||nS(e)||V5()}function nS(e,n){if(e){if(typeof e=="string")return ed(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ed(e,n):void 0}}function U5(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,i=r===void 0?"div":r,o=n.nodeMapper,a=o===void 0?function(d){return d}:o,s=n.methodNames,c=s===void 0?[]:s,l=n.initPropNames,u=l===void 0?[]:l;return j.forwardRef(function(d,f){var h=j.useRef(),p=j.useMemo(function(){var v=Object.fromEntries(u.filter(function(m){return d.hasOwnProperty(m)}).map(function(m){return[m,d[m]]}));return e(v)},[]);Cx(function(){p(a(h.current))},j.useLayoutEffect),Cx(function(){return p._destructor instanceof Function?p._destructor:void 0});var y=j.useCallback(function(v){for(var m=arguments.length,_=new Array(m>1?m-1:0),b=1;b<m;b++)_[b-1]=arguments[b];return p[v]instanceof Function?p[v].apply(p,_):void 0},[p]),x=j.useRef({});return Object.keys(z5(d,[].concat(Sx(c),Sx(u)))).filter(function(v){return x.current[v]!==d[v]}).forEach(function(v){return y(v,d[v])}),x.current=d,j.useImperativeHandle(f,function(){return Object.fromEntries(c.map(function(v){return[v,function(){for(var m=arguments.length,_=new Array(m),b=0;b<m;b++)_[b]=arguments[b];return y.apply(void 0,[v].concat(_))}]}))},[y]),mb.createElement(i,{ref:h})})}function Cx(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j.useEffect,r=j.useRef(),i=j.useRef(!1),o=j.useRef(!1),a=j.useState(0),s=G5(a,2);s[0];var c=s[1];i.current&&(o.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),c(function(l){return l+1}),function(){o.current&&r.current&&r.current()}},[])}class Nx extends Map{constructor(n,r=Y5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,o]of n)this.set(i,o)}get(n){return super.get(Ex(this,n))}has(n){return super.has(Ex(this,n))}set(n,r){return super.set(W5(this,n),r)}delete(n){return super.delete(K5(this,n))}}function Ex({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function W5({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function K5({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function Y5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kx(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function Rx(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function X5(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var Z5=typeof global=="object"&&global&&global.Object===Object&&global,J5=typeof self=="object"&&self&&self.Object===Object&&self,rS=Z5||J5||Function("return this")(),Oi=rS.Symbol,iS=Object.prototype,Q5=iS.hasOwnProperty,eq=iS.toString,Jn=Oi?Oi.toStringTag:void 0;function tq(e){var n=Q5.call(e,Jn),r=e[Jn];try{e[Jn]=void 0;var i=!0}catch{}var o=eq.call(e);return i&&(n?e[Jn]=r:delete e[Jn]),o}var nq=Object.prototype,rq=nq.toString;function iq(e){return rq.call(e)}var oq="[object Null]",aq="[object Undefined]",Ax=Oi?Oi.toStringTag:void 0;function sq(e){return e==null?e===void 0?aq:oq:Ax&&Ax in Object(e)?tq(e):iq(e)}function cq(e){return e!=null&&typeof e=="object"}var lq="[object Symbol]";function uq(e){return typeof e=="symbol"||cq(e)&&sq(e)==lq}var fq=/\s/;function dq(e){for(var n=e.length;n--&&fq.test(e.charAt(n)););return n}var hq=/^\s+/;function pq(e){return e&&e.slice(0,dq(e)+1).replace(hq,"")}function qi(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var jx=NaN,gq=/^[-+]0x[0-9a-f]+$/i,mq=/^0b[01]+$/i,yq=/^0o[0-7]+$/i,vq=parseInt;function Px(e){if(typeof e=="number")return e;if(uq(e))return jx;if(qi(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=qi(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=pq(e);var r=mq.test(e);return r||yq.test(e)?vq(e.slice(2),r?2:8):gq.test(e)?jx:+e}var Cf=function(){return rS.Date.now()},xq="Expected a function",bq=Math.max,_q=Math.min;function oS(e,n,r){var i,o,a,s,c,l,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(xq);n=Px(n)||0,qi(r)&&(d=!!r.leading,f="maxWait"in r,a=f?bq(Px(r.maxWait)||0,n):a,h="trailing"in r?!!r.trailing:h);function p(C){var N=i,E=o;return i=o=void 0,u=C,s=e.apply(E,N),s}function y(C){return u=C,c=setTimeout(m,n),d?p(C):s}function x(C){var N=C-l,E=C-u,k=n-N;return f?_q(k,a-E):k}function v(C){var N=C-l,E=C-u;return l===void 0||N>=n||N<0||f&&E>=a}function m(){var C=Cf();if(v(C))return _(C);c=setTimeout(m,x(C))}function _(C){return c=void 0,h&&i?p(C):(i=o=void 0,s)}function b(){c!==void 0&&clearTimeout(c),u=0,i=l=o=c=void 0}function w(){return c===void 0?s:_(Cf())}function S(){var C=Cf(),N=v(C);if(i=arguments,o=this,l=C,N){if(c===void 0)return y(l);if(f)return clearTimeout(c),c=setTimeout(m,n),p(l)}return c===void 0&&(c=setTimeout(m,n)),s}return S.cancel=b,S.flush=w,S}var wq="Expected a function";function Sq(e,n,r){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(wq);return qi(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),oS(e,n,{leading:i,maxWait:n,trailing:o})}var un=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-un.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?un.Bounce.In(e*2)*.5:un.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),fr=function(){return performance.now()},aS=(function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];(n=s._group)===null||n===void 0||n.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=fr()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],s=!r;a&&a.update(n,s)===!1&&!r&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e})(),td={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=td.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},sS=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),nd=new aS,Mx=(function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=un.Linear.None,this._interpolationFunction=td.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=sS.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=nd,nd.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=fr()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,o,a){for(var s in i){var c=n[s],l=Array.isArray(c),u=l?"array":typeof c,d=!l&&Array.isArray(i[s]);if(!(u==="undefined"||u==="function")){if(d){var f=i[s];if(f.length===0)continue;for(var h=[c],p=0,y=f.length;p<y;p+=1){var x=this._handleRelativeValue(c,f[p]);if(isNaN(x)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(x)}d&&(i[s]=h)}if((u==="object"||l)&&c&&!d){r[s]=l?[]:{};var v=c;for(var m in v)r[s][m]=v[m];o[s]=l?[]:{};var f=i[s];if(!this._isDynamic){var _={};for(var m in f)_[m]=f[m];i[s]=f=_}this._setupProperties(v,r[s],f,o[s],a)}else(typeof r[s]>"u"||a)&&(r[s]=c),l||(r[s]*=1),d?o[s]=i[s].slice().reverse():o[s]=r[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=fr()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=fr()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=un.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=td.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,o;if(n===void 0&&(n=fr()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=n-this._startTime,c=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),l=this._duration+this._repeat*c,u=function(){if(i._duration===0||s>l)return 1;var x=Math.trunc(s/c),v=s-x*c,m=Math.min(v/i._duration,1);return m===0&&s===i._duration?1:m},d=u(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||s>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((s-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,y=this._chainedTweens.length;p<y;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,o){for(var a in i)if(r[a]!==void 0){var s=r[a]||0,c=i[a],l=Array.isArray(n[a]),u=Array.isArray(c),d=!l&&u;d?n[a]=this._interpolationFunction(c,o):typeof c=="object"&&c?this._updateProperties(n[a],s,c,o):(c=this._handleRelativeValue(s,c),typeof c=="number"&&(n[a]=s+(c-s)*o))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e})();sS.nextId;var yt=nd;yt.getAll.bind(yt);yt.removeAll.bind(yt);yt.add.bind(yt);yt.remove.bind(yt);yt.update.bind(yt);function Ix(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Cq(e){if(Array.isArray(e))return e}function Nq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Eq(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function kq(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function Rq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aq(e,n){return Cq(e)||kq(e,n)||jq(e,n)||Rq()}function jq(e,n){if(e){if(typeof e=="string")return Ix(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ix(e,n):void 0}}var Pq=Eq(function e(n,r){var i=r.default,o=i===void 0?null:i,a=r.triggerUpdate,s=a===void 0?!0:a,c=r.onChange,l=c===void 0?function(u,d){}:c;Nq(this,e),this.name=n,this.defaultVal=o,this.triggerUpdate=s,this.onChange=l});function ah(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,o=i===void 0?{}:i,a=e.methods,s=a===void 0?{}:a,c=e.aliases,l=c===void 0?{}:c,u=e.init,d=u===void 0?function(){}:u,f=e.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(y){return new Pq(y,o[y])});return function y(){for(var x=arguments.length,v=new Array(x),m=0;m<x;m++)v[m]=arguments[m];var _=!!(this instanceof y&&this.constructor),b=_?v.shift():void 0,w=v[0],S=w===void 0?{}:w,C=Object.assign({},r instanceof Function?r(S):r,{initialised:!1}),N={};function E(A){return k(A,S),R(),E}var k=function(P,q){d.call(E,P,C,q),C.initialised=!0},R=oS(function(){C.initialised&&(h.call(E,C,N),N={})},1);return p.forEach(function(A){E[A.name]=P(A);function P(q){var M=q.name,T=q.triggerUpdate,O=T===void 0?!1:T,H=q.onChange,F=H===void 0?function(W,K){}:H,G=q.defaultVal,V=G===void 0?null:G;return function(W){var K=C[M];if(!arguments.length)return K;var D=W===void 0?V:W;return C[M]=D,F.call(E,D,C,K),!N.hasOwnProperty(M)&&(N[M]=K),O&&R(),E}}}),Object.keys(s).forEach(function(A){E[A]=function(){for(var P,q=arguments.length,M=new Array(q),T=0;T<q;T++)M[T]=arguments[T];return(P=s[A]).call.apply(P,[E,C].concat(M))}}),Object.entries(l).forEach(function(A){var P=Aq(A,2),q=P[0],M=P[1];return E[q]=E[M]}),E.resetProps=function(){return p.forEach(function(A){E[A.name](A.defaultVal)}),E},E.resetProps(),C._rerender=R,_&&b&&E(b),E}}var me=(function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}});function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Di(e)}var Mq=/^\s+/,Iq=/\s+$/;function ae(e,n){if(e=e||"",n=n||{},e instanceof ae)return e;if(!(this instanceof ae))return new ae(e,n);var r=Tq(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ae.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,o,a,s,c;return r=n.r/255,i=n.g/255,o=n.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),o<=.03928?c=o/12.92:c=Math.pow((o+.055)/1.055,2.4),.2126*a+.7152*s+.0722*c},setAlpha:function(n){return this._a=cS(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=Ox(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=Ox(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var n=Tx(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Tx(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(n){return qx(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return zq(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Xq[qx(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+Dx(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(n){var a=ae(n);i="#"+Dx(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,o=this._a<1&&this._a>=0,a=!r&&o&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return a?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return ae(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Hq,arguments)},brighten:function(){return this._applyModification(Bq,arguments)},darken:function(){return this._applyModification(Vq,arguments)},desaturate:function(){return this._applyModification(Lq,arguments)},saturate:function(){return this._applyModification($q,arguments)},greyscale:function(){return this._applyModification(Fq,arguments)},spin:function(){return this._applyModification(Gq,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Kq,arguments)},complement:function(){return this._applyCombination(Uq,arguments)},monochromatic:function(){return this._applyCombination(Yq,arguments)},splitcomplement:function(){return this._applyCombination(Wq,arguments)},triad:function(){return this._applyCombination(zx,[3])},tetrad:function(){return this._applyCombination(zx,[4])}};ae.fromRatio=function(e,n){if(Di(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=dr(e[i]));e=r}return ae(e,n)};function Tq(e){var n={r:0,g:0,b:0},r=1,i=null,o=null,a=null,s=!1,c=!1;return typeof e=="string"&&(e=eD(e)),Di(e)=="object"&&(Ct(e.r)&&Ct(e.g)&&Ct(e.b)?(n=Oq(e.r,e.g,e.b),s=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ct(e.h)&&Ct(e.s)&&Ct(e.v)?(i=dr(e.s),o=dr(e.v),n=Dq(e.h,i,o),s=!0,c="hsv"):Ct(e.h)&&Ct(e.s)&&Ct(e.l)&&(i=dr(e.s),a=dr(e.l),n=qq(e.h,i,a),s=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=cS(r),{ok:s,format:e.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function Oq(e,n,r){return{r:be(e,255)*255,g:be(n,255)*255,b:be(r,255)*255}}function Tx(e,n,r){e=be(e,255),n=be(n,255),r=be(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,c=(i+o)/2;if(i==o)a=s=0;else{var l=i-o;switch(s=c>.5?l/(2-i-o):l/(i+o),i){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4;break}a/=6}return{h:a,s,l:c}}function qq(e,n,r){var i,o,a;e=be(e,360),n=be(n,100),r=be(r,100);function s(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(n===0)i=o=a=r;else{var c=r<.5?r*(1+n):r+n-r*n,l=2*r-c;i=s(l,c,e+1/3),o=s(l,c,e),a=s(l,c,e-1/3)}return{r:i*255,g:o*255,b:a*255}}function Ox(e,n,r){e=be(e,255),n=be(n,255),r=be(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,c=i,l=i-o;if(s=i===0?0:l/i,i==o)a=0;else{switch(i){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4;break}a/=6}return{h:a,s,v:c}}function Dq(e,n,r){e=be(e,360)*6,n=be(n,100),r=be(r,100);var i=Math.floor(e),o=e-i,a=r*(1-n),s=r*(1-o*n),c=r*(1-(1-o)*n),l=i%6,u=[r,s,a,a,c,r][l],d=[c,r,r,s,a,a][l],f=[a,a,c,r,r,s][l];return{r:u*255,g:d*255,b:f*255}}function qx(e,n,r,i){var o=[ct(Math.round(e).toString(16)),ct(Math.round(n).toString(16)),ct(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function zq(e,n,r,i,o){var a=[ct(Math.round(e).toString(16)),ct(Math.round(n).toString(16)),ct(Math.round(r).toString(16)),ct(lS(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Dx(e,n,r,i){var o=[ct(lS(i)),ct(Math.round(e).toString(16)),ct(Math.round(n).toString(16)),ct(Math.round(r).toString(16))];return o.join("")}ae.equals=function(e,n){return!e||!n?!1:ae(e).toRgbString()==ae(n).toRgbString()};ae.random=function(){return ae.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Lq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.s-=n/100,r.s=Ro(r.s),ae(r)}function $q(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.s+=n/100,r.s=Ro(r.s),ae(r)}function Fq(e){return ae(e).desaturate(100)}function Hq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.l+=n/100,r.l=Ro(r.l),ae(r)}function Bq(e,n){n=n===0?0:n||10;var r=ae(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),ae(r)}function Vq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.l-=n/100,r.l=Ro(r.l),ae(r)}function Gq(e,n){var r=ae(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,ae(r)}function Uq(e){var n=ae(e).toHsl();return n.h=(n.h+180)%360,ae(n)}function zx(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ae(e).toHsl(),i=[ae(e)],o=360/n,a=1;a<n;a++)i.push(ae({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function Wq(e){var n=ae(e).toHsl(),r=n.h;return[ae(e),ae({h:(r+72)%360,s:n.s,l:n.l}),ae({h:(r+216)%360,s:n.s,l:n.l})]}function Kq(e,n,r){n=n||6,r=r||30;var i=ae(e).toHsl(),o=360/r,a=[ae(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(ae(i));return a}function Yq(e,n){n=n||6;for(var r=ae(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],c=1/n;n--;)s.push(ae({h:i,s:o,v:a})),a=(a+c)%1;return s}ae.mix=function(e,n,r){r=r===0?0:r||50;var i=ae(e).toRgb(),o=ae(n).toRgb(),a=r/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return ae(s)};ae.readability=function(e,n){var r=ae(e),i=ae(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};ae.isReadable=function(e,n,r){var i=ae.readability(e,n),o,a;switch(a=!1,o=tD(r),o.level+o.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};ae.mostReadable=function(e,n,r){var i=null,o=0,a,s,c,l;r=r||{},s=r.includeFallbackColors,c=r.level,l=r.size;for(var u=0;u<n.length;u++)a=ae.readability(e,n[u]),a>o&&(o=a,i=ae(n[u]));return ae.isReadable(e,i,{level:c,size:l})||!s?i:(r.includeFallbackColors=!1,ae.mostReadable(e,["#fff","#000"],r))};var rd=ae.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Xq=ae.hexNames=Zq(rd);function Zq(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function cS(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function be(e,n){Jq(e)&&(e="100%");var r=Qq(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Ro(e){return Math.min(1,Math.max(0,e))}function We(e){return parseInt(e,16)}function Jq(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Qq(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ct(e){return e.length==1?"0"+e:""+e}function dr(e){return e<=1&&(e=e*100+"%"),e}function lS(e){return Math.round(parseFloat(e)*255).toString(16)}function Lx(e){return We(e)/255}var rt=(function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Ct(e){return!!rt.CSS_UNIT.exec(e)}function eD(e){e=e.replace(Mq,"").replace(Iq,"").toLowerCase();var n=!1;if(rd[e])e=rd[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=rt.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=rt.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=rt.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=rt.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=rt.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=rt.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=rt.hex8.exec(e))?{r:We(r[1]),g:We(r[2]),b:We(r[3]),a:Lx(r[4]),format:n?"name":"hex8"}:(r=rt.hex6.exec(e))?{r:We(r[1]),g:We(r[2]),b:We(r[3]),format:n?"name":"hex"}:(r=rt.hex4.exec(e))?{r:We(r[1]+""+r[1]),g:We(r[2]+""+r[2]),b:We(r[3]+""+r[3]),a:Lx(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=rt.hex3.exec(e))?{r:We(r[1]+""+r[1]),g:We(r[2]+""+r[2]),b:We(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function tD(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function id(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function nD(e){if(Array.isArray(e))return id(e)}function uS(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function rD(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function iD(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ze(e,n){return e.get(uS(e,n))}function $x(e,n,r){rD(e,n),n.set(e,r)}function Fx(e,n,r){return e.set(uS(e,n),r),r}function oD(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,fD(i.key),i)}}function aD(e,n,r){return n&&oD(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sD(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lD(e){return nD(e)||sD(e)||dD(e)||cD()}function uD(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fD(e){var n=uD(e,"string");return typeof n=="symbol"?n:n+""}function dD(e,n){if(e){if(typeof e=="string")return id(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?id(e,n):void 0}}var hD=123,pD=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},fS=function(n,r,i){return(n<<16)+(r<<8)+i},gD=function(n){var r=ae(n).toRgb(),i=r.r,o=r.g,a=r.b;return fS(i,o,a)},Hx=function(n,r){return n*hD%Math.pow(2,r)},Xt=new WeakMap,Nt=new WeakMap,mD=(function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;iD(this,e),$x(this,Xt,void 0),$x(this,Nt,void 0),Fx(Nt,this,n),this.reset()}return aD(e,[{key:"reset",value:function(){Fx(Xt,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ze(Xt,this).length>=Math.pow(2,24-Ze(Nt,this)))return null;var i=Ze(Xt,this).length,o=Hx(i,Ze(Nt,this)),a=pD(i+(o<<24-Ze(Nt,this)));return Ze(Xt,this).push(r),a}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?gD(r):fS.apply(void 0,lD(r));if(!i)return null;var o=i&Math.pow(2,24-Ze(Nt,this))-1,a=i>>24-Ze(Nt,this)&Math.pow(2,Ze(Nt,this))-1;return Hx(o,Ze(Nt,this))!==a||o>=Ze(Xt,this).length?null:Ze(Xt,this)[o]}}])})(),Vr,_e,dS,hS,Qt,Bx,pS,gS,mS,sh,od,ad,jr={},yS=[],yD=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ao=Array.isArray;function pt(e,n){for(var r in n)e[r]=n[r];return e}function ch(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function vD(e,n,r){var i,o,a,s={};for(a in n)a=="key"?i=n[a]:a=="ref"?o=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?Vr.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return gr(e,s,i,o,null)}function gr(e,n,r,i,o){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++dS,__i:-1,__u:0};return o==null&&_e.vnode!=null&&_e.vnode(a),a}function jo(e){return e.children}function fi(e,n){this.props=e,this.context=n}function Vn(e,n){if(n==null)return e.__?Vn(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Vn(e):null}function vS(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return vS(e)}}function Vx(e){(!e.__d&&(e.__d=!0)&&Qt.push(e)&&!zi.__r++||Bx!=_e.debounceRendering)&&((Bx=_e.debounceRendering)||pS)(zi)}function zi(){for(var e,n,r,i,o,a,s,c=1;Qt.length;)Qt.length>c&&Qt.sort(gS),e=Qt.shift(),c=Qt.length,e.__d&&(r=void 0,i=void 0,o=(i=(n=e).__v).__e,a=[],s=[],n.__P&&((r=pt({},i)).__v=i.__v+1,_e.vnode&&_e.vnode(r),lh(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,a,o??Vn(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,_S(a,r,s),i.__e=i.__=null,r.__e!=o&&vS(r)));zi.__r=0}function xS(e,n,r,i,o,a,s,c,l,u,d){var f,h,p,y,x,v,m,_=i&&i.__k||yS,b=n.length;for(l=xD(r,n,_,l,b),f=0;f<b;f++)(p=r.__k[f])!=null&&(h=p.__i==-1?jr:_[p.__i]||jr,p.__i=f,v=lh(e,p,h,o,a,s,c,l,u,d),y=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&uh(h.ref,null,p),d.push(p.ref,p.__c||y,p)),x==null&&y!=null&&(x=y),(m=!!(4&p.__u))||h.__k===p.__k?l=bS(p,l,e,m):typeof p.type=="function"&&v!==void 0?l=v:y&&(l=y.nextSibling),p.__u&=-7);return r.__e=x,l}function xD(e,n,r,i,o){var a,s,c,l,u,d=r.length,f=d,h=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=n[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=gr(null,s,null,null,null):Ao(s)?s=e.__k[a]=gr(jo,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[a]=gr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,l=a+h,s.__=e,s.__b=e.__b+1,c=null,(u=s.__i=bD(s,r,l,f))!=-1&&(f--,(c=r[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(o>d?h--:o<d&&h++),typeof s.type!="function"&&(s.__u|=4)):u!=l&&(u==l-1?h--:u==l+1?h++:(u>l?h--:h++,s.__u|=4))):e.__k[a]=null;if(f)for(a=0;a<d;a++)(c=r[a])!=null&&(2&c.__u)==0&&(c.__e==i&&(i=Vn(c)),SS(c,c));return i}function bS(e,n,r,i){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,n=bS(o[a],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=Vn(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function bD(e,n,r,i){var o,a,s,c=e.key,l=e.type,u=n[r],d=u!=null&&(2&u.__u)==0;if(u===null&&c==null||d&&c==u.key&&l==u.type)return r;if(i>(d?1:0)){for(o=r-1,a=r+1;o>=0||a<n.length;)if((u=n[s=o>=0?o--:a++])!=null&&(2&u.__u)==0&&c==u.key&&l==u.type)return s}return-1}function Gx(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||yD.test(n)?r:r+"px"}function ri(e,n,r,i,o){var a,s;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||Gx(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||Gx(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(mS,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=sh,e.addEventListener(n,a?ad:od,a)):e.removeEventListener(n,a?ad:od,a);else{if(o=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Ux(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=sh++;else if(n.t<r.u)return;return r(_e.event?_e.event(n):n)}}}function lh(e,n,r,i,o,a,s,c,l,u){var d,f,h,p,y,x,v,m,_,b,w,S,C,N,E,k,R,A=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),a=[c=n.__e=r.__e]),(d=_e.__b)&&d(n);e:if(typeof A=="function")try{if(m=n.props,_="prototype"in A&&A.prototype.render,b=(d=A.contextType)&&i[d.__c],w=d?b?b.props.value:d.__:i,r.__c?v=(f=n.__c=r.__c).__=f.__E:(_?n.__c=f=new A(m,w):(n.__c=f=new fi(m,w),f.constructor=A,f.render=wD),b&&b.sub(f),f.state||(f.state={}),f.__n=i,h=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&A.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=pt({},f.__s)),pt(f.__s,A.getDerivedStateFromProps(m,f.__s))),p=f.props,y=f.state,f.__v=n,h)_&&A.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&A.getDerivedStateFromProps==null&&m!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(m,w),n.__v==r.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(m,f.__s,w)===!1){for(n.__v!=r.__v&&(f.props=m,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(P){P&&(P.__=n)}),S=0;S<f._sb.length;S++)f.__h.push(f._sb[S]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(m,f.__s,w),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,y,x)})}if(f.context=w,f.props=m,f.__P=e,f.__e=!1,C=_e.__r,N=0,_){for(f.state=f.__s,f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),E=0;E<f._sb.length;E++)f.__h.push(f._sb[E]);f._sb=[]}else do f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++N<25);f.state=f.__s,f.getChildContext!=null&&(i=pt(pt({},i),f.getChildContext())),_&&!h&&f.getSnapshotBeforeUpdate!=null&&(x=f.getSnapshotBeforeUpdate(p,y)),k=d,d!=null&&d.type===jo&&d.key==null&&(k=wS(d.props.children)),c=xS(e,Ao(k)?k:[k],n,r,i,o,a,s,c,l,u),f.base=n.__e,n.__u&=-161,f.__h.length&&s.push(f),v&&(f.__E=f.__=null)}catch(P){if(n.__v=null,l||a!=null)if(P.then){for(n.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,n.__e=c}else{for(R=a.length;R--;)ch(a[R]);sd(n)}else n.__e=r.__e,n.__k=r.__k,P.then||sd(n);_e.__e(P,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=_D(r.__e,n,r,i,o,a,s,l,u);return(d=_e.diffed)&&d(n),128&n.__u?void 0:c}function sd(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(sd)}function _S(e,n,r){for(var i=0;i<r.length;i++)uh(r[i],r[++i],r[++i]);_e.__c&&_e.__c(n,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){_e.__e(a,o.__v)}})}function wS(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ao(e)?e.map(wS):pt({},e)}function _D(e,n,r,i,o,a,s,c,l){var u,d,f,h,p,y,x,v=r.props||jr,m=n.props,_=n.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((p=a[u])&&"setAttribute"in p==!!_&&(_?p.localName==_:p.nodeType==3)){e=p,a[u]=null;break}}if(e==null){if(_==null)return document.createTextNode(m);e=document.createElementNS(o,_,m.is&&m),c&&(_e.__m&&_e.__m(n,a),c=!1),a=null}if(_==null)v===m||c&&e.data==m||(e.data=m);else{if(a=a&&Vr.call(e.childNodes),!c&&a!=null)for(v={},u=0;u<e.attributes.length;u++)v[(p=e.attributes[u]).name]=p.value;for(u in v)if(p=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=p;else if(!(u in m)){if(u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m)continue;ri(e,u,null,p,o)}}for(u in m)p=m[u],u=="children"?h=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?y=p:u=="checked"?x=p:c&&typeof p!="function"||v[u]===p||ri(e,u,p,v[u],o);if(d)c||f&&(d.__html==f.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),n.__k=[];else if(f&&(e.innerHTML=""),xS(n.type=="template"?e.content:e,Ao(h)?h:[h],n,r,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&Vn(r,0),c,l),a!=null)for(u=a.length;u--;)ch(a[u]);c||(u="value",_=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[u]||_=="progress"&&!y||_=="option"&&y!=v[u])&&ri(e,u,y,v[u],o),u="checked",x!=null&&x!=e[u]&&ri(e,u,x,v[u],o))}return e}function uh(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(o){_e.__e(o,r)}}function SS(e,n,r){var i,o;if(_e.unmount&&_e.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||uh(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){_e.__e(a,n)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&SS(i[o],n,r||typeof e.type!="function");r||ch(e.__e),e.__c=e.__=e.__e=void 0}function wD(e,n,r){return this.constructor(e,r)}function SD(e,n,r){var i,o,a,s;n==document&&(n=document.documentElement),_e.__&&_e.__(e,n),o=(i=!1)?null:n.__k,a=[],s=[],lh(n,e=n.__k=vD(jo,null,[e]),o||jr,jr,n.namespaceURI,o?null:n.firstChild?Vr.call(n.childNodes):null,a,o?o.__e:n.firstChild,i,s),_S(a,e,s)}function CS(e,n,r){var i,o,a,s,c=pt({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)a=="key"?i=n[a]:a=="ref"?o=n[a]:c[a]=n[a]===void 0&&s!=null?s[a]:n[a];return arguments.length>2&&(c.children=arguments.length>3?Vr.call(arguments,2):r),gr(e.type,c,i||e.key,o||e.ref,null)}Vr=yS.slice,_e={__e:function(e,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(c){e=c}throw e}},dS=0,hS=function(e){return e!=null&&e.constructor===void 0},fi.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=pt({},this.state),typeof e=="function"&&(e=e(pt({},r),this.props)),e&&pt(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Vx(this))},fi.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vx(this))},fi.prototype.render=jo,Qt=[],pS=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,gS=function(e,n){return e.__v.__b-n.__v.__b},zi.__r=0,mS=/(PointerCapture)$|Capture$/i,sh=0,od=Ux(!1),ad=Ux(!0);function Wx(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function CD(e){if(Array.isArray(e))return e}function ND(e,n,r){return(n=PD(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ED(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function kD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kx(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function RD(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Kx(Object(r),!0).forEach(function(i){ND(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kx(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function AD(e,n){return CD(e)||ED(e,n)||MD(e,n)||kD()}function jD(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function PD(e){var n=jD(e,"string");return typeof n=="symbol"?n:n+""}function Li(e){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Li(e)}function MD(e,n){if(e){if(typeof e=="string")return Wx(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wx(e,n):void 0}}var cd=function(n){if(Li(n)!=="object")return n;var r=CS(n);if(r.props){var i;r.props=RD({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(cd):cd(r.props.children))}return r},ID=function(n){return hS(CS(n))},TD=function(n,r){delete r.__k,SD(cd(n),r)};function OD(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var qD=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;OD(qD);var DD=ah({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,a=o===void 0?{}:o,s=!!n&&Li(n)==="object"&&!!n.node&&typeof n.node=="function",c=ze(s?n.node():n);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(u){var d=AD(u,2),f=d[0],h=d[1];return r.tooltipEl.style(f,h)}),r.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(l),function(u){r.mouseInside=!0;var d=Qe(u),f=c.node(),h=f.offsetWidth,p=f.offsetHeight,y=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/h*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?p>130&&p-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(y.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(l),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(l),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):ID(n.content)?(n.tooltipEl.text(""),TD(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function zD(e,n,r){var i,o=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function a(){var s,c=i.length,l,u=0,d=0,f=0;for(s=0;s<c;++s)l=i[s],u+=l.x||0,d+=l.y||0,f+=l.z||0;for(u=(u/c-e)*o,d=(d/c-n)*o,f=(f/c-r)*o,s=0;s<c;++s)l=i[s],u&&(l.x-=u),d&&(l.y-=d),f&&(l.z-=f)}return a.initialize=function(s){i=s},a.x=function(s){return arguments.length?(e=+s,a):e},a.y=function(s){return arguments.length?(n=+s,a):n},a.z=function(s){return arguments.length?(r=+s,a):r},a.strength=function(s){return arguments.length?(o=+s,a):o},a}function LD(e){const n=+this._x.call(null,e);return NS(this.cover(n),n,e)}function NS(e,n,r){if(isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._x1,l,u,d,f,h;if(!o)return e._root=a,e;for(;o.length;)if((d=n>=(l=(s+c)/2))?s=l:c=l,i=o,!(o=o[f=+d]))return i[f]=a,e;if(u=+e._x.call(null,o.data),n===u)return a.next=o,i?i[f]=a:e._root=a,e;do i=i?i[f]=new Array(2):e._root=new Array(2),(d=n>=(l=(s+c)/2))?s=l:c=l;while((f=+d)==(h=+(u>=l)));return i[h]=o,i[f]=a,e}function $D(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,o=-1/0;for(let a=0,s;a<n;++a)isNaN(s=+this._x.call(null,e[a]))||(r[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let a=0;a<n;++a)NS(this,r[a],e[a]);return this}function FD(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,o=this._root,a,s;n>e||e>=r;)switch(s=+(e<n),a=new Array(2),a[s]=o,o=a,i*=2,s){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._x1=r,this}function HD(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function BD(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Mt(e,n,r){this.node=e,this.x0=n,this.x1=r}function VD(e,n){var r,i=this._x0,o,a,s=this._x1,c=[],l=this._root,u,d;for(l&&c.push(new Mt(l,i,s)),n==null?n=1/0:(i=e-n,s=e+n);u=c.pop();)if(!(!(l=u.node)||(o=u.x0)>s||(a=u.x1)<i))if(l.length){var f=(o+a)/2;c.push(new Mt(l[1],f,a),new Mt(l[0],o,f)),(d=+(e>=f))&&(u=c[c.length-1],c[c.length-1]=c[c.length-1-d],c[c.length-1-d]=u)}else{var h=Math.abs(e-+this._x.call(null,l.data));h<n&&(n=h,i=e-h,s=e+h,r=l.data)}return r}function GD(e){if(isNaN(l=+this._x.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._x1,l,u,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=l>=(u=(s+c)/2))?s=u:c=u,n=r,!(r=r[f=+d]))return this;if(!r.length)break;n[f+1&1]&&(i=n,h=f)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[f]=a:delete n[f],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=a,this)}function UD(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function WD(){return this._root}function KD(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function YD(e){var n=[],r,i=this._root,o,a,s;for(i&&n.push(new Mt(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.x1)&&i.length){var c=(a+s)/2;(o=i[1])&&n.push(new Mt(o,c,s)),(o=i[0])&&n.push(new Mt(o,a,c))}return this}function XD(e){var n=[],r=[],i;for(this._root&&n.push(new Mt(this._root,this._x0,this._x1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.x1,l=(s+c)/2;(a=o[0])&&n.push(new Mt(a,s,l)),(a=o[1])&&n.push(new Mt(a,l,c))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function ZD(e){return e[0]}function JD(e){return arguments.length?(this._x=e,this):this._x}function ES(e,n){var r=new fh(n??ZD,NaN,NaN);return e==null?r:r.addAll(e)}function fh(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function Yx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Ge=ES.prototype=fh.prototype;Ge.copy=function(){var e=new fh(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Yx(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var o=0;o<2;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(2)}):n.target[o]=Yx(i));return e};Ge.add=LD;Ge.addAll=$D;Ge.cover=FD;Ge.data=HD;Ge.extent=BD;Ge.find=VD;Ge.remove=GD;Ge.removeAll=UD;Ge.root=WD;Ge.size=KD;Ge.visit=YD;Ge.visitAfter=XD;Ge.x=JD;function QD(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return kS(this.cover(n,r),n,r,e)}function kS(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a=e._root,s={data:i},c=e._x0,l=e._y0,u=e._x1,d=e._y1,f,h,p,y,x,v,m,_;if(!a)return e._root=s,e;for(;a.length;)if((x=n>=(f=(c+u)/2))?c=f:u=f,(v=r>=(h=(l+d)/2))?l=h:d=h,o=a,!(a=a[m=v<<1|x]))return o[m]=s,e;if(p=+e._x.call(null,a.data),y=+e._y.call(null,a.data),n===p&&r===y)return s.next=a,o?o[m]=s:e._root=s,e;do o=o?o[m]=new Array(4):e._root=new Array(4),(x=n>=(f=(c+u)/2))?c=f:u=f,(v=r>=(h=(l+d)/2))?l=h:d=h;while((m=v<<1|x)===(_=(y>=h)<<1|p>=f));return o[_]=a,o[m]=s,e}function ez(e){var n,r,i=e.length,o,a,s=new Array(i),c=new Array(i),l=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=o,c[r]=a,o<l&&(l=o),o>d&&(d=o),a<u&&(u=a),a>f&&(f=a));if(l>d||u>f)return this;for(this.cover(l,u).cover(d,f),r=0;r<i;++r)kS(this,s[r],c[r],e[r]);return this}function tz(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s=o-r||1,c=this._root,l,u;r>e||e>=o||i>n||n>=a;)switch(u=(n<i)<<1|e<r,l=new Array(4),l[u]=c,c=l,s*=2,u){case 0:o=r+s,a=i+s;break;case 1:r=o-s,a=i+s;break;case 2:o=r+s,i=a-s;break;case 3:r=o-s,i=a-s;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this}function nz(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function rz(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Le(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function iz(e,n,r){var i,o=this._x0,a=this._y0,s,c,l,u,d=this._x1,f=this._y1,h=[],p=this._root,y,x;for(p&&h.push(new Le(p,o,a,d,f)),r==null?r=1/0:(o=e-r,a=n-r,d=e+r,f=n+r,r*=r);y=h.pop();)if(!(!(p=y.node)||(s=y.x0)>d||(c=y.y0)>f||(l=y.x1)<o||(u=y.y1)<a))if(p.length){var v=(s+l)/2,m=(c+u)/2;h.push(new Le(p[3],v,m,l,u),new Le(p[2],s,m,v,u),new Le(p[1],v,c,l,m),new Le(p[0],s,c,v,m)),(x=(n>=m)<<1|e>=v)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=y)}else{var _=e-+this._x.call(null,p.data),b=n-+this._y.call(null,p.data),w=_*_+b*b;if(w<r){var S=Math.sqrt(r=w);o=e-S,a=n-S,d=e+S,f=n+S,i=p.data}}return i}function oz(e){if(isNaN(d=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._y0,l=this._x1,u=this._y1,d,f,h,p,y,x,v,m;if(!r)return this;if(r.length)for(;;){if((y=d>=(h=(s+l)/2))?s=h:l=h,(x=f>=(p=(c+u)/2))?c=p:u=p,n=r,!(r=r[v=x<<1|y]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,m=v)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[v]=a:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=a,this)}function az(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function sz(){return this._root}function cz(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function lz(e){var n=[],r,i=this._root,o,a,s,c,l;for(i&&n.push(new Le(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,c=r.x1,l=r.y1)&&i.length){var u=(a+c)/2,d=(s+l)/2;(o=i[3])&&n.push(new Le(o,u,d,c,l)),(o=i[2])&&n.push(new Le(o,a,d,u,l)),(o=i[1])&&n.push(new Le(o,u,s,c,d)),(o=i[0])&&n.push(new Le(o,a,s,u,d))}return this}function uz(e){var n=[],r=[],i;for(this._root&&n.push(new Le(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.y0,l=i.x1,u=i.y1,d=(s+l)/2,f=(c+u)/2;(a=o[0])&&n.push(new Le(a,s,c,d,f)),(a=o[1])&&n.push(new Le(a,d,c,l,f)),(a=o[2])&&n.push(new Le(a,s,f,d,u)),(a=o[3])&&n.push(new Le(a,d,f,l,u))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function fz(e){return e[0]}function dz(e){return arguments.length?(this._x=e,this):this._x}function hz(e){return e[1]}function pz(e){return arguments.length?(this._y=e,this):this._y}function RS(e,n,r){var i=new dh(n??fz,r??hz,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function dh(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function Xx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var $e=RS.prototype=dh.prototype;$e.copy=function(){var e=new dh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Xx(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var o=0;o<4;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(4)}):n.target[o]=Xx(i));return e};$e.add=QD;$e.addAll=ez;$e.cover=tz;$e.data=nz;$e.extent=rz;$e.find=iz;$e.remove=oz;$e.removeAll=az;$e.root=sz;$e.size=cz;$e.visit=lz;$e.visitAfter=uz;$e.x=dz;$e.y=pz;function gz(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return AS(this.cover(n,r,i),n,r,i,e)}function AS(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s=e._root,c={data:o},l=e._x0,u=e._y0,d=e._z0,f=e._x1,h=e._y1,p=e._z1,y,x,v,m,_,b,w,S,C,N,E;if(!s)return e._root=c,e;for(;s.length;)if((w=n>=(y=(l+f)/2))?l=y:f=y,(S=r>=(x=(u+h)/2))?u=x:h=x,(C=i>=(v=(d+p)/2))?d=v:p=v,a=s,!(s=s[N=C<<2|S<<1|w]))return a[N]=c,e;if(m=+e._x.call(null,s.data),_=+e._y.call(null,s.data),b=+e._z.call(null,s.data),n===m&&r===_&&i===b)return c.next=s,a?a[N]=c:e._root=c,e;do a=a?a[N]=new Array(8):e._root=new Array(8),(w=n>=(y=(l+f)/2))?l=y:f=y,(S=r>=(x=(u+h)/2))?u=x:h=x,(C=i>=(v=(d+p)/2))?d=v:p=v;while((N=C<<2|S<<1|w)===(E=(b>=v)<<2|(_>=x)<<1|m>=y));return a[E]=s,a[N]=c,e}function mz(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n);let a=1/0,s=1/0,c=1/0,l=-1/0,u=-1/0,d=-1/0;for(let f=0,h,p,y,x;f<n;++f)isNaN(p=+this._x.call(null,h=e[f]))||isNaN(y=+this._y.call(null,h))||isNaN(x=+this._z.call(null,h))||(r[f]=p,i[f]=y,o[f]=x,p<a&&(a=p),p>l&&(l=p),y<s&&(s=y),y>u&&(u=y),x<c&&(c=x),x>d&&(d=x));if(a>l||s>u||c>d)return this;this.cover(a,s,c).cover(l,u,d);for(let f=0;f<n;++f)AS(this,r[f],i[f],o[f],e[f]);return this}function yz(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,c=this._y1,l=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,c=(o=Math.floor(n))+1,l=(a=Math.floor(r))+1;else{for(var u=s-i||1,d=this._root,f,h;i>e||e>=s||o>n||n>=c||a>r||r>=l;)switch(h=(r<a)<<2|(n<o)<<1|e<i,f=new Array(8),f[h]=d,d=f,u*=2,h){case 0:s=i+u,c=o+u,l=a+u;break;case 1:i=s-u,c=o+u,l=a+u;break;case 2:s=i+u,o=c-u,l=a+u;break;case 3:i=s-u,o=c-u,l=a+u;break;case 4:s=i+u,c=o+u,a=l-u;break;case 5:i=s-u,c=o+u,a=l-u;break;case 6:s=i+u,o=c-u,a=l-u;break;case 7:i=s-u,o=c-u,a=l-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=c,this._z1=l,this}function vz(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function xz(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function ve(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function bz(e,n,r,i){var o,a=this._x0,s=this._y0,c=this._z0,l,u,d,f,h,p,y=this._x1,x=this._y1,v=this._z1,m=[],_=this._root,b,w;for(_&&m.push(new ve(_,a,s,c,y,x,v)),i==null?i=1/0:(a=e-i,s=n-i,c=r-i,y=e+i,x=n+i,v=r+i,i*=i);b=m.pop();)if(!(!(_=b.node)||(l=b.x0)>y||(u=b.y0)>x||(d=b.z0)>v||(f=b.x1)<a||(h=b.y1)<s||(p=b.z1)<c))if(_.length){var S=(l+f)/2,C=(u+h)/2,N=(d+p)/2;m.push(new ve(_[7],S,C,N,f,h,p),new ve(_[6],l,C,N,S,h,p),new ve(_[5],S,u,N,f,C,p),new ve(_[4],l,u,N,S,C,p),new ve(_[3],S,C,d,f,h,N),new ve(_[2],l,C,d,S,h,N),new ve(_[1],S,u,d,f,C,N),new ve(_[0],l,u,d,S,C,N)),(w=(r>=N)<<2|(n>=C)<<1|e>=S)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-w],m[m.length-1-w]=b)}else{var E=e-+this._x.call(null,_.data),k=n-+this._y.call(null,_.data),R=r-+this._z.call(null,_.data),A=E*E+k*k+R*R;if(A<i){var P=Math.sqrt(i=A);a=e-P,s=n-P,c=r-P,y=e+P,x=n+P,v=r+P,o=_.data}}return o}const _z=(e,n,r,i,o,a)=>Math.sqrt((e-i)**2+(n-o)**2+(r-a)**2);function wz(e,n,r,i){const o=[],a=e-i,s=n-i,c=r-i,l=e+i,u=n+i,d=r+i;return this.visit((f,h,p,y,x,v,m)=>{if(!f.length)do{const _=f.data;_z(e,n,r,this._x(_),this._y(_),this._z(_))<=i&&o.push(_)}while(f=f.next);return h>l||p>u||y>d||x<a||v<s||m<c}),o}function Sz(e){if(isNaN(h=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(y=+this._z.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._y0,l=this._z0,u=this._x1,d=this._y1,f=this._z1,h,p,y,x,v,m,_,b,w,S,C;if(!r)return this;if(r.length)for(;;){if((_=h>=(x=(s+u)/2))?s=x:u=x,(b=p>=(v=(c+d)/2))?c=v:d=v,(w=y>=(m=(l+f)/2))?l=m:f=m,n=r,!(r=r[S=w<<2|b<<1|_]))return this;if(!r.length)break;(n[S+1&7]||n[S+2&7]||n[S+3&7]||n[S+4&7]||n[S+5&7]||n[S+6&7]||n[S+7&7])&&(i=n,C=S)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[S]=a:delete n[S],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=a,this)}function Cz(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function Nz(){return this._root}function Ez(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function kz(e){var n=[],r,i=this._root,o,a,s,c,l,u,d;for(i&&n.push(new ve(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,c=r.z0,l=r.x1,u=r.y1,d=r.z1)&&i.length){var f=(a+l)/2,h=(s+u)/2,p=(c+d)/2;(o=i[7])&&n.push(new ve(o,f,h,p,l,u,d)),(o=i[6])&&n.push(new ve(o,a,h,p,f,u,d)),(o=i[5])&&n.push(new ve(o,f,s,p,l,h,d)),(o=i[4])&&n.push(new ve(o,a,s,p,f,h,d)),(o=i[3])&&n.push(new ve(o,f,h,c,l,u,p)),(o=i[2])&&n.push(new ve(o,a,h,c,f,u,p)),(o=i[1])&&n.push(new ve(o,f,s,c,l,h,p)),(o=i[0])&&n.push(new ve(o,a,s,c,f,h,p))}return this}function Rz(e){var n=[],r=[],i;for(this._root&&n.push(new ve(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.y0,l=i.z0,u=i.x1,d=i.y1,f=i.z1,h=(s+u)/2,p=(c+d)/2,y=(l+f)/2;(a=o[0])&&n.push(new ve(a,s,c,l,h,p,y)),(a=o[1])&&n.push(new ve(a,h,c,l,u,p,y)),(a=o[2])&&n.push(new ve(a,s,p,l,h,d,y)),(a=o[3])&&n.push(new ve(a,h,p,l,u,d,y)),(a=o[4])&&n.push(new ve(a,s,c,y,h,p,f)),(a=o[5])&&n.push(new ve(a,h,c,y,u,p,f)),(a=o[6])&&n.push(new ve(a,s,p,y,h,d,f)),(a=o[7])&&n.push(new ve(a,h,p,y,u,d,f))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Az(e){return e[0]}function jz(e){return arguments.length?(this._x=e,this):this._x}function Pz(e){return e[1]}function Mz(e){return arguments.length?(this._y=e,this):this._y}function Iz(e){return e[2]}function Tz(e){return arguments.length?(this._z=e,this):this._z}function jS(e,n,r,i){var o=new hh(n??Az,r??Pz,i??Iz,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function hh(e,n,r,i,o,a,s,c,l){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=c,this._z1=l,this._root=void 0}function Zx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Oe=jS.prototype=hh.prototype;Oe.copy=function(){var e=new hh(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Zx(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var o=0;o<8;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(8)}):n.target[o]=Zx(i));return e};Oe.add=gz;Oe.addAll=mz;Oe.cover=yz;Oe.data=vz;Oe.extent=xz;Oe.find=bz;Oe.findAllWithinRadius=wz;Oe.remove=Sz;Oe.removeAll=Cz;Oe.root=Nz;Oe.size=Ez;Oe.visit=kz;Oe.visitAfter=Rz;Oe.x=jz;Oe.y=Mz;Oe.z=Tz;function Pt(e){return function(){return e}}function kt(e){return(e()-.5)*1e-6}function Oz(e){return e.index}function Jx(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function qz(e){var n=Oz,r=h,i,o=Pt(30),a,s,c,l,u,d,f=1;e==null&&(e=[]);function h(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function p(m){for(var _=0,b=e.length;_<f;++_)for(var w=0,S,C,N,E=0,k=0,R=0,A,P;w<b;++w)S=e[w],C=S.source,N=S.target,E=N.x+N.vx-C.x-C.vx||kt(d),c>1&&(k=N.y+N.vy-C.y-C.vy||kt(d)),c>2&&(R=N.z+N.vz-C.z-C.vz||kt(d)),A=Math.sqrt(E*E+k*k+R*R),A=(A-a[w])/A*m*i[w],E*=A,k*=A,R*=A,N.vx-=E*(P=u[w]),c>1&&(N.vy-=k*P),c>2&&(N.vz-=R*P),C.vx+=E*(P=1-P),c>1&&(C.vy+=k*P),c>2&&(C.vz+=R*P)}function y(){if(s){var m,_=s.length,b=e.length,w=new Map(s.map((C,N)=>[n(C,N,s),C])),S;for(m=0,l=new Array(_);m<b;++m)S=e[m],S.index=m,typeof S.source!="object"&&(S.source=Jx(w,S.source)),typeof S.target!="object"&&(S.target=Jx(w,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(m=0,u=new Array(b);m<b;++m)S=e[m],u[m]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);i=new Array(b),x(),a=new Array(b),v()}}function x(){if(s)for(var m=0,_=e.length;m<_;++m)i[m]=+r(e[m],m,e)}function v(){if(s)for(var m=0,_=e.length;m<_;++m)a[m]=+o(e[m],m,e)}return p.initialize=function(m,..._){s=m,d=_.find(b=>typeof b=="function")||Math.random,c=_.find(b=>[1,2,3].includes(b))||2,y()},p.links=function(m){return arguments.length?(e=m,y(),p):e},p.id=function(m){return arguments.length?(n=m,p):n},p.iterations=function(m){return arguments.length?(f=+m,p):f},p.strength=function(m){return arguments.length?(r=typeof m=="function"?m:Pt(+m),x(),p):r},p.distance=function(m){return arguments.length?(o=typeof m=="function"?m:Pt(+m),v(),p):o},p}const Dz=1664525,zz=1013904223,Qx=4294967296;function Lz(){let e=1;return()=>(e=(Dz*e+zz)%Qx)/Qx}var eb=3;function Nf(e){return e.x}function tb(e){return e.y}function $z(e){return e.z}var Fz=10,Hz=Math.PI*(3-Math.sqrt(5)),Bz=Math.PI*20/(9+Math.sqrt(221));function Vz(e,n){n=n||2;var r=Math.min(eb,Math.max(1,Math.round(n))),i,o=1,a=.001,s=1-Math.pow(a,1/300),c=0,l=.6,u=new Map,d=Nd(p),f=Mr("tick","end"),h=Lz();e==null&&(e=[]);function p(){y(),f.call("tick",i),o<a&&(d.stop(),f.call("end",i))}function y(m){var _,b=e.length,w;m===void 0&&(m=1);for(var S=0;S<m;++S)for(o+=(c-o)*s,u.forEach(function(C){C(o)}),_=0;_<b;++_)w=e[_],w.fx==null?w.x+=w.vx*=l:(w.x=w.fx,w.vx=0),r>1&&(w.fy==null?w.y+=w.vy*=l:(w.y=w.fy,w.vy=0)),r>2&&(w.fz==null?w.z+=w.vz*=l:(w.z=w.fz,w.vz=0));return i}function x(){for(var m=0,_=e.length,b;m<_;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||r>1&&isNaN(b.y)||r>2&&isNaN(b.z)){var w=Fz*(r>2?Math.cbrt(.5+m):r>1?Math.sqrt(.5+m):m),S=m*Hz,C=m*Bz;r===1?b.x=w:r===2?(b.x=w*Math.cos(S),b.y=w*Math.sin(S)):(b.x=w*Math.sin(S)*Math.cos(C),b.y=w*Math.cos(S),b.z=w*Math.sin(S)*Math.sin(C))}(isNaN(b.vx)||r>1&&isNaN(b.vy)||r>2&&isNaN(b.vz))&&(b.vx=0,r>1&&(b.vy=0),r>2&&(b.vz=0))}}function v(m){return m.initialize&&m.initialize(e,h,r),m}return x(),i={tick:y,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(m){return arguments.length?(r=Math.min(eb,Math.max(1,Math.round(m))),u.forEach(v),i):r},nodes:function(m){return arguments.length?(e=m,x(),u.forEach(v),i):e},alpha:function(m){return arguments.length?(o=+m,i):o},alphaMin:function(m){return arguments.length?(a=+m,i):a},alphaDecay:function(m){return arguments.length?(s=+m,i):+s},alphaTarget:function(m){return arguments.length?(c=+m,i):c},velocityDecay:function(m){return arguments.length?(l=1-m,i):1-l},randomSource:function(m){return arguments.length?(h=m,u.forEach(v),i):h},force:function(m,_){return arguments.length>1?(_==null?u.delete(m):u.set(m,v(_)),i):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),_=m.shift()||0,b=(r>1?m.shift():null)||0,w=(r>2?m.shift():null)||0,S=m.shift()||1/0,C=0,N=e.length,E,k,R,A,P,q;for(S*=S,C=0;C<N;++C)P=e[C],E=_-P.x,k=b-(P.y||0),R=w-(P.z||0),A=E*E+k*k+R*R,A<S&&(q=P,S=A);return q},on:function(m,_){return arguments.length>1?(f.on(m,_),i):f.on(m)}}}function Gz(){var e,n,r,i,o,a=Pt(-30),s,c=1,l=1/0,u=.81;function d(y){var x,v=e.length,m=(n===1?ES(e,Nf):n===2?RS(e,Nf,tb):n===3?jS(e,Nf,tb,$z):null).visitAfter(h);for(o=y,x=0;x<v;++x)r=e[x],m.visit(p)}function f(){if(e){var y,x=e.length,v;for(s=new Array(x),y=0;y<x;++y)v=e[y],s[v.index]=+a(v,y,e)}}function h(y){var x=0,v,m,_=0,b,w,S,C,N=y.length;if(N){for(b=w=S=C=0;C<N;++C)(v=y[C])&&(m=Math.abs(v.value))&&(x+=v.value,_+=m,b+=m*(v.x||0),w+=m*(v.y||0),S+=m*(v.z||0));x*=Math.sqrt(4/N),y.x=b/_,n>1&&(y.y=w/_),n>2&&(y.z=S/_)}else{v=y,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do x+=s[v.data.index];while(v=v.next)}y.value=x}function p(y,x,v,m,_){if(!y.value)return!0;var b=[v,m,_][n-1],w=y.x-r.x,S=n>1?y.y-r.y:0,C=n>2?y.z-r.z:0,N=b-x,E=w*w+S*S+C*C;if(N*N/u<E)return E<l&&(w===0&&(w=kt(i),E+=w*w),n>1&&S===0&&(S=kt(i),E+=S*S),n>2&&C===0&&(C=kt(i),E+=C*C),E<c&&(E=Math.sqrt(c*E)),r.vx+=w*y.value*o/E,n>1&&(r.vy+=S*y.value*o/E),n>2&&(r.vz+=C*y.value*o/E)),!0;if(y.length||E>=l)return;(y.data!==r||y.next)&&(w===0&&(w=kt(i),E+=w*w),n>1&&S===0&&(S=kt(i),E+=S*S),n>2&&C===0&&(C=kt(i),E+=C*C),E<c&&(E=Math.sqrt(c*E)));do y.data!==r&&(N=s[y.data.index]*o/E,r.vx+=w*N,n>1&&(r.vy+=S*N),n>2&&(r.vz+=C*N));while(y=y.next)}return d.initialize=function(y,...x){e=y,i=x.find(v=>typeof v=="function")||Math.random,n=x.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(y){return arguments.length?(a=typeof y=="function"?y:Pt(+y),f(),d):a},d.distanceMin=function(y){return arguments.length?(c=y*y,d):Math.sqrt(c)},d.distanceMax=function(y){return arguments.length?(l=y*y,d):Math.sqrt(l)},d.theta=function(y){return arguments.length?(u=y*y,d):Math.sqrt(u)},d}function Uz(e,n,r,i){var o,a,s=Pt(.1),c,l;typeof e!="function"&&(e=Pt(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function u(f){for(var h=0,p=o.length;h<p;++h){var y=o[h],x=y.x-n||1e-6,v=(y.y||0)-r||1e-6,m=(y.z||0)-i||1e-6,_=Math.sqrt(x*x+v*v+m*m),b=(l[h]-_)*c[h]*f/_;y.vx+=x*b,a>1&&(y.vy+=v*b),a>2&&(y.vz+=m*b)}}function d(){if(o){var f,h=o.length;for(c=new Array(h),l=new Array(h),f=0;f<h;++f)l[f]=+e(o[f],f,o),c[f]=isNaN(l[f])?0:+s(o[f],f,o)}}return u.initialize=function(f,...h){o=f,a=h.find(p=>[1,2,3].includes(p))||2,d()},u.strength=function(f){return arguments.length?(s=typeof f=="function"?f:Pt(+f),d(),u):s},u.radius=function(f){return arguments.length?(e=typeof f=="function"?f:Pt(+f),d(),u):e},u.x=function(f){return arguments.length?(n=+f,u):n},u.y=function(f){return arguments.length?(r=+f,u):r},u.z=function(f){return arguments.length?(i=+f,u):i},u}const{abs:Qn,cos:Et,sin:Nn,acos:Wz,atan2:er,sqrt:Lt,pow:Je}=Math;function tr(e){return e<0?-Je(-e,1/3):Je(e,1/3)}const PS=Math.PI,ii=2*PS,$t=PS/2,Kz=1e-6,Ef=Number.MAX_SAFE_INTEGER||9007199254740991,kf=Number.MIN_SAFE_INTEGER||-9007199254740991,Yz={x:0,y:0,z:0},X={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Lt(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const o=1-e;let a=n;if(i===0)return n[0].t=e,n[0];if(i===1){const c={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(c.z=o*a[0].z+e*a[1].z),c}if(i<4){let c=o*o,l=e*e,u,d,f,h=0;i===2?(a=[a[0],a[1],a[2],Yz],u=c,d=o*e*2,f=l):i===3&&(u=c*o,d=c*e*3,f=o*l*3,h=e*l);const p={x:u*a[0].x+d*a[1].x+f*a[2].x+h*a[3].x,y:u*a[0].y+d*a[1].y+f*a[2].y+h*a[3].y,t:e};return r&&(p.z=u*a[0].z+d*a[1].z+f*a[2].z+h*a[3].z),p}const s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let c=0;c<s.length-1;c++)s[c]={x:s[c].x+(s[c+1].x-s[c].x)*e,y:s[c].y+(s[c+1].y-s[c].y)*e},typeof s[c].z<"u"&&(s[c].z=s[c].z+(s[c+1].z-s[c].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){const o=1-e,a=r,s=n;let c=a[0],l=a[1],u=a[2],d=a[3],f;if(c*=o,l*=e,s.length===2)return f=c+l,{x:(c*s[0].x+l*s[1].x)/f,y:(c*s[0].y+l*s[1].y)/f,z:i?(c*s[0].z+l*s[1].z)/f:!1,t:e};if(c*=o,l*=2*o,u*=e*e,s.length===3)return f=c+l+u,{x:(c*s[0].x+l*s[1].x+u*s[2].x)/f,y:(c*s[0].y+l*s[1].y+u*s[2].y)/f,z:i?(c*s[0].z+l*s[1].z+u*s[2].z)/f:!1,t:e};if(c*=o,l*=1.5*o,u*=3*o,d*=e*e*e,s.length===4)return f=c+l+u+d,{x:(c*s[0].x+l*s[1].x+u*s[2].x+d*s[3].x)/f,y:(c*s[0].y+l*s[1].y+u*s[2].y+d*s[3].y)/f,z:i?(c*s[0].z+l*s[1].z+u*s[2].z+d*s[3].z)/f:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){const s=[];for(let c=0,l;c<a;c++)l={x:a*(i[c+1].x-i[c].x),y:a*(i[c+1].y-i[c].y)},n&&(l.z=a*(i[c+1].z-i[c].z)),s.push(l);r.push(s),i=s}return r},between:function(e,n,r){return n<=e&&e<=r||X.approximately(e,n)||X.approximately(e,r)},approximately:function(e,n,r){return Qn(e-n)<=(r||Kz)},length:function(e){const r=X.Tvalues.length;let i=0;for(let o=0,a;o<r;o++)a=.5*X.Tvalues[o]+.5,i+=X.Cvalues[o]*X.arcfn(a,e);return .5*i},map:function(e,n,r,i,o){const a=r-n,s=o-i,c=e-n,l=c/a;return i+s*l},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(X.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,c=i*s-o*a,l=i*a+o*s;return er(c,l)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Lt(r*r+i*i)},closest:function(e,n){let r=Je(2,63),i,o;return e.forEach(function(a,s){o=X.dist(n,a),o<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=Je(e,n)+Je(1-e,n),i=r-1;return Qn(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=Je(1-e,n),i=Je(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,c){const l=(e*i-n*r)*(o-s)-(e-r)*(o*c-a*s),u=(e*i-n*r)*(a-c)-(n-i)*(o*c-a*s),d=(e-r)*(a-c)-(n-i)*(o-s);return d==0?!1:{x:l/d,y:u/d}},lli4:function(e,n,r,i){const o=e.x,a=e.y,s=n.x,c=n.y,l=r.x,u=r.y,d=i.x,f=i.y;return X.lli8(o,a,s,c,l,u,d,f)},lli:function(e,n){return X.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new xe(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=Ef,r=Ef,i=kf,o=kf;return e.forEach(function(a){const s=a.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!X.bboxoverlap(n,i))return[];const a=[],s=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(l){l.virtual||c.forEach(function(u){if(u.virtual)return;const d=l.intersects(u,o);d.length>0&&(d.c1=l,d.c2=u,d.s1=e,d.s2=r,a.push(d))})}),a},makeshape:function(e,n,r){const i=n.points.length,o=e.points.length,a=X.makeline(n.points[i-1],e.points[0]),s=X.makeline(e.points[o-1],n.points[0]),c={startcap:a,forward:e,back:n,endcap:s,bbox:X.findbbox([a,e,n,s])};return c.intersections=function(l){return X.shapeintersections(c,c.bbox,l,l.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=Ef,o=kf,a,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,l=r.length;c<l;c++)a=r[c],s=e.get(a),s[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,o=-er(n.p2.y-i,n.p2.x-r),a=function(s){return{x:(s.x-r)*Et(o)-(s.y-i)*Nn(o),y:(s.x-r)*Nn(o)+(s.y-i)*Et(o)}};return e.map(a)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=X.align(e,n),o=function(N){return 0<=N&&N<=1};if(r===2){const N=i[0].y,E=i[1].y,k=i[2].y,R=N-2*E+k;if(R!==0){const A=-Lt(E*E-N*k),P=-N+E,q=-(A+P)/R,M=-(-A+P)/R;return[q,M].filter(o)}else if(E!==k&&R===0)return[(2*E-k)/(2*E-2*k)].filter(o);return[]}const a=i[0].y,s=i[1].y,c=i[2].y,l=i[3].y;let u=-a+3*s-3*c+l,d=3*a-6*s+3*c,f=-3*a+3*s,h=a;if(X.approximately(u,0)){if(X.approximately(d,0))return X.approximately(f,0)?[]:[-h/f].filter(o);const N=Lt(f*f-4*d*h),E=2*d;return[(N-f)/E,(-f-N)/E].filter(o)}d/=u,f/=u,h/=u;const p=(3*f-d*d)/3,y=p/3,x=(2*d*d*d-9*d*f+27*h)/27,v=x/2,m=v*v+y*y*y;let _,b,w,S,C;if(m<0){const N=-p/3,E=N*N*N,k=Lt(E),R=-x/(2*k),A=R<-1?-1:R>1?1:R,P=Wz(A),q=tr(k),M=2*q;return w=M*Et(P/3)-d/3,S=M*Et((P+ii)/3)-d/3,C=M*Et((P+2*ii)/3)-d/3,[w,S,C].filter(o)}else{if(m===0)return _=v<0?tr(-v):-tr(v),w=2*_-d/3,S=-_-d/3,[w,S].filter(o);{const N=Lt(m);return _=tr(-v+N),b=tr(v+N),[_-b-d/3].filter(o)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(o!==0){const a=-Lt(r*r-n*i),s=-n+r,c=-(a+s)/o,l=-(-a+s)/o;return[c,l]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,o){let a,s,c,l,u=0,d=0;const f=X.compute(e,n),h=X.compute(e,r),p=f.x*f.x+f.y*f.y;if(i?(a=Lt(Je(f.y*h.z-h.y*f.z,2)+Je(f.z*h.x-h.z*f.x,2)+Je(f.x*h.y-h.x*f.y,2)),s=Je(p+f.z*f.z,3/2)):(a=f.x*h.y-f.y*h.x,s=Je(p,3/2)),a===0||s===0)return{k:0,r:0};if(u=a/s,d=s/a,!o){const y=X.curvature(e-.001,n,r,i,!0).k,x=X.curvature(e+.001,n,r,i,!0).k;l=(x-u+(u-y))/2,c=(Qn(x-u)+Qn(u-y))/2}return{k:u,r:d,dk:l,adk:c}},inflections:function(e){if(e.length<4)return[];const n=X.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=n[3].x*n[2].y,s=18*(-3*r+2*i+3*o-a),c=18*(3*r-i-3*o),l=18*(o-r);if(X.approximately(s,0)){if(!X.approximately(c,0)){let h=-l/c;if(0<=h&&h<=1)return[h]}return[]}const u=2*s;if(X.approximately(u,0))return[];const d=c*c-4*s*l;if(d<0)return[];const f=Math.sqrt(d);return[(f-c)/u,-(c+f)/u].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let o=0,a,s,c,l;o<i;o++)if(a=r[o],s=e[a].mid,c=n[a].mid,l=(e[a].size+n[a].size)/2,Qn(s-c)>=l)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),o=n.bbox(),a=1e5,s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(n._t1+n._t2)/2|0)/a];let c=e.split(.5),l=n.split(.5),u=[{left:c.left,right:l.left},{left:c.left,right:l.right},{left:c.right,right:l.right},{left:c.right,right:l.left}];u=u.filter(function(f){return X.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return u.length===0||(u.forEach(function(f){d=d.concat(X.pairiteration(f.left,f.right,s))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,c=i*Et($t)-o*Nn($t),l=i*Nn($t)+o*Et($t),u=a*Et($t)-s*Nn($t),d=a*Nn($t)+s*Et($t),f=(e.x+n.x)/2,h=(e.y+n.y)/2,p=(n.x+r.x)/2,y=(n.y+r.y)/2,x=f+c,v=h+l,m=p+u,_=y+d,b=X.lli8(f,h,x,v,p,y,m,_),w=X.dist(b,e);let S=er(e.y-b.y,e.x-b.x),C=er(n.y-b.y,n.x-b.x),N=er(r.y-b.y,r.x-b.x),E;return S<N?((S>C||C>N)&&(S+=ii),S>N&&(E=N,N=S,S=E)):N<C&&C<S?(E=N,N=S,S=E):N+=ii,b.s=S,b.e=N,b.r=w,b},numberSort:function(e,n){return e-n}};class mr{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return X.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)X.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new mr(r)}}const{abs:nr,min:nb,max:rb,cos:Xz,sin:Zz,acos:Jz,sqrt:rr}=Math,Qz=Math.PI;class xe{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(y){["x","y","z"].forEach(function(x){typeof y[x]<"u"&&p.push(y[x])})}),r=p}let o=!1;const a=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!o&&(a===9||a===12)||n&&n[0]&&typeof n[0].z<"u",c=this.points=[];for(let p=0,y=s?3:2;p<a;p+=y){var l={x:r[p],y:r[p+1]};s&&(l.z=r[p+2]),c.push(l)}const u=this.order=c.length-1,d=this.dims=["x","y"];s&&d.push("z"),this.dimlen=d.length;const f=X.align(c,{p1:c[0],p2:c[u]}),h=X.dist(c[0],c[u]);this._linear=f.reduce((p,y)=>p+nr(y.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new xe(r,r,i);if(o===1)return new xe(n,r,r);const a=xe.getABC(2,n,r,i,o);return new xe(n,a.A,i)}static cubicFromPoints(n,r,i,o,a){typeof o>"u"&&(o=.5);const s=xe.getABC(3,n,r,i,o);typeof a>"u"&&(a=X.dist(r,s.C));const c=a*(1-o)/o,l=X.dist(n,i),u=(i.x-n.x)/l,d=(i.y-n.y)/l,f=a*u,h=a*d,p=c*u,y=c*d,x={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+y},m=s.A,_={x:m.x+(x.x-m.x)/(1-o),y:m.y+(x.y-m.y)/(1-o)},b={x:m.x+(v.x-m.x)/o,y:m.y+(v.y-m.y)/o},w={x:n.x+(_.x-n.x)/o,y:n.y+(_.y-n.y)/o},S={x:i.x+(b.x-i.x)/(1-o),y:i.y+(b.y-i.y)/(1-o)};return new xe(n,w,S,i)}static getUtils(){return X}getUtils(){return xe.getUtils()}static get PolyBezier(){return mr}valueOf(){return this.toString()}toString(){return X.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let a=1,s=n.length;a<s;a++)o.push(n[a].x),o.push(n[a].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=X.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=X.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return X.length(this.derivative.bind(this))}static getABC(n=2,r,i,o,a=.5){const s=X.projectionratio(a,n),c=1-s,l={x:s*r.x+c*o.x,y:s*r.y+c*o.y},u=X.abcratio(a,n);return{A:{x:i.x+(i.x-l.x)/u,y:i.y+(i.y-l.y)/u},B:i,C:l,S:r,E:o}}getABC(n,r){r=r||this.get(n);let i=this.points[0],o=this.points[this.order];return xe.getABC(this.order,i,r,o,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,o;r<n;r++)o=r/(n-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),o=[];for(let a=0,s,c=0;a<i.length;a++)s=i[a],X.dist(s,n)<r&&(o.push(s),c+=a/i.length);return o.length?t/=o.length:!1}project(n){const r=this.getLUT(),i=r.length-1,o=X.closest(r,n),a=o.mpos,s=(a-1)/i,c=(a+1)/i,l=.1/i;let u=o.mdist,d=s,f=d,h;u+=1;for(let p;d<c+l;d+=l)h=this.compute(d),p=X.dist(n,h),p<u&&(u=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=u,h}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?X.computeWithRatios(n,this.points,this.ratios,this._3d):X.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let o=1,a,s;o<i;o++)a=n[o],s=n[o-1],r[o]={x:(i-o)/i*a.x+o/i*s.x,y:(i-o)/i*a.y+o/i*s.y};return r[i]=n[i-1],new xe(r)}derivative(n){return X.compute(n,this.dpoints[0],this._3d)}dderivative(n){return X.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new xe(X.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return X.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return X.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=rr(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),o=rr(r.x*r.x+r.y*r.y+r.z*r.z),a=rr(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=a,i.y/=a,i.z/=a;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},c=rr(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=c,s.y/=c,s.z/=c;const l=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:n,x:l[0]*r.x+l[1]*r.y+l[2]*r.z,y:l[3]*r.x+l[4]*r.y+l[5]*r.z,z:l[6]*r.x+l[7]*r.y+l[8]*r.z}}hull(n){let r=this.points,i=[],o=[],a=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],this.order===3&&(o[a++]=r[3]);r.length>1;){i=[];for(let s=0,c,l=r.length-1;s<l;s++)c=X.lerp(n,r[s],r[s+1]),o[a++]=c,i.push(c);r=i}return o}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),o={left:this.order===2?new xe([i[0],i[3],i[5]]):new xe([i[0],i[4],i[7],i[9]]),right:this.order===2?new xe([i[5],i[4],i[2]]):new xe([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=X.map(0,0,1,this._t1,this._t2),o.left._t2=X.map(n,0,1,this._t1,this._t2),o.right._t1=X.map(n,0,1,this._t1,this._t2),o.right._t2=X.map(1,0,1,this._t1,this._t2),r?(r=X.map(r,n,1,0,1),o.right.split(r).left):o}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let o=function(s){return s[i]},a=this.dpoints[0].map(o);n[i]=X.droots(a),this.order===3&&(a=this.dpoints[1].map(o),n[i]=n[i].concat(X.droots(a))),n[i]=n[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(n[i].sort(X.numberSort))}).bind(this)),n.values=r.sort(X.numberSort).filter(function(i,o){return r.indexOf(i)===o}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=X.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return X.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),o=this.normal(n),a={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(a.z=i.z+o.z*r),a}if(this._linear){const i=this.normal(0),o=this.points.map(function(a){const s={x:a.x+n*i.x,y:a.y+n*i.y};return a.z&&i.z&&(s.z=a.z+n*i.z),s});return[new xe(o)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const o=X.angle(this.points[0],this.points[3],this.points[1]),a=X.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&a<0||o<0&&a>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),nr(Jz(i))<Qz/3}reduce(){let n,r=0,i=0,o=.01,a,s=[],c=[],l=this.extrema().values;for(l.indexOf(0)===-1&&(l=[0].concat(l)),l.indexOf(1)===-1&&l.push(1),r=l[0],n=1;n<l.length;n++)i=l[n],a=this.split(r,i),a._t1=r,a._t2=i,s.push(a),r=i;return s.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(a=u.split(r,i),!a.simple()){if(i-=o,nr(r-i)<o)return[];a=u.split(r,i),a._t1=X.map(r,0,1,u._t1,u._t2),a._t2=X.map(i,0,1,u._t1,u._t2),c.push(a),r=i;break}r<1&&(a=u.split(r,1),a._t1=X.map(r,0,1,u._t1,u._t2),a._t2=u._t2,c.push(a))}),c}translate(n,r,i){i=typeof i=="number"?i:r;const o=this.order;let a=this.points.map((s,c)=>(1-c/o)*r+c/o*i);return new xe(this.points.map((s,c)=>({x:s.x+n.x*a[c],y:s.y+n.y*a[c]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const s=i?i(0):n,c=i?i(1):n,l=[this.offset(0,10),this.offset(1,10)],u=[],d=X.lli4(l[0],l[0].c,l[1],l[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=u[f*r]=X.copy(a[f*r]);h.x+=(f?c:s)*l[f].n.x,h.y+=(f?c:s)*l[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=a[f+1],p={x:h.x-d.x,y:h.y-d.y},y=i?i((f+1)/r):n;i&&!o&&(y=-y);var x=rr(p.x*p.x+p.y*p.y);p.x/=x,p.y/=x,u[f+1]={x:h.x+y*p.x,y:h.y+y*p.y}}}),new xe(u)):([0,1].forEach(f=>{if(r===2&&f)return;const h=u[f*r],p=this.derivative(f),y={x:h.x+p.x,y:h.y+p.y};u[f+1]=X.lli4(h,y,d,a[f+1])}),new xe(u))}outline(n,r,i,o){if(r=r===void 0?n:r,this._linear){const S=this.normal(0),C=this.points[0],N=this.points[this.points.length-1];let E,k,R;i===void 0&&(i=n,o=r),E={x:C.x+S.x*n,y:C.y+S.y*n},R={x:N.x+S.x*i,y:N.y+S.y*i},k={x:(E.x+R.x)/2,y:(E.y+R.y)/2};const A=[E,k,R];E={x:C.x-S.x*r,y:C.y-S.y*r},R={x:N.x-S.x*o,y:N.y-S.y*o},k={x:(E.x+R.x)/2,y:(E.y+R.y)/2};const P=[R,k,E],q=X.makeline(P[2],A[0]),M=X.makeline(A[2],P[0]),T=[q,new xe(A),M,new xe(P)];return new mr(T)}const a=this.reduce(),s=a.length,c=[];let l=[],u,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(S,C,N,E,k){return function(R){const A=E/N,P=(E+k)/N,q=C-S;return X.map(R,0,1,S+A*q,S+P*q)}}a.forEach(function(S){const C=S.length();h?(c.push(S.scale(p(n,i,f,d,C))),l.push(S.scale(p(-r,-o,f,d,C)))):(c.push(S.scale(n)),l.push(S.scale(-r))),d+=C}),l=l.map(function(S){return u=S.points,u[3]?S.points=[u[3],u[2],u[1],u[0]]:S.points=[u[2],u[1],u[0]],S}).reverse();const y=c[0].points[0],x=c[s-1].points[c[s-1].points.length-1],v=l[s-1].points[l[s-1].points.length-1],m=l[0].points[0],_=X.makeline(v,y),b=X.makeline(x,m),w=[_].concat(c).concat([b]).concat(l);return new mr(w)}outlineshapes(n,r,i){r=r||n;const o=this.outline(n,r).curves,a=[];for(let s=1,c=o.length;s<c/2;s++){const l=X.makeshape(o[s],o[c-s],i);l.startcap.virtual=s>1,l.endcap.virtual=s<c/2-1,a.push(l)}return a}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof xe&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=nb(n.p1.x,n.p2.x),i=nb(n.p1.y,n.p2.y),o=rb(n.p1.x,n.p2.x),a=rb(n.p1.y,n.p2.y);return X.roots(this.points,n).filter(s=>{var c=this.get(s);return X.between(c.x,r,o)&&X.between(c.y,i,a)})}selfintersects(n){const r=this.reduce(),i=r.length-2,o=[];for(let a=0,s,c,l;a<i;a++)c=r.slice(a,a+1),l=r.slice(a+2),s=this.curveintersects(c,l,n),o.push(...s);return o}curveintersects(n,r,i){const o=[];n.forEach(function(s){r.forEach(function(c){s.overlaps(c)&&o.push({left:s,right:c})})});let a=[];return o.forEach(function(s){const c=X.pairiteration(s.left,s.right,i);c.length>0&&(a=a.concat(c))}),a}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,o){const a=(o-i)/4,s=this.get(i+a),c=this.get(o-a),l=X.dist(n,r),u=X.dist(n,s),d=X.dist(n,c);return nr(u-l)+nr(d-l)}_iterate(n,r){let i=0,o=1,a;do{a=0,o=1;let s=this.get(i),c,l,u,d,f=!1,h=!1,p,y=o,x=1;do if(h=f,d=u,y=(i+o)/2,c=this.get(y),l=this.get(o),u=X.getccenter(s,c,l),u.interval={start:i,end:o},f=this._error(u,s,i,o)<=n,p=h&&!f,p||(x=o),f){if(o>=1){if(u.interval.end=x=1,d=u,o>1){let m={x:u.x+u.r*Xz(u.e),y:u.y+u.r*Zz(u.e)};u.e+=X.angle({x:u.x,y:u.y},m,this.get(1))}break}o=o+(o-i)/2}else o=y;while(!p&&a++<100);if(a>=100)break;d=d||u,r.push(d),i=x}while(o<1);return r}}function ld(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function e4(e){if(Array.isArray(e))return e}function t4(e){if(Array.isArray(e))return ld(e)}function n4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r4(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function i4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a4(e,n){if(e==null)return{};var r,i,o=s4(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s4(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function c4(e,n){return e4(e)||r4(e,n)||MS(e,n)||i4()}function l4(e){return t4(e)||n4(e)||MS(e)||o4()}function u4(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function f4(e){var n=u4(e,"string");return typeof n=="symbol"?n:n+""}function MS(e,n){if(e){if(typeof e=="string")return ld(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ld(e,n):void 0}}var d4=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),a=e.reduce(function(c,l){var u=c,d=l;return o.forEach(function(f,h){var p=f.keyAccessor,y=f.isProp,x;if(y){var v=d,m=v[p],_=a4(v,[p].map(f4));x=m,d=_}else x=p(d,h);h+1<o.length?(u.hasOwnProperty(x)||(u[x]={}),u=u[x]):r?(u.hasOwnProperty(x)||(u[x]=[]),u[x].push(d)):u[x]=d}),c},{});r instanceof Function&&(function c(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===o.length?Object.keys(l).forEach(function(d){return l[d]=r(l[d])}):Object.values(l).forEach(function(d){return c(d,u+1)})})(a);var s=a;return i&&(s=[],(function c(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===o.length?s.push({keys:u,vals:l}):Object.entries(l).forEach(function(d){var f=c4(d,2),h=f[0],p=f[1];return c(p,[].concat(l4(u),[h]))})})(a),n instanceof Array&&n.length===0&&s.length===1&&(s[0].keys=[])),s});function h4(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const ib=Symbol("implicit");function IS(){var e=new Nx,n=[],r=[],i=ib;function o(a){let s=e.get(a);if(s===void 0){if(i!==ib)return i;e.set(a,s=n.push(a)-1)}return r[s%r.length]}return o.domain=function(a){if(!arguments.length)return n.slice();n=[],e=new Nx;for(const s of a)e.has(s)||e.set(s,n.push(s)-1);return o},o.range=function(a){return arguments.length?(r=Array.from(a),o):r.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.copy=function(){return IS(n,r).unknown(i)},h4.apply(o,arguments),o}function p4(e){for(var n=e.length/6|0,r=new Array(n),i=0;i<n;)r[i]="#"+e.slice(i*6,++i*6);return r}const g4=p4("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function m4(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var y4=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;m4(y4);function ud(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function v4(e){if(Array.isArray(e))return e}function x4(e){if(Array.isArray(e))return ud(e)}function ob(e,n,r){if(TS())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var o=new(e.bind.apply(e,i));return o}function Pr(e,n,r){return(n=N4(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function TS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TS=function(){return!!e})()}function b4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _4(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(d){u=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return c}}function w4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ab(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function En(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ab(Object(r),!0).forEach(function(i){Pr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ab(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function yr(e,n){return v4(e)||_4(e,n)||OS(e,n)||w4()}function et(e){return x4(e)||b4(e)||OS(e)||S4()}function C4(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function N4(e){var n=C4(e,"string");return typeof n=="symbol"?n:n+""}function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fd(e)}function OS(e,n){if(e){if(typeof e=="string")return ud(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ud(e,n):void 0}}var E4=IS(g4);function sb(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=E4(n(i))})}function k4(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.nodeFilter,s=a===void 0?function(){return!0}:a,c=o.onLoopError,l=c===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:c,u={};r.forEach(function(p){return u[n(p)]={data:p,out:[],depth:-1,skip:!s(p)}}),i.forEach(function(p){var y=p.source,x=p.target,v=w(y),m=w(x);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var _=u[v],b=u[m];_.out.push(b);function w(S){return fd(S)==="object"?n(S):S}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(et(Object.entries(u).filter(function(p){var y=yr(p,2),x=y[1];return!x.skip}).map(function(p){var y=yr(p,2),x=y[0],v=y[1];return Pr({},x,v.depth)}))));return f;function h(p){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var w=p[m];if(y.indexOf(w)!==-1){var S=[].concat(et(y.slice(y.indexOf(w))),[w]).map(function(C){return n(C.data)});return d.some(function(C){return C.length===S.length&&C.every(function(N,E){return N===S[E]})})||(d.push(S),l(S)),1}x>w.depth&&(w.depth=x,h(w.out,[].concat(et(y),[w]),x+(w.skip?0:1)))},m=0,_=p.length;m<_;m++)v()}}var R4=2,De=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},cb=function(n,r){if(!r.isShadow){var i=me(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var a=Math.round(Math.abs(i(o)));a?o.__photons=et(Array(a)).map(function(){return{}}):delete o.__photons})}},$i=ah({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,cb(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:De},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:De},nodeColor:{default:"color",triggerUpdate:!1,onChange:De},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:De},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:De},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:De},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:De},linkColor:{default:"color",triggerUpdate:!1,onChange:De},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:De},linkWidth:{default:1,triggerUpdate:!1,onChange:De},linkCurvature:{default:0,triggerUpdate:!1,onChange:De},linkCanvasObject:{triggerUpdate:!1,onChange:De},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:De},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:De},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:De},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:De},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:cb},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),o(),!n.isShadow&&a(),!n.isShadow&&s(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var c=me(n.nodeVisibility),l=me(n.nodeVal),u=me(n.nodeColor),d=me(n.nodeCanvasObjectMode),f=n.ctx,h=n.isShadow/n.globalScale,p=n.graphData.nodes.filter(c);f.save(),p.forEach(function(y){var x=d(y);if(n.nodeCanvasObject&&(x==="before"||x==="replace")&&(n.nodeCanvasObject(y,f,n.globalScale),x==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,l(y)||1))*n.nodeRelSize+h;f.beginPath(),f.arc(y.x,y.y,v,0,2*Math.PI,!1),f.fillStyle=u(y)||"rgba(31, 120, 180, 0.92)",f.fill(),n.nodeCanvasObject&&x==="after"&&n.nodeCanvasObject(y,n.ctx,n.globalScale)}),f.restore()}function o(){var c=me(n.linkVisibility),l=me(n.linkColor),u=me(n.linkWidth),d=me(n.linkLineDash),f=me(n.linkCurvature),h=me(n.linkCanvasObjectMode),p=n.ctx,y=n.isShadow*2,x=n.graphData.links.filter(c);x.forEach(C);var v=[],m=[],_=x;if(n.linkCanvasObject){var b=[],w=[];x.forEach(function(N){return({before:v,after:m,replace:b}[h(N)]||w).push(N)}),_=[].concat(et(v),m,w),v=v.concat(b)}p.save(),v.forEach(function(N){return n.linkCanvasObject(N,p,n.globalScale)}),p.restore();var S=d4(_,[l,u,d]);p.save(),Object.entries(S).forEach(function(N){var E=yr(N,2),k=E[0],R=E[1],A=!k||k==="undefined"?"rgba(0,0,0,0.15)":k;Object.entries(R).forEach(function(P){var q=yr(P,2),M=q[0],T=q[1],O=(M||1)/n.globalScale+y;Object.entries(T).forEach(function(H){var F=yr(H,2);F[0];var G=F[1],V=d(G[0]);p.beginPath(),G.forEach(function(W){var K=W.source,D=W.target;if(!(!K||!D||!K.hasOwnProperty("x")||!D.hasOwnProperty("x"))){p.moveTo(K.x,K.y);var I=W.__controlPoints;I?p[I.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,et(I).concat([D.x,D.y])):p.lineTo(D.x,D.y)}}),p.strokeStyle=A,p.lineWidth=O,p.setLineDash(V||[]),p.stroke()})})}),p.restore(),p.save(),m.forEach(function(N){return n.linkCanvasObject(N,p,n.globalScale)}),p.restore();function C(N){var E=f(N);if(!E){N.__controlPoints=null;return}var k=N.source,R=N.target;if(!(!k||!R||!k.hasOwnProperty("x")||!R.hasOwnProperty("x"))){var A=Math.sqrt(Math.pow(R.x-k.x,2)+Math.pow(R.y-k.y,2));if(A>0){var P=Math.atan2(R.y-k.y,R.x-k.x),q=A*E,M={x:(k.x+R.x)/2+q*Math.cos(P-Math.PI/2),y:(k.y+R.y)/2+q*Math.sin(P-Math.PI/2)};N.__controlPoints=[M.x,M.y]}else{var T=E*70;N.__controlPoints=[R.x,R.y-T,R.x+T,R.y]}}}}function a(){var c=1.6,l=.2,u=me(n.linkDirectionalArrowLength),d=me(n.linkDirectionalArrowRelPos),f=me(n.linkVisibility),h=me(n.linkDirectionalArrowColor||n.linkColor),p=me(n.nodeVal),y=n.ctx;y.save(),n.graphData.links.filter(f).forEach(function(x){var v=u(x);if(!(!v||v<0)){var m=x.source,_=x.target;if(!(!m||!_||!m.hasOwnProperty("x")||!_.hasOwnProperty("x"))){var b=Math.sqrt(Math.max(0,p(m)||1))*n.nodeRelSize,w=Math.sqrt(Math.max(0,p(_)||1))*n.nodeRelSize,S=Math.min(1,Math.max(0,d(x))),C=h(x)||"rgba(0,0,0,0.28)",N=v/c/2,E=x.__controlPoints&&ob(xe,[m.x,m.y].concat(et(x.__controlPoints),[_.x,_.y])),k=E?function(O){return E.get(O)}:function(O){return{x:m.x+(_.x-m.x)*O||0,y:m.y+(_.y-m.y)*O||0}},R=E?E.length():Math.sqrt(Math.pow(_.x-m.x,2)+Math.pow(_.y-m.y,2)),A=b+v+(R-b-w-v)*S,P=k(A/R),q=k((A-v)/R),M=k((A-v*(1-l))/R),T=Math.atan2(P.y-q.y,P.x-q.x)-Math.PI/2;y.beginPath(),y.moveTo(P.x,P.y),y.lineTo(q.x+N*Math.cos(T),q.y+N*Math.sin(T)),y.lineTo(M.x,M.y),y.lineTo(q.x-N*Math.cos(T),q.y-N*Math.sin(T)),y.fillStyle=C,y.fill()}}}),y.restore()}function s(){var c=me(n.linkDirectionalParticles),l=me(n.linkDirectionalParticleSpeed),u=me(n.linkDirectionalParticleOffset),d=me(n.linkDirectionalParticleWidth),f=me(n.linkVisibility),h=me(n.linkDirectionalParticleColor||n.linkColor),p=n.ctx;p.save(),n.graphData.links.filter(f).forEach(function(y){var x=c(y);if(!(!y.hasOwnProperty("__photons")||!y.__photons.length)){var v=y.source,m=y.target;if(!(!v||!m||!v.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var _=l(y),b=Math.abs(u(y)),w=y.__photons||[],S=Math.max(0,d(y)/2)/Math.sqrt(n.globalScale),C=h(y)||"rgba(0,0,0,0.28)";p.fillStyle=C;var N=y.__controlPoints?ob(xe,[v.x,v.y].concat(et(y.__controlPoints),[m.x,m.y])):null,E=0,k=!1;w.forEach(function(R){var A=!!R.__singleHop;if(R.hasOwnProperty("__progressRatio")||(R.__progressRatio=A?0:(E+b)/x),!A&&E++,R.__progressRatio+=_,R.__progressRatio>=1)if(!A)R.__progressRatio=R.__progressRatio%1;else{k=!0;return}var P=R.__progressRatio,q=N?N.get(P):{x:v.x+(m.x-v.x)*P||0,y:v.y+(m.y-v.y)*P||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(q.x,q.y,y,p,n.globalScale):(p.beginPath(),p.arc(q.x,q.y,S,0,2*Math.PI,!1),p.fill())}),k&&(y.__photons=y.__photons.filter(function(R){return!R.__singleHop||R.__progressRatio<=1}))}}}),p.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Vz().force("link",qz()).force("charge",Gz()).force("center",zD()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&sb(n.graphData.nodes,me(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&sb(n.graphData.links,me(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(h){h.source=h[n.linkSource],h.target=h[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(h){return h[n.nodeId]}).links(n.graphData.links);var o=n.dagMode&&k4(n.graphData,function(h){return h[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),a=Math.max.apply(Math,et(Object.values(o||[]))),s=n.dagLevelDistance||n.graphData.nodes.length/(a||1)*R4*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return delete h[c]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var l=["rl","bu"].includes(n.dagMode),u=function(p){return(o[p[n.nodeId]]-a/2)*s*(l?-1:1)},d=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return h[d]=u(h)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?Uz(function(h){var p=o[h[n.nodeId]]||-1;return(n.dagMode==="radialin"?a-p:p)*s}).strength(function(h){return n.dagNodeFilter(h)?1:0}):null);for(var f=0;f<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);f++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function qS(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(c,l){r.forEach(function(u){return l[u][a](c)})},triggerUpdate:!1}},linkMethod:function(a){return function(s){for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];var d=[];return r.forEach(function(f){var h=s[f],p=h[a].apply(h,l);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var A4=800,j4=4,P4=5,DS=qS("forceGraph",$i),M4=qS(["forceGraph","shadowGraph"],$i),I4=Object.assign.apply(Object,et(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Pr({},e,DS.linkProp(e))})).concat(et(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Pr({},e,M4.linkProp(e))})))),T4=Object.assign.apply(Object,et(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Pr({},e,DS.linkMethod(e))})));function Rf(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!n&&!r&&a.getContext("2d").scale(i,i)});var o=it(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function zS(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function lb(e,n,r){e.save(),zS(e),e.clearRect(0,0,n,r),e.restore()}var O4=ah({props:En({width:{default:window.innerWidth,onChange:function(n,r){return Rf(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return Rf(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(o){return(o||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(o){var a=o.type,s=o.objs;s.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var l=r.colorTracker.lookup(c.__indexColor);return!l||!l.hasOwnProperty("d")||l.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:a,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},I4),aliases:{stopAnimation:"pauseAnimation"},methods:En({graph2ScreenCoords:function(n,r,i){var o=it(n.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(n,r,i){var o=it(n.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(n,r,i,o){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var a=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?n.tweenGroup.add(new Mx(s()).to(a,o).easing(un.Quadratic.Out).onUpdate(c).start()):c(a),this}return s();function s(){var l=it(n.canvas);return{x:(n.width/2-l.x)/l.k,y:(n.height/2-l.y)/l.k}}function c(l){var u=l.x,d=l.y;n.zoom.translateTo(n.zoom.__baseElem,u===void 0?s().x:u,d===void 0?s().y:d),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new Mx({k:o()}).to({k:r},i).easing(un.Quadratic.Out).onUpdate(function(s){var c=s.k;return a(c)}).start()):a(r),this;return o();function o(){return it(n.canvas).k}function a(s){n.zoom.scaleTo(n.zoom.__baseElem,s),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var c=this.getGraphBbox.apply(this,a);if(c){var l={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(c.x[1]-c.x[0]),(n.height-i*2)/(c.y[1]-c.y[0])));this.centerAt(l.x,l.y,r),this.zoom(u,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=me(n.nodeVal),o=function(c){return Math.sqrt(Math.max(0,i(c)||1))*n.nodeRelSize},a=n.graphData.nodes.filter(r).map(function(s){return{x:s.x,y:s.y,r:o(s)}});return a.length?{x:[Rx(a,function(s){return s.x-s.r}),kx(a,function(s){return s.x+s.r})],y:[Rx(a,function(s){return s.y-s.r}),kx(a,function(s){return s.y+s.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},T4),stateInit:function(){return{lastSetZoom:1,zoom:Rd(),forceGraph:new $i,shadowGraph:new $i().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new mD,tweenGroup:new aS}},init:function(n,r){var i=this;n.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",n.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var a=r.canvas.getContext("2d"),s=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},l=function(){var f=null,h=window.devicePixelRatio,p=c.x>0&&c.y>0?s.getImageData(c.x*h,c.y*h,1,1):null;return p&&(f=r.colorTracker.lookup(p.data)),f};ze(r.canvas).call(_d().subject(function(){if(!r.enableNodeDrag)return null;var d=l();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var f=d.subject;f.__initialDragPos={x:f.x,y:f.y,fx:f.fx,fy:f.fy},d.active||(f.fx=f.x,f.fy=f.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var f=d.subject,h=f.__initialDragPos,p=d,y=it(r.canvas).k,x={x:h.x+(p.x-h.x)/y-f.x,y:h.y+(p.y-h.y)/y-f.y};["x","y"].forEach(function(v){return f["f".concat(v)]=f[v]=h[v]+(p[v]-h[v])/y}),!(!f.__dragged&&P4>=Math.sqrt(X5(["x","y"].map(function(v){return Math.pow(d[v]-h[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,f.__dragged=!0,r.onNodeDrag(f,x))}).on("end",function(d){var f=d.subject,h=f.__initialDragPos,p={x:f.x-h.x,y:f.y-h.y};h.fx===void 0&&(f.fx=void 0),h.fy===void 0&&(f.fy=void 0),delete f.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,p))})),r.zoom(r.zoom.__baseElem=ze(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||me(r.enableZoomInteraction)(d))&&(d.type==="wheel"||me(r.enablePanInteraction)(d))}).on("zoom",function(d){var f=d.transform;[a,s].forEach(function(h){zS(h),h.translate(f.x,f.y),h.scale(f.k,f.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(En(En({},f),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(En(En({},d.transform),i.centerAt()))}),Rf(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){it(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=j4/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new DD(o),["pointermove","pointerdown"].forEach(function(d){return o.addEventListener(d,function(f){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=f),!r.isPointerDragging&&f.type==="pointermove"&&r.onBackgroundClick&&(f.pressure>0||r.isPointerPressed)&&(f.pointerType==="mouse"||f.movementX===void 0||[f.movementX,f.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var h=p(o);c.x=f.pageX-h.left,c.y=f.pageY-h.top;function p(y){var x=y.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,m=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+m,left:x.left+v}}},{passive:!0})}),o.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var f=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var h=r["on".concat(r.hoverObj.type,"Click")];h&&h.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,f);if(d.button===2)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"RightClick")];p&&p.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,f)})}},{passive:!0}),o.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(a),r.shadowGraph(s);var u=Sq(function(){lb(s,r.width,r.height),r.shadowGraph.linkWidth(function(f){return me(r.linkWidth)(f)+r.linkHoverPrecision});var d=it(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},A4);r.flushShadowCanvas=u.flush,(this._animationCycle=function d(){var f=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(b){return b.__photons&&b.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var h=r.isPointerDragging?null:l();if(h!==r.hoverObj){var p=r.hoverObj,y=p?p.type:null,x=h?h.type:null;if(y&&y!==x){var v=r["on".concat(y,"Hover")];v&&v(null,p.d)}if(x){var m=r["on".concat(x,"Hover")];m&&m(h.d,y===x?p.d:null)}r.tooltip.content(h&&me(r["".concat(h.type.toLowerCase(),"Label")])(h.d)||null),r.canvas.classList[(h&&r["on".concat(x,"Click")]||!h&&r.onBackgroundClick)&&me(r.showPointerCursor)(h?.d)?"add":"remove"]("clickable"),r.hoverObj=h}f&&u()}if(f){lb(a,r.width,r.height);var _=it(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(a,_),r.forceGraph.globalScale(_).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(a,_)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(n){}}),Af={exports:{}},jf,ub;function q4(){if(ub)return jf;ub=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return jf=e,jf}var Pf,fb;function D4(){if(fb)return Pf;fb=1;var e=q4();function n(){}function r(){}return r.resetWarningCache=n,Pf=function(){function i(s,c,l,u,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function o(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},Pf}var db;function z4(){return db||(db=1,Af.exports=D4()()),Af.exports}var L4=z4();const $=hd(L4),Po={width:$.number,height:$.number,graphData:$.shape({nodes:$.arrayOf($.object).isRequired,links:$.arrayOf($.object).isRequired}),backgroundColor:$.string,nodeRelSize:$.number,nodeId:$.string,nodeLabel:$.oneOfType([$.string,$.func]),nodeVal:$.oneOfType([$.number,$.string,$.func]),nodeVisibility:$.oneOfType([$.bool,$.string,$.func]),nodeColor:$.oneOfType([$.string,$.func]),nodeAutoColorBy:$.oneOfType([$.string,$.func]),onNodeHover:$.func,onNodeClick:$.func,linkSource:$.string,linkTarget:$.string,linkLabel:$.oneOfType([$.string,$.func]),linkVisibility:$.oneOfType([$.bool,$.string,$.func]),linkColor:$.oneOfType([$.string,$.func]),linkAutoColorBy:$.oneOfType([$.string,$.func]),linkWidth:$.oneOfType([$.number,$.string,$.func]),linkCurvature:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowLength:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowColor:$.oneOfType([$.string,$.func]),linkDirectionalArrowRelPos:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticles:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleSpeed:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleOffset:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleWidth:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleColor:$.oneOfType([$.string,$.func]),onLinkHover:$.func,onLinkClick:$.func,dagMode:$.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:$.number,dagNodeFilter:$.func,onDagError:$.func,d3AlphaMin:$.number,d3AlphaDecay:$.number,d3VelocityDecay:$.number,warmupTicks:$.number,cooldownTicks:$.number,cooldownTime:$.number,onEngineTick:$.func,onEngineStop:$.func,getGraphBbox:$.func},LS={zoomToFit:$.func,onNodeRightClick:$.func,onNodeDrag:$.func,onNodeDragEnd:$.func,onLinkRightClick:$.func,linkHoverPrecision:$.number,onBackgroundClick:$.func,onBackgroundRightClick:$.func,showPointerCursor:$.oneOfType([$.bool,$.func]),enablePointerInteraction:$.bool,enableNodeDrag:$.bool},ph={showNavInfo:$.bool,nodeOpacity:$.number,nodeResolution:$.number,nodeThreeObject:$.oneOfType([$.object,$.string,$.func]),nodeThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),nodePositionUpdate:$.func,linkOpacity:$.number,linkResolution:$.number,linkCurveRotation:$.oneOfType([$.number,$.string,$.func]),linkMaterial:$.oneOfType([$.object,$.string,$.func]),linkThreeObject:$.oneOfType([$.object,$.string,$.func]),linkThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),linkPositionUpdate:$.func,linkDirectionalArrowResolution:$.number,linkDirectionalParticleResolution:$.number,linkDirectionalParticleThreeObject:$.oneOfType([$.object,$.string,$.func]),forceEngine:$.oneOf(["d3","ngraph"]),ngraphPhysics:$.object,numDimensions:$.oneOf([1,2,3])},$4=Object.assign({},Po,LS,{linkLineDash:$.oneOfType([$.arrayOf($.number),$.string,$.func]),nodeCanvasObjectMode:$.oneOfType([$.string,$.func]),nodeCanvasObject:$.func,nodePointerAreaPaint:$.func,linkCanvasObjectMode:$.oneOfType([$.string,$.func]),linkCanvasObject:$.func,linkPointerAreaPaint:$.func,linkDirectionalParticleCanvasObject:$.func,autoPauseRedraw:$.bool,minZoom:$.number,maxZoom:$.number,enableZoomInteraction:$.oneOfType([$.bool,$.func]),enablePanInteraction:$.oneOfType([$.bool,$.func]),onZoom:$.func,onZoomEnd:$.func,onRenderFramePre:$.func,onRenderFramePost:$.func});Object.assign({},Po,LS,ph,{enableNavigationControls:$.bool,controlType:$.oneOf(["trackball","orbit","fly"]),rendererConfig:$.object,extraRenderers:$.arrayOf($.shape({render:$.func.isRequired}))});Object.assign({},Po,ph,{nodeDesc:$.oneOfType([$.string,$.func]),linkDesc:$.oneOfType([$.string,$.func])});Object.assign({},Po,ph,{markerAttrs:$.object,yOffset:$.number,glScale:$.number});const Mo=U5(O4,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Mo.displayName="ForceGraph2D";Mo.propTypes=$4;const $S={"":"#6366f1",School:"#22d3ee",Clinical:"#f472b6",Research:"#a78bfa",Personal:"#34d399"};function hb(e){const n=e.split("/")[0];return $S[n]||"#6366f1"}function F4({onNodeClick:e}){const n=j.useRef(null),r=j.useRef(),[i,o]=j.useState({nodes:[],links:[]}),[a,s]=j.useState(!0),[c,l]=j.useState(null),[u,d]=j.useState(null),[f,h]=j.useState(null),[p,y]=j.useState(1),[x,v]=j.useState(new Set),[m,_]=j.useState(!1);j.useEffect(()=>{const R=n.current;if(!R)return;const A=()=>{const q=R.getBoundingClientRect();d({width:Math.max(1,Math.floor(q.width)-2),height:Math.max(1,Math.floor(q.height)-2)})};A();const P=new ResizeObserver(A);return P.observe(R),()=>P.disconnect()},[]),j.useEffect(()=>{let R=!1;return s(!0),he.obsidian.getGraph().then(A=>{R||(A.success?o({nodes:A.nodes,links:A.links}):l("Failed to load graph data"),s(!1))}).catch(()=>{R||(l("Network error loading graph"),s(!1))}),()=>{R=!0}},[]);const b=j.useMemo(()=>{const R=new Set;for(const A of i.nodes){const P=A.folder?.split("/")[0]||"(root)";R.add(P)}return Array.from(R).sort()},[i.nodes]);j.useEffect(()=>{b.length>0&&!m&&(_(!0),v(new Set(b)))},[b,m]);const w=j.useMemo(()=>{if(x.size===0||x.size===b.length)return i;const R=new Set,A=i.nodes.filter(q=>{const M=q.folder?.split("/")[0]||"(root)",T=x.has(M);return T&&R.add(q.id),T}),P=i.links.filter(q=>{const M=typeof q.source=="string"?q.source:q.source.id,T=typeof q.target=="string"?q.target:q.target.id;return R.has(M)&&R.has(T)});return{nodes:A,links:P}},[i,x,b.length]),S=R=>{v(A=>{const P=new Set(A);return P.has(R)?P.delete(R):P.add(R),P})},C=j.useCallback(R=>{e?.(R.name)},[e]),N=j.useCallback(R=>{const A=Math.max(.1,Math.min(10,R));y(A);const P=r.current;P?.zoom&&P.zoom(A,200)},[]),E=j.useCallback((R,A,P)=>{const q=R.name,M=Math.max(10/P,2),T=Math.max(4,3+w.links.filter(F=>(typeof F.source=="string"?F.source:F.source.id)===R.id||(typeof F.target=="string"?F.target:F.target.id)===R.id).length*.5),O=hb(R.folder),H=f?.id===R.id;A.beginPath(),A.arc(R.x||0,R.y||0,T,0,2*Math.PI),A.fillStyle=H?"#ffffff":O,A.fill(),(H||P>1.5)&&(A.font=`${M}px monospace`,A.textAlign="center",A.textBaseline="top",A.fillStyle="rgba(255,255,255,0.9)",A.fillText(q,R.x||0,(R.y||0)+T+2))},[w.links,f]),k=!a&&!c&&u;return g.jsxs("div",{className:"flex h-full",children:[g.jsx("div",{className:"w-[180px] shrink-0 border-r border-secondary/30 bg-black/60",children:g.jsx(an,{className:"h-full",children:g.jsxs("div",{className:"p-3 space-y-3",children:[g.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"FOLDERS"}),g.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[g.jsx(Bt,{checked:x.size===b.length,onCheckedChange:R=>{v(R?new Set(b):new Set)},className:"border-primary data-[state=checked]:bg-primary"}),g.jsx("span",{className:"font-terminal text-xs text-primary",children:"All Folders"})]}),b.map(R=>g.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[g.jsx(Bt,{checked:x.has(R),onCheckedChange:()=>S(R),className:"border-primary data-[state=checked]:bg-primary"}),g.jsx("span",{className:"font-terminal text-xs truncate",style:{color:hb(R==="(root)"?"":R)},children:R})]},R)),g.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[g.jsx("div",{className:"font-arcade text-[10px] text-muted-foreground mb-1",children:"COLORS"}),Object.entries($S).filter(([R])=>R).map(([R,A])=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:A}}),g.jsx("span",{className:"font-terminal text-[10px]",style:{color:A},children:R})]},R))]}),g.jsxs("div",{className:"pt-2 border-t border-secondary/30 font-terminal text-[10px] text-muted-foreground",children:[g.jsxs("div",{children:["Notes: ",w.nodes.length]}),g.jsxs("div",{children:["Links: ",w.links.length]})]})]})})}),g.jsxs("div",{ref:n,className:"flex-1 relative bg-black/80 rounded border border-primary/30 overflow-hidden",children:[a&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-terminal z-10",children:g.jsx("div",{className:"animate-pulse",children:"SCANNING VAULT CONNECTIONS..."})}),c&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-400 font-terminal z-10",children:c}),k&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"absolute top-2 left-2 right-2 z-10 flex items-center justify-between pointer-events-none",children:[g.jsx("div",{className:"flex items-center gap-2 pointer-events-auto",children:g.jsx("button",{onClick:()=>{r.current?.zoomToFit?.(400,40),setTimeout(()=>{const R=r.current;R?.zoom&&y(R.zoom())},450)},className:"px-2 py-0.5 text-xs font-terminal bg-primary/20 border border-primary/40 text-primary hover:bg-primary/30 rounded-none",children:"CENTER"})}),g.jsxs("div",{className:"flex items-center gap-1.5 pointer-events-auto bg-black/70 border border-primary/30 rounded-none px-2 py-1",children:[g.jsx("button",{onClick:()=>N(p/1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"-"}),g.jsx("input",{type:"range",min:-2.3,max:2.3,step:.01,value:Math.log(p),onChange:R=>N(Math.exp(parseFloat(R.target.value))),className:"w-24 h-1 accent-primary cursor-pointer"}),g.jsx("button",{onClick:()=>N(p*1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"+"}),g.jsxs("span",{className:"text-[10px] font-terminal text-primary/50 w-8 text-right",children:[Math.round(p*100),"%"]})]})]}),g.jsx(Mo,{ref:r,graphData:w,width:u.width,height:u.height,nodeCanvasObject:E,nodePointerAreaPaint:(R,A,P)=>{P.beginPath(),P.arc(R.x||0,R.y||0,6,0,2*Math.PI),P.fillStyle=A,P.fill()},onNodeClick:C,onNodeHover:R=>h(R),onZoom:({k:R})=>y(R),linkColor:()=>"rgba(99, 102, 241, 0.15)",linkWidth:.5,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.02,d3VelocityDecay:.3})]})]})]})}const H4={course:"#22d3ee",module:"#facc15",lo:"#4ade80"},B4={course:"rgba(34,211,238,0.15)",module:"rgba(250,204,21,0.12)",lo:"rgba(74,222,128,0.08)"};function V4(){const e=j.useRef(null),n=j.useRef(null),r=j.useRef(!1),[i,o]=j.useState(null),[a,s]=j.useState(new Set),[c,l]=j.useState(new Set),[u,d]=j.useState(!0),[f,h]=j.useState(null),{data:p=[]}=Me({queryKey:["courses"],queryFn:()=>he.courses.getActive()}),y=p.map(E=>E.id).sort(),{data:x=[]}=Me({queryKey:["modules","all",y],queryFn:async()=>(await Promise.all(p.map(k=>he.modules.getByCourse(k.id)))).flat(),enabled:p.length>0}),{data:v=[]}=Me({queryKey:["learningObjectives","all",y,u],queryFn:async()=>(await Promise.all(p.map(k=>he.learningObjectives.getByCourse(k.id)))).flat(),enabled:p.length>0&&u});j.useEffect(()=>{const E=e.current;if(!E)return;const k=()=>{const A=E.getBoundingClientRect();o({width:Math.max(1,Math.floor(A.width)-2),height:Math.max(1,Math.floor(A.height)-2)})};k();const R=new ResizeObserver(k);return R.observe(E),()=>R.disconnect()},[]),j.useEffect(()=>{p.length>0&&!r.current&&(r.current=!0,s(new Set(p.map(E=>E.id))))},[p]);const m=j.useMemo(()=>{const E=[],k=[],R=new Map;for(const P of x){const q=R.get(P.courseId)??[];q.push(P),R.set(P.courseId,q)}const A=new Map;for(const P of v){const q=A.get(P.moduleId)??[];q.push(P),A.set(P.moduleId,q)}for(const P of p){if(!a.has(P.id))continue;const q=`course-${P.id}`;E.push({id:q,name:P.name,type:"course"});const M=R.get(P.id)??[];for(const T of M){if(c.size>0&&!c.has(T.id))continue;const O=`module-${T.id}`;if(E.push({id:O,name:T.name,type:"module"}),k.push({source:q,target:O}),u){const H=A.get(T.id)??[];for(const F of H){const G=`lo-${F.id}`;E.push({id:G,name:`${F.loCode}: ${F.title}`,type:"lo"}),k.push({source:O,target:G})}}}}return{nodes:E,links:k}},[p,x,v,a,c,u]),_=E=>{s(k=>{const R=new Set(k);return R.has(E)?R.delete(E):R.add(E),R})},b=E=>{l(k=>{const R=new Set(k);return R.has(E)?R.delete(E):R.add(E),R})},w=j.useCallback((E,k,R)=>{const A=H4[E.type]||"#6366f1",P=B4[E.type]||"rgba(99,102,241,0.1)",q=f===E.id,M=E.x||0,T=E.y||0,O=E.type==="course"?14:E.type==="module"?11:9,H=Math.max(O/R,2);k.font=`${E.type==="course"?"bold ":""}${H}px monospace`;const F=E.type==="lo"?50:35,G=E.name.length>F?E.name.slice(0,F)+"...":E.name,V=k.measureText(G).width,W=8/R,K=5/R,D=V+W*2,I=H+K*2,z=4/R;k.beginPath(),k.roundRect(M-D/2,T-I/2,D,I,z),k.fillStyle=q?A:P,k.fill(),k.strokeStyle=q?"#ffffff":A,k.lineWidth=(E.type==="course"?2:1)/R,k.stroke(),k.textAlign="center",k.textBaseline="middle",k.fillStyle=q?"#000000":A,k.fillText(G,M,T)},[f]),S=j.useCallback((E,k,R,A)=>{const P=E.x||0,q=E.y||0,T=(E.type==="course"?60:E.type==="module"?45:30)/A;R.fillStyle=k,R.fillRect(P-T/2,q-T/2,T,T)},[]),C=j.useCallback((E,k,R)=>{const A=E.source,P=E.target;if(!A||!P)return;const q=A.x||0,M=A.y||0,T=P.x||0,O=P.y||0,H=(q+T)/2,F=(M+O)/2,G=T-q,V=O-M,W=H-V*.15,K=F+G*.15;k.beginPath(),k.moveTo(q,M),k.quadraticCurveTo(W,K,T,O),k.strokeStyle="rgba(148, 163, 184, 0.25)",k.lineWidth=Math.max(1.5/R,.3),k.stroke()},[]),N=x.filter(E=>a.has(E.courseId));return g.jsxs("div",{className:"flex h-full",children:[g.jsx("div",{className:"w-[220px] shrink-0 border-r border-secondary/30 bg-black/60",children:g.jsx(an,{className:"h-full",children:g.jsxs("div",{className:"p-3 space-y-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"COURSES"}),p.map(E=>g.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[g.jsx(Bt,{checked:a.has(E.id),onCheckedChange:()=>_(E.id),className:"border-cyan-500 data-[state=checked]:bg-cyan-500"}),g.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:E.name})]},E.id))]}),N.length>0&&g.jsxs("div",{children:[g.jsx("div",{className:"font-arcade text-[10px] text-yellow-400 mb-2",children:"MODULES"}),g.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer mb-1",children:[g.jsx(Bt,{checked:c.size===0,onCheckedChange:()=>l(new Set),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),g.jsx("span",{className:"font-terminal text-xs text-yellow-200",children:"All Modules"})]}),N.map(E=>g.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[g.jsx(Bt,{checked:c.size===0||c.has(E.id),onCheckedChange:()=>b(E.id),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),g.jsx("span",{className:"font-terminal text-[10px] text-yellow-100 truncate",children:E.name})]},E.id))]}),g.jsx("div",{children:g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx(Bt,{checked:u,onCheckedChange:E=>d(!!E),className:"border-green-500 data-[state=checked]:bg-green-500"}),g.jsx("span",{className:"font-terminal text-xs text-green-300",children:"Show Learning Objectives"})]})}),g.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[g.jsx("div",{className:"font-arcade text-[10px] text-muted-foreground mb-1",children:"LEGEND"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm border-2 border-cyan-400 bg-cyan-400/15"}),g.jsx("span",{className:"font-terminal text-[10px] text-cyan-300",children:"Course"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm border border-yellow-400 bg-yellow-400/12"}),g.jsx("span",{className:"font-terminal text-[10px] text-yellow-300",children:"Module"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-sm border border-green-400 bg-green-400/8"}),g.jsx("span",{className:"font-terminal text-[10px] text-green-300",children:"Learning Objective"})]})]}),g.jsxs("div",{className:"pt-2 border-t border-secondary/30 font-terminal text-[10px] text-muted-foreground",children:[g.jsxs("div",{children:["Nodes: ",m.nodes.length]}),g.jsxs("div",{children:["Links: ",m.links.length]})]})]})})}),g.jsxs("div",{ref:e,className:"flex-1 relative bg-black/80 overflow-hidden",children:[i&&m.nodes.length>0&&g.jsx(Mo,{ref:n,graphData:m,width:i.width,height:i.height,dagMode:"lr",dagLevelDistance:120,nodeCanvasObject:w,nodePointerAreaPaint:S,linkCanvasObject:C,onNodeHover:E=>h(E?.id??null),linkColor:()=>"transparent",linkWidth:0,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.025,d3VelocityDecay:.35}),m.nodes.length===0&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-terminal text-xs text-muted-foreground",children:"Select courses to build mind map"})]})]})}class G4 extends j.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(n){return{error:n.message}}render(){return this.state.error?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2 p-4",children:[g.jsx("p",{className:"font-arcade text-[10px] text-red-400",children:"GRAPH RENDER ERROR"}),g.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground text-center",children:this.state.error}),g.jsx("button",{className:"font-terminal text-xs text-primary underline",onClick:()=>this.setState({error:null}),children:"Try again"})]}):this.props.children}}function U4({workspace:e}){const[n,r]=j.useState("vault");return g.jsxs(g.Fragment,{children:[g.jsx(di,{open:e.importOpen,onOpenChange:e.setImportOpen,children:g.jsxs(hi,{"data-modal":"brain-import",className:"max-w-2xl bg-black border-2 border-primary rounded-none",children:[g.jsxs(pi,{children:[g.jsxs(gi,{className:"font-arcade text-sm text-primary flex items-center gap-2",children:[g.jsx(Ui,{className:"w-4 h-4"}),"IMPORT / INGEST"]}),g.jsx(mi,{className:"font-terminal text-xs text-muted-foreground",children:"Import study materials, JSON session data, or documents into the system."})]}),g.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:g.jsx(k5,{})})]})}),g.jsx(di,{open:e.graphOpen,onOpenChange:e.setGraphOpen,children:g.jsxs(hi,{"data-modal":"brain-graph",className:"max-w-[95vw] w-full h-[85vh] bg-black border-2 border-primary rounded-none p-0",children:[g.jsxs(pi,{className:"p-3 border-b border-primary/30",children:[g.jsxs(gi,{className:"font-arcade text-sm text-primary flex items-center gap-2",children:[g.jsx(Cb,{className:"w-4 h-4"}),"KNOWLEDGE GRAPH",g.jsxs("div",{className:"flex items-center gap-0 ml-4 bg-secondary/20 border border-secondary/40 rounded-none overflow-hidden",children:[g.jsx("button",{onClick:()=>r("vault"),className:`px-3 py-1 font-arcade text-[10px] transition-colors ${n==="vault"?"bg-primary text-black":"text-muted-foreground"}`,children:"VAULT"}),g.jsx("button",{onClick:()=>r("mindmap"),className:`px-3 py-1 font-arcade text-[10px] transition-colors ${n==="mindmap"?"bg-primary text-black":"text-muted-foreground"}`,children:"MIND MAP"})]})]}),g.jsx(mi,{className:"font-terminal text-xs text-muted-foreground",children:"Visualize connections between your vault notes and study topics."})]}),g.jsx("div",{className:"flex-1 min-h-0 h-[calc(85vh-80px)]",children:g.jsx(G4,{children:n==="vault"?g.jsx(F4,{}):g.jsx(V4,{})})})]})})]})}function cL(){const e=_N(),[n,r]=j.useState("editor");return g.jsx(WC,{children:g.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] min-w-0 overflow-hidden",children:[g.jsx(wN,{workspace:e}),g.jsx("div",{className:"hidden lg:flex flex-1 min-h-0",children:g.jsxs(bN,{direction:"horizontal",autoSaveId:"brain-workspace",className:"h-full",children:[g.jsx(Bo,{defaultSize:20,minSize:12,maxSize:35,children:g.jsx("div",{className:"h-full border-r border-primary/30 bg-black/30",children:g.jsx(zh,{workspace:e})})}),g.jsx(Th,{withHandle:!0}),g.jsx(Bo,{defaultSize:50,minSize:30,children:g.jsx("div",{className:"h-full border-r border-primary/30",children:g.jsx(Fh,{workspace:e})})}),g.jsx(Th,{withHandle:!0}),g.jsx(Bo,{defaultSize:30,minSize:15,maxSize:45,children:g.jsx("div",{className:"h-full",children:g.jsx(_x,{workspace:e})})})]})}),g.jsxs("div",{className:"flex flex-col flex-1 min-h-0 lg:hidden",children:[g.jsxs("div",{className:"flex-1 min-h-0 overflow-auto",children:[n==="vault"&&g.jsx(zh,{workspace:e}),n==="editor"&&g.jsx(Fh,{workspace:e}),n==="tools"&&g.jsx(_x,{workspace:e})]}),g.jsxs("div",{className:"flex items-center border-t-2 border-primary/50 bg-black/80 shrink-0",children:[g.jsxs("button",{onClick:()=>r("vault"),className:`flex-1 flex flex-col items-center gap-0.5 py-2 text-[9px] font-terminal transition-colors ${n==="vault"?"text-primary":"text-muted-foreground"}`,children:[g.jsx(vb,{className:"w-4 h-4"}),"Vault"]}),g.jsxs("button",{onClick:()=>r("editor"),className:`flex-1 flex flex-col items-center gap-0.5 py-2 text-[9px] font-terminal transition-colors ${n==="editor"?"text-primary":"text-muted-foreground"}`,children:[g.jsx(yi,{className:"w-4 h-4"}),"Editor"]}),g.jsxs("button",{onClick:()=>r("tools"),className:`flex-1 flex flex-col items-center gap-0.5 py-2 text-[9px] font-terminal transition-colors ${n==="tools"?"text-primary":"text-muted-foreground"}`,children:[g.jsx(On,{className:"w-4 h-4"}),"Tools"]})]})]}),g.jsx(U4,{workspace:e})]})})}export{cL as default};
