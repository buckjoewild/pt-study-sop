import{c as je,r as j,R as cb,j as m,b as Ke,f as O2,a as ub,P as Oi,u as od,g as q2,h as D2,d as qi,X as Ef,i as z2,k as L2,l as ad,m as lb,n as Gr,e as Di}from"./index-BXuiyTYN.js";import{q as $2,u as ke,p as pe,B as fe,I as Cn,S as nn,r as F2,f as sd,h as cd,i as ud,j as ld,k as fd,o as Nf,s as zi,t as kf,m as yr,e as Rt,n as Ro,l as fi,v as H2,L as B2}from"./layout-7PdAu0MB.js";import{B as di}from"./badge-CRfATWdL.js";import{C as V2}from"./circle-check-BtK4CF-M.js";import{C as fb}from"./circle-DQ9XGNwa.js";import{A as G2,S as U2}from"./star-D9gY14WS.js";import{F as db,M as W2,r as K2,D as Y2}from"./index-CebIAvJU.js";import{S as X2,R as Ao}from"./search-B7KVAQsR.js";import{F as Li}from"./file-text-463gNGSf.js";import{C as Z2,S as J2,a as Q2,b as eC,c as tC,d as Yt}from"./select-DaNEfikt.js";import{C as nC,u as rC}from"./index-X1CQgm3T.js";import{C as Ht}from"./checkbox-c6Y6TXcX.js";import{c as hb,R as iC,I as oC,T as aC,a as sC,b as jo,d as Po,C as cC,L as vr}from"./tabs-Dzy5fu2P.js";import{M as pb}from"./message-square-D3lI-vcK.js";import{L as gb}from"./loader-circle-OaBLjxG6.js";import{S as uC}from"./send-CqwRm2eU.js";import{E as lC}from"./external-link-DJWTkE1s.js";import{P as hi}from"./plus-BKK0yt1h.js";import{C as En,a as Nn,b as kn,c as Rn}from"./card-CTx1CiD2.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],dC=je("arrow-left-right",fC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],mb=je("arrow-left",hC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],gC=je("arrow-up-down",pC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],yC=je("brain-circuit",mC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],_h=je("calendar-days",vC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],bC=je("columns-2",xC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wC=je("copy",_C);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$i=je("download",SC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],EC=je("file",CC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],kC=je("folder",NC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],AC=je("image",RC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],wh=je("import",jC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],MC=je("layout-grid",PC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],yb=je("maximize-2",IC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],vb=je("minimize-2",TC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],qC=je("network",OC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],zC=je("palette",DC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]],$C=je("rows-2",LC);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],HC=je("table-2",FC),Fi=j.createContext(null);Fi.displayName="PanelGroupContext";const Ee={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},dd=10,rn=j.useLayoutEffect,Sh=cb.useId,BC=typeof Sh=="function"?Sh:()=>null;let VC=0;function hd(e=null){const n=BC(),r=j.useRef(e||n||null);return r.current===null&&(r.current=""+VC++),e??r.current}function xb({children:e,className:n="",collapsedSize:r,collapsible:i,defaultSize:o,forwardedRef:a,id:s,maxSize:c,minSize:u,onCollapse:l,onExpand:d,onResize:f,order:h,style:p,tagName:y="div",...x}){const v=j.useContext(Fi);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:g,expandPanel:_,getPanelSize:b,getPanelStyle:w,groupId:S,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:N,resizePanel:A,unregisterPanel:R}=v,k=hd(s),P=j.useRef({callbacks:{onCollapse:l,onExpand:d,onResize:f},constraints:{collapsedSize:r,collapsible:i,defaultSize:o,maxSize:c,minSize:u},id:k,idIsFromProps:s!==void 0,order:h});j.useRef({didLogMissingDefaultSizeWarning:!1}),rn(()=>{const{callbacks:M,constraints:T}=P.current,q={...T};P.current.id=k,P.current.idIsFromProps=s!==void 0,P.current.order=h,M.onCollapse=l,M.onExpand=d,M.onResize=f,T.collapsedSize=r,T.collapsible=i,T.defaultSize=o,T.maxSize=c,T.minSize=u,(q.collapsedSize!==T.collapsedSize||q.collapsible!==T.collapsible||q.maxSize!==T.maxSize||q.minSize!==T.minSize)&&E(P.current,q)}),rn(()=>{const M=P.current;return N(M),()=>{R(M)}},[h,k,N,R]),j.useImperativeHandle(a,()=>({collapse:()=>{g(P.current)},expand:M=>{_(P.current,M)},getId(){return k},getSize(){return b(P.current)},isCollapsed(){return C(P.current)},isExpanded(){return!C(P.current)},resize:M=>{A(P.current,M)}}),[g,_,b,C,k,A]);const O=w(P.current,o);return j.createElement(y,{...x,children:e,className:n,id:k,style:{...O,...p},[Ee.groupId]:S,[Ee.panel]:"",[Ee.panelCollapsible]:i||void 0,[Ee.panelId]:k,[Ee.panelSize]:parseFloat(""+O.flexGrow).toFixed(1)})}const bb=j.forwardRef((e,n)=>j.createElement(xb,{...e,forwardedRef:n}));xb.displayName="Panel";bb.displayName="forwardRef(Panel)";let Rf=null,ii=-1,$t=null;function GC(e,n){if(n){const r=(n&Eb)!==0,i=(n&Nb)!==0,o=(n&kb)!==0,a=(n&Rb)!==0;if(r)return o?"se-resize":a?"ne-resize":"e-resize";if(i)return o?"sw-resize":a?"nw-resize":"w-resize";if(o)return"s-resize";if(a)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function UC(){$t!==null&&(document.head.removeChild($t),Rf=null,$t=null,ii=-1)}function Mo(e,n){var r,i;const o=GC(e,n);if(Rf!==o){if(Rf=o,$t===null&&($t=document.createElement("style"),document.head.appendChild($t)),ii>=0){var a;(a=$t.sheet)===null||a===void 0||a.removeRule(ii)}ii=(r=(i=$t.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function _b(e){return e.type==="keydown"}function wb(e){return e.type.startsWith("pointer")}function Sb(e){return e.type.startsWith("mouse")}function Hi(e){if(wb(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Sb(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function WC(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function KC(e,n,r){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function YC(e,n){if(e===n)throw new Error("Cannot compare node with itself");const r={a:Nh(e),b:Nh(n)};let i;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),n=r.b.pop(),i=e;de(i,"Stacking order can only be calculated for elements with a common ancestor");const o={a:Eh(Ch(r.a)),b:Eh(Ch(r.b))};if(o.a===o.b){const a=i.childNodes,s={a:r.a.at(-1),b:r.b.at(-1)};let c=a.length;for(;c--;){const u=a[c];if(u===s.a)return 1;if(u===s.b)return-1}}return Math.sign(o.a-o.b)}const XC=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ZC(e){var n;const r=getComputedStyle((n=Cb(e))!==null&&n!==void 0?n:e).display;return r==="flex"||r==="inline-flex"}function JC(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||ZC(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||XC.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function Ch(e){let n=e.length;for(;n--;){const r=e[n];if(de(r,"Missing node"),JC(r))return r}return null}function Eh(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Nh(e){const n=[];for(;e;)n.push(e),e=Cb(e);return n}function Cb(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const Eb=1,Nb=2,kb=4,Rb=8,QC=WC()==="coarse";let lt=[],Mn=!1,Qt=new Map,Bi=new Map;const xr=new Set;function eE(e,n,r,i,o){var a;const{ownerDocument:s}=n,c={direction:r,element:n,hitAreaMargins:i,setResizeHandlerState:o},u=(a=Qt.get(s))!==null&&a!==void 0?a:0;return Qt.set(s,u+1),xr.add(c),pi(),function(){var d;Bi.delete(e),xr.delete(c);const f=(d=Qt.get(s))!==null&&d!==void 0?d:1;if(Qt.set(s,f-1),pi(),f===1&&Qt.delete(s),lt.includes(c)){const h=lt.indexOf(c);h>=0&&lt.splice(h,1),gd(),o("up",!0,null)}}}function tE(e){const{target:n}=e,{x:r,y:i}=Hi(e);Mn=!0,pd({target:n,x:r,y:i}),pi(),lt.length>0&&(gi("down",e),e.preventDefault(),Ab(n)||e.stopImmediatePropagation())}function Io(e){const{x:n,y:r}=Hi(e);if(Mn&&e.buttons===0&&(Mn=!1,gi("up",e)),!Mn){const{target:i}=e;pd({target:i,x:n,y:r})}gi("move",e),gd(),lt.length>0&&e.preventDefault()}function To(e){const{target:n}=e,{x:r,y:i}=Hi(e);Bi.clear(),Mn=!1,lt.length>0&&(e.preventDefault(),Ab(n)||e.stopImmediatePropagation()),gi("up",e),pd({target:n,x:r,y:i}),gd(),pi()}function Ab(e){let n=e;for(;n;){if(n.hasAttribute(Ee.resizeHandle))return!0;n=n.parentElement}return!1}function pd({target:e,x:n,y:r}){lt.splice(0);let i=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(i=e),xr.forEach(o=>{const{element:a,hitAreaMargins:s}=o,c=a.getBoundingClientRect(),{bottom:u,left:l,right:d,top:f}=c,h=QC?s.coarse:s.fine;if(n>=l-h&&n<=d+h&&r>=f-h&&r<=u+h){if(i!==null&&document.contains(i)&&a!==i&&!a.contains(i)&&!i.contains(a)&&YC(i,a)>0){let y=i,x=!1;for(;y&&!y.contains(a);){if(KC(y.getBoundingClientRect(),c)){x=!0;break}y=y.parentElement}if(x)return}lt.push(o)}})}function Oo(e,n){Bi.set(e,n)}function gd(){let e=!1,n=!1;lt.forEach(i=>{const{direction:o}=i;o==="horizontal"?e=!0:n=!0});let r=0;Bi.forEach(i=>{r|=i}),e&&n?Mo("intersection",r):e?Mo("horizontal",r):n?Mo("vertical",r):UC()}let qo=new AbortController;function pi(){qo.abort(),qo=new AbortController;const e={capture:!0,signal:qo.signal};xr.size&&(Mn?(lt.length>0&&Qt.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("contextmenu",To,e),i.addEventListener("pointerleave",Io,e),i.addEventListener("pointermove",Io,e))}),window.addEventListener("pointerup",To,e),window.addEventListener("pointercancel",To,e)):Qt.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("pointerdown",tE,e),i.addEventListener("pointermove",Io,e))}))}function gi(e,n){xr.forEach(r=>{const{setResizeHandlerState:i}=r,o=lt.includes(r);i(e,o,n)})}function nE(){const[e,n]=j.useState(0);return j.useCallback(()=>n(r=>r+1),[])}function de(e,n){if(!e)throw console.error(n),Error(n)}function cn(e,n,r=dd){return e.toFixed(r)===n.toFixed(r)?0:e>n?1:-1}function kt(e,n,r=dd){return cn(e,n,r)===0}function We(e,n,r){return cn(e,n,r)===0}function rE(e,n,r){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){const o=e[i],a=n[i];if(!We(o,a,r))return!1}return!0}function An({panelConstraints:e,panelIndex:n,size:r}){const i=e[n];de(i!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:o=0,collapsible:a,maxSize:s=100,minSize:c=0}=i;if(cn(r,c)<0)if(a){const u=(o+c)/2;cn(r,u)<0?r=o:r=c}else r=c;return r=Math.min(s,r),r=parseFloat(r.toFixed(dd)),r}function rr({delta:e,initialLayout:n,panelConstraints:r,pivotIndices:i,prevLayout:o,trigger:a}){if(We(e,0))return n;const s=[...n],[c,u]=i;de(c!=null,"Invalid first pivot index"),de(u!=null,"Invalid second pivot index");let l=0;if(a==="keyboard"){{const f=e<0?u:c,h=r[f];de(h,`Panel constraints not found for index ${f}`);const{collapsedSize:p=0,collapsible:y,minSize:x=0}=h;if(y){const v=n[f];if(de(v!=null,`Previous layout not found for panel index ${f}`),We(v,p)){const g=x-v;cn(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}{const f=e<0?c:u,h=r[f];de(h,`No panel constraints found for index ${f}`);const{collapsedSize:p=0,collapsible:y,minSize:x=0}=h;if(y){const v=n[f];if(de(v!=null,`Previous layout not found for panel index ${f}`),We(v,x)){const g=v-p;cn(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}}{const f=e<0?1:-1;let h=e<0?u:c,p=0;for(;;){const x=n[h];de(x!=null,`Previous layout not found for panel index ${h}`);const g=An({panelConstraints:r,panelIndex:h,size:100})-x;if(p+=g,h+=f,h<0||h>=r.length)break}const y=Math.min(Math.abs(e),Math.abs(p));e=e<0?0-y:y}{let h=e<0?c:u;for(;h>=0&&h<r.length;){const p=Math.abs(e)-Math.abs(l),y=n[h];de(y!=null,`Previous layout not found for panel index ${h}`);const x=y-p,v=An({panelConstraints:r,panelIndex:h,size:x});if(!We(y,v)&&(l+=y-v,s[h]=v,l.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(rE(o,s))return o;{const f=e<0?u:c,h=n[f];de(h!=null,`Previous layout not found for panel index ${f}`);const p=h+l,y=An({panelConstraints:r,panelIndex:f,size:p});if(s[f]=y,!We(y,p)){let x=p-y,g=e<0?u:c;for(;g>=0&&g<r.length;){const _=s[g];de(_!=null,`Previous layout not found for panel index ${g}`);const b=_+x,w=An({panelConstraints:r,panelIndex:g,size:b});if(We(_,w)||(x-=w-_,s[g]=w),We(x,0))break;e>0?g--:g++}}}const d=s.reduce((f,h)=>h+f,0);return We(d,100)?s:o}function iE({layout:e,panelsArray:n,pivotIndices:r}){let i=0,o=100,a=0,s=0;const c=r[0];de(c!=null,"No pivot index found"),n.forEach((f,h)=>{const{constraints:p}=f,{maxSize:y=100,minSize:x=0}=p;h===c?(i=x,o=y):(a+=x,s+=y)});const u=Math.min(o,100-a),l=Math.max(i,100-s),d=e[c];return{valueMax:u,valueMin:l,valueNow:d}}function br(e,n=document){return Array.from(n.querySelectorAll(`[${Ee.resizeHandleId}][data-panel-group-id="${e}"]`))}function jb(e,n,r=document){const o=br(e,r).findIndex(a=>a.getAttribute(Ee.resizeHandleId)===n);return o??null}function Pb(e,n,r){const i=jb(e,n,r);return i!=null?[i,i+1]:[-1,-1]}function Mb(e,n=document){var r;if(n instanceof HTMLElement&&(n==null||(r=n.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return n;const i=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return i||null}function Vi(e,n=document){const r=n.querySelector(`[${Ee.resizeHandleId}="${e}"]`);return r||null}function oE(e,n,r,i=document){var o,a,s,c;const u=Vi(n,i),l=br(e,i),d=u?l.indexOf(u):-1,f=(o=(a=r[d])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null,h=(s=(c=r[d+1])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null;return[f,h]}function aE({committedValuesRef:e,eagerValuesRef:n,groupId:r,layout:i,panelDataArray:o,panelGroupElement:a,setLayout:s}){j.useRef({didWarnAboutMissingResizeHandle:!1}),rn(()=>{if(!a)return;const c=br(r,a);for(let u=0;u<o.length-1;u++){const{valueMax:l,valueMin:d,valueNow:f}=iE({layout:i,panelsArray:o,pivotIndices:[u,u+1]}),h=c[u];if(h!=null){const p=o[u];de(p,`No panel data found for index "${u}"`),h.setAttribute("aria-controls",p.id),h.setAttribute("aria-valuemax",""+Math.round(l)),h.setAttribute("aria-valuemin",""+Math.round(d)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{c.forEach((u,l)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[r,i,o,a]),j.useEffect(()=>{if(!a)return;const c=n.current;de(c,"Eager values not found");const{panelDataArray:u}=c,l=Mb(r,a);de(l!=null,`No group found for id "${r}"`);const d=br(r,a);de(d,`No resize handles found for group id "${r}"`);const f=d.map(h=>{const p=h.getAttribute(Ee.resizeHandleId);de(p,"Resize handle element has no handle id attribute");const[y,x]=oE(r,p,u,a);if(y==null||x==null)return()=>{};const v=g=>{if(!g.defaultPrevented)switch(g.key){case"Enter":{g.preventDefault();const _=u.findIndex(b=>b.id===y);if(_>=0){const b=u[_];de(b,`No panel data found for index ${_}`);const w=i[_],{collapsedSize:S=0,collapsible:C,minSize:E=0}=b.constraints;if(w!=null&&C){const N=rr({delta:We(w,S)?E-S:S-w,initialLayout:i,panelConstraints:u.map(A=>A.constraints),pivotIndices:Pb(r,p,a),prevLayout:i,trigger:"keyboard"});i!==N&&s(N)}}break}}};return h.addEventListener("keydown",v),()=>{h.removeEventListener("keydown",v)}});return()=>{f.forEach(h=>h())}},[a,e,n,r,i,o,s])}function kh(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function Ib(e,n){const r=e==="horizontal",{x:i,y:o}=Hi(n);return r?i:o}function sE(e,n,r,i,o){const a=r==="horizontal",s=Vi(n,o);de(s,`No resize handle element found for id "${n}"`);const c=s.getAttribute(Ee.groupId);de(c,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=i;const l=Ib(r,e),d=Mb(c,o);de(d,`No group element found for id "${c}"`);const f=d.getBoundingClientRect(),h=a?f.width:f.height;return(l-u)/h*100}function cE(e,n,r,i,o,a){if(_b(e)){const s=r==="horizontal";let c=0;e.shiftKey?c=100:o!=null?c=o:c=10;let u=0;switch(e.key){case"ArrowDown":u=s?0:c;break;case"ArrowLeft":u=s?-c:0;break;case"ArrowRight":u=s?c:0;break;case"ArrowUp":u=s?0:-c;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return i==null?0:sE(e,n,r,i,a)}function uE({panelDataArray:e}){const n=Array(e.length),r=e.map(a=>a.constraints);let i=0,o=100;for(let a=0;a<e.length;a++){const s=r[a];de(s,`Panel constraints not found for index ${a}`);const{defaultSize:c}=s;c!=null&&(i++,n[a]=c,o-=c)}for(let a=0;a<e.length;a++){const s=r[a];de(s,`Panel constraints not found for index ${a}`);const{defaultSize:c}=s;if(c!=null)continue;const u=e.length-i,l=o/u;i++,n[a]=l,o-=l}return n}function yn(e,n,r){n.forEach((i,o)=>{const a=e[o];de(a,`Panel data not found for index ${o}`);const{callbacks:s,constraints:c,id:u}=a,{collapsedSize:l=0,collapsible:d}=c,f=r[u];if(f==null||i!==f){r[u]=i;const{onCollapse:h,onExpand:p,onResize:y}=s;y&&y(i,f),d&&(h||p)&&(p&&(f==null||kt(f,l))&&!kt(i,l)&&p(),h&&(f==null||!kt(f,l))&&kt(i,l)&&h())}})}function Ur(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=n[r])return!1;return!0}function lE({defaultSize:e,dragState:n,layout:r,panelData:i,panelIndex:o,precision:a=3}){const s=r[o];let c;return s==null?c=e!=null?e.toPrecision(a):"1":i.length===1?c="1":c=s.toPrecision(a),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function fE(e,n=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...o)},n)}}function Rh(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,r)=>{localStorage.setItem(n,r)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function Tb(e){return`react-resizable-panels:${e}`}function Ob(e){return e.map(n=>{const{constraints:r,id:i,idIsFromProps:o,order:a}=n;return o?i:a?`${a}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((n,r)=>n.localeCompare(r)).join(",")}function qb(e,n){try{const r=Tb(e),i=n.getItem(r);if(i){const o=JSON.parse(i);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function dE(e,n,r){var i,o;const a=(i=qb(e,r))!==null&&i!==void 0?i:{},s=Ob(n);return(o=a[s])!==null&&o!==void 0?o:null}function hE(e,n,r,i,o){var a;const s=Tb(e),c=Ob(n),u=(a=qb(e,o))!==null&&a!==void 0?a:{};u[c]={expandToSizes:Object.fromEntries(r.entries()),layout:i};try{o.setItem(s,JSON.stringify(u))}catch(l){console.error(l)}}function Ah({layout:e,panelConstraints:n}){const r=[...e],i=r.reduce((a,s)=>a+s,0);if(r.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${r.map(a=>`${a}%`).join(", ")}`);if(!We(i,100)&&r.length>0)for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=100/i*s;r[a]=c}let o=0;for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=An({panelConstraints:n,panelIndex:a,size:s});s!=c&&(o+=s-c,r[a]=c)}if(!We(o,0))for(let a=0;a<n.length;a++){const s=r[a];de(s!=null,`No layout data found for index ${a}`);const c=s+o,u=An({panelConstraints:n,panelIndex:a,size:c});if(s!==u&&(o-=u-s,r[a]=u,We(o,0)))break}return r}const pE=100,ir={getItem:e=>(Rh(ir),ir.getItem(e)),setItem:(e,n)=>{Rh(ir),ir.setItem(e,n)}},jh={};function Db({autoSaveId:e=null,children:n,className:r="",direction:i,forwardedRef:o,id:a=null,onLayout:s=null,keyboardResizeBy:c=null,storage:u=ir,style:l,tagName:d="div",...f}){const h=hd(a),p=j.useRef(null),[y,x]=j.useState(null),[v,g]=j.useState([]),_=nE(),b=j.useRef({}),w=j.useRef(new Map),S=j.useRef(0),C=j.useRef({autoSaveId:e,direction:i,dragState:y,id:h,keyboardResizeBy:c,onLayout:s,storage:u}),E=j.useRef({layout:v,panelDataArray:[],panelDataArrayChanged:!1});j.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),j.useImperativeHandle(o,()=>({getId:()=>C.current.id,getLayout:()=>{const{layout:D}=E.current;return D},setLayout:D=>{const{onLayout:I}=C.current,{layout:z,panelDataArray:L}=E.current,H=Ah({layout:D,panelConstraints:L.map(U=>U.constraints)});kh(z,H)||(g(H),E.current.layout=H,I&&I(H),yn(L,H,b.current))}}),[]),rn(()=>{C.current.autoSaveId=e,C.current.direction=i,C.current.dragState=y,C.current.id=h,C.current.onLayout=s,C.current.storage=u}),aE({committedValuesRef:C,eagerValuesRef:E,groupId:h,layout:v,panelDataArray:E.current.panelDataArray,setLayout:g,panelGroupElement:p.current}),j.useEffect(()=>{const{panelDataArray:D}=E.current;if(e){if(v.length===0||v.length!==D.length)return;let I=jh[e];I==null&&(I=fE(hE,pE),jh[e]=I);const z=[...D],L=new Map(w.current);I(e,z,L,v,u)}},[e,v,u]),j.useEffect(()=>{});const N=j.useCallback(D=>{const{onLayout:I}=C.current,{layout:z,panelDataArray:L}=E.current;if(D.constraints.collapsible){const H=L.map(te=>te.constraints),{collapsedSize:U=0,panelSize:Y,pivotIndices:J}=Xt(L,D,z);if(de(Y!=null,`Panel size not found for panel "${D.id}"`),!kt(Y,U)){w.current.set(D.id,Y);const ne=Sn(L,D)===L.length-1?Y-U:U-Y,Q=rr({delta:ne,initialLayout:z,panelConstraints:H,pivotIndices:J,prevLayout:z,trigger:"imperative-api"});Ur(z,Q)||(g(Q),E.current.layout=Q,I&&I(Q),yn(L,Q,b.current))}}},[]),A=j.useCallback((D,I)=>{const{onLayout:z}=C.current,{layout:L,panelDataArray:H}=E.current;if(D.constraints.collapsible){const U=H.map(ie=>ie.constraints),{collapsedSize:Y=0,panelSize:J=0,minSize:te=0,pivotIndices:ne}=Xt(H,D,L),Q=I??te;if(kt(J,Y)){const ie=w.current.get(D.id),re=ie!=null&&ie>=Q?ie:Q,se=Sn(H,D)===H.length-1?J-re:re-J,X=rr({delta:se,initialLayout:L,panelConstraints:U,pivotIndices:ne,prevLayout:L,trigger:"imperative-api"});Ur(L,X)||(g(X),E.current.layout=X,z&&z(X),yn(H,X,b.current))}}},[]),R=j.useCallback(D=>{const{layout:I,panelDataArray:z}=E.current,{panelSize:L}=Xt(z,D,I);return de(L!=null,`Panel size not found for panel "${D.id}"`),L},[]),k=j.useCallback((D,I)=>{const{panelDataArray:z}=E.current,L=Sn(z,D);return lE({defaultSize:I,dragState:y,layout:v,panelData:z,panelIndex:L})},[y,v]),P=j.useCallback(D=>{const{layout:I,panelDataArray:z}=E.current,{collapsedSize:L=0,collapsible:H,panelSize:U}=Xt(z,D,I);return de(U!=null,`Panel size not found for panel "${D.id}"`),H===!0&&kt(U,L)},[]),O=j.useCallback(D=>{const{layout:I,panelDataArray:z}=E.current,{collapsedSize:L=0,collapsible:H,panelSize:U}=Xt(z,D,I);return de(U!=null,`Panel size not found for panel "${D.id}"`),!H||cn(U,L)>0},[]),M=j.useCallback(D=>{const{panelDataArray:I}=E.current;I.push(D),I.sort((z,L)=>{const H=z.order,U=L.order;return H==null&&U==null?0:H==null?-1:U==null?1:H-U}),E.current.panelDataArrayChanged=!0,_()},[_]);rn(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:D,onLayout:I,storage:z}=C.current,{layout:L,panelDataArray:H}=E.current;let U=null;if(D){const J=dE(D,H,z);J&&(w.current=new Map(Object.entries(J.expandToSizes)),U=J.layout)}U==null&&(U=uE({panelDataArray:H}));const Y=Ah({layout:U,panelConstraints:H.map(J=>J.constraints)});kh(L,Y)||(g(Y),E.current.layout=Y,I&&I(Y),yn(H,Y,b.current))}}),rn(()=>{const D=E.current;return()=>{D.layout=[]}},[]);const T=j.useCallback(D=>{let I=!1;const z=p.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(I=!0),function(H){H.preventDefault();const U=p.current;if(!U)return()=>null;const{direction:Y,dragState:J,id:te,keyboardResizeBy:ne,onLayout:Q}=C.current,{layout:ie,panelDataArray:re}=E.current,{initialLayout:le}=J??{},se=Pb(te,D,U);let X=cE(H,D,Y,J,ne,U);const ee=Y==="horizontal";ee&&I&&(X=-X);const ce=re.map(ue=>ue.constraints),he=rr({delta:X,initialLayout:le??ie,panelConstraints:ce,pivotIndices:se,prevLayout:ie,trigger:_b(H)?"keyboard":"mouse-or-touch"}),me=!Ur(ie,he);(wb(H)||Sb(H))&&S.current!=X&&(S.current=X,!me&&X!==0?ee?Oo(D,X<0?Eb:Nb):Oo(D,X<0?kb:Rb):Oo(D,0)),me&&(g(he),E.current.layout=he,Q&&Q(he),yn(re,he,b.current))}},[]),q=j.useCallback((D,I)=>{const{onLayout:z}=C.current,{layout:L,panelDataArray:H}=E.current,U=H.map(ie=>ie.constraints),{panelSize:Y,pivotIndices:J}=Xt(H,D,L);de(Y!=null,`Panel size not found for panel "${D.id}"`);const ne=Sn(H,D)===H.length-1?Y-I:I-Y,Q=rr({delta:ne,initialLayout:L,panelConstraints:U,pivotIndices:J,prevLayout:L,trigger:"imperative-api"});Ur(L,Q)||(g(Q),E.current.layout=Q,z&&z(Q),yn(H,Q,b.current))},[]),B=j.useCallback((D,I)=>{const{layout:z,panelDataArray:L}=E.current,{collapsedSize:H=0,collapsible:U}=I,{collapsedSize:Y=0,collapsible:J,maxSize:te=100,minSize:ne=0}=D.constraints,{panelSize:Q}=Xt(L,D,z);Q!=null&&(U&&J&&kt(Q,H)?kt(H,Y)||q(D,Y):Q<ne?q(D,ne):Q>te&&q(D,te))},[q]),F=j.useCallback((D,I)=>{const{direction:z}=C.current,{layout:L}=E.current;if(!p.current)return;const H=Vi(D,p.current);de(H,`Drag handle element not found for id "${D}"`);const U=Ib(z,I);x({dragHandleId:D,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:U,initialLayout:L})},[]),G=j.useCallback(()=>{x(null)},[]),V=j.useCallback(D=>{const{panelDataArray:I}=E.current,z=Sn(I,D);z>=0&&(I.splice(z,1),delete b.current[D.id],E.current.panelDataArrayChanged=!0,_())},[_]),K=j.useMemo(()=>({collapsePanel:N,direction:i,dragState:y,expandPanel:A,getPanelSize:R,getPanelStyle:k,groupId:h,isPanelCollapsed:P,isPanelExpanded:O,reevaluatePanelConstraints:B,registerPanel:M,registerResizeHandle:T,resizePanel:q,startDragging:F,stopDragging:G,unregisterPanel:V,panelGroupElement:p.current}),[N,y,i,A,R,k,h,P,O,B,M,T,q,F,G,V]),W={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return j.createElement(Fi.Provider,{value:K},j.createElement(d,{...f,children:n,className:r,id:a,ref:p,style:{...W,...l},[Ee.group]:"",[Ee.groupDirection]:i,[Ee.groupId]:h}))}const zb=j.forwardRef((e,n)=>j.createElement(Db,{...e,forwardedRef:n}));Db.displayName="PanelGroup";zb.displayName="forwardRef(PanelGroup)";function Sn(e,n){return e.findIndex(r=>r===n||r.id===n.id)}function Xt(e,n,r){const i=Sn(e,n),a=i===e.length-1?[i-1,i]:[i,i+1],s=r[i];return{...n.constraints,panelSize:s,pivotIndices:a}}function gE({disabled:e,handleId:n,resizeHandler:r,panelGroupElement:i}){j.useEffect(()=>{if(e||r==null||i==null)return;const o=Vi(n,i);if(o==null)return;const a=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),r(s);break}case"F6":{s.preventDefault();const c=o.getAttribute(Ee.groupId);de(c,`No group element found for id "${c}"`);const u=br(c,i),l=jb(c,n,i);de(l!==null,`No resize element found for id "${n}"`);const d=s.shiftKey?l>0?l-1:u.length-1:l+1<u.length?l+1:0;u[d].focus();break}}};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}},[i,e,n,r])}function Lb({children:e=null,className:n="",disabled:r=!1,hitAreaMargins:i,id:o,onBlur:a,onClick:s,onDragging:c,onFocus:u,onPointerDown:l,onPointerUp:d,style:f={},tabIndex:h=0,tagName:p="div",...y}){var x,v;const g=j.useRef(null),_=j.useRef({onClick:s,onDragging:c,onPointerDown:l,onPointerUp:d});j.useEffect(()=>{_.current.onClick=s,_.current.onDragging=c,_.current.onPointerDown=l,_.current.onPointerUp=d});const b=j.useContext(Fi);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:w,groupId:S,registerResizeHandle:C,startDragging:E,stopDragging:N,panelGroupElement:A}=b,R=hd(o),[k,P]=j.useState("inactive"),[O,M]=j.useState(!1),[T,q]=j.useState(null),B=j.useRef({state:k});rn(()=>{B.current.state=k}),j.useEffect(()=>{if(r)q(null);else{const K=C(R);q(()=>K)}},[r,R,C]);const F=(x=i?.coarse)!==null&&x!==void 0?x:15,G=(v=i?.fine)!==null&&v!==void 0?v:5;j.useEffect(()=>{if(r||T==null)return;const K=g.current;de(K,"Element ref not attached");let W=!1;return eE(R,K,w,{coarse:F,fine:G},(I,z,L)=>{if(!z){P("inactive");return}switch(I){case"down":{P("drag"),W=!1,de(L,'Expected event to be defined for "down" action'),E(R,L);const{onDragging:H,onPointerDown:U}=_.current;H?.(!0),U?.();break}case"move":{const{state:H}=B.current;W=!0,H!=="drag"&&P("hover"),de(L,'Expected event to be defined for "move" action'),T(L);break}case"up":{P("hover"),N();const{onClick:H,onDragging:U,onPointerUp:Y}=_.current;U?.(!1),Y?.(),W||H?.();break}}})},[F,w,r,G,C,R,T,E,N]),gE({disabled:r,handleId:R,resizeHandler:T,panelGroupElement:A});const V={touchAction:"none",userSelect:"none"};return j.createElement(p,{...y,children:e,className:n,id:o,onBlur:()=>{M(!1),a?.()},onFocus:()=>{M(!0),u?.()},ref:g,role:"separator",style:{...V,...f},tabIndex:h,[Ee.groupDirection]:w,[Ee.groupId]:S,[Ee.resizeHandle]:"",[Ee.resizeHandleActive]:k==="drag"?"pointer":O?"keyboard":void 0,[Ee.resizeHandleEnabled]:!r,[Ee.resizeHandleId]:R,[Ee.resizeHandleState]:k})}Lb.displayName="PanelResizeHandle";const mE=({className:e,...n})=>m.jsx(zb,{className:Ke("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...n}),Ph=bb,yE=({withHandle:e,className:n,...r})=>m.jsx(Lb,{className:Ke("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...r,children:e&&m.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:m.jsx($2,{className:"h-2.5 w-2.5"})})});function vE(e,n){try{const r=localStorage.getItem(e);if(r!==null)return JSON.parse(r)}catch{}return n}function xE(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch{}}function bE(){const[e,n]=j.useState(()=>vE("brain-main-mode","edit")),[r,i]=j.useState(null),[o,a]=j.useState(""),[s,c]=j.useState(!1),[u,l]=j.useState(!1),[d,f]=j.useState(!1),[h,p]=j.useState(!1),y=j.useCallback(k=>{n(k),xE("brain-main-mode",k)},[]),{data:x}=ke({queryKey:["obsidian","status"],queryFn:pe.obsidian.getStatus,refetchInterval:3e4}),{data:v}=ke({queryKey:["obsidian","config"],queryFn:pe.obsidian.getConfig}),{data:g}=ke({queryKey:["obsidian","vault-index"],queryFn:()=>pe.obsidian.getVaultIndex(),enabled:x?.connected===!0}),{data:_}=ke({queryKey:["anki","status"],queryFn:pe.anki.getStatus,refetchInterval:3e4}),{data:b}=ke({queryKey:["brain","metrics"],queryFn:pe.brain.getMetrics}),{data:w=[]}=ke({queryKey:["anki","drafts"],queryFn:pe.anki.getDrafts}),S=w.filter(k=>k.status==="pending"),C=j.useCallback(async k=>{try{const P=await pe.obsidian.getFile(k);P.success&&P.content!==void 0&&(i(k),a(P.content),c(!1),l(!1))}catch(P){console.error("Failed to load file:",P)}},[]),E=j.useCallback(async()=>{if(r){f(!0);try{(await pe.obsidian.saveFile(r,o)).success&&c(!1)}catch(k){console.error("Failed to save file:",k)}finally{f(!1)}}},[r,o]),N=j.useCallback(k=>{a(k),c(!0)},[]),A=["School/Evidence Based Practice","School/Exercise Physiology","School/Movement Science 1","School/Neuroscience","School/Therapeutic Intervention"],R=j.useCallback(async(k,P)=>{if(P){const M=v?.vaultName||"Treys School";window.open(`obsidian://open?vault=${encodeURIComponent(M)}&file=${encodeURIComponent(k)}`,"_blank");return}const O=g?.paths?.[k];if(O){await C(O),l(!0);return}for(const M of A)try{const T=await pe.obsidian.getFile(`${M}/${k}.md`);if(T.success&&T.content!==void 0){i(`${M}/${k}.md`),a(T.content),c(!1),l(!0);return}}catch{}console.warn(`Note not found: ${k}`)},[v,g,C]);return{mainMode:e,setMainMode:y,currentFile:r,setCurrentFile:i,fileContent:o,setFileContent:N,hasChanges:s,setHasChanges:c,previewMode:u,setPreviewMode:l,isSaving:d,openFile:C,saveFile:E,importOpen:h,setImportOpen:p,handleWikilinkClick:R,obsidianStatus:x,obsidianConfig:v,vaultIndex:g,ankiStatus:_,metrics:b,ankiDrafts:w,pendingDrafts:S}}const Mh=[{id:"study",label:"Study",tab:null,section:null},{id:"wrap",label:"Wrap",tab:null,section:null},{id:"generate",label:"Generate JSON",tab:null,section:null},{id:"attach",label:"Attach JSON",tab:null,section:null},{id:"planner",label:"Planner",tab:null,section:null},{id:"actions",label:"Actions",tab:null,section:null}];function _E({workspace:e}){const[n,r]=j.useState(!1),{data:i=[]}=ke({queryKey:["sessions"],queryFn:pe.sessions.getAll}),{data:o=[]}=ke({queryKey:["planner-queue"],queryFn:pe.planner.getQueue}),a=new Date,s=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,c=p=>{const y=typeof p=="string"?new Date(p):p;return`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`===s},u=i.some(p=>c(p.date)),l=o.length>0,d=i.some(p=>c(p.date)&&p.cards>0),f={study:u,wrap:u,generate:d,attach:d,planner:l,actions:l},h=j.useCallback(p=>{p.preventDefault(),r(!1),Array.from(p.dataTransfer.files).length>0&&e.setImportOpen(!0)},[e]);return m.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b-2 border-primary/50 bg-black/60 flex-wrap ${n?"ring-2 ring-primary":""}`,onDragOver:p=>{p.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:h,children:[m.jsx("div",{className:"flex items-center gap-0.5 mr-2",children:Mh.map((p,y)=>{const x=f[p.id]??!1;return m.jsxs("div",{className:"flex items-center gap-0.5",children:[m.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 text-xs font-terminal ${x?"text-green-400":"text-muted-foreground"}`,title:p.label,children:[x?m.jsx(V2,{className:"w-3 h-3"}):m.jsx(fb,{className:"w-3 h-3"}),m.jsx("span",{className:"hidden xl:inline",children:p.label})]}),y<Mh.length-1&&m.jsx(G2,{className:"w-2 h-2 text-muted-foreground/50"})]},p.id)})}),m.jsx("div",{className:"w-px h-5 bg-primary/30"}),m.jsxs(fe,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-xs border-primary/50",onClick:()=>e.setImportOpen(!0),children:[m.jsx($i,{className:"w-3 h-3 mr-1"}),"Import"]}),m.jsxs("div",{className:"flex items-center gap-3 ml-auto font-terminal text-xs",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e.obsidianStatus?.connected?"bg-green-500":"bg-red-500"}`}),m.jsx("span",{className:"text-muted-foreground",children:"Obsidian"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${e.ankiStatus?.connected?"bg-green-500":"bg-red-500"}`}),m.jsx("span",{className:"text-muted-foreground",children:"Anki"})]}),e.pendingDrafts.length>0&&m.jsxs(di,{variant:"outline",className:"h-5 px-1.5 text-xs rounded-none border-secondary/50 text-secondary",children:[e.pendingDrafts.length," drafts"]})]})]})}const wE=[{name:"EBP",path:"School/Evidence Based Practice"},{name:"ExPhys",path:"School/Exercise Physiology"},{name:"MS1",path:"School/Movement Science 1"},{name:"Neuro",path:"School/Neuroscience"},{name:"TI",path:"School/Therapeutic Intervention"}];function $b({name:e,isFolder:n,isExpanded:r,isActive:i,depth:o,onClick:a}){return m.jsxs("button",{onClick:a,className:`w-full flex items-center gap-1.5 py-1 hover:bg-secondary/20 font-terminal text-sm ${i?"bg-primary/20 text-primary":""}`,style:{paddingLeft:`${o*12+8}px`},children:[n?m.jsxs(m.Fragment,{children:[r?m.jsx(Z2,{className:"w-3 h-3 text-muted-foreground shrink-0"}):m.jsx(nC,{className:"w-3 h-3 text-muted-foreground shrink-0"}),m.jsx(kC,{className:"w-3.5 h-3.5 text-yellow-500 shrink-0"})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"w-3 shrink-0"}),m.jsx(EC,{className:"w-3.5 h-3.5 text-blue-400 shrink-0"})]}),m.jsx("span",{className:"truncate",children:e})]})}function Fb({folderPath:e,depth:n,expandedFolders:r,toggleFolder:i,workspace:o,connected:a}){const{data:s}=ke({queryKey:["obsidian","files",e],queryFn:()=>pe.obsidian.getFiles(e),enabled:a}),c=s?.files||[];return m.jsx(m.Fragment,{children:c.map(u=>{const l=typeof u=="string"?u:u.path,d=l.endsWith("/"),f=l.replace(/\/$/,"").split("/").pop()||l,h=`${e}/${f}`,p=r.has(h);return m.jsxs("div",{children:[m.jsx($b,{name:f,isFolder:d,isExpanded:p,isActive:o.currentFile?.endsWith(f)||!1,depth:n,onClick:()=>{d?i(h):o.openFile(h)}}),d&&p&&m.jsx(Fb,{folderPath:h,depth:n+1,expandedFolders:r,toggleFolder:i,workspace:o,connected:a})]},l)})})}function Ih({workspace:e}){const[n,r]=j.useState("School"),[i,o]=j.useState(""),[a,s]=j.useState(new Set),c=e.obsidianStatus?.connected===!0,{data:u}=ke({queryKey:["obsidian","files",n],queryFn:()=>pe.obsidian.getFiles(n),enabled:c}),l=j.useCallback(v=>{r(v),s(new Set)},[]),d=j.useCallback(()=>{const v=n.split("/");v.pop(),l(v.join("/"))},[n,l]),f=j.useCallback(v=>{s(g=>{const _=new Set(g);return _.has(v)?_.delete(v):_.add(v),_})},[]),h=j.useCallback(()=>{const v=new Date().toISOString().split("T")[0],g=n?`${n}/Session-${v}.md`:`Session-${v}.md`,_=`# Study Session - ${v}

## Summary


## Concepts Covered
- 

## Notes

`;e.setCurrentFile(g),e.setFileContent(_),e.setHasChanges(!0)},[n,e]),p=j.useMemo(()=>{const v=u?.files||[];if(!i.trim())return v;const g=i.toLowerCase();return v.filter(_=>(typeof _=="string"?_:_.path).toLowerCase().includes(g))},[u,i]),y=n.includes("/"),x=j.useMemo(()=>n?n.split("/"):[],[n]);return c?m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsxs("div",{className:"p-2 space-y-1.5 border-b border-primary/30",children:[m.jsxs("div",{className:"relative",children:[m.jsx(X2,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground"}),m.jsx(Cn,{value:i,onChange:v=>o(v.target.value),placeholder:"Search files...",className:"h-6 pl-7 text-sm font-terminal rounded-none border-secondary/50 bg-black/40"})]}),m.jsxs(fe,{size:"sm",variant:"outline",className:"w-full h-5 text-xs font-terminal rounded-none border-primary/50",onClick:h,children:[m.jsx(Li,{className:"w-2.5 h-2.5 mr-1"}),"New Note"]})]}),m.jsx("div",{className:"flex flex-col gap-0.5 p-1.5 border-b border-primary/30",children:wE.map(v=>m.jsx("button",{onClick:()=>l(v.path),className:`text-left px-2 py-1 text-xs font-terminal rounded-none transition-colors ${n===v.path?"bg-primary/20 text-primary border-l-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary/20"}`,children:v.name},v.path))}),n&&m.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 font-terminal text-xs text-muted-foreground border-b border-secondary/20 flex-wrap",children:[y&&m.jsx("button",{onClick:d,className:"hover:text-primary shrink-0",title:"Go to parent folder",children:m.jsx(mb,{className:"w-3 h-3"})}),x.map((v,g,_)=>m.jsxs("span",{className:"flex items-center gap-0.5",children:[g>0&&m.jsx("span",{className:"text-muted-foreground",children:"/"}),m.jsx("button",{onClick:()=>l(_.slice(0,g+1).join("/")),className:"hover:text-primary",children:v})]},g))]}),m.jsx(nn,{className:"flex-1",children:m.jsx("div",{className:"py-1",children:p.map(v=>{const g=typeof v=="string"?v:v.path,_=g.endsWith("/"),b=g.replace(/\/$/,"").split("/").pop()||g,w=n?`${n}/${b}`:b,S=a.has(w),C=e.currentFile?.endsWith(b)||!1;return m.jsxs("div",{children:[m.jsx($b,{name:b,isFolder:_,isExpanded:S,isActive:C,depth:0,onClick:()=>{_?f(w):e.openFile(w)}}),_&&S&&m.jsx(Fb,{folderPath:w,depth:1,expandedFolders:a,toggleFolder:f,workspace:e,connected:c})]},g)})})})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[m.jsx(db,{className:"w-6 h-6 text-red-500 mb-2"}),m.jsx("p",{className:"font-terminal text-sm text-red-400 text-center",children:"Obsidian Offline"}),m.jsx("p",{className:"font-terminal text-xs text-muted-foreground text-center mt-1",children:"Open Obsidian with Local REST API"})]})}function Af(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return n?.(o)}}var SE=cb[" useInsertionEffect ".trim().toString()]||O2;function CE({prop:e,defaultProp:n,onChange:r=()=>{},caller:i}){const[o,a,s]=EE({defaultProp:n,onChange:r}),c=e!==void 0,u=c?e:o;{const d=j.useRef(e!==void 0);j.useEffect(()=>{const f=d.current;f!==c&&console.warn(`${i} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,i])}const l=j.useCallback(d=>{if(c){const f=NE(d)?d(e):d;f!==e&&s.current?.(f)}else a(d)},[c,e,a,s]);return[u,l]}function EE({defaultProp:e,onChange:n}){const[r,i]=j.useState(e),o=j.useRef(r),a=j.useRef(n);return SE(()=>{a.current=n},[n]),j.useEffect(()=>{o.current!==r&&(a.current?.(r),o.current=r)},[r,o]),[r,i,a]}function NE(e){return typeof e=="function"}var md="Radio",[kE,Hb]=ub(md),[RE,AE]=kE(md),Bb=j.forwardRef((e,n)=>{const{__scopeRadio:r,name:i,checked:o=!1,required:a,disabled:s,value:c="on",onCheck:u,form:l,...d}=e,[f,h]=j.useState(null),p=od(n,v=>h(v)),y=j.useRef(!1),x=f?l||!!f.closest("form"):!0;return m.jsxs(RE,{scope:r,checked:o,disabled:s,children:[m.jsx(Oi.button,{type:"button",role:"radio","aria-checked":o,"data-state":Wb(o),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:p,onClick:Af(e.onClick,v=>{o||u?.(),x&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),x&&m.jsx(Ub,{control:f,bubbles:!y.current,name:i,value:c,checked:o,required:a,disabled:s,form:l,style:{transform:"translateX(-100%)"}})]})});Bb.displayName=md;var Vb="RadioIndicator",Gb=j.forwardRef((e,n)=>{const{__scopeRadio:r,forceMount:i,...o}=e,a=AE(Vb,r);return m.jsx(q2,{present:i||a.checked,children:m.jsx(Oi.span,{"data-state":Wb(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:n})})});Gb.displayName=Vb;var jE="RadioBubbleInput",Ub=j.forwardRef(({__scopeRadio:e,control:n,checked:r,bubbles:i=!0,...o},a)=>{const s=j.useRef(null),c=od(s,a),u=rC(r),l=D2(n);return j.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==r&&p){const y=new Event("click",{bubbles:i});p.call(d,r),d.dispatchEvent(y)}},[u,r,i]),m.jsx(Oi.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:c,style:{...o.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ub.displayName=jE;function Wb(e){return e?"checked":"unchecked"}var PE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Gi="RadioGroup",[ME]=ub(Gi,[hb,Hb]),Kb=hb(),Yb=Hb(),[IE,TE]=ME(Gi),Xb=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,name:i,defaultValue:o,value:a,required:s=!1,disabled:c=!1,orientation:u,dir:l,loop:d=!0,onValueChange:f,...h}=e,p=Kb(r),y=F2(l),[x,v]=CE({prop:a,defaultProp:o??null,onChange:f,caller:Gi});return m.jsx(IE,{scope:r,name:i,required:s,disabled:c,value:x,onValueChange:v,children:m.jsx(iC,{asChild:!0,...p,orientation:u,dir:y,loop:d,children:m.jsx(Oi.div,{role:"radiogroup","aria-required":s,"aria-orientation":u,"data-disabled":c?"":void 0,dir:y,...h,ref:n})})})});Xb.displayName=Gi;var Zb="RadioGroupItem",Jb=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,disabled:i,...o}=e,a=TE(Zb,r),s=a.disabled||i,c=Kb(r),u=Yb(r),l=j.useRef(null),d=od(n,l),f=a.value===o.value,h=j.useRef(!1);return j.useEffect(()=>{const p=x=>{PE.includes(x.key)&&(h.current=!0)},y=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",y)}},[]),m.jsx(oC,{asChild:!0,...c,focusable:!s,active:f,children:m.jsx(Bb,{disabled:s,required:a.required,checked:f,...u,...o,name:a.name,ref:d,onCheck:()=>a.onValueChange(o.value),onKeyDown:Af(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Af(o.onFocus,()=>{h.current&&l.current?.click()})})})});Jb.displayName=Zb;var OE="RadioGroupIndicator",Qb=j.forwardRef((e,n)=>{const{__scopeRadioGroup:r,...i}=e,o=Yb(r);return m.jsx(Gb,{...o,...i,ref:n})});Qb.displayName=OE;var e_=Xb,t_=Jb,qE=Qb;const n_=j.forwardRef(({className:e,...n},r)=>m.jsx(e_,{className:Ke("grid gap-2",e),...n,ref:r}));n_.displayName=e_.displayName;const r_=j.forwardRef(({className:e,...n},r)=>m.jsx(t_,{ref:r,className:Ke("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:m.jsx(qE,{className:"flex items-center justify-center",children:m.jsx(fb,{className:"h-3.5 w-3.5 fill-primary"})})}));r_.displayName=t_.displayName;const DE=/(\[\[.*?\]\])/g,zE=/!\[\[(.*?)\]\]/g,LE=[".png",".jpg",".jpeg",".gif",".svg",".webp",".bmp"],$E=/^\[!([\w-]+)\]\s*(.*)?$/,Th={note:"border-blue-500/50 bg-blue-500/10",tip:"border-green-500/50 bg-green-500/10",important:"border-purple-500/50 bg-purple-500/10",warning:"border-yellow-500/50 bg-yellow-500/10",caution:"border-red-500/50 bg-red-500/10",info:"border-blue-400/50 bg-blue-400/10",abstract:"border-cyan-500/50 bg-cyan-500/10",summary:"border-cyan-500/50 bg-cyan-500/10",todo:"border-blue-500/50 bg-blue-500/10",success:"border-green-500/50 bg-green-500/10",question:"border-yellow-400/50 bg-yellow-400/10",example:"border-purple-400/50 bg-purple-400/10",quote:"border-gray-400/50 bg-gray-400/10",bug:"border-red-400/50 bg-red-400/10",danger:"border-red-500/50 bg-red-500/10",fail:"border-red-500/50 bg-red-500/10",failure:"border-red-500/50 bg-red-500/10"};function Do(e,n){return e.split(DE).map((r,i)=>{const o=r.match(/^\[\[(.*?)\]\]$/);if(o){const a=o[1].includes("|")?o[1].split("|")[1]:o[1],s=o[1].includes("|")?o[1].split("|")[0]:o[1];return m.jsx("span",{className:"text-blue-400 hover:text-blue-300 cursor-pointer underline decoration-dotted",onClick:c=>n?.(s,c.shiftKey),title:`${s} (Shift+click for Obsidian app)`,children:a},i)}return m.jsx("span",{children:r},i)})}function FE(e){return e.replace(zE,(n,r)=>{const i=r.toLowerCase();return LE.some(a=>i.endsWith(a))?`![${r}](/api/obsidian/vault-file/${encodeURIComponent(r)})`:`[[${r}]]`})}function HE(e){const n=e.split(`
`),r=[];let i=!1,o="",a="",s=[];const c=()=>{if(!i)return;const u=Th[o.toLowerCase()]||Th.note,l=a||o.charAt(0).toUpperCase()+o.slice(1);r.push(`<div class="callout ${u} border-l-4 rounded px-3 py-2 my-2">`),r.push(`<div class="font-bold text-xs uppercase tracking-wider mb-1">${l}</div>`),r.push(""),r.push(s.join(`
`)),r.push(""),r.push("</div>"),i=!1,s=[]};for(const u of n){if(u.startsWith("> ")){const l=u.slice(2),d=l.match($E);if(d&&!i){i=!0,o=d[1],a=d[2]||"";continue}if(i){s.push(l);continue}}else if(u===">"&&i){s.push("");continue}else c();r.push(u)}return c(),r.join(`
`)}function i_({content:e,onWikilinkClick:n}){const r=HE(FE(e)),i={h1:({children:o})=>m.jsx("h1",{className:"text-xl font-bold text-primary border-b border-primary/30 pb-1 mb-3 mt-4",children:o}),h2:({children:o})=>m.jsx("h2",{className:"text-lg font-bold text-primary/90 border-b border-primary/20 pb-1 mb-2 mt-3",children:o}),h3:({children:o})=>m.jsx("h3",{className:"text-base font-semibold text-primary/80 mb-2 mt-3",children:o}),h4:({children:o})=>m.jsx("h4",{className:"text-sm font-semibold text-primary/70 mb-1 mt-2",children:o}),p:({children:o})=>typeof o=="string"?m.jsx("p",{className:"mb-2 leading-relaxed",children:Do(o,n)}):m.jsx("p",{className:"mb-2 leading-relaxed",children:o}),strong:({children:o})=>m.jsx("strong",{className:"font-bold text-foreground",children:o}),em:({children:o})=>m.jsx("em",{className:"italic text-foreground/90",children:o}),ul:({children:o})=>m.jsx("ul",{className:"list-disc list-inside mb-2 space-y-0.5 ml-2",children:o}),ol:({children:o})=>m.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-0.5 ml-2",children:o}),li:({children:o})=>typeof o=="string"?m.jsx("li",{className:"leading-relaxed",children:Do(o,n)}):m.jsx("li",{className:"leading-relaxed",children:o}),blockquote:({children:o})=>m.jsx("blockquote",{className:"border-l-4 border-primary/30 pl-3 my-2 text-muted-foreground italic",children:o}),code:({children:o,className:a})=>a?.startsWith("language-")?m.jsx("code",{className:"block bg-black/80 border border-secondary/40 rounded p-3 my-2 text-xs font-mono overflow-x-auto whitespace-pre",children:o}):m.jsx("code",{className:"bg-secondary/40 px-1.5 py-0.5 rounded text-xs font-mono text-primary",children:o}),pre:({children:o})=>m.jsx("pre",{className:"my-2",children:o}),hr:()=>m.jsx("hr",{className:"border-primary/20 my-4"}),a:({href:o,children:a})=>m.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:a}),table:({children:o})=>m.jsx("div",{className:"overflow-x-auto my-2",children:m.jsx("table",{className:"w-full text-xs border-collapse border border-secondary/40",children:o})}),th:({children:o})=>m.jsx("th",{className:"border border-secondary/40 bg-secondary/20 px-2 py-1 text-left font-semibold",children:o}),td:({children:o})=>typeof o=="string"?m.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:Do(o,n)}):m.jsx("td",{className:"border border-secondary/40 px-2 py-1",children:o}),img:({src:o,alt:a})=>m.jsx("img",{src:o,alt:a||"",className:"max-w-full rounded border border-secondary/40 my-2",loading:"lazy"}),del:({children:o})=>m.jsx("del",{className:"line-through text-muted-foreground",children:o}),input:({checked:o,...a})=>m.jsx("input",{type:"checkbox",checked:o,readOnly:!0,className:"mr-1.5 accent-primary",...a})};return m.jsx("div",{className:"obsidian-preview prose-invert max-w-none text-sm leading-relaxed",children:m.jsx(W2,{remarkPlugins:[K2],components:i,allowedElements:void 0,unwrapDisallowed:!1,children:r})})}function Oh(e,n){if(n.length===0)return e;const r=[];for(const i of n)r.push({type:"image_url",image_url:{url:i}});return e.trim()&&r.push({type:"text",text:e}),r}const BE=`Generate Anki flashcards from the following study material. Output ONLY a numbered list in this exact format:

1. Front: [question]
Back: [answer]
Tags: [comma-separated tags like: Module1, Obj2, TopicName]

Rules:
- Front = the question only (no module/objective prefixes)
- Back = concise answer
- Tags = include Module#, Obj#, and topic keywords
- One card per concept
- No extra text before or after the list

Study material:
[PASTE YOUR NOTES HERE]`,VE=(e,n)=>{const r=e.split(`
`),i=n.split(`
`),o=[];let a=0,s=0;for(;a<r.length||s<i.length;){const c=r[a],u=i[s];if(a<r.length&&s<i.length&&c===u){o.push(` ${c}`),a+=1,s+=1;continue}a<r.length&&(o.push(`-${c}`),a+=1),s<i.length&&(o.push(`+${u}`),s+=1)}return o};function GE({embedded:e}={}){const[n,r]=j.useState("chat"),[i,o]=j.useState([]),[a,s]=j.useState(""),[c,u]=j.useState([]),[l,d]=j.useState(!1),[f,h]=j.useState("anki"),[p,y]=j.useState(!1),[x,v]=j.useState(!1),[g,_]=j.useState(!1),[b,w]=j.useState(null),[S,C]=j.useState(""),[E,N]=j.useState(null),[A,R]=j.useState(null),[k,P]=j.useState(""),[O,M]=j.useState(""),[T,q]=j.useState({}),[B,F]=j.useState([]),G=j.useRef(null),V=j.useRef(null),K=qi(),W=j.useCallback(()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},[]);j.useEffect(()=>{W()},[i,W]);const D=()=>{v(!1),_(!1),w(null),C(""),N(null),R(null),P(""),M(""),q({}),F([])},I=X=>{X?v(!0):D()},z=async X=>{_(!0),w(null),C(X);try{const ee=await pe.brain.organizePreview(X);if(!ee.success||!ee.organized||!ee.destination)throw new Error(ee.error||"Unable to organize notes.");N(ee.organized),R(ee.destination),P("recommended");const ce=ee.organized.checklist??[],he={};return ce.forEach(me=>{he[me]=!1}),q(he),F(VE(X,ee.organized.markdown||"")),v(!0),!0}catch(ee){const ce=ee instanceof Error?ee.message:String(ee);return w(ce),!1}finally{_(!1)}},L=X=>{q(ee=>({...ee,[X]:!ee[X]}))},H=Object.values(T).length===0?!0:Object.values(T).every(Boolean),U=()=>A?k==="custom"?O.trim():A.options.find(ee=>ee.id===k)?.path||"":"",Y=async()=>{if(!E)return;const X=U();if(!X){w("Select a destination path.");return}w(null),_(!0),d(!0);try{await re(S,{destinationPath:X,organizedMarkdown:E.markdown,organizedTitle:E.title,confirmWrite:!0}),D()}catch(ee){const ce=ee instanceof Error?ee.message:String(ee);w(ce)}finally{_(!1),d(!1)}},J=(X,ee)=>{const ce=X.startsWith("+"),he=X.startsWith("-");return m.jsx("div",{className:`font-terminal text-[11px] px-2 ${ce?"bg-green-900/30 text-green-400":he?"bg-red-900/30 text-red-400":"text-muted-foreground"}`,children:X},ee)},te=X=>{const ee=new FileReader;ee.onload=()=>{typeof ee.result=="string"&&u(ce=>[...ce,ee.result])},ee.readAsDataURL(X)},ne=X=>{const ee=X.clipboardData?.items;if(ee){for(const ce of Array.from(ee))if(ce.type.startsWith("image/")){X.preventDefault();const he=ce.getAsFile();he&&te(he)}}},Q=X=>{const ee=X.target.files;if(ee){for(const ce of Array.from(ee))ce.type.startsWith("image/")&&te(ce);X.target.value=""}},ie=async(X,ee)=>{o(Ne=>[...Ne,{role:"assistant",content:""}]);const ce=i.map(Ne=>({role:Ne.role,content:Ne.images?.length?Oh(Ne.content,Ne.images):Ne.content})).concat([{role:"user",content:Oh(X,ee)}]),me=(await fetch("/api/brain/quick-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:ce})})).body?.getReader(),ue=new TextDecoder;if(!me)throw new Error("No response body");let Ie="";for(;;){const{done:Ne,value:Pe}=await me.read();if(Ne)break;Ie+=ue.decode(Pe,{stream:!0});const Be=Ie.split(`
`);Ie=Be.pop()??"";for(const Xe of Be){if(!Xe.startsWith("data: "))continue;const Wt=Xe.slice(6);if(Wt==="[DONE]")break;try{const rt=JSON.parse(Wt);if(rt.error){o(Kt=>{const ze=[...Kt];return ze[ze.length-1]={role:"assistant",content:`Error: ${rt.error}`},ze});return}rt.content&&o(Kt=>{const ze=[...Kt],Ve=ze[ze.length-1];return ze[ze.length-1]={...Ve,content:Ve.content+rt.content},ze})}catch{}}}},re=async(X,ee)=>{try{const me={message:X,syncToObsidian:f==="obsidian"||f==="both",mode:f==="both"?"all":f,destinationPath:ee?.destinationPath,organizedMarkdown:ee?.organizedMarkdown,organizedTitle:ee?.organizedTitle,confirmWrite:ee?.confirmWrite},ue=await pe.brain.chat(me);let Ie=ue.response;const Ne={cardsCreated:ue.cardsCreated,sessionSaved:ue.sessionSaved,sessionId:ue.sessionId},Pe=[];ue.sessionSaved&&Pe.push(`Session saved (ID: ${ue.sessionId})`),ue.cardsCreated&&Pe.push(`${ue.cardsCreated} Anki cards created`),ue.obsidianSynced&&Pe.push("Synced to Obsidian"),ue.obsidianError&&Pe.push(`Obsidian error: ${ue.obsidianError}`),Pe.length>0&&(Ie=`${Pe.join(" | ")}

${Ie}`),o(Be=>[...Be,{role:"assistant",content:Ie,meta:Ne}]),K.invalidateQueries({queryKey:["anki","drafts"]}),K.invalidateQueries({queryKey:["brain","metrics"]}),K.invalidateQueries({queryKey:["sessions"]})}catch(ce){o(he=>[...he,{role:"assistant",content:`Error: ${ce}`}])}},le=async()=>{const X=a.trim();if(!X&&c.length===0)return;const ee={role:"user",content:X,images:[...c]};o(ce=>[...ce,ee]),s(""),u([]),d(!0);try{n==="chat"?await ie(X,ee.images??[]):f==="obsidian"||f==="both"?await z(X)||o(he=>[...he,{role:"assistant",content:"Error: Unable to prepare preview."}]):await re(X)}catch(ce){o(he=>{const me=he[he.length-1];if(me?.role==="assistant"&&!me.content){const ue=[...he];return ue[ue.length-1]={role:"assistant",content:`Error: ${ce}`},ue}return[...he,{role:"assistant",content:`Error: ${ce}`}]})}finally{d(!1)}},se=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),le())};return m.jsxs(m.Fragment,{children:[m.jsx(sd,{open:x,onOpenChange:I,children:m.jsxs(cd,{className:"max-w-6xl w-full h-[85vh] bg-black border-2 border-primary rounded-none p-4 overflow-hidden",children:[m.jsxs(ud,{className:"space-y-1",children:[m.jsxs(ld,{className:"font-arcade text-sm text-primary flex items-center gap-2",children:[m.jsx(Li,{className:"w-4 h-4"}),"ORGANIZE + REVIEW"]}),m.jsx(fd,{className:"font-terminal text-[11px] text-muted-foreground",children:"Review the organized notes, compare to raw, then choose where to save."})]}),b&&m.jsx("div",{className:"border border-red-500/50 bg-red-900/20 text-red-200 font-terminal text-xs p-2 rounded-none",children:b}),m.jsxs("div",{className:"grid grid-cols-3 gap-4 h-[70vh]",children:[m.jsx("div",{className:"col-span-2 flex flex-col gap-3",children:m.jsxs(aC,{defaultValue:"preview",className:"w-full",children:[m.jsxs(sC,{className:"grid grid-cols-3 rounded-none",children:[m.jsx(jo,{value:"preview",className:"rounded-none text-xs",children:"Preview"}),m.jsx(jo,{value:"raw",className:"rounded-none text-xs",children:"Raw"}),m.jsx(jo,{value:"diff",className:"rounded-none text-xs",children:"Diff"})]}),m.jsx(Po,{value:"preview",className:"mt-2",children:m.jsx(nn,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-3",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"font-arcade text-xs text-primary",children:E?.title||"Untitled"}),m.jsx(i_,{content:E?.markdown||""})]})})}),m.jsx(Po,{value:"raw",className:"mt-2",children:m.jsx(nn,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-3",children:m.jsx("pre",{className:"whitespace-pre-wrap font-terminal text-[11px] text-foreground",children:S})})}),m.jsx(Po,{value:"diff",className:"mt-2",children:m.jsx(nn,{className:"h-[56vh] border border-secondary/40 rounded-none bg-black/40 p-0",children:m.jsx("div",{className:"p-2",children:B.length===0?m.jsx("div",{className:"text-muted-foreground font-terminal text-xs",children:"No diff available."}):B.map((X,ee)=>J(X,ee))})})})]})}),m.jsxs("div",{className:"col-span-1 flex flex-col gap-3",children:[m.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[m.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"DESTINATION"}),m.jsx(n_,{value:k,onValueChange:P,className:"space-y-2",children:(A?.options||[]).map(X=>m.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[m.jsx(r_,{value:X.id,className:"mt-1"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"font-terminal text-[11px] text-foreground flex items-center gap-1",children:[X.label,X.exists&&m.jsx(di,{variant:"outline",className:"text-[9px]",children:"existing"})]}),m.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground break-all",children:X.path||"Custom path"})]})]},X.id))}),k==="custom"&&m.jsxs("div",{className:"mt-2 space-y-1",children:[m.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground",children:"Custom path"}),m.jsx(Cn,{value:O,onChange:X=>M(X.target.value),placeholder:"School/Therapeutic Intervention/Module 01 - Title.md",className:"bg-black border-secondary/60 rounded-none text-xs font-terminal"})]})]}),m.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[m.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"REVIEW CHECKLIST"}),m.jsx("div",{className:"space-y-2",children:(E?.checklist||[]).map(X=>m.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[m.jsx(Ht,{checked:!!T[X],onCheckedChange:()=>L(X)}),m.jsx("span",{className:"font-terminal text-[11px] text-foreground",children:X})]},X))})]}),(E?.suggested_links||[]).length>0&&m.jsxs("div",{className:"border border-secondary/50 bg-black/40 p-3 rounded-none",children:[m.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"SUGGESTED LINKS"}),m.jsx("div",{className:"space-y-1",children:E?.suggested_links.map(X=>m.jsxs("div",{className:"font-terminal text-[11px] text-muted-foreground",children:["[[",X,"]]"]},X))})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(fe,{variant:"outline",className:"flex-1 rounded-none font-terminal text-xs",onClick:()=>D(),disabled:g,children:"Cancel"}),m.jsxs(fe,{className:"flex-1 bg-primary hover:bg-primary/80 rounded-none font-terminal text-xs",onClick:Y,disabled:!H||g||!U(),children:[m.jsx(cC,{className:"w-3 h-3 mr-1"}),g?"Saving...":"Confirm & Save"]})]})]})]})]})}),(()=>{const X=m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"px-3 py-1 border-b border-primary/30 flex items-center justify-between gap-2 shrink-0",children:[m.jsxs("div",{className:"flex bg-black/40 border border-primary/40 rounded-none overflow-hidden mr-2",children:[m.jsxs("button",{onClick:()=>r("chat"),className:`flex items-center gap-1 px-2 py-0.5 text-xs font-arcade transition-colors ${n==="chat"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[m.jsx(pb,{className:"w-3 h-3"})," CHAT"]}),m.jsxs("button",{onClick:()=>r("ingest"),className:`flex items-center gap-1 px-2 py-0.5 text-xs font-arcade transition-colors ${n==="ingest"?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[m.jsx(yC,{className:"w-3 h-3"})," INGEST"]})]}),m.jsx("p",{className:"text-xs text-muted-foreground truncate flex-1",children:n==="chat"?"Chat with Gemini Flash":"Paste notes to create cards & save sessions"}),n==="ingest"&&m.jsx("div",{className:"flex bg-black/40 border border-primary/40 rounded-none overflow-hidden shrink-0",children:["anki","obsidian","both"].map(ee=>m.jsxs("button",{onClick:()=>h(ee),className:`flex items-center gap-1 px-2 py-0.5 text-xs font-arcade transition-colors ${f===ee?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[ee==="anki"&&m.jsxs(m.Fragment,{children:[m.jsx(vr,{className:"w-3 h-3"})," ANKI"]}),ee==="obsidian"&&m.jsxs(m.Fragment,{children:[m.jsx(Nf,{className:"w-3 h-3"})," OBSIDIAN"]}),ee==="both"&&m.jsx(m.Fragment,{children:"BOTH"})]},ee))}),n==="ingest"&&m.jsx("button",{type:"button",className:"bg-primary hover:bg-primary/80 px-2 py-0.5 rounded-none text-xs font-terminal shrink-0",onClick:()=>{navigator.clipboard.writeText(BE),y(!0),setTimeout(()=>y(!1),2e3)},children:p?"Copied!":"Copy Prompt"})]}),m.jsxs("div",{ref:G,className:`${e?"flex-1":"h-80"} overflow-y-auto px-4 py-2 space-y-3`,children:[i.length===0&&m.jsx("p",{className:"text-muted-foreground text-sm font-terminal text-center py-8",children:n==="chat"?"Ask anything. Paste screenshots with Ctrl+V.":"Paste your study notes to ingest into Brain."}),i.map((ee,ce)=>m.jsx("div",{className:`flex ${ee.role==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[80%] rounded-none px-3 py-2 text-sm font-terminal whitespace-pre-wrap ${ee.role==="user"?"bg-primary/20 text-foreground border border-primary/30":"bg-secondary/40 text-foreground border border-secondary/60"}`,children:[ee.images?.map((he,me)=>m.jsx("img",{src:he,alt:"attached",className:"max-h-32 rounded-none mb-1"},me)),ee.content]})},ce)),l&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"bg-secondary/40 border border-secondary/60 rounded-none px-3 py-2",children:m.jsx(gb,{className:"w-4 h-4 animate-spin text-primary"})})})]}),c.length>0&&m.jsx("div",{className:"px-4 py-1 flex gap-2 flex-wrap shrink-0",children:c.map((ee,ce)=>m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:ee,alt:"pending",className:"h-12 rounded-none border border-primary/30"}),m.jsx("button",{onClick:()=>u(he=>he.filter((me,ue)=>ue!==ce)),className:"absolute -top-1 -right-1 bg-destructive rounded-full p-0.5",children:m.jsx(Ef,{className:"w-3 h-3"})})]},ce))}),m.jsxs("div",{className:"flex items-end gap-2 px-4 py-2 border-t border-primary/30 shrink-0",children:[m.jsx("input",{ref:V,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Q}),n==="chat"&&m.jsx(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:()=>V.current?.click(),children:m.jsx(AC,{className:"w-4 h-4 text-primary"})}),m.jsx("textarea",{value:a,onChange:ee=>s(ee.target.value),onKeyDown:se,onPaste:ne,placeholder:n==="chat"?"Ask anything... (Ctrl+V to paste images)":"Paste study notes to ingest...",rows:n==="ingest"?3:1,className:"flex-1 bg-black/60 border-2 border-muted-foreground/20 rounded-none px-3 py-1.5 text-sm font-terminal resize-none focus:outline-none focus:ring-1 focus:ring-ring"}),m.jsx(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:le,disabled:l,children:m.jsx(uC,{className:"w-4 h-4 text-primary"})})]})]});return m.jsx("div",{className:"flex flex-col h-full",children:X})})()]})}function UE({workspace:e}){const[n,r]=j.useState(!1);return j.useEffect(()=>{if(!n)return;const i=o=>{o.key==="Escape"&&r(!1)};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[n]),e.currentFile?m.jsxs("div",{className:Ke("flex flex-col",n?"fixed inset-0 z-50 bg-black":"h-full"),children:[m.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-secondary/30 bg-black/40",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsxs("span",{className:"font-terminal text-sm text-primary truncate",children:[e.currentFile.split("/").pop(),e.hasChanges&&m.jsx("span",{className:"text-yellow-500 ml-1",children:"*"})]}),m.jsx("button",{onClick:()=>{const i=e.obsidianConfig?.vaultName||"Treys School",o=e.currentFile.replace(/\.md$/,"");window.open(`obsidian://open?vault=${encodeURIComponent(i)}&file=${encodeURIComponent(o)}`,"_blank")},className:"text-muted-foreground hover:text-primary shrink-0",title:"Open in Obsidian",children:m.jsx(lC,{className:"w-3 h-3"})})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(fe,{size:"sm",variant:"ghost",className:"h-5 px-2 text-xs font-terminal",onClick:()=>e.setPreviewMode(!e.previewMode),children:e.previewMode?"Edit":"Preview"}),m.jsxs(fe,{size:"sm",variant:"ghost",onClick:e.saveFile,disabled:!e.hasChanges||e.isSaving,className:"h-5 px-2 text-xs font-terminal",children:[m.jsx(zi,{className:"w-3 h-3 mr-1"}),e.isSaving?"Saving...":"Save"]}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-5 px-1.5 text-xs font-terminal",onClick:()=>r(!n),title:n?"Exit fullscreen":"Fullscreen",children:n?m.jsx(vb,{className:"w-3 h-3"}):m.jsx(yb,{className:"w-3 h-3"})})]})]}),e.previewMode?m.jsx("div",{className:"flex-1 p-3 bg-black/60 font-terminal overflow-y-auto",children:m.jsx(i_,{content:e.fileContent,onWikilinkClick:e.handleWikilinkClick})}):m.jsx("textarea",{value:e.fileContent,onChange:i=>e.setFileContent(i.target.value),className:"flex-1 w-full p-3 bg-black/60 font-terminal text-sm resize-none focus:outline-none focus:ring-1 focus:ring-primary overflow-y-auto min-h-[200px]",placeholder:"File content...",style:{height:"100%"}})]}):m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-muted-foreground font-terminal text-sm gap-2",children:[m.jsx(Li,{className:"w-8 h-8 opacity-30"}),m.jsx("p",{children:"Select a file from the vault sidebar"}),m.jsx("p",{className:"text-xs",children:"or create a new note"})]})}function Re(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,i;r<e.length;r++)(i=Re(e[r]))!==""&&(n+=(n&&" ")+i);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var WE={value:()=>{}};function Mr(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new oi(r)}function oi(e){this._=e}function KE(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}oi.prototype=Mr.prototype={constructor:oi,on:function(e,n){var r=this._,i=KE(e+"",r),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=YE(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(o=(e=i[a]).type)r[o]=qh(r[o],e.name,n);else if(n==null)for(o in r)r[o]=qh(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new oi(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,a;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}};function YE(e,n){for(var r=0,i=e.length,o;r<i;++r)if((o=e[r]).name===n)return o.value}function qh(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=WE,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}var jf="http://www.w3.org/1999/xhtml";const Dh={svg:"http://www.w3.org/2000/svg",xhtml:jf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ui(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Dh.hasOwnProperty(n)?{space:Dh[n],local:e}:e}function XE(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===jf&&n.documentElement.namespaceURI===jf?n.createElement(e):n.createElementNS(r,e)}}function ZE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o_(e){var n=Ui(e);return(n.local?ZE:XE)(n)}function JE(){}function yd(e){return e==null?JE:function(){return this.querySelector(e)}}function QE(e){typeof e!="function"&&(e=yd(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=new Array(s),u,l,d=0;d<s;++d)(u=a[d])&&(l=e.call(u,u.__data__,d,a))&&("__data__"in u&&(l.__data__=u.__data__),c[d]=l);return new Ye(i,this._parents)}function eN(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tN(){return[]}function a_(e){return e==null?tN:function(){return this.querySelectorAll(e)}}function nN(e){return function(){return eN(e.apply(this,arguments))}}function rN(e){typeof e=="function"?e=nN(e):e=a_(e);for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s=n[a],c=s.length,u,l=0;l<c;++l)(u=s[l])&&(i.push(e.call(u,u.__data__,l,s)),o.push(u));return new Ye(i,o)}function s_(e){return function(){return this.matches(e)}}function c_(e){return function(n){return n.matches(e)}}var iN=Array.prototype.find;function oN(e){return function(){return iN.call(this.children,e)}}function aN(){return this.firstElementChild}function sN(e){return this.select(e==null?aN:oN(typeof e=="function"?e:c_(e)))}var cN=Array.prototype.filter;function uN(){return Array.from(this.children)}function lN(e){return function(){return cN.call(this.children,e)}}function fN(e){return this.selectAll(e==null?uN:lN(typeof e=="function"?e:c_(e)))}function dN(e){typeof e!="function"&&(e=s_(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&c.push(u);return new Ye(i,this._parents)}function u_(e){return new Array(e.length)}function hN(){return new Ye(this._enter||this._groups.map(u_),this._parents)}function mi(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}mi.prototype={constructor:mi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pN(e){return function(){return e}}function gN(e,n,r,i,o,a){for(var s=0,c,u=n.length,l=a.length;s<l;++s)(c=n[s])?(c.__data__=a[s],i[s]=c):r[s]=new mi(e,a[s]);for(;s<u;++s)(c=n[s])&&(o[s]=c)}function mN(e,n,r,i,o,a,s){var c,u,l=new Map,d=n.length,f=a.length,h=new Array(d),p;for(c=0;c<d;++c)(u=n[c])&&(h[c]=p=s.call(u,u.__data__,c,n)+"",l.has(p)?o[c]=u:l.set(p,u));for(c=0;c<f;++c)p=s.call(e,a[c],c,a)+"",(u=l.get(p))?(i[c]=u,u.__data__=a[c],l.delete(p)):r[c]=new mi(e,a[c]);for(c=0;c<d;++c)(u=n[c])&&l.get(h[c])===u&&(o[c]=u)}function yN(e){return e.__data__}function vN(e,n){if(!arguments.length)return Array.from(this,yN);var r=n?mN:gN,i=this._parents,o=this._groups;typeof e!="function"&&(e=pN(e));for(var a=o.length,s=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var d=i[l],f=o[l],h=f.length,p=xN(e.call(d,d&&d.__data__,l,i)),y=p.length,x=c[l]=new Array(y),v=s[l]=new Array(y),g=u[l]=new Array(h);r(d,f,x,v,g,p,n);for(var _=0,b=0,w,S;_<y;++_)if(w=x[_]){for(_>=b&&(b=_+1);!(S=v[b])&&++b<y;);w._next=S||null}}return s=new Ye(s,i),s._enter=c,s._exit=u,s}function xN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bN(){return new Ye(this._exit||this._groups.map(u_),this._parents)}function _N(e,n,r){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),r==null?a.remove():r(a),i&&o?i.merge(o).order():o}function wN(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,a=i.length,s=Math.min(o,a),c=new Array(o),u=0;u<s;++u)for(var l=r[u],d=i[u],f=l.length,h=c[u]=new Array(f),p,y=0;y<f;++y)(p=l[y]||d[y])&&(h[y]=p);for(;u<o;++u)c[u]=r[u];return new Ye(c,this._parents)}function SN(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function CN(e){e||(e=EN);function n(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a){for(var s=r[a],c=s.length,u=o[a]=new Array(c),l,d=0;d<c;++d)(l=s[d])&&(u[d]=l);u.sort(n)}return new Ye(o,this._parents).order()}function EN(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function NN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kN(){return Array.from(this)}function RN(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function AN(){let e=0;for(const n of this)++e;return e}function jN(){return!this.node()}function PN(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length,c;a<s;++a)(c=o[a])&&e.call(c,c.__data__,a,o);return this}function MN(e){return function(){this.removeAttribute(e)}}function IN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TN(e,n){return function(){this.setAttribute(e,n)}}function ON(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function qN(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function DN(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function zN(e,n){var r=Ui(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?IN:MN:typeof n=="function"?r.local?DN:qN:r.local?ON:TN)(r,n))}function l_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function LN(e){return function(){this.style.removeProperty(e)}}function $N(e,n,r){return function(){this.style.setProperty(e,n,r)}}function FN(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function HN(e,n,r){return arguments.length>1?this.each((n==null?LN:typeof n=="function"?FN:$N)(e,n,r??"")):On(this.node(),e)}function On(e,n){return e.style.getPropertyValue(n)||l_(e).getComputedStyle(e,null).getPropertyValue(n)}function BN(e){return function(){delete this[e]}}function VN(e,n){return function(){this[e]=n}}function GN(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function UN(e,n){return arguments.length>1?this.each((n==null?BN:typeof n=="function"?GN:VN)(e,n)):this.node()[e]}function f_(e){return e.trim().split(/^|\s+/)}function vd(e){return e.classList||new d_(e)}function d_(e){this._node=e,this._names=f_(e.getAttribute("class")||"")}d_.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function h_(e,n){for(var r=vd(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function p_(e,n){for(var r=vd(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function WN(e){return function(){h_(this,e)}}function KN(e){return function(){p_(this,e)}}function YN(e,n){return function(){(n.apply(this,arguments)?h_:p_)(this,e)}}function XN(e,n){var r=f_(e+"");if(arguments.length<2){for(var i=vd(this.node()),o=-1,a=r.length;++o<a;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof n=="function"?YN:n?WN:KN)(r,n))}function ZN(){this.textContent=""}function JN(e){return function(){this.textContent=e}}function QN(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function ek(e){return arguments.length?this.each(e==null?ZN:(typeof e=="function"?QN:JN)(e)):this.node().textContent}function tk(){this.innerHTML=""}function nk(e){return function(){this.innerHTML=e}}function rk(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ik(e){return arguments.length?this.each(e==null?tk:(typeof e=="function"?rk:nk)(e)):this.node().innerHTML}function ok(){this.nextSibling&&this.parentNode.appendChild(this)}function ak(){return this.each(ok)}function sk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ck(){return this.each(sk)}function uk(e){var n=typeof e=="function"?e:o_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function lk(){return null}function fk(e,n){var r=typeof e=="function"?e:o_(e),i=n==null?lk:typeof n=="function"?n:yd(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function dk(){var e=this.parentNode;e&&e.removeChild(this)}function hk(){return this.each(dk)}function pk(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function gk(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function mk(e){return this.select(e?gk:pk)}function yk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vk(e){return function(n){e.call(this,n,this.__data__)}}function xk(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function bk(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,o=n.length,a;r<o;++r)a=n[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):n[++i]=a;++i?n.length=i:delete this.__on}}}function _k(e,n,r){return function(){var i=this.__on,o,a=vk(n);if(i){for(var s=0,c=i.length;s<c;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=n;return}}this.addEventListener(e.type,a,r),o={type:e.type,name:e.name,value:n,listener:a,options:r},i?i.push(o):this.__on=[o]}}function wk(e,n,r){var i=xk(e+""),o,a=i.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,l=c.length,d;u<l;++u)for(o=0,d=c[u];o<a;++o)if((s=i[o]).type===d.type&&s.name===d.name)return d.value}return}for(c=n?_k:bk,o=0;o<a;++o)this.each(c(i[o],n,r));return this}function g_(e,n,r){var i=l_(e),o=i.CustomEvent;typeof o=="function"?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function Sk(e,n){return function(){return g_(this,e,n)}}function Ck(e,n){return function(){return g_(this,e,n.apply(this,arguments))}}function Ek(e,n){return this.each((typeof n=="function"?Ck:Sk)(e,n))}function*Nk(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var m_=[null];function Ye(e,n){this._groups=e,this._parents=n}function Ir(){return new Ye([[document.documentElement]],m_)}function kk(){return this}Ye.prototype=Ir.prototype={constructor:Ye,select:QE,selectAll:rN,selectChild:sN,selectChildren:fN,filter:dN,data:vN,enter:hN,exit:bN,join:_N,merge:wN,selection:kk,order:SN,sort:CN,call:NN,nodes:kN,node:RN,size:AN,empty:jN,each:PN,attr:zN,style:HN,property:UN,classed:XN,text:ek,html:ik,raise:ak,lower:ck,append:uk,insert:fk,remove:hk,clone:mk,datum:yk,on:wk,dispatch:Ek,[Symbol.iterator]:Nk};function Oe(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],m_)}function Rk(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Qe(e,n){if(e=Rk(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const Ak={passive:!1},_r={capture:!0,passive:!1};function zo(e){e.stopImmediatePropagation()}function In(e){e.preventDefault(),e.stopImmediatePropagation()}function y_(e){var n=e.document.documentElement,r=Oe(e).on("dragstart.drag",In,_r);"onselectstart"in n?r.on("selectstart.drag",In,_r):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function v_(e,n){var r=e.document.documentElement,i=Oe(e).on("dragstart.drag",null);n&&(i.on("click.drag",In,_r),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Wr=e=>()=>e;function Pf(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:c,dx:u,dy:l,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:d}})}Pf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jk(e){return!e.ctrlKey&&!e.button}function Pk(){return this.parentNode}function Mk(e,n){return n??{x:e.x,y:e.y}}function Ik(){return navigator.maxTouchPoints||"ontouchstart"in this}function xd(){var e=jk,n=Pk,r=Mk,i=Ik,o={},a=Mr("start","drag","end"),s=0,c,u,l,d,f=0;function h(w){w.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",g,Ak).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,S){if(!(d||!e.call(this,w,S))){var C=b(this,n.call(this,w,S),w,S,"mouse");C&&(Oe(w.view).on("mousemove.drag",y,_r).on("mouseup.drag",x,_r),y_(w.view),zo(w),l=!1,c=w.clientX,u=w.clientY,C("start",w))}}function y(w){if(In(w),!l){var S=w.clientX-c,C=w.clientY-u;l=S*S+C*C>f}o.mouse("drag",w)}function x(w){Oe(w.view).on("mousemove.drag mouseup.drag",null),v_(w.view,l),In(w),o.mouse("end",w)}function v(w,S){if(e.call(this,w,S)){var C=w.changedTouches,E=n.call(this,w,S),N=C.length,A,R;for(A=0;A<N;++A)(R=b(this,E,w,S,C[A].identifier,C[A]))&&(zo(w),R("start",w,C[A]))}}function g(w){var S=w.changedTouches,C=S.length,E,N;for(E=0;E<C;++E)(N=o[S[E].identifier])&&(In(w),N("drag",w,S[E]))}function _(w){var S=w.changedTouches,C=S.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<C;++E)(N=o[S[E].identifier])&&(zo(w),N("end",w,S[E]))}function b(w,S,C,E,N,A){var R=a.copy(),k=Qe(A||C,S),P,O,M;if((M=r.call(w,new Pf("beforestart",{sourceEvent:C,target:h,identifier:N,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:R}),E))!=null)return P=M.x-k[0]||0,O=M.y-k[1]||0,function T(q,B,F){var G=k,V;switch(q){case"start":o[N]=T,V=s++;break;case"end":delete o[N],--s;case"drag":k=Qe(F||B,S),V=s;break}R.call(q,w,new Pf(q,{sourceEvent:B,subject:M,target:h,identifier:N,active:V,x:k[0]+P,y:k[1]+O,dx:k[0]-G[0],dy:k[1]-G[1],dispatch:R}),E)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Wr(!!w),h):e},h.container=function(w){return arguments.length?(n=typeof w=="function"?w:Wr(w),h):n},h.subject=function(w){return arguments.length?(r=typeof w=="function"?w:Wr(w),h):r},h.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Wr(!!w),h):i},h.on=function(){var w=a.on.apply(a,arguments);return w===a?h:w},h.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,h):Math.sqrt(f)},h}function bd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function x_(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function Tr(){}var wr=.7,yi=1/wr,Tn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tk=/^#([0-9a-f]{3,8})$/,Ok=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),qk=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),Dk=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Sr}\\)$`),zk=new RegExp(`^rgba\\(${mt},${mt},${mt},${Sr}\\)$`),Lk=new RegExp(`^hsl\\(${Sr},${mt},${mt}\\)$`),$k=new RegExp(`^hsla\\(${Sr},${mt},${mt},${Sr}\\)$`),zh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bd(Tr,un,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lh,formatHex:Lh,formatHex8:Fk,formatHsl:Hk,formatRgb:$h,toString:$h});function Lh(){return this.rgb().formatHex()}function Fk(){return this.rgb().formatHex8()}function Hk(){return b_(this).formatHsl()}function $h(){return this.rgb().formatRgb()}function un(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Tk.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Fh(n):r===3?new Le(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Kr(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Kr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ok.exec(e))?new Le(n[1],n[2],n[3],1):(n=qk.exec(e))?new Le(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Dk.exec(e))?Kr(n[1],n[2],n[3],n[4]):(n=zk.exec(e))?Kr(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Lk.exec(e))?Vh(n[1],n[2]/100,n[3]/100,1):(n=$k.exec(e))?Vh(n[1],n[2]/100,n[3]/100,n[4]):zh.hasOwnProperty(e)?Fh(zh[e]):e==="transparent"?new Le(NaN,NaN,NaN,0):null}function Fh(e){return new Le(e>>16&255,e>>8&255,e&255,1)}function Kr(e,n,r,i){return i<=0&&(e=n=r=NaN),new Le(e,n,r,i)}function Bk(e){return e instanceof Tr||(e=un(e)),e?(e=e.rgb(),new Le(e.r,e.g,e.b,e.opacity)):new Le}function Mf(e,n,r,i){return arguments.length===1?Bk(e):new Le(e,n,r,i??1)}function Le(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}bd(Le,Mf,x_(Tr,{brighter(e){return e=e==null?yi:Math.pow(yi,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Le(on(this.r),on(this.g),on(this.b),vi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hh,formatHex:Hh,formatHex8:Vk,formatRgb:Bh,toString:Bh}));function Hh(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Vk(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bh(){const e=vi(this.opacity);return`${e===1?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${e===1?")":`, ${e})`}`}function vi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function on(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=on(e),(e<16?"0":"")+e.toString(16)}function Vh(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new at(e,n,r,i)}function b_(e){if(e instanceof at)return new at(e.h,e.s,e.l,e.opacity);if(e instanceof Tr||(e=un(e)),!e)return new at;if(e instanceof at)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),s=NaN,c=a-o,u=(a+o)/2;return c?(n===a?s=(r-i)/c+(r<i)*6:r===a?s=(i-n)/c+2:s=(n-r)/c+4,c/=u<.5?a+o:2-a-o,s*=60):c=u>0&&u<1?0:s,new at(s,c,u,e.opacity)}function Gk(e,n,r,i){return arguments.length===1?b_(e):new at(e,n,r,i??1)}function at(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}bd(at,Gk,x_(Tr,{brighter(e){return e=e==null?yi:Math.pow(yi,e),new at(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new at(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new Le(Lo(e>=240?e-240:e+120,o,i),Lo(e,o,i),Lo(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new at(Gh(this.h),Yr(this.s),Yr(this.l),vi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vi(this.opacity);return`${e===1?"hsl(":"hsla("}${Gh(this.h)}, ${Yr(this.s)*100}%, ${Yr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Gh(e){return e=(e||0)%360,e<0?e+360:e}function Yr(e){return Math.max(0,Math.min(1,e||0))}function Lo(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const _d=e=>()=>e;function Uk(e,n){return function(r){return e+r*n}}function Wk(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function Kk(e){return(e=+e)==1?__:function(n,r){return r-n?Wk(n,r,e):_d(isNaN(n)?r:n)}}function __(e,n){var r=n-e;return r?Uk(e,r):_d(isNaN(e)?n:e)}const xi=(function e(n){var r=Kk(n);function i(o,a){var s=r((o=Mf(o)).r,(a=Mf(a)).r),c=r(o.g,a.g),u=r(o.b,a.b),l=__(o.opacity,a.opacity);return function(d){return o.r=s(d),o.g=c(d),o.b=u(d),o.opacity=l(d),o+""}}return i.gamma=e,i})(1);function Yk(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,i=n.slice(),o;return function(a){for(o=0;o<r;++o)i[o]=e[o]*(1-a)+n[o]*a;return i}}function Xk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zk(e,n){var r=n?n.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r),s;for(s=0;s<i;++s)o[s]=dr(e[s],n[s]);for(;s<r;++s)a[s]=n[s];return function(c){for(s=0;s<i;++s)a[s]=o[s](c);return a}}function Jk(e,n){var r=new Date;return e=+e,n=+n,function(i){return r.setTime(e*(1-i)+n*i),r}}function pt(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function Qk(e,n){var r={},i={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?r[o]=dr(e[o],n[o]):i[o]=n[o];return function(a){for(o in r)i[o]=r[o](a);return i}}var If=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$o=new RegExp(If.source,"g");function eR(e){return function(){return e}}function tR(e){return function(n){return e(n)+""}}function w_(e,n){var r=If.lastIndex=$o.lastIndex=0,i,o,a,s=-1,c=[],u=[];for(e=e+"",n=n+"";(i=If.exec(e))&&(o=$o.exec(n));)(a=o.index)>r&&(a=n.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(i=i[0])===(o=o[0])?c[s]?c[s]+=o:c[++s]=o:(c[++s]=null,u.push({i:s,x:pt(i,o)})),r=$o.lastIndex;return r<n.length&&(a=n.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?u[0]?tR(u[0].x):eR(n):(n=u.length,function(l){for(var d=0,f;d<n;++d)c[(f=u[d]).i]=f.x(l);return c.join("")})}function dr(e,n){var r=typeof n,i;return n==null||r==="boolean"?_d(n):(r==="number"?pt:r==="string"?(i=un(n))?(n=i,xi):w_:n instanceof un?xi:n instanceof Date?Jk:Xk(n)?Yk:Array.isArray(n)?Zk:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Qk:pt)(e,n)}var Uh=180/Math.PI,Tf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function S_(e,n,r,i,o,a){var s,c,u;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(u=e*r+n*i)&&(r-=e*u,i-=n*u),(c=Math.sqrt(r*r+i*i))&&(r/=c,i/=c,u/=c),e*i<n*r&&(e=-e,n=-n,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(n,e)*Uh,skewX:Math.atan(u)*Uh,scaleX:s,scaleY:c}}var Xr;function nR(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Tf:S_(n.a,n.b,n.c,n.d,n.e,n.f)}function rR(e){return e==null||(Xr||(Xr=document.createElementNS("http://www.w3.org/2000/svg","g")),Xr.setAttribute("transform",e),!(e=Xr.transform.baseVal.consolidate()))?Tf:(e=e.matrix,S_(e.a,e.b,e.c,e.d,e.e,e.f))}function C_(e,n,r,i){function o(l){return l.length?l.pop()+" ":""}function a(l,d,f,h,p,y){if(l!==f||d!==h){var x=p.push("translate(",null,n,null,r);y.push({i:x-4,x:pt(l,f)},{i:x-2,x:pt(d,h)})}else(f||h)&&p.push("translate("+f+n+h+r)}function s(l,d,f,h){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),h.push({i:f.push(o(f)+"rotate(",null,i)-2,x:pt(l,d)})):d&&f.push(o(f)+"rotate("+d+i)}function c(l,d,f,h){l!==d?h.push({i:f.push(o(f)+"skewX(",null,i)-2,x:pt(l,d)}):d&&f.push(o(f)+"skewX("+d+i)}function u(l,d,f,h,p,y){if(l!==f||d!==h){var x=p.push(o(p)+"scale(",null,",",null,")");y.push({i:x-4,x:pt(l,f)},{i:x-2,x:pt(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(l,d){var f=[],h=[];return l=e(l),d=e(d),a(l.translateX,l.translateY,d.translateX,d.translateY,f,h),s(l.rotate,d.rotate,f,h),c(l.skewX,d.skewX,f,h),u(l.scaleX,l.scaleY,d.scaleX,d.scaleY,f,h),l=d=null,function(p){for(var y=-1,x=h.length,v;++y<x;)f[(v=h[y]).i]=v.x(p);return f.join("")}}}var iR=C_(nR,"px, ","px)","deg)"),oR=C_(rR,", ",")",")"),aR=1e-12;function Wh(e){return((e=Math.exp(e))+1/e)/2}function sR(e){return((e=Math.exp(e))-1/e)/2}function cR(e){return((e=Math.exp(2*e))-1)/(e+1)}const ai=(function e(n,r,i){function o(a,s){var c=a[0],u=a[1],l=a[2],d=s[0],f=s[1],h=s[2],p=d-c,y=f-u,x=p*p+y*y,v,g;if(x<aR)g=Math.log(h/l)/n,v=function(E){return[c+E*p,u+E*y,l*Math.exp(n*E*g)]};else{var _=Math.sqrt(x),b=(h*h-l*l+i*x)/(2*l*r*_),w=(h*h-l*l-i*x)/(2*h*r*_),S=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(w*w+1)-w);g=(C-S)/n,v=function(E){var N=E*g,A=Wh(S),R=l/(r*_)*(A*cR(n*N+S)-sR(S));return[c+R*p,u+R*y,l*A/Wh(n*N+S)]}}return v.duration=g*1e3*n/Math.SQRT2,v}return o.rho=function(a){var s=Math.max(.001,+a),c=s*s,u=c*c;return e(s,c,u)},o})(Math.SQRT2,2,4);var qn=0,or=0,Yn=0,E_=1e3,bi,ar,_i=0,ln=0,Wi=0,Cr=typeof performance=="object"&&performance.now?performance:Date,N_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wd(){return ln||(N_(uR),ln=Cr.now()+Wi)}function uR(){ln=0}function wi(){this._call=this._time=this._next=null}wi.prototype=Sd.prototype={constructor:wi,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?wd():+r)+(n==null?0:+n),!this._next&&ar!==this&&(ar?ar._next=this:bi=this,ar=this),this._call=e,this._time=r,Of()},stop:function(){this._call&&(this._call=null,this._time=1/0,Of())}};function Sd(e,n,r){var i=new wi;return i.restart(e,n,r),i}function lR(){wd(),++qn;for(var e=bi,n;e;)(n=ln-e._time)>=0&&e._call.call(void 0,n),e=e._next;--qn}function Kh(){ln=(_i=Cr.now())+Wi,qn=or=0;try{lR()}finally{qn=0,dR(),ln=0}}function fR(){var e=Cr.now(),n=e-_i;n>E_&&(Wi-=n,_i=e)}function dR(){for(var e,n=bi,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:bi=r);ar=e,Of(i)}function Of(e){if(!qn){or&&(or=clearTimeout(or));var n=e-ln;n>24?(e<1/0&&(or=setTimeout(Kh,e-Cr.now()-Wi)),Yn&&(Yn=clearInterval(Yn))):(Yn||(_i=Cr.now(),Yn=setInterval(fR,E_)),qn=1,N_(Kh))}}function Yh(e,n,r){var i=new wi;return n=n==null?0:+n,i.restart(o=>{i.stop(),e(o+n)},n,r),i}var hR=Mr("start","end","cancel","interrupt"),pR=[],k_=0,Xh=1,qf=2,si=3,Zh=4,Df=5,ci=6;function Ki(e,n,r,i,o,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;gR(e,r,{name:n,index:i,group:o,on:hR,tween:pR,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:k_})}function Cd(e,n){var r=dt(e,n);if(r.state>k_)throw new Error("too late; already scheduled");return r}function xt(e,n){var r=dt(e,n);if(r.state>si)throw new Error("too late; already running");return r}function dt(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function gR(e,n,r){var i=e.__transition,o;i[n]=r,r.timer=Sd(a,0,r.time);function a(l){r.state=Xh,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var d,f,h,p;if(r.state!==Xh)return u();for(d in i)if(p=i[d],p.name===r.name){if(p.state===si)return Yh(s);p.state===Zh?(p.state=ci,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[d]):+d<n&&(p.state=ci,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[d])}if(Yh(function(){r.state===si&&(r.state=Zh,r.timer.restart(c,r.delay,r.time),c(l))}),r.state=qf,r.on.call("start",e,e.__data__,r.index,r.group),r.state===qf){for(r.state=si,o=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(o[++f]=p);o.length=f+1}}function c(l){for(var d=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=Df,1),f=-1,h=o.length;++f<h;)o[f].call(e,d);r.state===Df&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){r.state=ci,r.timer.stop(),delete i[n];for(var l in i)return;delete e.__transition}}function ui(e,n){var r=e.__transition,i,o,a=!0,s;if(r){n=n==null?null:n+"";for(s in r){if((i=r[s]).name!==n){a=!1;continue}o=i.state>qf&&i.state<Df,i.state=ci,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[s]}a&&delete e.__transition}}function mR(e){return this.each(function(){ui(this,e)})}function yR(e,n){var r,i;return function(){var o=xt(this,e),a=o.tween;if(a!==r){i=r=a;for(var s=0,c=i.length;s<c;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function vR(e,n,r){var i,o;if(typeof r!="function")throw new Error;return function(){var a=xt(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var c={name:n,value:r},u=0,l=o.length;u<l;++u)if(o[u].name===n){o[u]=c;break}u===l&&o.push(c)}a.tween=o}}function xR(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=dt(this.node(),r).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((n==null?yR:vR)(r,e,n))}function Ed(e,n,r){var i=e._id;return e.each(function(){var o=xt(this,i);(o.value||(o.value={}))[n]=r.apply(this,arguments)}),function(o){return dt(o,i).value[n]}}function R_(e,n){var r;return(typeof n=="number"?pt:n instanceof un?xi:(r=un(n))?(n=r,xi):w_)(e,n)}function bR(e){return function(){this.removeAttribute(e)}}function _R(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wR(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===i?a:a=n(i=s,r)}}function SR(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?a:a=n(i=s,r)}}function CR(e,n,r){var i,o,a;return function(){var s,c=r(this),u;return c==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=c+"",s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,c)))}}function ER(e,n,r){var i,o,a;return function(){var s,c=r(this),u;return c==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=c+"",s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,c)))}}function NR(e,n){var r=Ui(e),i=r==="transform"?oR:R_;return this.attrTween(e,typeof n=="function"?(r.local?ER:CR)(r,i,Ed(this,"attr."+e,n)):n==null?(r.local?_R:bR)(r):(r.local?SR:wR)(r,i,n))}function kR(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function RR(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function AR(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&RR(e,a)),r}return o._value=n,o}function jR(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&kR(e,a)),r}return o._value=n,o}function PR(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=Ui(e);return this.tween(r,(i.local?AR:jR)(i,n))}function MR(e,n){return function(){Cd(this,e).delay=+n.apply(this,arguments)}}function IR(e,n){return n=+n,function(){Cd(this,e).delay=n}}function TR(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?MR:IR)(n,e)):dt(this.node(),n).delay}function OR(e,n){return function(){xt(this,e).duration=+n.apply(this,arguments)}}function qR(e,n){return n=+n,function(){xt(this,e).duration=n}}function DR(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?OR:qR)(n,e)):dt(this.node(),n).duration}function zR(e,n){if(typeof n!="function")throw new Error;return function(){xt(this,e).ease=n}}function LR(e){var n=this._id;return arguments.length?this.each(zR(n,e)):dt(this.node(),n).ease}function $R(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;xt(this,e).ease=r}}function FR(e){if(typeof e!="function")throw new Error;return this.each($R(this._id,e))}function HR(e){typeof e!="function"&&(e=s_(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,c=i[o]=[],u,l=0;l<s;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&c.push(u);return new Mt(i,this._parents,this._name,this._id)}function BR(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var u=n[c],l=r[c],d=u.length,f=s[c]=new Array(d),h,p=0;p<d;++p)(h=u[p]||l[p])&&(f[p]=h);for(;c<i;++c)s[c]=n[c];return new Mt(s,this._parents,this._name,this._id)}function VR(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function GR(e,n,r){var i,o,a=VR(n)?Cd:xt;return function(){var s=a(this,e),c=s.on;c!==i&&(o=(i=c).copy()).on(n,r),s.on=o}}function UR(e,n){var r=this._id;return arguments.length<2?dt(this.node(),r).on.on(e):this.each(GR(r,e,n))}function WR(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function KR(){return this.on("end.remove",WR(this._id))}function YR(e){var n=this._name,r=this._id;typeof e!="function"&&(e=yd(e));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var c=i[s],u=c.length,l=a[s]=new Array(u),d,f,h=0;h<u;++h)(d=c[h])&&(f=e.call(d,d.__data__,h,c))&&("__data__"in d&&(f.__data__=d.__data__),l[h]=f,Ki(l[h],n,r,h,l,dt(d,r)));return new Mt(a,this._parents,n,r)}function XR(e){var n=this._name,r=this._id;typeof e!="function"&&(e=a_(e));for(var i=this._groups,o=i.length,a=[],s=[],c=0;c<o;++c)for(var u=i[c],l=u.length,d,f=0;f<l;++f)if(d=u[f]){for(var h=e.call(d,d.__data__,f,u),p,y=dt(d,r),x=0,v=h.length;x<v;++x)(p=h[x])&&Ki(p,n,r,x,h,y);a.push(h),s.push(d)}return new Mt(a,s,n,r)}var ZR=Ir.prototype.constructor;function JR(){return new ZR(this._groups,this._parents)}function QR(e,n){var r,i,o;return function(){var a=On(this,e),s=(this.style.removeProperty(e),On(this,e));return a===s?null:a===r&&s===i?o:o=n(r=a,i=s)}}function A_(e){return function(){this.style.removeProperty(e)}}function eA(e,n,r){var i,o=r+"",a;return function(){var s=On(this,e);return s===o?null:s===i?a:a=n(i=s,r)}}function tA(e,n,r){var i,o,a;return function(){var s=On(this,e),c=r(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(e),On(this,e))),s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,c))}}function nA(e,n){var r,i,o,a="style."+n,s="end."+a,c;return function(){var u=xt(this,e),l=u.on,d=u.value[a]==null?c||(c=A_(n)):void 0;(l!==r||o!==d)&&(i=(r=l).copy()).on(s,o=d),u.on=i}}function rA(e,n,r){var i=(e+="")=="transform"?iR:R_;return n==null?this.styleTween(e,QR(e,i)).on("end.style."+e,A_(e)):typeof n=="function"?this.styleTween(e,tA(e,i,Ed(this,"style."+e,n))).each(nA(this._id,e)):this.styleTween(e,eA(e,i,n),r).on("end.style."+e,null)}function iA(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function oA(e,n,r){var i,o;function a(){var s=n.apply(this,arguments);return s!==o&&(i=(o=s)&&iA(e,s,r)),i}return a._value=n,a}function aA(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,oA(e,n,r??""))}function sA(e){return function(){this.textContent=e}}function cA(e){return function(){var n=e(this);this.textContent=n??""}}function uA(e){return this.tween("text",typeof e=="function"?cA(Ed(this,"text",e)):sA(e==null?"":e+""))}function lA(e){return function(n){this.textContent=e.call(this,n)}}function fA(e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&lA(o)),n}return i._value=e,i}function dA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,fA(e))}function hA(){for(var e=this._name,n=this._id,r=j_(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],c=s.length,u,l=0;l<c;++l)if(u=s[l]){var d=dt(u,n);Ki(u,e,r,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Mt(i,this._parents,e,r)}function pA(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(a,s){var c={value:s},u={value:function(){--o===0&&a()}};r.each(function(){var l=xt(this,i),d=l.on;d!==e&&(n=(e=d).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(u)),l.on=n}),o===0&&a()})}var gA=0;function Mt(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function j_(){return++gA}var wt=Ir.prototype;Mt.prototype={constructor:Mt,select:YR,selectAll:XR,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:HR,merge:BR,selection:JR,transition:hA,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:UR,attr:NR,attrTween:PR,style:rA,styleTween:aA,text:uA,textTween:dA,remove:KR,tween:xR,delay:TR,duration:DR,ease:LR,easeVarying:FR,end:pA,[Symbol.iterator]:wt[Symbol.iterator]};function mA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yA={time:null,delay:0,duration:250,ease:mA};function vA(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function xA(e){var n,r;e instanceof Mt?(n=e._id,e=e._name):(n=j_(),(r=yA).time=wd(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],c=s.length,u,l=0;l<c;++l)(u=s[l])&&Ki(u,e,n,l,s,r||vA(u,n));return new Mt(i,this._parents,e,n)}Ir.prototype.interrupt=mR;Ir.prototype.transition=xA;const Zr=e=>()=>e;function bA(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function At(e,n,r){this.k=e,this.x=n,this.y=r}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yi=new At(1,0,0);ot.prototype=At.prototype;function ot(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Yi;return e.__zoom}function Fo(e){e.stopImmediatePropagation()}function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function _A(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jh(){return this.__zoom||Yi}function SA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function CA(){return navigator.maxTouchPoints||"ontouchstart"in this}function EA(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Nd(){var e=_A,n=wA,r=EA,i=SA,o=CA,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,u=ai,l=Mr("start","zoom","end"),d,f,h,p=500,y=150,x=0,v=10;function g(M){M.property("__zoom",Jh).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(M,T,q,B){var F=M.selection?M.selection():M;F.property("__zoom",Jh),M!==F?S(M,T,q,B):F.interrupt().each(function(){C(this,arguments).event(B).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},g.scaleBy=function(M,T,q,B){g.scaleTo(M,function(){var F=this.__zoom.k,G=typeof T=="function"?T.apply(this,arguments):T;return F*G},q,B)},g.scaleTo=function(M,T,q,B){g.transform(M,function(){var F=n.apply(this,arguments),G=this.__zoom,V=q==null?w(F):typeof q=="function"?q.apply(this,arguments):q,K=G.invert(V),W=typeof T=="function"?T.apply(this,arguments):T;return r(b(_(G,W),V,K),F,s)},q,B)},g.translateBy=function(M,T,q,B){g.transform(M,function(){return r(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof q=="function"?q.apply(this,arguments):q),n.apply(this,arguments),s)},null,B)},g.translateTo=function(M,T,q,B,F){g.transform(M,function(){var G=n.apply(this,arguments),V=this.__zoom,K=B==null?w(G):typeof B=="function"?B.apply(this,arguments):B;return r(Yi.translate(K[0],K[1]).scale(V.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof q=="function"?-q.apply(this,arguments):-q),G,s)},B,F)};function _(M,T){return T=Math.max(a[0],Math.min(a[1],T)),T===M.k?M:new At(T,M.x,M.y)}function b(M,T,q){var B=T[0]-q[0]*M.k,F=T[1]-q[1]*M.k;return B===M.x&&F===M.y?M:new At(M.k,B,F)}function w(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function S(M,T,q,B){M.on("start.zoom",function(){C(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(B).end()}).tween("zoom",function(){var F=this,G=arguments,V=C(F,G).event(B),K=n.apply(F,G),W=q==null?w(K):typeof q=="function"?q.apply(F,G):q,D=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),I=F.__zoom,z=typeof T=="function"?T.apply(F,G):T,L=u(I.invert(W).concat(D/I.k),z.invert(W).concat(D/z.k));return function(H){if(H===1)H=z;else{var U=L(H),Y=D/U[2];H=new At(Y,W[0]-U[0]*Y,W[1]-U[1]*Y)}V.zoom(null,H)}})}function C(M,T,q){return!q&&M.__zooming||new E(M,T)}function E(M,T){this.that=M,this.args=T,this.active=0,this.sourceEvent=null,this.extent=n.apply(M,T),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,T){return this.mouse&&M!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var T=Oe(this.that).datum();l.call(M,this.that,new bA(M,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:l}),T)}};function N(M,...T){if(!e.apply(this,arguments))return;var q=C(this,T).event(M),B=this.__zoom,F=Math.max(a[0],Math.min(a[1],B.k*Math.pow(2,i.apply(this,arguments)))),G=Qe(M);if(q.wheel)(q.mouse[0][0]!==G[0]||q.mouse[0][1]!==G[1])&&(q.mouse[1]=B.invert(q.mouse[0]=G)),clearTimeout(q.wheel);else{if(B.k===F)return;q.mouse=[G,B.invert(G)],ui(this),q.start()}Xn(M),q.wheel=setTimeout(V,y),q.zoom("mouse",r(b(_(B,F),q.mouse[0],q.mouse[1]),q.extent,s));function V(){q.wheel=null,q.end()}}function A(M,...T){if(h||!e.apply(this,arguments))return;var q=M.currentTarget,B=C(this,T,!0).event(M),F=Oe(M.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",D,!0),G=Qe(M,q),V=M.clientX,K=M.clientY;y_(M.view),Fo(M),B.mouse=[G,this.__zoom.invert(G)],ui(this),B.start();function W(I){if(Xn(I),!B.moved){var z=I.clientX-V,L=I.clientY-K;B.moved=z*z+L*L>x}B.event(I).zoom("mouse",r(b(B.that.__zoom,B.mouse[0]=Qe(I,q),B.mouse[1]),B.extent,s))}function D(I){F.on("mousemove.zoom mouseup.zoom",null),v_(I.view,B.moved),Xn(I),B.event(I).end()}}function R(M,...T){if(e.apply(this,arguments)){var q=this.__zoom,B=Qe(M.changedTouches?M.changedTouches[0]:M,this),F=q.invert(B),G=q.k*(M.shiftKey?.5:2),V=r(b(_(q,G),B,F),n.apply(this,T),s);Xn(M),c>0?Oe(this).transition().duration(c).call(S,V,B,M):Oe(this).call(g.transform,V,B,M)}}function k(M,...T){if(e.apply(this,arguments)){var q=M.touches,B=q.length,F=C(this,T,M.changedTouches.length===B).event(M),G,V,K,W;for(Fo(M),V=0;V<B;++V)K=q[V],W=Qe(K,this),W=[W,this.__zoom.invert(W),K.identifier],F.touch0?!F.touch1&&F.touch0[2]!==W[2]&&(F.touch1=W,F.taps=0):(F.touch0=W,G=!0,F.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(F.taps<2&&(f=W[0],d=setTimeout(function(){d=null},p)),ui(this),F.start())}}function P(M,...T){if(this.__zooming){var q=C(this,T).event(M),B=M.changedTouches,F=B.length,G,V,K,W;for(Xn(M),G=0;G<F;++G)V=B[G],K=Qe(V,this),q.touch0&&q.touch0[2]===V.identifier?q.touch0[0]=K:q.touch1&&q.touch1[2]===V.identifier&&(q.touch1[0]=K);if(V=q.that.__zoom,q.touch1){var D=q.touch0[0],I=q.touch0[1],z=q.touch1[0],L=q.touch1[1],H=(H=z[0]-D[0])*H+(H=z[1]-D[1])*H,U=(U=L[0]-I[0])*U+(U=L[1]-I[1])*U;V=_(V,Math.sqrt(H/U)),K=[(D[0]+z[0])/2,(D[1]+z[1])/2],W=[(I[0]+L[0])/2,(I[1]+L[1])/2]}else if(q.touch0)K=q.touch0[0],W=q.touch0[1];else return;q.zoom("touch",r(b(V,K,W),q.extent,s))}}function O(M,...T){if(this.__zooming){var q=C(this,T).event(M),B=M.changedTouches,F=B.length,G,V;for(Fo(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),G=0;G<F;++G)V=B[G],q.touch0&&q.touch0[2]===V.identifier?delete q.touch0:q.touch1&&q.touch1[2]===V.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(V=Qe(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<v)){var K=Oe(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return g.wheelDelta=function(M){return arguments.length?(i=typeof M=="function"?M:Zr(+M),g):i},g.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Zr(!!M),g):e},g.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:Zr(!!M),g):o},g.extent=function(M){return arguments.length?(n=typeof M=="function"?M:Zr([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),g):n},g.scaleExtent=function(M){return arguments.length?(a[0]=+M[0],a[1]=+M[1],g):[a[0],a[1]]},g.translateExtent=function(M){return arguments.length?(s[0][0]=+M[0][0],s[1][0]=+M[1][0],s[0][1]=+M[0][1],s[1][1]=+M[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(M){return arguments.length?(r=M,g):r},g.duration=function(M){return arguments.length?(c=+M,g):c},g.interpolate=function(M){return arguments.length?(u=M,g):u},g.on=function(){var M=l.on.apply(l,arguments);return M===l?g:M},g.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,g):Math.sqrt(x)},g.tapDistance=function(M){return arguments.length?(v=+M,g):v},g}const yt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:i}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Er=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],P_=["Enter"," ","Escape"],M_={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Dn;(function(e){e.Strict="strict",e.Loose="loose"})(Dn||(Dn={}));var an;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(an||(an={}));var Nr;(function(e){e.Partial="partial",e.Full="full"})(Nr||(Nr={}));const I_={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ft;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ft||(Ft={}));var zn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zn||(zn={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));const Qh={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function T_(e){return e===null?null:e?"valid":"invalid"}const O_=e=>"id"in e&&"source"in e&&"target"in e,NA=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),kd=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Or=(e,n=[0,0])=>{const{width:r,height:i}=It(e),o=e.origin??n,a=r*o[0],s=i*o[1];return{x:e.position.x-a,y:e.position.y-s}},kA=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((i,o)=>{const a=typeof o=="string";let s=!n.nodeLookup&&!a?o:void 0;n.nodeLookup&&(s=a?n.nodeLookup.get(o):kd(o)?o:n.nodeLookup.get(o.id));const c=s?Si(s,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Xi(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zi(r)},qr=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(r=Xi(r,Si(o)),i=!0)}),i?Zi(r):{x:0,y:0,width:0,height:0}},Rd=(e,n,[r,i,o]=[0,0,1],a=!1,s=!1)=>{const c={...zr(n,[r,i,o]),width:n.width/o,height:n.height/o},u=[];for(const l of e.values()){const{measured:d,selectable:f=!0,hidden:h=!1}=l;if(s&&!f||h)continue;const p=d.width??l.width??l.initialWidth??null,y=d.height??l.height??l.initialHeight??null,x=kr(c,$n(l)),v=(p??0)*(y??0),g=a&&x>0;(!l.internals.handleBounds||g||x>=v||l.dragging)&&u.push(l)}return u},RA=(e,n)=>{const r=new Set;return e.forEach(i=>{r.add(i.id)}),n.filter(i=>r.has(i.source)||r.has(i.target))};function AA(e,n){const r=new Map,i=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!i||i.has(o.id))&&r.set(o.id,o)}),r}async function jA({nodes:e,width:n,height:r,panZoom:i,minZoom:o,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const c=AA(e,s),u=qr(c),l=Ad(u,n,r,s?.minZoom??o,s?.maxZoom??a,s?.padding??.1);return await i.setViewport(l,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function q_({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:i=[0,0],nodeExtent:o,onError:a}){const s=r.get(e),c=s.parentId?r.get(s.parentId):void 0,{x:u,y:l}=c?c.internals.positionAbsolute:{x:0,y:0},d=s.origin??i;let f=s.extent||o;if(s.extent==="parent"&&!s.expandParent)if(!c)a?.("005",yt.error005());else{const p=c.measured.width,y=c.measured.height;p&&y&&(f=[[u,l],[u+p,l+y]])}else c&&Fn(s.extent)&&(f=[[s.extent[0][0]+u,s.extent[0][1]+l],[s.extent[1][0]+u,s.extent[1][1]+l]]);const h=Fn(f)?fn(n,f,s.measured):n;return(s.measured.width===void 0||s.measured.height===void 0)&&a?.("015",yt.error015()),{position:{x:h.x-u+(s.measured.width??0)*d[0],y:h.y-l+(s.measured.height??0)*d[1]},positionAbsolute:h}}async function PA({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:i,onBeforeDelete:o}){const a=new Set(e.map(h=>h.id)),s=[];for(const h of r){if(h.deletable===!1)continue;const p=a.has(h.id),y=!p&&h.parentId&&s.find(x=>x.id===h.parentId);(p||y)&&s.push(h)}const c=new Set(n.map(h=>h.id)),u=i.filter(h=>h.deletable!==!1),d=RA(s,u);for(const h of u)c.has(h.id)&&!d.find(y=>y.id===h.id)&&d.push(h);if(!o)return{edges:d,nodes:s};const f=await o({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const Ln=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),fn=(e={x:0,y:0},n,r)=>({x:Ln(e.x,n[0][0],n[1][0]-(r?.width??0)),y:Ln(e.y,n[0][1],n[1][1]-(r?.height??0))});function D_(e,n,r){const{width:i,height:o}=It(r),{x:a,y:s}=r.internals.positionAbsolute;return fn(e,[[a,s],[a+i,s+o]],n)}const ep=(e,n,r)=>e<n?Ln(Math.abs(e-n),1,n)/n:e>r?-Ln(Math.abs(e-r),1,n)/n:0,z_=(e,n,r=15,i=40)=>{const o=ep(e.x,i,n.width-i)*r,a=ep(e.y,i,n.height-i)*r;return[o,a]},Xi=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),zf=({x:e,y:n,width:r,height:i})=>({x:e,y:n,x2:e+r,y2:n+i}),Zi=({x:e,y:n,x2:r,y2:i})=>({x:e,y:n,width:r-e,height:i-n}),$n=(e,n=[0,0])=>{const{x:r,y:i}=kd(e)?e.internals.positionAbsolute:Or(e,n);return{x:r,y:i,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Si=(e,n=[0,0])=>{const{x:r,y:i}=kd(e)?e.internals.positionAbsolute:Or(e,n);return{x:r,y:i,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:i+(e.measured?.height??e.height??e.initialHeight??0)}},L_=(e,n)=>Zi(Xi(zf(e),zf(n))),kr=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),i=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*i)},tp=e=>st(e.width)&&st(e.height)&&st(e.x)&&st(e.y),st=e=>!isNaN(e)&&isFinite(e),MA=(e,n)=>{},Dr=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),zr=({x:e,y:n},[r,i,o],a=!1,s=[1,1])=>{const c={x:(e-r)/o,y:(n-i)/o};return a?Dr(c,s):c},Ci=({x:e,y:n},[r,i,o])=>({x:e*o+r,y:n*o+i});function vn(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function IA(e,n,r){if(typeof e=="string"||typeof e=="number"){const i=vn(e,r),o=vn(e,n);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=vn(e.top??e.y??0,r),o=vn(e.bottom??e.y??0,r),a=vn(e.left??e.x??0,n),s=vn(e.right??e.x??0,n);return{top:i,right:s,bottom:o,left:a,x:a+s,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function TA(e,n,r,i,o,a){const{x:s,y:c}=Ci(e,[n,r,i]),{x:u,y:l}=Ci({x:e.x+e.width,y:e.y+e.height},[n,r,i]),d=o-u,f=a-l;return{left:Math.floor(s),top:Math.floor(c),right:Math.floor(d),bottom:Math.floor(f)}}const Ad=(e,n,r,i,o,a)=>{const s=IA(a,n,r),c=(n-s.x)/e.width,u=(r-s.y)/e.height,l=Math.min(c,u),d=Ln(l,i,o),f=e.x+e.width/2,h=e.y+e.height/2,p=n/2-f*d,y=r/2-h*d,x=TA(e,p,y,d,n,r),v={left:Math.min(x.left-s.left,0),top:Math.min(x.top-s.top,0),right:Math.min(x.right-s.right,0),bottom:Math.min(x.bottom-s.bottom,0)};return{x:p-v.left+v.right,y:y-v.top+v.bottom,zoom:d}},Rr=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Fn(e){return e!=null&&e!=="parent"}function It(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function $_(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function F_(e,n={width:0,height:0},r,i,o){const a={...e},s=i.get(r);if(s){const c=s.origin||o;a.x+=s.internals.positionAbsolute.x-(n.width??0)*c[0],a.y+=s.internals.positionAbsolute.y-(n.height??0)*c[1]}return a}function np(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function OA(){let e,n;return{promise:new Promise((i,o)=>{e=i,n=o}),resolve:e,reject:n}}function qA(e){return{...M_,...e||{}}}function hr(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:i,containerBounds:o}){const{x:a,y:s}=ct(e),c=zr({x:a-(o?.left??0),y:s-(o?.top??0)},i),{x:u,y:l}=r?Dr(c,n):c;return{xSnapped:u,ySnapped:l,...c}}const jd=e=>({width:e.offsetWidth,height:e.offsetHeight}),H_=e=>e?.getRootNode?.()||window?.document,DA=["INPUT","SELECT","TEXTAREA"];function B_(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:DA.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const V_=e=>"clientX"in e,ct=(e,n)=>{const r=V_(e),i=r?e.clientX:e.touches?.[0].clientX,o=r?e.clientY:e.touches?.[0].clientY;return{x:i-(n?.left??0),y:o-(n?.top??0)}},rp=(e,n,r,i,o)=>{const a=n.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const c=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(c.left-r.left)/i,y:(c.top-r.top)/i,...jd(s)}})};function G_({sourceX:e,sourceY:n,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:c}){const u=e*.125+o*.375+s*.375+r*.125,l=n*.125+a*.375+c*.375+i*.125,d=Math.abs(u-e),f=Math.abs(l-n);return[u,l,d,f]}function Jr(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function ip({pos:e,x1:n,y1:r,x2:i,y2:o,c:a}){switch(e){case oe.Left:return[n-Jr(n-i,a),r];case oe.Right:return[n+Jr(i-n,a),r];case oe.Top:return[n,r-Jr(r-o,a)];case oe.Bottom:return[n,r+Jr(o-r,a)]}}function U_({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,curvature:s=.25}){const[c,u]=ip({pos:r,x1:e,y1:n,x2:i,y2:o,c:s}),[l,d]=ip({pos:a,x1:i,y1:o,x2:e,y2:n,c:s}),[f,h,p,y]=G_({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:c,sourceControlY:u,targetControlX:l,targetControlY:d});return[`M${e},${n} C${c},${u} ${l},${d} ${i},${o}`,f,h,p,y]}function W_({sourceX:e,sourceY:n,targetX:r,targetY:i}){const o=Math.abs(r-e)/2,a=r<e?r+o:r-o,s=Math.abs(i-n)/2,c=i<n?i+s:i-s;return[a,c,o,s]}function zA({sourceNode:e,targetNode:n,selected:r=!1,zIndex:i=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if(a==="manual")return i;const s=o&&r?i+1e3:i,c=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return s+c}function LA({sourceNode:e,targetNode:n,width:r,height:i,transform:o}){const a=Xi(Si(e),Si(n));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:i/o[2]};return kr(s,Zi(a))>0}const $A=({source:e,sourceHandle:n,target:r,targetHandle:i})=>`xy-edge__${e}${n||""}-${r}${i||""}`,FA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),K_=(e,n,r={})=>{if(!e.source||!e.target)return n;const i=r.getEdgeId||$A;let o;return O_(e)?o={...e}:o={...e,id:i(e)},FA(o,n)?n:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,n.concat(o))};function Y_({sourceX:e,sourceY:n,targetX:r,targetY:i}){const[o,a,s,c]=W_({sourceX:e,sourceY:n,targetX:r,targetY:i});return[`M ${e},${n}L ${r},${i}`,o,a,s,c]}const op={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},HA=({source:e,sourcePosition:n=oe.Bottom,target:r})=>n===oe.Left||n===oe.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},ap=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function BA({source:e,sourcePosition:n=oe.Bottom,target:r,targetPosition:i=oe.Top,center:o,offset:a,stepPosition:s}){const c=op[n],u=op[i],l={x:e.x+c.x*a,y:e.y+c.y*a},d={x:r.x+u.x*a,y:r.y+u.y*a},f=HA({source:l,sourcePosition:n,target:d}),h=f.x!==0?"x":"y",p=f[h];let y=[],x,v;const g={x:0,y:0},_={x:0,y:0},[,,b,w]=W_({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(c[h]*u[h]===-1){h==="x"?(x=o.x??l.x+(d.x-l.x)*s,v=o.y??(l.y+d.y)/2):(x=o.x??(l.x+d.x)/2,v=o.y??l.y+(d.y-l.y)*s);const C=[{x,y:l.y},{x,y:d.y}],E=[{x:l.x,y:v},{x:d.x,y:v}];c[h]===p?y=h==="x"?C:E:y=h==="x"?E:C}else{const C=[{x:l.x,y:d.y}],E=[{x:d.x,y:l.y}];if(h==="x"?y=c.x===p?E:C:y=c.y===p?C:E,n===i){const P=Math.abs(e[h]-r[h]);if(P<=a){const O=Math.min(a-1,a-P);c[h]===p?g[h]=(l[h]>e[h]?-1:1)*O:_[h]=(d[h]>r[h]?-1:1)*O}}if(n!==i){const P=h==="x"?"y":"x",O=c[h]===u[P],M=l[P]>d[P],T=l[P]<d[P];(c[h]===1&&(!O&&M||O&&T)||c[h]!==1&&(!O&&T||O&&M))&&(y=h==="x"?C:E)}const N={x:l.x+g.x,y:l.y+g.y},A={x:d.x+_.x,y:d.y+_.y},R=Math.max(Math.abs(N.x-y[0].x),Math.abs(A.x-y[0].x)),k=Math.max(Math.abs(N.y-y[0].y),Math.abs(A.y-y[0].y));R>=k?(x=(N.x+A.x)/2,v=y[0].y):(x=y[0].x,v=(N.y+A.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...y,{x:d.x+_.x,y:d.y+_.y},r],x,v,b,w]}function VA(e,n,r,i){const o=Math.min(ap(e,n)/2,ap(n,r)/2,i),{x:a,y:s}=n;if(e.x===a&&a===r.x||e.y===s&&s===r.y)return`L${a} ${s}`;if(e.y===s){const l=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${a+o*l},${s}Q ${a},${s} ${a},${s+o*d}`}const c=e.x<r.x?1:-1,u=e.y<r.y?-1:1;return`L ${a},${s+o*u}Q ${a},${s} ${a+o*c},${s}`}function Lf({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top,borderRadius:s=5,centerX:c,centerY:u,offset:l=20,stepPosition:d=.5}){const[f,h,p,y,x]=BA({source:{x:e,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:a,center:{x:c,y:u},offset:l,stepPosition:d});return[f.reduce((g,_,b)=>{let w="";return b>0&&b<f.length-1?w=VA(f[b-1],_,f[b+1],s):w=`${b===0?"M":"L"}${_.x} ${_.y}`,g+=w,g},""),h,p,y,x]}function sp(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function GA(e){const{sourceNode:n,targetNode:r}=e;if(!sp(n)||!sp(r))return null;const i=n.internals.handleBounds||cp(n.handles),o=r.internals.handleBounds||cp(r.handles),a=up(i?.source??[],e.sourceHandle),s=up(e.connectionMode===Dn.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!a||!s)return e.onError?.("008",yt.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=a?.position||oe.Bottom,u=s?.position||oe.Top,l=dn(n,a,c),d=dn(r,s,u);return{sourceX:l.x,sourceY:l.y,targetX:d.x,targetY:d.y,sourcePosition:c,targetPosition:u}}function cp(e){if(!e)return null;const n=[],r=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?n.push(i):i.type==="target"&&r.push(i);return{source:n,target:r}}function dn(e,n,r=oe.Left,i=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,a=(n?.y??0)+e.internals.positionAbsolute.y,{width:s,height:c}=n??It(e);if(i)return{x:o+s/2,y:a+c/2};switch(n?.position??r){case oe.Top:return{x:o+s/2,y:a};case oe.Right:return{x:o+s,y:a+c/2};case oe.Bottom:return{x:o+s/2,y:a+c};case oe.Left:return{x:o,y:a+c/2}}}function up(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function $f(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function UA(e,{id:n,defaultColor:r,defaultMarkerStart:i,defaultMarkerEnd:o}){const a=new Set;return e.reduce((s,c)=>([c.markerStart||i,c.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const l=$f(u,n);a.has(l)||(s.push({id:l,color:u.color||r,...u}),a.add(l))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))}const X_=1e3,WA=10,Pd={nodeOrigin:[0,0],nodeExtent:Er,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},KA={...Pd,checkEquality:!0};function Md(e,n){const r={...e};for(const i in n)n[i]!==void 0&&(r[i]=n[i]);return r}function YA(e,n,r){const i=Md(Pd,r);for(const o of e.values())if(o.parentId)Td(o,e,n,i);else{const a=Or(o,i.nodeOrigin),s=Fn(o.extent)?o.extent:i.nodeExtent,c=fn(a,s,It(o));o.internals.positionAbsolute=c}}function XA(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const r=[],i=[];for(const o of e.handles){const a={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?r.push(a):o.type==="target"&&i.push(a)}return{source:r,target:i}}function Id(e){return e==="manual"}function Ff(e,n,r,i={}){const o=Md(KA,i),a={i:0},s=new Map(n),c=o?.elevateNodesOnSelect&&!Id(o.zIndexMode)?X_:0;let u=e.length>0;n.clear(),r.clear();for(const l of e){let d=s.get(l.id);if(o.checkEquality&&l===d?.internals.userNode)n.set(l.id,d);else{const f=Or(l,o.nodeOrigin),h=Fn(l.extent)?l.extent:o.nodeExtent,p=fn(f,h,It(l));d={...o.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:p,handleBounds:XA(l,d),z:Z_(l,c,o.zIndexMode),userNode:l}},n.set(l.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),l.parentId&&Td(d,n,r,i,a)}return u}function ZA(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function Td(e,n,r,i,o){const{elevateNodesOnSelect:a,nodeOrigin:s,nodeExtent:c,zIndexMode:u}=Md(Pd,i),l=e.parentId,d=n.get(l);if(!d){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ZA(e,r),o&&!d.parentId&&d.internals.rootParentIndex===void 0&&u==="auto"&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+o.i*WA),o&&d.internals.rootParentIndex!==void 0&&(o.i=d.internals.rootParentIndex);const f=a&&!Id(u)?X_:0,{x:h,y:p,z:y}=JA(e,d,s,c,f,u),{positionAbsolute:x}=e.internals,v=h!==x.x||p!==x.y;(v||y!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:h,y:p}:x,z:y}})}function Z_(e,n,r){const i=st(e.zIndex)?e.zIndex:0;return Id(r)?i:i+(e.selected?n:0)}function JA(e,n,r,i,o,a){const{x:s,y:c}=n.internals.positionAbsolute,u=It(e),l=Or(e,r),d=Fn(e.extent)?fn(l,e.extent,u):l;let f=fn({x:s+d.x,y:c+d.y},i,u);e.extent==="parent"&&(f=D_(f,u,n));const h=Z_(e,o,a),p=n.internals.z??0;return{x:f.x,y:f.y,z:p>=h?p+1:h}}function Od(e,n,r,i=[0,0]){const o=[],a=new Map;for(const s of e){const c=n.get(s.parentId);if(!c)continue;const u=a.get(s.parentId)?.expandedRect??$n(c),l=L_(u,s.rect);a.set(s.parentId,{expandedRect:l,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},u)=>{const l=c.internals.positionAbsolute,d=It(c),f=c.origin??i,h=s.x<l.x?Math.round(Math.abs(l.x-s.x)):0,p=s.y<l.y?Math.round(Math.abs(l.y-s.y)):0,y=Math.max(d.width,Math.round(s.width)),x=Math.max(d.height,Math.round(s.height)),v=(y-d.width)*f[0],g=(x-d.height)*f[1];(h>0||p>0||v||g)&&(o.push({id:u,type:"position",position:{x:c.position.x-h+v,y:c.position.y-p+g}}),r.get(u)?.forEach(_=>{e.some(b=>b.id===_.id)||o.push({id:_.id,type:"position",position:{x:_.position.x+h,y:_.position.y+p}})})),(d.width<s.width||d.height<s.height||h||p)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?f[0]*h-v:0),height:x+(p?f[1]*p-g:0)}})}),o}function QA(e,n,r,i,o,a,s){const c=i?.querySelector(".xyflow__viewport");let u=!1;if(!c)return{changes:[],updatedInternals:u};const l=[],d=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const p of e.values()){const y=n.get(p.id);if(!y)continue;if(y.hidden){n.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),u=!0;continue}const x=jd(p.nodeElement),v=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(v||!y.internals.handleBounds||p.force))){const _=p.nodeElement.getBoundingClientRect(),b=Fn(y.extent)?y.extent:a;let{positionAbsolute:w}=y.internals;y.parentId&&y.extent==="parent"?w=D_(w,x,n.get(y.parentId)):b&&(w=fn(w,b,x));const S={...y,measured:x,internals:{...y.internals,positionAbsolute:w,handleBounds:{source:rp("source",p.nodeElement,_,f,y.id),target:rp("target",p.nodeElement,_,f,y.id)}}};n.set(y.id,S),y.parentId&&Td(S,n,r,{nodeOrigin:o,zIndexMode:s}),u=!0,v&&(l.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&h.push({id:y.id,parentId:y.parentId,rect:$n(S,o)}))}}if(h.length>0){const p=Od(h,n,r,o);l.push(...p)}return{changes:l,updatedInternals:u}}async function ej({delta:e,panZoom:n,transform:r,translateExtent:i,width:o,height:a}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const s=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[o,a]],i),c=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(c)}function lp(e,n,r,i,o,a){let s=o;const c=i.get(s)||new Map;i.set(s,c.set(r,n)),s=`${o}-${e}`;const u=i.get(s)||new Map;if(i.set(s,u.set(r,n)),a){s=`${o}-${e}-${a}`;const l=i.get(s)||new Map;i.set(s,l.set(r,n))}}function J_(e,n,r){e.clear(),n.clear();for(const i of r){const{source:o,target:a,sourceHandle:s=null,targetHandle:c=null}=i,u={edgeId:i.id,source:o,target:a,sourceHandle:s,targetHandle:c},l=`${o}-${s}--${a}-${c}`,d=`${a}-${c}--${o}-${s}`;lp("source",u,d,e,o,s),lp("target",u,l,e,a,c),n.set(i.id,i)}}function Q_(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:Q_(r,n):!1}function fp(e,n,r){let i=e;do{if(i?.matches?.(n))return!0;if(i===r)return!1;i=i?.parentElement}while(i);return!1}function tj(e,n,r,i){const o=new Map;for(const[a,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Q_(s,e))&&(s.draggable||n&&typeof s.draggable>"u")){const c=e.get(a);c&&o.set(a,{id:a,position:c.position||{x:0,y:0},distance:{x:r.x-c.internals.positionAbsolute.x,y:r.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return o}function Ho({nodeId:e,dragItems:n,nodeLookup:r,dragging:i=!0}){const o=[];for(const[s,c]of n){const u=r.get(s)?.internals.userNode;u&&o.push({...u,position:c.position,dragging:i})}if(!e)return[o[0],o];const a=r.get(e)?.internals.userNode;return[a?{...a,position:n.get(e)?.position||a.position,dragging:i}:o[0],o]}function nj({dragItems:e,snapGrid:n,x:r,y:i}){const o=e.values().next().value;if(!o)return null;const a={x:r-o.distance.x,y:i-o.distance.y},s=Dr(a,n);return{x:s.x-a.x,y:s.y-a.y}}function rj({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:i,onDragStop:o}){let a={x:null,y:null},s=0,c=new Map,u=!1,l={x:0,y:0},d=null,f=!1,h=null,p=!1,y=!1,x=null;function v({noDragClassName:_,handleSelector:b,domNode:w,isSelectable:S,nodeId:C,nodeClickDistance:E=0}){h=Oe(w);function N({x:P,y:O}){const{nodeLookup:M,nodeExtent:T,snapGrid:q,snapToGrid:B,nodeOrigin:F,onNodeDrag:G,onSelectionDrag:V,onError:K,updateNodePositions:W}=n();a={x:P,y:O};let D=!1;const I=c.size>1,z=I&&T?zf(qr(c)):null,L=I&&B?nj({dragItems:c,snapGrid:q,x:P,y:O}):null;for(const[H,U]of c){if(!M.has(H))continue;let Y={x:P-U.distance.x,y:O-U.distance.y};B&&(Y=L?{x:Math.round(Y.x+L.x),y:Math.round(Y.y+L.y)}:Dr(Y,q));let J=null;if(I&&T&&!U.extent&&z){const{positionAbsolute:Q}=U.internals,ie=Q.x-z.x+T[0][0],re=Q.x+U.measured.width-z.x2+T[1][0],le=Q.y-z.y+T[0][1],se=Q.y+U.measured.height-z.y2+T[1][1];J=[[ie,le],[re,se]]}const{position:te,positionAbsolute:ne}=q_({nodeId:H,nextPosition:Y,nodeLookup:M,nodeExtent:J||T,nodeOrigin:F,onError:K});D=D||U.position.x!==te.x||U.position.y!==te.y,U.position=te,U.internals.positionAbsolute=ne}if(y=y||D,!!D&&(W(c,!0),x&&(i||G||!C&&V))){const[H,U]=Ho({nodeId:C,dragItems:c,nodeLookup:M});i?.(x,c,H,U),G?.(x,H,U),C||V?.(x,U)}}async function A(){if(!d)return;const{transform:P,panBy:O,autoPanSpeed:M,autoPanOnNodeDrag:T}=n();if(!T){u=!1,cancelAnimationFrame(s);return}const[q,B]=z_(l,d,M);(q!==0||B!==0)&&(a.x=(a.x??0)-q/P[2],a.y=(a.y??0)-B/P[2],await O({x:q,y:B})&&N(a)),s=requestAnimationFrame(A)}function R(P){const{nodeLookup:O,multiSelectionActive:M,nodesDraggable:T,transform:q,snapGrid:B,snapToGrid:F,selectNodesOnDrag:G,onNodeDragStart:V,onSelectionDragStart:K,unselectNodesAndEdges:W}=n();f=!0,(!G||!S)&&!M&&C&&(O.get(C)?.selected||W()),S&&G&&C&&e?.(C);const D=hr(P.sourceEvent,{transform:q,snapGrid:B,snapToGrid:F,containerBounds:d});if(a=D,c=tj(O,T,D,C),c.size>0&&(r||V||!C&&K)){const[I,z]=Ho({nodeId:C,dragItems:c,nodeLookup:O});r?.(P.sourceEvent,c,I,z),V?.(P.sourceEvent,I,z),C||K?.(P.sourceEvent,z)}}const k=xd().clickDistance(E).on("start",P=>{const{domNode:O,nodeDragThreshold:M,transform:T,snapGrid:q,snapToGrid:B}=n();d=O?.getBoundingClientRect()||null,p=!1,y=!1,x=P.sourceEvent,M===0&&R(P),a=hr(P.sourceEvent,{transform:T,snapGrid:q,snapToGrid:B,containerBounds:d}),l=ct(P.sourceEvent,d)}).on("drag",P=>{const{autoPanOnNodeDrag:O,transform:M,snapGrid:T,snapToGrid:q,nodeDragThreshold:B,nodeLookup:F}=n(),G=hr(P.sourceEvent,{transform:M,snapGrid:T,snapToGrid:q,containerBounds:d});if(x=P.sourceEvent,(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||C&&!F.has(C))&&(p=!0),!p){if(!u&&O&&f&&(u=!0,A()),!f){const V=ct(P.sourceEvent,d),K=V.x-l.x,W=V.y-l.y;Math.sqrt(K*K+W*W)>B&&R(P)}(a.x!==G.xSnapped||a.y!==G.ySnapped)&&c&&f&&(l=ct(P.sourceEvent,d),N(G))}}).on("end",P=>{if(!(!f||p)&&(u=!1,f=!1,cancelAnimationFrame(s),c.size>0)){const{nodeLookup:O,updateNodePositions:M,onNodeDragStop:T,onSelectionDragStop:q}=n();if(y&&(M(c,!1),y=!1),o||T||!C&&q){const[B,F]=Ho({nodeId:C,dragItems:c,nodeLookup:O,dragging:!1});o?.(P.sourceEvent,c,B,F),T?.(P.sourceEvent,B,F),C||q?.(P.sourceEvent,F)}}}).filter(P=>{const O=P.target;return!P.button&&(!_||!fp(O,`.${_}`,w))&&(!b||fp(O,b,w))});h.call(k)}function g(){h?.on(".drag",null)}return{update:v,destroy:g}}function ij(e,n,r){const i=[],o={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const a of n.values())kr(o,$n(a))>0&&i.push(a);return i}const oj=250;function aj(e,n,r,i){let o=[],a=1/0;const s=ij(e,r,n+oj);for(const c of s){const u=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const l of u){if(i.nodeId===l.nodeId&&i.type===l.type&&i.id===l.id)continue;const{x:d,y:f}=dn(c,l,l.position,!0),h=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(f-e.y,2));h>n||(h<a?(o=[{...l,x:d,y:f}],a=h):h===a&&o.push({...l,x:d,y:f}))}}if(!o.length)return null;if(o.length>1){const c=i.type==="source"?"target":"source";return o.find(u=>u.type===c)??o[0]}return o[0]}function e1(e,n,r,i,o,a=!1){const s=i.get(e);if(!s)return null;const c=o==="strict"?s.internals.handleBounds?.[n]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],u=(r?c?.find(l=>l.id===r):c?.[0])??null;return u&&a?{...u,...dn(s,u,u.position,!0)}:u}function t1(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function sj(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const n1=()=>!0;function cj(e,{connectionMode:n,connectionRadius:r,handleId:i,nodeId:o,edgeUpdaterType:a,isTarget:s,domNode:c,nodeLookup:u,lib:l,autoPanOnConnect:d,flowId:f,panBy:h,cancelConnection:p,onConnectStart:y,onConnect:x,onConnectEnd:v,isValidConnection:g=n1,onReconnectEnd:_,updateConnection:b,getTransform:w,getFromHandle:S,autoPanSpeed:C,dragThreshold:E=1,handleDomNode:N}){const A=H_(e.target);let R=0,k;const{x:P,y:O}=ct(e),M=t1(a,N),T=c?.getBoundingClientRect();let q=!1;if(!T||!M)return;const B=e1(o,M,i,u,n);if(!B)return;let F=ct(e,T),G=!1,V=null,K=!1,W=null;function D(){if(!d||!T)return;const[te,ne]=z_(F,T,C);h({x:te,y:ne}),R=requestAnimationFrame(D)}const I={...B,nodeId:o,type:M,position:B.position},z=u.get(o);let H={inProgress:!0,isValid:null,from:dn(z,I,oe.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:z,to:F,toHandle:null,toPosition:Qh[I.position],toNode:null,pointer:F};function U(){q=!0,b(H),y?.(e,{nodeId:o,handleId:i,handleType:M})}E===0&&U();function Y(te){if(!q){const{x:se,y:X}=ct(te),ee=se-P,ce=X-O;if(!(ee*ee+ce*ce>E*E))return;U()}if(!S()||!I){J(te);return}const ne=w();F=ct(te,T),k=aj(zr(F,ne,!1,[1,1]),r,u,I),G||(D(),G=!0);const Q=r1(te,{handle:k,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:A,lib:l,flowId:f,nodeLookup:u});W=Q.handleDomNode,V=Q.connection,K=sj(!!k,Q.isValid);const ie=u.get(o),re=ie?dn(ie,I,oe.Left,!0):H.from,le={...H,from:re,isValid:K,to:Q.toHandle&&K?Ci({x:Q.toHandle.x,y:Q.toHandle.y},ne):F,toHandle:Q.toHandle,toPosition:K&&Q.toHandle?Q.toHandle.position:Qh[I.position],toNode:Q.toHandle?u.get(Q.toHandle.nodeId):null,pointer:F};b(le),H=le}function J(te){if(!("touches"in te&&te.touches.length>0)){if(q){(k||W)&&V&&K&&x?.(V);const{inProgress:ne,...Q}=H,ie={...Q,toPosition:H.toHandle?H.toPosition:null};v?.(te,ie),a&&_?.(te,ie)}p(),cancelAnimationFrame(R),G=!1,K=!1,V=null,W=null,A.removeEventListener("mousemove",Y),A.removeEventListener("mouseup",J),A.removeEventListener("touchmove",Y),A.removeEventListener("touchend",J)}}A.addEventListener("mousemove",Y),A.addEventListener("mouseup",J),A.addEventListener("touchmove",Y),A.addEventListener("touchend",J)}function r1(e,{handle:n,connectionMode:r,fromNodeId:i,fromHandleId:o,fromType:a,doc:s,lib:c,flowId:u,isValidConnection:l=n1,nodeLookup:d}){const f=a==="target",h=n?s.querySelector(`.${c}-flow__handle[data-id="${u}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:p,y}=ct(e),x=s.elementFromPoint(p,y),v=x?.classList.contains(`${c}-flow__handle`)?x:h,g={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const _=t1(void 0,v),b=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),S=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!b||!_)return g;const E={source:f?b:i,sourceHandle:f?w:o,target:f?i:b,targetHandle:f?o:w};g.connection=E;const A=S&&C&&(r===Dn.Strict?f&&_==="source"||!f&&_==="target":b!==i||w!==o);g.isValid=A&&l(E),g.toHandle=e1(b,_,w,d,r,!0)}return g}const Hf={onPointerDown:cj,isValid:r1};function uj({domNode:e,panZoom:n,getTransform:r,getViewScale:i}){const o=Oe(e);function a({translateExtent:c,width:u,height:l,zoomStep:d=1,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const y=b=>{if(b.sourceEvent.type!=="wheel"||!n)return;const w=r(),S=b.sourceEvent.ctrlKey&&Rr()?10:1,C=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*d,E=w[2]*Math.pow(2,C*S);n.scaleTo(E)};let x=[0,0];const v=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(x=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},g=b=>{const w=r();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!n)return;const S=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],C=[S[0]-x[0],S[1]-x[1]];x=S;const E=i()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),N={x:w[0]-C[0]*E,y:w[1]-C[1]*E},A=[[0,0],[u,l]];n.setViewportConstrained({x:N.x,y:N.y,zoom:w[2]},A,c)},_=Nd().on("start",v).on("zoom",f?g:null).on("zoom.wheel",h?y:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:a,destroy:s,pointer:Qe}}const Ji=e=>({x:e.x,y:e.y,zoom:e.k}),Bo=({x:e,y:n,zoom:r})=>Yi.translate(e,n).scale(r),jn=(e,n)=>e.target.closest(`.${n}`),i1=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),lj=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Vo=(e,n=0,r=lj,i=()=>{})=>{const o=typeof n=="number"&&n>0;return o||i(),o?e.transition().duration(n).ease(r).on("end",i):e},o1=e=>{const n=e.ctrlKey&&Rr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function fj({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:c,onPanZoom:u,onPanZoomEnd:l}){return d=>{if(jn(d,n))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=r.property("__zoom").k||1;if(d.ctrlKey&&s){const v=Qe(d),g=o1(d),_=f*Math.pow(2,g);i.scaleTo(r,_,v,d);return}const h=d.deltaMode===1?20:1;let p=o===an.Vertical?0:d.deltaX*h,y=o===an.Horizontal?0:d.deltaY*h;!Rr()&&d.shiftKey&&o!==an.Vertical&&(p=d.deltaY*h,y=0),i.translateBy(r,-(p/f)*a,-(y/f)*a,{internal:!0});const x=Ji(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u?.(d,x),e.panScrollTimeout=setTimeout(()=>{l?.(d,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c?.(d,x))}}function dj({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(i,o){const a=i.type==="wheel",s=!n&&a&&!i.ctrlKey,c=jn(i,e);if(i.ctrlKey&&a&&c&&i.preventDefault(),s||c)return null;i.preventDefault(),r.call(this,i,o)}}function hj({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return i=>{if(i.sourceEvent?.internal)return;const o=Ji(i.transform);e.mouseButton=i.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,i.sourceEvent?.type==="mousedown"&&n(!0),r&&r?.(i.sourceEvent,o)}}function pj({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:i,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(r&&i1(n,e.mouseButton??0)),a.sourceEvent?.sync||i([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,Ji(a.transform))}}function gj({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:a}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&i1(n,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o)){const c=Ji(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(s.sourceEvent,c)},r?150:0)}}}function mj({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:c,noPanClassName:u,lib:l,connectionInProgress:d}){return f=>{const h=e||n,p=r&&f.ctrlKey,y=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(jn(f,`${l}-flow__node`)||jn(f,`${l}-flow__edge`)))return!0;if(!i&&!h&&!o&&!a&&!r||s||d&&!y||jn(f,c)&&y||jn(f,u)&&(!y||o&&y&&!e)||!r&&f.ctrlKey&&y)return!1;if(!r&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!h&&!o&&!p&&y||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const x=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||y)&&x}}function yj({domNode:e,minZoom:n,maxZoom:r,translateExtent:i,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Nd().scaleExtent([n,r]).translateExtent(i),h=Oe(e).call(f);_({x:o.x,y:o.y,zoom:Ln(o.zoom,n,r)},[[0,0],[d.width,d.height]],i);const p=h.on("wheel.zoom"),y=h.on("dblclick.zoom");f.wheelDelta(o1);function x(k,P){return h?new Promise(O=>{f?.interpolate(P?.interpolate==="linear"?dr:ai).transform(Vo(h,P?.duration,P?.ease,()=>O(!0)),k)}):Promise.resolve(!1)}function v({noWheelClassName:k,noPanClassName:P,onPaneContextMenu:O,userSelectionActive:M,panOnScroll:T,panOnDrag:q,panOnScrollMode:B,panOnScrollSpeed:F,preventScrolling:G,zoomOnPinch:V,zoomOnScroll:K,zoomOnDoubleClick:W,zoomActivationKeyPressed:D,lib:I,onTransformChange:z,connectionInProgress:L,paneClickDistance:H,selectionOnDrag:U}){M&&!l.isZoomingOrPanning&&g();const Y=T&&!D&&!M;f.clickDistance(U?1/0:!st(H)||H<0?0:H);const J=Y?fj({zoomPanValues:l,noWheelClassName:k,d3Selection:h,d3Zoom:f,panOnScrollMode:B,panOnScrollSpeed:F,zoomOnPinch:V,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:c}):dj({noWheelClassName:k,preventScrolling:G,d3ZoomHandler:p});if(h.on("wheel.zoom",J,{passive:!1}),!M){const ne=hj({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:s});f.on("start",ne);const Q=pj({zoomPanValues:l,panOnDrag:q,onPaneContextMenu:!!O,onPanZoom:a,onTransformChange:z});f.on("zoom",Q);const ie=gj({zoomPanValues:l,panOnDrag:q,panOnScroll:T,onPaneContextMenu:O,onPanZoomEnd:c,onDraggingChange:u});f.on("end",ie)}const te=mj({zoomActivationKeyPressed:D,panOnDrag:q,zoomOnScroll:K,panOnScroll:T,zoomOnDoubleClick:W,zoomOnPinch:V,userSelectionActive:M,noPanClassName:P,noWheelClassName:k,lib:I,connectionInProgress:L});f.filter(te),W?h.on("dblclick.zoom",y):h.on("dblclick.zoom",null)}function g(){f.on("zoom",null)}async function _(k,P,O){const M=Bo(k),T=f?.constrain()(M,P,O);return T&&await x(T),new Promise(q=>q(T))}async function b(k,P){const O=Bo(k);return await x(O,P),new Promise(M=>M(O))}function w(k){if(h){const P=Bo(k),O=h.property("__zoom");(O.k!==k.zoom||O.x!==k.x||O.y!==k.y)&&f?.transform(h,P,null,{sync:!0})}}function S(){const k=h?ot(h.node()):{x:0,y:0,k:1};return{x:k.x,y:k.y,zoom:k.k}}function C(k,P){return h?new Promise(O=>{f?.interpolate(P?.interpolate==="linear"?dr:ai).scaleTo(Vo(h,P?.duration,P?.ease,()=>O(!0)),k)}):Promise.resolve(!1)}function E(k,P){return h?new Promise(O=>{f?.interpolate(P?.interpolate==="linear"?dr:ai).scaleBy(Vo(h,P?.duration,P?.ease,()=>O(!0)),k)}):Promise.resolve(!1)}function N(k){f?.scaleExtent(k)}function A(k){f?.translateExtent(k)}function R(k){const P=!st(k)||k<0?0:k;f?.clickDistance(P)}return{update:v,destroy:g,setViewport:b,setViewportConstrained:_,getViewport:S,scaleTo:C,scaleBy:E,setScaleExtent:N,setTranslateExtent:A,syncViewport:w,setClickDistance:R}}var Hn;(function(e){e.Line="line",e.Handle="handle"})(Hn||(Hn={}));function vj({width:e,prevWidth:n,height:r,prevHeight:i,affectsX:o,affectsY:a}){const s=e-n,c=r-i,u=[s>0?1:s<0?-1:0,c>0?1:c<0?-1:0];return s&&o&&(u[0]=u[0]*-1),c&&a&&(u[1]=u[1]*-1),u}function dp(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),i=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:i,affectsY:o}}function qt(e,n){return Math.max(0,n-e)}function Dt(e,n){return Math.max(0,e-n)}function Qr(e,n,r){return Math.max(0,n-e,e-r)}function hp(e,n){return e?!n:n}function xj(e,n,r,i,o,a,s,c){let{affectsX:u,affectsY:l}=n;const{isHorizontal:d,isVertical:f}=n,h=d&&f,{xSnapped:p,ySnapped:y}=r,{minWidth:x,maxWidth:v,minHeight:g,maxHeight:_}=i,{x:b,y:w,width:S,height:C,aspectRatio:E}=e;let N=Math.floor(d?p-e.pointerX:0),A=Math.floor(f?y-e.pointerY:0);const R=S+(u?-N:N),k=C+(l?-A:A),P=-a[0]*S,O=-a[1]*C;let M=Qr(R,x,v),T=Qr(k,g,_);if(s){let F=0,G=0;u&&N<0?F=qt(b+N+P,s[0][0]):!u&&N>0&&(F=Dt(b+R+P,s[1][0])),l&&A<0?G=qt(w+A+O,s[0][1]):!l&&A>0&&(G=Dt(w+k+O,s[1][1])),M=Math.max(M,F),T=Math.max(T,G)}if(c){let F=0,G=0;u&&N>0?F=Dt(b+N,c[0][0]):!u&&N<0&&(F=qt(b+R,c[1][0])),l&&A>0?G=Dt(w+A,c[0][1]):!l&&A<0&&(G=qt(w+k,c[1][1])),M=Math.max(M,F),T=Math.max(T,G)}if(o){if(d){const F=Qr(R/E,g,_)*E;if(M=Math.max(M,F),s){let G=0;!u&&!l||u&&!l&&h?G=Dt(w+O+R/E,s[1][1])*E:G=qt(w+O+(u?N:-N)/E,s[0][1])*E,M=Math.max(M,G)}if(c){let G=0;!u&&!l||u&&!l&&h?G=qt(w+R/E,c[1][1])*E:G=Dt(w+(u?N:-N)/E,c[0][1])*E,M=Math.max(M,G)}}if(f){const F=Qr(k*E,x,v)/E;if(T=Math.max(T,F),s){let G=0;!u&&!l||l&&!u&&h?G=Dt(b+k*E+P,s[1][0])/E:G=qt(b+(l?A:-A)*E+P,s[0][0])/E,T=Math.max(T,G)}if(c){let G=0;!u&&!l||l&&!u&&h?G=qt(b+k*E,c[1][0])/E:G=Dt(b+(l?A:-A)*E,c[0][0])/E,T=Math.max(T,G)}}}A=A+(A<0?T:-T),N=N+(N<0?M:-M),o&&(h?R>k*E?A=(hp(u,l)?-N:N)/E:N=(hp(u,l)?-A:A)*E:d?(A=N/E,l=u):(N=A*E,u=l));const q=u?b+N:b,B=l?w+A:w;return{width:S+(u?-N:N),height:C+(l?-A:A),x:a[0]*N*(u?-1:1)+q,y:a[1]*A*(l?-1:1)+B}}const a1={width:0,height:0,x:0,y:0},bj={...a1,pointerX:0,pointerY:0,aspectRatio:1};function _j(e){return[[0,0],[e.measured.width,e.measured.height]]}function wj(e,n,r){const i=n.position.x+e.position.x,o=n.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,c=r[0]*a,u=r[1]*s;return[[i-c,o-u],[i+a-c,o+s-u]]}function Sj({domNode:e,nodeId:n,getStoreItems:r,onChange:i,onEnd:o}){const a=Oe(e);let s={controlDirection:dp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:l,boundaries:d,keepAspectRatio:f,resizeDirection:h,onResizeStart:p,onResize:y,onResizeEnd:x,shouldResize:v}){let g={...a1},_={...bj};s={boundaries:d,resizeDirection:h,keepAspectRatio:f,controlDirection:dp(l)};let b,w=null,S=[],C,E,N,A=!1;const R=xd().on("start",k=>{const{nodeLookup:P,transform:O,snapGrid:M,snapToGrid:T,nodeOrigin:q,paneDomNode:B}=r();if(b=P.get(n),!b)return;w=B?.getBoundingClientRect()??null;const{xSnapped:F,ySnapped:G}=hr(k.sourceEvent,{transform:O,snapGrid:M,snapToGrid:T,containerBounds:w});g={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},_={...g,pointerX:F,pointerY:G,aspectRatio:g.width/g.height},C=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(C=P.get(b.parentId),E=C&&b.extent==="parent"?_j(C):void 0),S=[],N=void 0;for(const[V,K]of P)if(K.parentId===n&&(S.push({id:V,position:{...K.position},extent:K.extent}),K.extent==="parent"||K.expandParent)){const W=wj(K,b,K.origin??q);N?N=[[Math.min(W[0][0],N[0][0]),Math.min(W[0][1],N[0][1])],[Math.max(W[1][0],N[1][0]),Math.max(W[1][1],N[1][1])]]:N=W}p?.(k,{...g})}).on("drag",k=>{const{transform:P,snapGrid:O,snapToGrid:M,nodeOrigin:T}=r(),q=hr(k.sourceEvent,{transform:P,snapGrid:O,snapToGrid:M,containerBounds:w}),B=[];if(!b)return;const{x:F,y:G,width:V,height:K}=g,W={},D=b.origin??T,{width:I,height:z,x:L,y:H}=xj(_,s.controlDirection,q,s.boundaries,s.keepAspectRatio,D,E,N),U=I!==V,Y=z!==K,J=L!==F&&U,te=H!==G&&Y;if(!J&&!te&&!U&&!Y)return;if((J||te||D[0]===1||D[1]===1)&&(W.x=J?L:g.x,W.y=te?H:g.y,g.x=W.x,g.y=W.y,S.length>0)){const re=L-F,le=H-G;for(const se of S)se.position={x:se.position.x-re+D[0]*(I-V),y:se.position.y-le+D[1]*(z-K)},B.push(se)}if((U||Y)&&(W.width=U&&(!s.resizeDirection||s.resizeDirection==="horizontal")?I:g.width,W.height=Y&&(!s.resizeDirection||s.resizeDirection==="vertical")?z:g.height,g.width=W.width,g.height=W.height),C&&b.expandParent){const re=D[0]*(W.width??0);W.x&&W.x<re&&(g.x=re,_.x=_.x-(W.x-re));const le=D[1]*(W.height??0);W.y&&W.y<le&&(g.y=le,_.y=_.y-(W.y-le))}const ne=vj({width:g.width,prevWidth:V,height:g.height,prevHeight:K,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),Q={...g,direction:ne};v?.(k,Q)!==!1&&(A=!0,y?.(k,Q),i(W,B))}).on("end",k=>{A&&(x?.(k,{...g}),o?.({...g}),A=!1)});a.call(R)}function u(){a.on(".drag",null)}return{update:c,destroy:u}}var Go={exports:{}},Uo={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function Cj(){if(pp)return Uo;pp=1;var e=z2(),n=L2();function r(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var i=typeof Object.is=="function"?Object.is:r,o=n.useSyncExternalStore,a=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return Uo.useSyncExternalStoreWithSelector=function(l,d,f,h,p){var y=a(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=c(function(){function g(C){if(!_){if(_=!0,b=C,C=h(C),p!==void 0&&x.hasValue){var E=x.value;if(p(E,C))return w=E}return w=C}if(E=w,i(b,C))return E;var N=h(C);return p!==void 0&&p(E,N)?(b=C,E):(b=C,w=N)}var _=!1,b,w,S=f===void 0?null:f;return[function(){return g(d())},S===null?void 0:function(){return g(S())}]},[d,f,h,p]);var v=o(l,y[0],y[1]);return s(function(){x.hasValue=!0,x.value=v},[v]),u(v),v},Uo}var gp;function Ej(){return gp||(gp=1,Go.exports=Cj()),Go.exports}var Nj=Ej();const kj=ad(Nj),Rj={},mp=e=>{let n;const r=new Set,i=(d,f)=>{const h=typeof d=="function"?d(n):d;if(!Object.is(h,n)){const p=n;n=f??(typeof h!="object"||h===null)?h:Object.assign({},n,h),r.forEach(y=>y(n,p))}},o=()=>n,u={setState:i,getState:o,getInitialState:()=>l,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Rj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=n=e(i,o,u);return u},Aj=e=>e?mp(e):mp,{useDebugValue:jj}=lb,{useSyncExternalStoreWithSelector:Pj}=kj,Mj=e=>e;function s1(e,n=Mj,r){const i=Pj(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return jj(i),i}const yp=(e,n)=>{const r=Aj(e),i=(o,a=n)=>s1(r,o,a);return Object.assign(i,r),i},Ij=(e,n)=>e?yp(e,n):yp;function we(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[i,o]of e)if(!Object.is(o,n.get(i)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(e[i],n[i]))return!1;return!0}const Qi=j.createContext(null),Tj=Qi.Provider,c1=yt.error001();function ge(e,n){const r=j.useContext(Qi);if(r===null)throw new Error(c1);return s1(r,e,n)}function Se(){const e=j.useContext(Qi);if(e===null)throw new Error(c1);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const vp={display:"none"},Oj={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},u1="react-flow__node-desc",l1="react-flow__edge-desc",qj="react-flow__aria-live",Dj=e=>e.ariaLiveMessage,zj=e=>e.ariaLabelConfig;function Lj({rfId:e}){const n=ge(Dj);return m.jsx("div",{id:`${qj}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Oj,children:n})}function $j({rfId:e,disableKeyboardA11y:n}){const r=ge(zj);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${u1}-${e}`,style:vp,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${l1}-${e}`,style:vp,children:r["edge.a11yDescription.default"]}),!n&&m.jsx(Lj,{rfId:e})]})}const eo=j.forwardRef(({position:e="top-left",children:n,className:r,style:i,...o},a)=>{const s=`${e}`.split("-");return m.jsx("div",{className:Re(["react-flow__panel",r,...s]),style:i,ref:a,...o,children:n})});eo.displayName="Panel";function Fj({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:m.jsx(eo,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Hj=e=>{const n=[],r=[];for(const[,i]of e.nodeLookup)i.selected&&n.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&r.push(i);return{selectedNodes:n,selectedEdges:r}},ei=e=>e.id;function Bj(e,n){return we(e.selectedNodes.map(ei),n.selectedNodes.map(ei))&&we(e.selectedEdges.map(ei),n.selectedEdges.map(ei))}function Vj({onSelectionChange:e}){const n=Se(),{selectedNodes:r,selectedEdges:i}=ge(Hj,Bj);return j.useEffect(()=>{const o={nodes:r,edges:i};e?.(o),n.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[r,i,e]),null}const Gj=e=>!!e.onSelectionChangeHandlers;function Uj({onSelectionChange:e}){const n=ge(Gj);return e||n?m.jsx(Vj,{onSelectionChange:e}):null}const f1=[0,0],Wj={x:0,y:0,zoom:1},Kj=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],xp=[...Kj,"rfId"],Yj=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),bp={translateExtent:Er,nodeOrigin:f1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Xj(e){const{setNodes:n,setEdges:r,setMinZoom:i,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:s,reset:c,setDefaultNodesAndEdges:u}=ge(Yj,we),l=Se();j.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{d.current=bp,c()}),[]);const d=j.useRef(bp);return j.useEffect(()=>{for(const f of xp){const h=e[f],p=d.current[f];h!==p&&(typeof e[f]>"u"||(f==="nodes"?n(h):f==="edges"?r(h):f==="minZoom"?i(h):f==="maxZoom"?o(h):f==="translateExtent"?a(h):f==="nodeExtent"?s(h):f==="ariaLabelConfig"?l.setState({ariaLabelConfig:qA(h)}):f==="fitView"?l.setState({fitViewQueued:h}):f==="fitViewOptions"?l.setState({fitViewOptions:h}):l.setState({[f]:h})))}d.current=e},xp.map(f=>e[f])),null}function _p(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Zj(e){const[n,r]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){r(e);return}const i=_p(),o=()=>r(i?.matches?"dark":"light");return o(),i?.addEventListener("change",o),()=>{i?.removeEventListener("change",o)}},[e]),n!==null?n:_p()?.matches?"dark":"light"}const wp=typeof document<"u"?document:null;function Ar(e=null,n={target:wp,actInsideInputWithModifier:!0}){const[r,i]=j.useState(!1),o=j.useRef(!1),a=j.useRef(new Set([])),[s,c]=j.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=l.reduce((f,h)=>f.concat(...h),[]);return[l,d]}return[[],[]]},[e]);return j.useEffect(()=>{const u=n?.target??wp,l=n?.actInsideInputWithModifier??!0;if(e!==null){const d=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!o.current||o.current&&!l)&&B_(p))return!1;const x=Cp(p.code,c);if(a.current.add(p[x]),Sp(s,a.current,!1)){const v=p.composedPath?.()?.[0]||p.target,g=v?.nodeName==="BUTTON"||v?.nodeName==="A";n.preventDefault!==!1&&(o.current||!g)&&p.preventDefault(),i(!0)}},f=p=>{const y=Cp(p.code,c);Sp(s,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(p[y]),p.key==="Meta"&&a.current.clear(),o.current=!1},h=()=>{a.current.clear(),i(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),r}function Sp(e,n,r){return e.filter(i=>r||i.length===n.size).some(i=>i.every(o=>n.has(o)))}function Cp(e,n){return n.includes(e)?"code":"key"}const Jj=()=>{const e=Se();return j.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(n,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[i,o,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:n.x??i,y:n.y??o,zoom:n.zoom??a},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,i]=e.getState().transform;return{x:n,y:r,zoom:i}},setCenter:async(n,r,i)=>e.getState().setCenter(n,r,i),fitBounds:async(n,r)=>{const{width:i,height:o,minZoom:a,maxZoom:s,panZoom:c}=e.getState(),u=Ad(n,i,o,a,s,r?.padding??.1);return c?(await c.setViewport(u,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:i,snapGrid:o,snapToGrid:a,domNode:s}=e.getState();if(!s)return n;const{x:c,y:u}=s.getBoundingClientRect(),l={x:n.x-c,y:n.y-u},d=r.snapGrid??o,f=r.snapToGrid??a;return zr(l,i,f,d)},flowToScreenPosition:n=>{const{transform:r,domNode:i}=e.getState();if(!i)return n;const{x:o,y:a}=i.getBoundingClientRect(),s=Ci(n,r);return{x:s.x+o,y:s.y+a}}}),[])};function d1(e,n){const r=[],i=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")i.set(a.id,[a]);else{const s=i.get(a.id);s?s.push(a):i.set(a.id,[a])}for(const a of n){const s=i.get(a.id);if(!s){r.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){r.push({...s[0].item});continue}const c={...a};for(const u of s)Qj(u,c);r.push(c)}return o.length&&o.forEach(a=>{a.index!==void 0?r.splice(a.index,0,{...a.item}):r.push({...a.item})}),r}function Qj(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function h1(e,n){return d1(e,n)}function p1(e,n){return d1(e,n)}function Jt(e,n){return{id:e,type:"select",selected:n}}function Pn(e,n=new Set,r=!1){const i=[];for(const[o,a]of e){const s=n.has(o);!(a.selected===void 0&&!s)&&a.selected!==s&&(r&&(a.selected=s),i.push(Jt(a.id,s)))}return i}function Ep({items:e=[],lookup:n}){const r=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,a]of e.entries()){const s=n.get(a.id),c=s?.internals?.userNode??s;c!==void 0&&c!==a&&r.push({id:a.id,item:a,type:"replace"}),c===void 0&&r.push({item:a,type:"add",index:o})}for(const[o]of n)i.get(o)===void 0&&r.push({id:o,type:"remove"});return r}function Np(e){return{id:e.id,type:"remove"}}const kp=e=>NA(e),eP=e=>O_(e);function g1(e){return j.forwardRef(e)}const tP=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Rp(e){const[n,r]=j.useState(BigInt(0)),[i]=j.useState(()=>nP(()=>r(o=>o+BigInt(1))));return tP(()=>{const o=i.get();o.length&&(e(o),i.reset())},[n]),i}function nP(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const m1=j.createContext(null);function rP({children:e}){const n=Se(),r=j.useCallback(c=>{const{nodes:u=[],setNodes:l,hasDefaultNodes:d,onNodesChange:f,nodeLookup:h,fitViewQueued:p,onNodesChangeMiddlewareMap:y}=n.getState();let x=u;for(const g of c)x=typeof g=="function"?g(x):g;let v=Ep({items:x,lookup:h});for(const g of y.values())v=g(v);d&&l(x),v.length>0?f?.(v):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:g,nodes:_,setNodes:b}=n.getState();g&&b(_)})},[]),i=Rp(r),o=j.useCallback(c=>{const{edges:u=[],setEdges:l,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:h}=n.getState();let p=u;for(const y of c)p=typeof y=="function"?y(p):y;d?l(p):f&&f(Ep({items:p,lookup:h}))},[]),a=Rp(o),s=j.useMemo(()=>({nodeQueue:i,edgeQueue:a}),[]);return m.jsx(m1.Provider,{value:s,children:e})}function iP(){const e=j.useContext(m1);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const oP=e=>!!e.panZoom;function qd(){const e=Jj(),n=Se(),r=iP(),i=ge(oP),o=j.useMemo(()=>{const a=f=>n.getState().nodeLookup.get(f),s=f=>{r.nodeQueue.push(f)},c=f=>{r.edgeQueue.push(f)},u=f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState(),y=kp(f)?f:h.get(f.id),x=y.parentId?F_(y.position,y.measured,y.parentId,h,p):y.position,v={...y,position:x,width:y.measured?.width??y.width,height:y.measured?.height??y.height};return $n(v)},l=(f,h,p={replace:!1})=>{s(y=>y.map(x=>{if(x.id===f){const v=typeof h=="function"?h(x):h;return p.replace&&kp(v)?v:{...x,...v}}return x}))},d=(f,h,p={replace:!1})=>{c(y=>y.map(x=>{if(x.id===f){const v=typeof h=="function"?h(x):h;return p.replace&&eP(v)?v:{...x,...v}}return x}))};return{getNodes:()=>n.getState().nodes.map(f=>({...f})),getNode:f=>a(f)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:f=[]}=n.getState();return f.map(h=>({...h}))},getEdge:f=>n.getState().edgeLookup.get(f),setNodes:s,setEdges:c,addNodes:f=>{const h=Array.isArray(f)?f:[f];r.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];r.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=n.getState(),[y,x,v]=p;return{nodes:f.map(g=>({...g})),edges:h.map(g=>({...g})),viewport:{x:y,y:x,zoom:v}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:y,onNodesDelete:x,onEdgesDelete:v,triggerNodeChanges:g,triggerEdgeChanges:_,onDelete:b,onBeforeDelete:w}=n.getState(),{nodes:S,edges:C}=await PA({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:y,onBeforeDelete:w}),E=C.length>0,N=S.length>0;if(E){const A=C.map(Np);v?.(C),_(A)}if(N){const A=S.map(Np);x?.(S),g(A)}return(N||E)&&b?.({nodes:S,edges:C}),{deletedNodes:S,deletedEdges:C}},getIntersectingNodes:(f,h=!0,p)=>{const y=tp(f),x=y?f:u(f),v=p!==void 0;return x?(p||n.getState().nodes).filter(g=>{const _=n.getState().nodeLookup.get(g.id);if(_&&!y&&(g.id===f.id||!_.internals.positionAbsolute))return!1;const b=$n(v?g:_),w=kr(b,x);return h&&w>0||w>=b.width*b.height||w>=x.width*x.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const x=tp(f)?f:u(f);if(!x)return!1;const v=kr(x,h);return p&&v>0||v>=h.width*h.height||v>=x.width*x.height},updateNode:l,updateNodeData:(f,h,p={replace:!1})=>{l(f,y=>{const x=typeof h=="function"?h(y):h;return p.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},p)},updateEdge:d,updateEdgeData:(f,h,p={replace:!1})=>{d(f,y=>{const x=typeof h=="function"?h(y):h;return p.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState();return kA(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}-${f}${h?`-${h}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}${f?h?`-${f}-${h}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const h=n.getState().fitViewResolver??OA();return n.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),r.nodeQueue.push(p=>[...p]),h.promise}}},[]);return j.useMemo(()=>({...o,...e,viewportInitialized:i}),[i])}const Ap=e=>e.selected,aP=typeof window<"u"?window:void 0;function sP({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=Se(),{deleteElements:i}=qd(),o=Ar(e,{actInsideInputWithModifier:!1}),a=Ar(n,{target:aP});j.useEffect(()=>{if(o){const{edges:s,nodes:c}=r.getState();i({nodes:c.filter(Ap),edges:s.filter(Ap)}),r.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])}function cP(e){const n=Se();j.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const i=jd(e.current);(i.height===0||i.width===0)&&n.getState().onError?.("004",yt.error004()),n.setState({width:i.width||500,height:i.height||500})};if(e.current){r(),window.addEventListener("resize",r);const i=new ResizeObserver(()=>r());return i.observe(e.current),()=>{window.removeEventListener("resize",r),i&&e.current&&i.unobserve(e.current)}}},[])}const to={position:"absolute",width:"100%",height:"100%",top:0,left:0},uP=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function lP({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=an.Free,zoomOnDoubleClick:s=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:l,minZoom:d,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:y,noWheelClassName:x,noPanClassName:v,onViewportChange:g,isControlledViewport:_,paneClickDistance:b,selectionOnDrag:w}){const S=Se(),C=j.useRef(null),{userSelectionActive:E,lib:N,connectionInProgress:A}=ge(uP,we),R=Ar(h),k=j.useRef();cP(C);const P=j.useCallback(O=>{g?.({x:O[0],y:O[1],zoom:O[2]}),_||S.setState({transform:O})},[g,_]);return j.useEffect(()=>{if(C.current){k.current=yj({domNode:C.current,minZoom:d,maxZoom:f,translateExtent:l,viewport:u,onDraggingChange:q=>S.setState({paneDragging:q}),onPanZoomStart:(q,B)=>{const{onViewportChangeStart:F,onMoveStart:G}=S.getState();G?.(q,B),F?.(B)},onPanZoom:(q,B)=>{const{onViewportChange:F,onMove:G}=S.getState();G?.(q,B),F?.(B)},onPanZoomEnd:(q,B)=>{const{onViewportChangeEnd:F,onMoveEnd:G}=S.getState();G?.(q,B),F?.(B)}});const{x:O,y:M,zoom:T}=k.current.getViewport();return S.setState({panZoom:k.current,transform:[O,M,T],domNode:C.current.closest(".react-flow")}),()=>{k.current?.destroy()}}},[]),j.useEffect(()=>{k.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:c,zoomActivationKeyPressed:R,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:x,lib:N,onTransformChange:P,connectionInProgress:A,selectionOnDrag:w,paneClickDistance:b})},[e,n,r,i,o,a,s,c,R,p,v,E,x,N,P,A,w,b]),m.jsx("div",{className:"react-flow__renderer",ref:C,style:to,children:y})}const fP=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function dP(){const{userSelectionActive:e,userSelectionRect:n}=ge(fP,we);return e&&n?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Wo=(e,n)=>r=>{r.target===n.current&&e?.(r)},hP=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function pP({isSelecting:e,selectionKeyPressed:n,selectionMode:r=Nr.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:c,onPaneClick:u,onPaneContextMenu:l,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:y}){const x=Se(),{userSelectionActive:v,elementsSelectable:g,dragging:_,connectionInProgress:b}=ge(hP,we),w=g&&(e||v),S=j.useRef(null),C=j.useRef(),E=j.useRef(new Set),N=j.useRef(new Set),A=j.useRef(!1),R=F=>{if(A.current||b){A.current=!1;return}u?.(F),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},k=F=>{if(Array.isArray(i)&&i?.includes(2)){F.preventDefault();return}l?.(F)},P=d?F=>d(F):void 0,O=F=>{A.current&&(F.stopPropagation(),A.current=!1)},M=F=>{const{domNode:G}=x.getState();if(C.current=G?.getBoundingClientRect(),!C.current)return;const V=F.target===S.current;if(!V&&!!F.target.closest(".nokey")||!e||!(a&&V||n)||F.button!==0||!F.isPrimary)return;F.target?.setPointerCapture?.(F.pointerId),A.current=!1;const{x:D,y:I}=ct(F.nativeEvent,C.current);x.setState({userSelectionRect:{width:0,height:0,startX:D,startY:I,x:D,y:I}}),V||(F.stopPropagation(),F.preventDefault())},T=F=>{const{userSelectionRect:G,transform:V,nodeLookup:K,edgeLookup:W,connectionLookup:D,triggerNodeChanges:I,triggerEdgeChanges:z,defaultEdgeOptions:L,resetSelectedElements:H}=x.getState();if(!C.current||!G)return;const{x:U,y:Y}=ct(F.nativeEvent,C.current),{startX:J,startY:te}=G;if(!A.current){const le=n?0:o;if(Math.hypot(U-J,Y-te)<=le)return;H(),s?.(F)}A.current=!0;const ne={startX:J,startY:te,x:U<J?U:J,y:Y<te?Y:te,width:Math.abs(U-J),height:Math.abs(Y-te)},Q=E.current,ie=N.current;E.current=new Set(Rd(K,ne,V,r===Nr.Partial,!0).map(le=>le.id)),N.current=new Set;const re=L?.selectable??!0;for(const le of E.current){const se=D.get(le);if(se)for(const{edgeId:X}of se.values()){const ee=W.get(X);ee&&(ee.selectable??re)&&N.current.add(X)}}if(!np(Q,E.current)){const le=Pn(K,E.current,!0);I(le)}if(!np(ie,N.current)){const le=Pn(W,N.current);z(le)}x.setState({userSelectionRect:ne,userSelectionActive:!0,nodesSelectionActive:!1})},q=F=>{F.button===0&&(F.target?.releasePointerCapture?.(F.pointerId),!v&&F.target===S.current&&x.getState().userSelectionRect&&R?.(F),x.setState({userSelectionActive:!1,userSelectionRect:null}),A.current&&(c?.(F),x.setState({nodesSelectionActive:E.current.size>0})))},B=i===!0||Array.isArray(i)&&i.includes(0);return m.jsxs("div",{className:Re(["react-flow__pane",{draggable:B,dragging:_,selection:e}]),onClick:w?void 0:Wo(R,S),onContextMenu:Wo(k,S),onWheel:Wo(P,S),onPointerEnter:w?void 0:f,onPointerMove:w?T:h,onPointerUp:w?q:void 0,onPointerDownCapture:w?M:void 0,onClickCapture:w?O:void 0,onPointerLeave:p,ref:S,style:to,children:[y,m.jsx(dP,{})]})}function Bf({id:e,store:n,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:c,onError:u}=n.getState(),l=c.get(e);if(!l){u?.("012",yt.error012(e));return}n.setState({nodesSelectionActive:!1}),l.selected?(r||l.selected&&s)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function y1({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:o,isSelectable:a,nodeClickDistance:s}){const c=Se(),[u,l]=j.useState(!1),d=j.useRef();return j.useEffect(()=>{d.current=rj({getStoreItems:()=>c.getState(),onNodeMouseDown:f=>{Bf({id:f,store:c,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),j.useEffect(()=>{if(n)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:r,handleSelector:i,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:s}),()=>{d.current?.destroy()}},[r,i,n,a,e,o]),u}const gP=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function v1(){const e=Se();return j.useCallback(r=>{const{nodeExtent:i,snapToGrid:o,snapGrid:a,nodesDraggable:s,onError:c,updateNodePositions:u,nodeLookup:l,nodeOrigin:d}=e.getState(),f=new Map,h=gP(s),p=o?a[0]:5,y=o?a[1]:5,x=r.direction.x*p*r.factor,v=r.direction.y*y*r.factor;for(const[,g]of l){if(!h(g))continue;let _={x:g.internals.positionAbsolute.x+x,y:g.internals.positionAbsolute.y+v};o&&(_=Dr(_,a));const{position:b,positionAbsolute:w}=q_({nodeId:g.id,nextPosition:_,nodeLookup:l,nodeExtent:i,nodeOrigin:d,onError:c});g.position=b,g.internals.positionAbsolute=w,f.set(g.id,g)}u(f)},[])}const Dd=j.createContext(null),mP=Dd.Provider;Dd.Consumer;const x1=()=>j.useContext(Dd),yP=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),vP=(e,n,r)=>i=>{const{connectionClickStartHandle:o,connectionMode:a,connection:s}=i,{fromHandle:c,toHandle:u,isValid:l}=s,d=u?.nodeId===e&&u?.id===n&&u?.type===r;return{connectingFrom:c?.nodeId===e&&c?.id===n&&c?.type===r,connectingTo:d,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===r,isPossibleEndHandle:a===Dn.Strict?c?.type!==r:e!==c?.nodeId||n!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!o,valid:d&&l}};function xP({type:e="source",position:n=oe.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:s,onConnect:c,children:u,className:l,onMouseDown:d,onTouchStart:f,...h},p){const y=s||null,x=e==="target",v=Se(),g=x1(),{connectOnClick:_,noPanClassName:b,rfId:w}=ge(yP,we),{connectingFrom:S,connectingTo:C,clickConnecting:E,isPossibleEndHandle:N,connectionInProcess:A,clickConnectionInProcess:R,valid:k}=ge(vP(g,y,e),we);g||v.getState().onError?.("010",yt.error010());const P=T=>{const{defaultEdgeOptions:q,onConnect:B,hasDefaultEdges:F}=v.getState(),G={...q,...T};if(F){const{edges:V,setEdges:K}=v.getState();K(K_(G,V))}B?.(G),c?.(G)},O=T=>{if(!g)return;const q=V_(T.nativeEvent);if(o&&(q&&T.button===0||!q)){const B=v.getState();Hf.onPointerDown(T.nativeEvent,{handleDomNode:T.currentTarget,autoPanOnConnect:B.autoPanOnConnect,connectionMode:B.connectionMode,connectionRadius:B.connectionRadius,domNode:B.domNode,nodeLookup:B.nodeLookup,lib:B.lib,isTarget:x,handleId:y,nodeId:g,flowId:B.rfId,panBy:B.panBy,cancelConnection:B.cancelConnection,onConnectStart:B.onConnectStart,onConnectEnd:B.onConnectEnd,updateConnection:B.updateConnection,onConnect:P,isValidConnection:r||B.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:B.autoPanSpeed,dragThreshold:B.connectionDragThreshold})}q?d?.(T):f?.(T)},M=T=>{const{onClickConnectStart:q,onClickConnectEnd:B,connectionClickStartHandle:F,connectionMode:G,isValidConnection:V,lib:K,rfId:W,nodeLookup:D,connection:I}=v.getState();if(!g||!F&&!o)return;if(!F){q?.(T.nativeEvent,{nodeId:g,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:g,type:e,id:y}});return}const z=H_(T.target),L=r||V,{connection:H,isValid:U}=Hf.isValid(T.nativeEvent,{handle:{nodeId:g,id:y,type:e},connectionMode:G,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:L,flowId:W,doc:z,lib:K,nodeLookup:D});U&&H&&P(H);const Y=structuredClone(I);delete Y.inProgress,Y.toPosition=Y.toHandle?Y.toHandle.position:null,B?.(T,Y),v.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":y,"data-nodeid":g,"data-handlepos":n,"data-id":`${w}-${g}-${y}-${e}`,className:Re(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",b,l,{source:!x,target:x,connectable:i,connectablestart:o,connectableend:a,clickconnecting:E,connectingfrom:S,connectingto:C,valid:k,connectionindicator:i&&(!A||N)&&(A||R?a:o)}]),onMouseDown:O,onTouchStart:O,onClick:_?M:void 0,ref:p,...h,children:u})}const Bt=j.memo(g1(xP));function bP({data:e,isConnectable:n,sourcePosition:r=oe.Bottom}){return m.jsxs(m.Fragment,{children:[e?.label,m.jsx(Bt,{type:"source",position:r,isConnectable:n})]})}function _P({data:e,isConnectable:n,targetPosition:r=oe.Top,sourcePosition:i=oe.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(Bt,{type:"target",position:r,isConnectable:n}),e?.label,m.jsx(Bt,{type:"source",position:i,isConnectable:n})]})}function wP(){return null}function SP({data:e,isConnectable:n,targetPosition:r=oe.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(Bt,{type:"target",position:r,isConnectable:n}),e?.label]})}const Ei={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},jp={input:bP,default:_P,output:SP,group:wP};function CP(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const EP=e=>{const{width:n,height:r,x:i,y:o}=qr(e.nodeLookup,{filter:a=>!!a.selected});return{width:st(n)?n:null,height:st(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${o}px)`}};function NP({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const i=Se(),{width:o,height:a,transformString:s,userSelectionActive:c}=ge(EP,we),u=v1(),l=j.useRef(null);if(j.useEffect(()=>{r||l.current?.focus({preventScroll:!0})},[r]),y1({nodeRef:l}),c||!o||!a)return null;const d=e?h=>{const p=i.getState().nodes.filter(y=>y.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(Ei,h.key)&&(h.preventDefault(),u({direction:Ei[h.key],factor:h.shiftKey?4:1}))};return m.jsx("div",{className:Re(["react-flow__nodesselection","react-flow__container",n]),style:{transform:s},children:m.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:r?void 0:-1,onKeyDown:r?void 0:f,style:{width:o,height:a}})})}const Pp=typeof window<"u"?window:void 0,kP=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function b1({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:l,selectionOnDrag:d,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:v,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:w,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:A,translateExtent:R,minZoom:k,maxZoom:P,preventScrolling:O,onSelectionContextMenu:M,noWheelClassName:T,noPanClassName:q,disableKeyboardA11y:B,onViewportChange:F,isControlledViewport:G}){const{nodesSelectionActive:V,userSelectionActive:K}=ge(kP,we),W=Ar(l,{target:Pp}),D=Ar(x,{target:Pp}),I=D||N,z=D||w,L=d&&I!==!0,H=W||K||L;return sP({deleteKeyCode:u,multiSelectionKeyCode:y}),m.jsx(lP,{onPaneContextMenu:a,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:z,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:!W&&I,defaultViewport:A,translateExtent:R,minZoom:k,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:O,noWheelClassName:T,noPanClassName:q,onViewportChange:F,isControlledViewport:G,paneClickDistance:c,selectionOnDrag:L,children:m.jsxs(pP,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:I,isSelecting:!!H,selectionMode:f,selectionKeyPressed:W,paneClickDistance:c,selectionOnDrag:L,children:[e,V&&m.jsx(NP,{onSelectionContextMenu:M,noPanClassName:q,disableKeyboardA11y:B})]})})}b1.displayName="FlowRenderer";const RP=j.memo(b1),AP=e=>n=>e?Rd(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function jP(e){return ge(j.useCallback(AP(e),[e]),we)}const PP=e=>e.updateNodeInternals;function MP(){const e=ge(PP),[n]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const i=new Map;r.forEach(o=>{const a=o.target.getAttribute("data-id");i.set(a,{id:a,nodeElement:o.target,force:!0})}),e(i)}));return j.useEffect(()=>()=>{n?.disconnect()},[n]),n}function IP({node:e,nodeType:n,hasDimensions:r,resizeObserver:i}){const o=Se(),a=j.useRef(null),s=j.useRef(null),c=j.useRef(e.sourcePosition),u=j.useRef(e.targetPosition),l=j.useRef(n),d=r&&!!e.internals.handleBounds;return j.useEffect(()=>{a.current&&!e.hidden&&(!d||s.current!==a.current)&&(s.current&&i?.unobserve(s.current),i?.observe(a.current),s.current=a.current)},[d,e.hidden]),j.useEffect(()=>()=>{s.current&&(i?.unobserve(s.current),s.current=null)},[]),j.useEffect(()=>{if(a.current){const f=l.current!==n,h=c.current!==e.sourcePosition,p=u.current!==e.targetPosition;(f||h||p)&&(l.current=n,c.current=e.sourcePosition,u.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),a}function TP({id:e,onClick:n,onMouseEnter:r,onMouseMove:i,onMouseLeave:o,onContextMenu:a,onDoubleClick:s,nodesDraggable:c,elementsSelectable:u,nodesConnectable:l,nodesFocusable:d,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:y,rfId:x,nodeTypes:v,nodeClickDistance:g,onError:_}){const{node:b,internals:w,isParent:S}=ge(U=>{const Y=U.nodeLookup.get(e),J=U.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:J}},we);let C=b.type||"default",E=v?.[C]||jp[C];E===void 0&&(_?.("003",yt.error003(C)),C="default",E=v?.default||jp.default);const N=!!(b.draggable||c&&typeof b.draggable>"u"),A=!!(b.selectable||u&&typeof b.selectable>"u"),R=!!(b.connectable||l&&typeof b.connectable>"u"),k=!!(b.focusable||d&&typeof b.focusable>"u"),P=Se(),O=$_(b),M=IP({node:b,nodeType:C,hasDimensions:O,resizeObserver:f}),T=y1({nodeRef:M,disabled:b.hidden||!N,noDragClassName:h,handleSelector:b.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:g}),q=v1();if(b.hidden)return null;const B=It(b),F=CP(b),G=A||N||n||r||i||o,V=r?U=>r(U,{...w.userNode}):void 0,K=i?U=>i(U,{...w.userNode}):void 0,W=o?U=>o(U,{...w.userNode}):void 0,D=a?U=>a(U,{...w.userNode}):void 0,I=s?U=>s(U,{...w.userNode}):void 0,z=U=>{const{selectNodesOnDrag:Y,nodeDragThreshold:J}=P.getState();A&&(!Y||!N||J>0)&&Bf({id:e,store:P,nodeRef:M}),n&&n(U,{...w.userNode})},L=U=>{if(!(B_(U.nativeEvent)||y)){if(P_.includes(U.key)&&A){const Y=U.key==="Escape";Bf({id:e,store:P,unselect:Y,nodeRef:M})}else if(N&&b.selected&&Object.prototype.hasOwnProperty.call(Ei,U.key)){U.preventDefault();const{ariaLabelConfig:Y}=P.getState();P.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:U.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),q({direction:Ei[U.key],factor:U.shiftKey?4:1})}}},H=()=>{if(y||!M.current?.matches(":focus-visible"))return;const{transform:U,width:Y,height:J,autoPanOnNodeFocus:te,setCenter:ne}=P.getState();if(!te)return;Rd(new Map([[e,b]]),{x:0,y:0,width:Y,height:J},U,!0).length>0||ne(b.position.x+B.width/2,b.position.y+B.height/2,{zoom:U[2]})};return m.jsx("div",{className:Re(["react-flow__node",`react-flow__node-${C}`,{[p]:N},b.className,{selected:b.selected,selectable:A,parent:S,draggable:N,dragging:T}]),ref:M,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:G?"all":"none",visibility:O?"visible":"hidden",...b.style,...F},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:V,onMouseMove:K,onMouseLeave:W,onContextMenu:D,onClick:z,onDoubleClick:I,onKeyDown:k?L:void 0,tabIndex:k?0:void 0,onFocus:k?H:void 0,role:b.ariaRole??(k?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${u1}-${x}`,"aria-label":b.ariaLabel,...b.domAttributes,children:m.jsx(mP,{value:e,children:m.jsx(E,{id:e,data:b.data,type:C,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:b.selected??!1,selectable:A,draggable:N,deletable:b.deletable??!0,isConnectable:R,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:T,dragHandle:b.dragHandle,zIndex:w.z,parentId:b.parentId,...B})})})}var OP=j.memo(TP);const qP=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function _1(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,onError:a}=ge(qP,we),s=jP(e.onlyRenderVisibleElements),c=MP();return m.jsx("div",{className:"react-flow__nodes",style:to,children:s.map(u=>m.jsx(OP,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},u))})}_1.displayName="NodeRenderer";const DP=j.memo(_1);function zP(e){return ge(j.useCallback(r=>{if(!e)return r.edges.map(o=>o.id);const i=[];if(r.width&&r.height)for(const o of r.edges){const a=r.nodeLookup.get(o.source),s=r.nodeLookup.get(o.target);a&&s&&LA({sourceNode:a,targetNode:s,width:r.width,height:r.height,transform:r.transform})&&i.push(o.id)}return i},[e]),we)}const LP=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},$P=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Mp={[zn.Arrow]:LP,[zn.ArrowClosed]:$P};function FP(e){const n=Se();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(Mp,e)?Mp[e]:(n.getState().onError?.("009",yt.error009(e)),null),[e])}const HP=({id:e,type:n,color:r,width:i=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const u=FP(n);return u?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0",children:m.jsx(u,{color:r,strokeWidth:s})}):null},w1=({defaultColor:e,rfId:n})=>{const r=ge(a=>a.edges),i=ge(a=>a.defaultEdgeOptions),o=j.useMemo(()=>UA(r,{id:n,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[r,i,n,e]);return o.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:o.map(a=>m.jsx(HP,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};w1.displayName="MarkerDefinitions";var BP=j.memo(w1);function S1({x:e,y:n,label:r,labelStyle:i,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:u,className:l,...d}){const[f,h]=j.useState({x:1,y:0,width:0,height:0}),p=Re(["react-flow__edge-textwrapper",l]),y=j.useRef(null);return j.useEffect(()=>{if(y.current){const x=y.current.getBBox();h({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),r?m.jsxs("g",{transform:`translate(${e-f.width/2} ${n-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...d,children:[o&&m.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:c,ry:c}),m.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:y,style:i,children:r}),u]}):null}S1.displayName="EdgeText";const VP=j.memo(S1);function no({path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u,interactionWidth:l=20,...d}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...d,d:e,fill:"none",className:Re(["react-flow__edge-path",d.className])}),l?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}):null,i&&st(n)&&st(r)?m.jsx(VP,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:u}):null]})}function Ip({pos:e,x1:n,y1:r,x2:i,y2:o}){return e===oe.Left||e===oe.Right?[.5*(n+i),r]:[n,.5*(r+o)]}function C1({sourceX:e,sourceY:n,sourcePosition:r=oe.Bottom,targetX:i,targetY:o,targetPosition:a=oe.Top}){const[s,c]=Ip({pos:r,x1:e,y1:n,x2:i,y2:o}),[u,l]=Ip({pos:a,x1:i,y1:o,x2:e,y2:n}),[d,f,h,p]=G_({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${n} C${s},${c} ${u},${l} ${i},${o}`,d,f,h,p]}function E1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s,targetPosition:c,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:g})=>{const[_,b,w]=C1({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:c}),S=e.isInternal?void 0:n;return m.jsx(no,{id:S,path:_,labelX:b,labelY:w,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:g})})}const GP=E1({isInternal:!1}),N1=E1({isInternal:!0});GP.displayName="SimpleBezierEdge";N1.displayName="SimpleBezierEdgeInternal";function k1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:p=oe.Bottom,targetPosition:y=oe.Top,markerEnd:x,markerStart:v,pathOptions:g,interactionWidth:_})=>{const[b,w,S]=Lf({sourceX:r,sourceY:i,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:g?.borderRadius,offset:g?.offset,stepPosition:g?.stepPosition}),C=e.isInternal?void 0:n;return m.jsx(no,{id:C,path:b,labelX:w,labelY:S,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:x,markerStart:v,interactionWidth:_})})}const R1=k1({isInternal:!1}),A1=k1({isInternal:!0});R1.displayName="SmoothStepEdge";A1.displayName="SmoothStepEdgeInternal";function j1(e){return j.memo(({id:n,...r})=>{const i=e.isInternal?void 0:n;return m.jsx(R1,{...r,id:i,pathOptions:j.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const UP=j1({isInternal:!1}),P1=j1({isInternal:!0});UP.displayName="StepEdge";P1.displayName="StepEdgeInternal";function M1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})=>{const[v,g,_]=Y_({sourceX:r,sourceY:i,targetX:o,targetY:a}),b=e.isInternal?void 0:n;return m.jsx(no,{id:b,path:v,labelX:g,labelY:_,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})})}const WP=M1({isInternal:!1}),I1=M1({isInternal:!0});WP.displayName="StraightEdge";I1.displayName="StraightEdgeInternal";function T1(e){return j.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s=oe.Bottom,targetPosition:c=oe.Top,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,pathOptions:g,interactionWidth:_})=>{const[b,w,S]=U_({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:c,curvature:g?.curvature}),C=e.isInternal?void 0:n;return m.jsx(no,{id:C,path:b,labelX:w,labelY:S,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:v,interactionWidth:_})})}const KP=T1({isInternal:!1}),O1=T1({isInternal:!0});KP.displayName="BezierEdge";O1.displayName="BezierEdgeInternal";const Tp={default:O1,straight:I1,step:P1,smoothstep:A1,simplebezier:N1},Op={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},YP=(e,n,r)=>r===oe.Left?e-n:r===oe.Right?e+n:e,XP=(e,n,r)=>r===oe.Top?e-n:r===oe.Bottom?e+n:e,qp="react-flow__edgeupdater";function Dp({position:e,centerX:n,centerY:r,radius:i=10,onMouseDown:o,onMouseEnter:a,onMouseOut:s,type:c}){return m.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:s,className:Re([qp,`${qp}-${c}`]),cx:YP(n,i,e),cy:XP(r,i,e),r:i,stroke:"transparent",fill:"transparent"})}function ZP({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:i,sourceY:o,targetX:a,targetY:s,sourcePosition:c,targetPosition:u,onReconnect:l,onReconnectStart:d,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const y=Se(),x=(w,S)=>{if(w.button!==0)return;const{autoPanOnConnect:C,domNode:E,isValidConnection:N,connectionMode:A,connectionRadius:R,lib:k,onConnectStart:P,onConnectEnd:O,cancelConnection:M,nodeLookup:T,rfId:q,panBy:B,updateConnection:F}=y.getState(),G=S.type==="target",V=(D,I)=>{h(!1),f?.(D,r,S.type,I)},K=D=>l?.(r,D),W=(D,I)=>{h(!0),d?.(w,r,S.type),P?.(D,I)};Hf.onPointerDown(w.nativeEvent,{autoPanOnConnect:C,connectionMode:A,connectionRadius:R,domNode:E,handleId:S.id,nodeId:S.nodeId,nodeLookup:T,isTarget:G,edgeUpdaterType:S.type,lib:k,flowId:q,cancelConnection:M,panBy:B,isValidConnection:N,onConnect:K,onConnectStart:W,onConnectEnd:O,onReconnectEnd:V,updateConnection:F,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold,handleDomNode:w.currentTarget})},v=w=>x(w,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),g=w=>x(w,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>p(!0),b=()=>p(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(Dp,{position:c,centerX:i,centerY:o,radius:n,onMouseDown:v,onMouseEnter:_,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&m.jsx(Dp,{position:u,centerX:a,centerY:s,radius:n,onMouseDown:g,onMouseEnter:_,onMouseOut:b,type:"target"})]})}function JP({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:i,onClick:o,onDoubleClick:a,onContextMenu:s,onMouseEnter:c,onMouseMove:u,onMouseLeave:l,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:y,edgeTypes:x,noPanClassName:v,onError:g,disableKeyboardA11y:_}){let b=ge(ne=>ne.edgeLookup.get(e));const w=ge(ne=>ne.defaultEdgeOptions);b=w?{...w,...b}:b;let S=b.type||"default",C=x?.[S]||Tp[S];C===void 0&&(g?.("011",yt.error011(S)),S="default",C=x?.default||Tp.default);const E=!!(b.focusable||n&&typeof b.focusable>"u"),N=typeof f<"u"&&(b.reconnectable||r&&typeof b.reconnectable>"u"),A=!!(b.selectable||i&&typeof b.selectable>"u"),R=j.useRef(null),[k,P]=j.useState(!1),[O,M]=j.useState(!1),T=Se(),{zIndex:q,sourceX:B,sourceY:F,targetX:G,targetY:V,sourcePosition:K,targetPosition:W}=ge(j.useCallback(ne=>{const Q=ne.nodeLookup.get(b.source),ie=ne.nodeLookup.get(b.target);if(!Q||!ie)return{zIndex:b.zIndex,...Op};const re=GA({id:e,sourceNode:Q,targetNode:ie,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:ne.connectionMode,onError:g});return{zIndex:zA({selected:b.selected,zIndex:b.zIndex,sourceNode:Q,targetNode:ie,elevateOnSelect:ne.elevateEdgesOnSelect,zIndexMode:ne.zIndexMode}),...re||Op}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),we),D=j.useMemo(()=>b.markerStart?`url('#${$f(b.markerStart,y)}')`:void 0,[b.markerStart,y]),I=j.useMemo(()=>b.markerEnd?`url('#${$f(b.markerEnd,y)}')`:void 0,[b.markerEnd,y]);if(b.hidden||B===null||F===null||G===null||V===null)return null;const z=ne=>{const{addSelectedEdges:Q,unselectNodesAndEdges:ie,multiSelectionActive:re}=T.getState();A&&(T.setState({nodesSelectionActive:!1}),b.selected&&re?(ie({nodes:[],edges:[b]}),R.current?.blur()):Q([e])),o&&o(ne,b)},L=a?ne=>{a(ne,{...b})}:void 0,H=s?ne=>{s(ne,{...b})}:void 0,U=c?ne=>{c(ne,{...b})}:void 0,Y=u?ne=>{u(ne,{...b})}:void 0,J=l?ne=>{l(ne,{...b})}:void 0,te=ne=>{if(!_&&P_.includes(ne.key)&&A){const{unselectNodesAndEdges:Q,addSelectedEdges:ie}=T.getState();ne.key==="Escape"?(R.current?.blur(),Q({edges:[b]})):ie([e])}};return m.jsx("svg",{style:{zIndex:q},children:m.jsxs("g",{className:Re(["react-flow__edge",`react-flow__edge-${S}`,b.className,v,{selected:b.selected,animated:b.animated,inactive:!A&&!o,updating:k,selectable:A}]),onClick:z,onDoubleClick:L,onContextMenu:H,onMouseEnter:U,onMouseMove:Y,onMouseLeave:J,onKeyDown:E?te:void 0,tabIndex:E?0:void 0,role:b.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":E?`${l1}-${y}`:void 0,ref:R,...b.domAttributes,children:[!O&&m.jsx(C,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:A,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:B,sourceY:F,targetX:G,targetY:V,sourcePosition:K,targetPosition:W,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:D,markerEnd:I,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),N&&m.jsx(ZP,{edge:b,isReconnectable:N,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:B,sourceY:F,targetX:G,targetY:V,sourcePosition:K,targetPosition:W,setUpdateHover:P,setReconnecting:M})]})})}var QP=j.memo(JP);const eM=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function q1({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:i,noPanClassName:o,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:x}){const{edgesFocusable:v,edgesReconnectable:g,elementsSelectable:_,onError:b}=ge(eM,we),w=zP(n);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(BP,{defaultColor:e,rfId:r}),w.map(S=>m.jsx(QP,{id:S,edgesFocusable:v,edgesReconnectable:g,elementsSelectable:_,noPanClassName:o,onReconnect:a,onContextMenu:s,onMouseEnter:c,onMouseMove:u,onMouseLeave:l,onClick:d,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:y,rfId:r,onError:b,edgeTypes:i,disableKeyboardA11y:x},S))]})}q1.displayName="EdgeRenderer";const tM=j.memo(q1),nM=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function rM({children:e}){const n=ge(nM);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function iM(e){const n=qd(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const oM=e=>e.panZoom?.syncViewport;function aM(e){const n=ge(oM),r=Se();return j.useEffect(()=>{e&&(n?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function sM(e){return e.connection.inProgress?{...e.connection,to:zr(e.connection.to,e.transform)}:{...e.connection}}function cM(e){return sM}function uM(e){const n=cM();return ge(n,we)}const lM=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function fM({containerStyle:e,style:n,type:r,component:i}){const{nodesConnectable:o,width:a,height:s,isValid:c,inProgress:u}=ge(lM,we);return!(a&&o&&u)?null:m.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Re(["react-flow__connection",T_(c)]),children:m.jsx(D1,{style:n,type:r,CustomComponent:i,isValid:c})})})}const D1=({style:e,type:n=Ft.Bezier,CustomComponent:r,isValid:i})=>{const{inProgress:o,from:a,fromNode:s,fromHandle:c,fromPosition:u,to:l,toNode:d,toHandle:f,toPosition:h,pointer:p}=uM();if(!o)return;if(r)return m.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:s,fromHandle:c,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:u,toPosition:h,connectionStatus:T_(i),toNode:d,toHandle:f,pointer:p});let y="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:l.x,targetY:l.y,targetPosition:h};switch(n){case Ft.Bezier:[y]=U_(x);break;case Ft.SimpleBezier:[y]=C1(x);break;case Ft.Step:[y]=Lf({...x,borderRadius:0});break;case Ft.SmoothStep:[y]=Lf(x);break;default:[y]=Y_(x)}return m.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};D1.displayName="ConnectionLine";const dM={};function zp(e=dM){j.useRef(e),Se(),j.useEffect(()=>{},[e])}function hM(){Se(),j.useRef(!1),j.useEffect(()=>{},[])}function z1({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:x,connectionLineComponent:v,connectionLineContainerStyle:g,selectionKeyCode:_,selectionOnDrag:b,selectionMode:w,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:A,elementsSelectable:R,defaultViewport:k,translateExtent:P,minZoom:O,maxZoom:M,preventScrolling:T,defaultMarkerColor:q,zoomOnScroll:B,zoomOnPinch:F,panOnScroll:G,panOnScrollSpeed:V,panOnScrollMode:K,zoomOnDoubleClick:W,panOnDrag:D,onPaneClick:I,onPaneMouseEnter:z,onPaneMouseMove:L,onPaneMouseLeave:H,onPaneScroll:U,onPaneContextMenu:Y,paneClickDistance:J,nodeClickDistance:te,onEdgeContextMenu:ne,onEdgeMouseEnter:Q,onEdgeMouseMove:ie,onEdgeMouseLeave:re,reconnectRadius:le,onReconnect:se,onReconnectStart:X,onReconnectEnd:ee,noDragClassName:ce,noWheelClassName:he,noPanClassName:me,disableKeyboardA11y:ue,nodeExtent:Ie,rfId:Ne,viewport:Pe,onViewportChange:Be}){return zp(e),zp(n),hM(),iM(r),aM(Pe),m.jsx(RP,{onPaneClick:I,onPaneMouseEnter:z,onPaneMouseMove:L,onPaneMouseLeave:H,onPaneContextMenu:Y,onPaneScroll:U,paneClickDistance:J,deleteKeyCode:N,selectionKeyCode:_,selectionOnDrag:b,selectionMode:w,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:E,elementsSelectable:R,zoomOnScroll:B,zoomOnPinch:F,zoomOnDoubleClick:W,panOnScroll:G,panOnScrollSpeed:V,panOnScrollMode:K,panOnDrag:D,defaultViewport:k,translateExtent:P,minZoom:O,maxZoom:M,onSelectionContextMenu:f,preventScrolling:T,noDragClassName:ce,noWheelClassName:he,noPanClassName:me,disableKeyboardA11y:ue,onViewportChange:Be,isControlledViewport:!!Pe,children:m.jsxs(rM,{children:[m.jsx(tM,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:se,onReconnectStart:X,onReconnectEnd:ee,onlyRenderVisibleElements:A,onEdgeContextMenu:ne,onEdgeMouseEnter:Q,onEdgeMouseMove:ie,onEdgeMouseLeave:re,reconnectRadius:le,defaultMarkerColor:q,noPanClassName:me,disableKeyboardA11y:ue,rfId:Ne}),m.jsx(fM,{style:x,type:y,component:v,containerStyle:g}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(DP,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:d,nodeClickDistance:te,onlyRenderVisibleElements:A,noPanClassName:me,noDragClassName:ce,disableKeyboardA11y:ue,nodeExtent:Ie,rfId:Ne}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}z1.displayName="GraphView";const pM=j.memo(z1),Lp=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:u=.5,maxZoom:l=2,nodeOrigin:d,nodeExtent:f,zIndexMode:h="basic"}={})=>{const p=new Map,y=new Map,x=new Map,v=new Map,g=i??n??[],_=r??e??[],b=d??[0,0],w=f??Er;J_(x,v,g);const S=Ff(_,p,y,{nodeOrigin:b,nodeExtent:w,zIndexMode:h});let C=[0,0,1];if(s&&o&&a){const E=qr(p,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))}),{x:N,y:A,zoom:R}=Ad(E,o,a,u,l,c?.padding??.1);C=[N,A,R]}return{rfId:"1",width:o??0,height:a??0,transform:C,nodes:_,nodesInitialized:S,nodeLookup:p,parentLookup:y,edges:g,edgeLookup:v,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:u,maxZoom:l,translateExtent:Er,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Dn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:c,fitViewResolver:null,connection:{...I_},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:MA,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:M_,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},gM=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:u,maxZoom:l,nodeOrigin:d,nodeExtent:f,zIndexMode:h})=>Ij((p,y)=>{async function x(){const{nodeLookup:v,panZoom:g,fitViewOptions:_,fitViewResolver:b,width:w,height:S,minZoom:C,maxZoom:E}=y();g&&(await jA({nodes:v,width:w,height:S,panZoom:g,minZoom:C,maxZoom:E},_),b?.resolve(!0),p({fitViewResolver:null}))}return{...Lp({nodes:e,edges:n,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:u,maxZoom:l,nodeOrigin:d,nodeExtent:f,defaultNodes:r,defaultEdges:i,zIndexMode:h}),setNodes:v=>{const{nodeLookup:g,parentLookup:_,nodeOrigin:b,elevateNodesOnSelect:w,fitViewQueued:S,zIndexMode:C}=y(),E=Ff(v,g,_,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:w,checkEquality:!0,zIndexMode:C});S&&E?(x(),p({nodes:v,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:v,nodesInitialized:E})},setEdges:v=>{const{connectionLookup:g,edgeLookup:_}=y();J_(g,_,v),p({edges:v})},setDefaultNodesAndEdges:(v,g)=>{if(v){const{setNodes:_}=y();_(v),p({hasDefaultNodes:!0})}if(g){const{setEdges:_}=y();_(g),p({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:g,nodeLookup:_,parentLookup:b,domNode:w,nodeOrigin:S,nodeExtent:C,debug:E,fitViewQueued:N,zIndexMode:A}=y(),{changes:R,updatedInternals:k}=QA(v,_,b,w,S,C,A);k&&(YA(_,b,{nodeOrigin:S,nodeExtent:C,zIndexMode:A}),N?(x(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),R?.length>0&&(E&&console.log("React Flow: trigger node changes",R),g?.(R)))},updateNodePositions:(v,g=!1)=>{const _=[];let b=[];const{nodeLookup:w,triggerNodeChanges:S,connection:C,updateConnection:E,onNodesChangeMiddlewareMap:N}=y();for(const[A,R]of v){const k=w.get(A),P=!!(k?.expandParent&&k?.parentId&&R?.position),O={id:A,type:"position",position:P?{x:Math.max(0,R.position.x),y:Math.max(0,R.position.y)}:R.position,dragging:g};if(k&&C.inProgress&&C.fromNode.id===k.id){const M=dn(k,C.fromHandle,oe.Left,!0);E({...C,from:M})}P&&k.parentId&&_.push({id:A,parentId:k.parentId,rect:{...R.internals.positionAbsolute,width:R.measured.width??0,height:R.measured.height??0}}),b.push(O)}if(_.length>0){const{parentLookup:A,nodeOrigin:R}=y(),k=Od(_,w,A,R);b.push(...k)}for(const A of N.values())b=A(b);S(b)},triggerNodeChanges:v=>{const{onNodesChange:g,setNodes:_,nodes:b,hasDefaultNodes:w,debug:S}=y();if(v?.length){if(w){const C=h1(v,b);_(C)}S&&console.log("React Flow: trigger node changes",v),g?.(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:g,setEdges:_,edges:b,hasDefaultEdges:w,debug:S}=y();if(v?.length){if(w){const C=p1(v,b);_(C)}S&&console.log("React Flow: trigger edge changes",v),g?.(v)}},addSelectedNodes:v=>{const{multiSelectionActive:g,edgeLookup:_,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=y();if(g){const C=v.map(E=>Jt(E,!0));w(C);return}w(Pn(b,new Set([...v]),!0)),S(Pn(_))},addSelectedEdges:v=>{const{multiSelectionActive:g,edgeLookup:_,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=y();if(g){const C=v.map(E=>Jt(E,!0));S(C);return}S(Pn(_,new Set([...v]))),w(Pn(b,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:g}={})=>{const{edges:_,nodes:b,nodeLookup:w,triggerNodeChanges:S,triggerEdgeChanges:C}=y(),E=v||b,N=g||_,A=E.map(k=>{const P=w.get(k.id);return P&&(P.selected=!1),Jt(k.id,!1)}),R=N.map(k=>Jt(k.id,!1));S(A),C(R)},setMinZoom:v=>{const{panZoom:g,maxZoom:_}=y();g?.setScaleExtent([v,_]),p({minZoom:v})},setMaxZoom:v=>{const{panZoom:g,minZoom:_}=y();g?.setScaleExtent([_,v]),p({maxZoom:v})},setTranslateExtent:v=>{y().panZoom?.setTranslateExtent(v),p({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:g,triggerNodeChanges:_,triggerEdgeChanges:b,elementsSelectable:w}=y();if(!w)return;const S=g.reduce((E,N)=>N.selected?[...E,Jt(N.id,!1)]:E,[]),C=v.reduce((E,N)=>N.selected?[...E,Jt(N.id,!1)]:E,[]);_(S),b(C)},setNodeExtent:v=>{const{nodes:g,nodeLookup:_,parentLookup:b,nodeOrigin:w,elevateNodesOnSelect:S,nodeExtent:C,zIndexMode:E}=y();v[0][0]===C[0][0]&&v[0][1]===C[0][1]&&v[1][0]===C[1][0]&&v[1][1]===C[1][1]||(Ff(g,_,b,{nodeOrigin:w,nodeExtent:v,elevateNodesOnSelect:S,checkEquality:!1,zIndexMode:E}),p({nodeExtent:v}))},panBy:v=>{const{transform:g,width:_,height:b,panZoom:w,translateExtent:S}=y();return ej({delta:v,panZoom:w,transform:g,translateExtent:S,width:_,height:b})},setCenter:async(v,g,_)=>{const{width:b,height:w,maxZoom:S,panZoom:C}=y();if(!C)return Promise.resolve(!1);const E=typeof _?.zoom<"u"?_.zoom:S;return await C.setViewport({x:b/2-v*E,y:w/2-g*E,zoom:E},{duration:_?.duration,ease:_?.ease,interpolate:_?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...I_}})},updateConnection:v=>{p({connection:v})},reset:()=>p({...Lp()})}},Object.is);function mM({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:a,initialMinZoom:s,initialMaxZoom:c,initialFitViewOptions:u,fitView:l,nodeOrigin:d,nodeExtent:f,zIndexMode:h,children:p}){const[y]=j.useState(()=>gM({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:l,minZoom:s,maxZoom:c,fitViewOptions:u,nodeOrigin:d,nodeExtent:f,zIndexMode:h}));return m.jsx(Tj,{value:y,children:m.jsx(rP,{children:p})})}function yM({children:e,nodes:n,edges:r,defaultNodes:i,defaultEdges:o,width:a,height:s,fitView:c,fitViewOptions:u,minZoom:l,maxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}){return j.useContext(Qi)?m.jsx(m.Fragment,{children:e}):m.jsx(mM,{initialNodes:n,initialEdges:r,defaultNodes:i,defaultEdges:o,initialWidth:a,initialHeight:s,fitView:c,initialFitViewOptions:u,initialMinZoom:l,initialMaxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p,children:e})}const vM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function xM({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,className:o,nodeTypes:a,edgeTypes:s,onNodeClick:c,onEdgeClick:u,onInit:l,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:C,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:A,onNodesDelete:R,onEdgesDelete:k,onDelete:P,onSelectionChange:O,onSelectionDragStart:M,onSelectionDrag:T,onSelectionDragStop:q,onSelectionContextMenu:B,onSelectionStart:F,onSelectionEnd:G,onBeforeDelete:V,connectionMode:K,connectionLineType:W=Ft.Bezier,connectionLineStyle:D,connectionLineComponent:I,connectionLineContainerStyle:z,deleteKeyCode:L="Backspace",selectionKeyCode:H="Shift",selectionOnDrag:U=!1,selectionMode:Y=Nr.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:te=Rr()?"Meta":"Control",zoomActivationKeyCode:ne=Rr()?"Meta":"Control",snapToGrid:Q,snapGrid:ie,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:le,nodesDraggable:se,autoPanOnNodeFocus:X,nodesConnectable:ee,nodesFocusable:ce,nodeOrigin:he=f1,edgesFocusable:me,edgesReconnectable:ue,elementsSelectable:Ie=!0,defaultViewport:Ne=Wj,minZoom:Pe=.5,maxZoom:Be=2,translateExtent:Xe=Er,preventScrolling:Wt=!0,nodeExtent:rt,defaultMarkerColor:Kt="#b1b1b7",zoomOnScroll:ze=!0,zoomOnPinch:Ve=!0,panOnScroll:_t=!1,panOnScrollSpeed:DS=.5,panOnScrollMode:zS=an.Free,zoomOnDoubleClick:LS=!0,panOnDrag:$S=!0,onPaneClick:FS,onPaneMouseEnter:HS,onPaneMouseMove:BS,onPaneMouseLeave:VS,onPaneScroll:GS,onPaneContextMenu:US,paneClickDistance:WS=1,nodeClickDistance:KS=0,children:YS,onReconnect:XS,onReconnectStart:ZS,onReconnectEnd:JS,onEdgeContextMenu:QS,onEdgeDoubleClick:e2,onEdgeMouseEnter:t2,onEdgeMouseMove:n2,onEdgeMouseLeave:r2,reconnectRadius:i2=10,onNodesChange:o2,onEdgesChange:a2,noDragClassName:s2="nodrag",noWheelClassName:c2="nowheel",noPanClassName:hh="nopan",fitView:ph,fitViewOptions:gh,connectOnClick:u2,attributionPosition:l2,proOptions:f2,defaultEdgeOptions:d2,elevateNodesOnSelect:h2=!0,elevateEdgesOnSelect:p2=!1,disableKeyboardA11y:mh=!1,autoPanOnConnect:g2,autoPanOnNodeDrag:m2,autoPanSpeed:y2,connectionRadius:v2,isValidConnection:x2,onError:b2,style:_2,id:yh,nodeDragThreshold:w2,connectionDragThreshold:S2,viewport:C2,onViewportChange:E2,width:N2,height:k2,colorMode:R2="light",debug:A2,onScroll:vh,ariaLabelConfig:j2,zIndexMode:xh="basic",...P2},M2){const ko=yh||"1",I2=Zj(R2),T2=j.useCallback(bh=>{bh.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),vh?.(bh)},[vh]);return m.jsx("div",{"data-testid":"rf__wrapper",...P2,onScroll:T2,style:{..._2,...vM},ref:M2,className:Re(["react-flow",o,I2]),id:yh,role:"application",children:m.jsxs(yM,{nodes:e,edges:n,width:N2,height:k2,fitView:ph,fitViewOptions:gh,minZoom:Pe,maxZoom:Be,nodeOrigin:he,nodeExtent:rt,zIndexMode:xh,children:[m.jsx(pM,{onInit:l,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:C,nodeTypes:a,edgeTypes:s,connectionLineType:W,connectionLineStyle:D,connectionLineComponent:I,connectionLineContainerStyle:z,selectionKeyCode:H,selectionOnDrag:U,selectionMode:Y,deleteKeyCode:L,multiSelectionKeyCode:te,panActivationKeyCode:J,zoomActivationKeyCode:ne,onlyRenderVisibleElements:re,defaultViewport:Ne,translateExtent:Xe,minZoom:Pe,maxZoom:Be,preventScrolling:Wt,zoomOnScroll:ze,zoomOnPinch:Ve,zoomOnDoubleClick:LS,panOnScroll:_t,panOnScrollSpeed:DS,panOnScrollMode:zS,panOnDrag:$S,onPaneClick:FS,onPaneMouseEnter:HS,onPaneMouseMove:BS,onPaneMouseLeave:VS,onPaneScroll:GS,onPaneContextMenu:US,paneClickDistance:WS,nodeClickDistance:KS,onSelectionContextMenu:B,onSelectionStart:F,onSelectionEnd:G,onReconnect:XS,onReconnectStart:ZS,onReconnectEnd:JS,onEdgeContextMenu:QS,onEdgeDoubleClick:e2,onEdgeMouseEnter:t2,onEdgeMouseMove:n2,onEdgeMouseLeave:r2,reconnectRadius:i2,defaultMarkerColor:Kt,noDragClassName:s2,noWheelClassName:c2,noPanClassName:hh,rfId:ko,disableKeyboardA11y:mh,nodeExtent:rt,viewport:C2,onViewportChange:E2}),m.jsx(Xj,{nodes:e,edges:n,defaultNodes:r,defaultEdges:i,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:se,autoPanOnNodeFocus:X,nodesConnectable:ee,nodesFocusable:ce,edgesFocusable:me,edgesReconnectable:ue,elementsSelectable:Ie,elevateNodesOnSelect:h2,elevateEdgesOnSelect:p2,minZoom:Pe,maxZoom:Be,nodeExtent:rt,onNodesChange:o2,onEdgesChange:a2,snapToGrid:Q,snapGrid:ie,connectionMode:K,translateExtent:Xe,connectOnClick:u2,defaultEdgeOptions:d2,fitView:ph,fitViewOptions:gh,onNodesDelete:R,onEdgesDelete:k,onDelete:P,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:A,onSelectionDrag:T,onSelectionDragStart:M,onSelectionDragStop:q,onMove:d,onMoveStart:f,onMoveEnd:h,noPanClassName:hh,nodeOrigin:he,rfId:ko,autoPanOnConnect:g2,autoPanOnNodeDrag:m2,autoPanSpeed:y2,onError:b2,connectionRadius:v2,isValidConnection:x2,selectNodesOnDrag:le,nodeDragThreshold:w2,connectionDragThreshold:S2,onBeforeDelete:V,debug:A2,ariaLabelConfig:j2,zIndexMode:xh}),m.jsx(Uj,{onSelectionChange:O}),YS,m.jsx(Fj,{proOptions:f2,position:l2}),m.jsx($j,{rfId:ko,disableKeyboardA11y:mh})]})})}var bM=g1(xM);function _M(e){const[n,r]=j.useState(e),i=j.useCallback(o=>r(a=>h1(o,a)),[]);return[n,r,i]}function wM(e){const[n,r]=j.useState(e),i=j.useCallback(o=>r(a=>p1(o,a)),[]);return[n,r,i]}function SM({dimensions:e,lineWidth:n,variant:r,className:i}){return m.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Re(["react-flow__background-pattern",r,i])})}function CM({radius:e,className:n}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Re(["react-flow__background-pattern","dots",n])})}var Vt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Vt||(Vt={}));const EM={[Vt.Dots]:1,[Vt.Lines]:1,[Vt.Cross]:6},NM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function L1({id:e,variant:n=Vt.Dots,gap:r=20,size:i,lineWidth:o=1,offset:a=0,color:s,bgColor:c,style:u,className:l,patternClassName:d}){const f=j.useRef(null),{transform:h,patternId:p}=ge(NM,we),y=i||EM[n],x=n===Vt.Dots,v=n===Vt.Cross,g=Array.isArray(r)?r:[r,r],_=[g[0]*h[2]||1,g[1]*h[2]||1],b=y*h[2],w=Array.isArray(a)?a:[a,a],S=v?[b,b]:_,C=[w[0]*h[2]||1+S[0]/2,w[1]*h[2]||1+S[1]/2],E=`${p}${e||""}`;return m.jsxs("svg",{className:Re(["react-flow__background",l]),style:{...u,...to,"--xy-background-color-props":c,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[m.jsx("pattern",{id:E,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:x?m.jsx(CM,{radius:b/2,className:d}):m.jsx(SM,{dimensions:S,lineWidth:o,variant:n,className:d})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}L1.displayName="Background";const kM=j.memo(L1);function RM(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function AM(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function jM(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function PM(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function MM(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ti({children:e,className:n,...r}){return m.jsx("button",{type:"button",className:Re(["react-flow__controls-button",n]),...r,children:e})}const IM=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function $1({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:s,onFitView:c,onInteractiveChange:u,className:l,children:d,position:f="bottom-left",orientation:h="vertical","aria-label":p}){const y=Se(),{isInteractive:x,minZoomReached:v,maxZoomReached:g,ariaLabelConfig:_}=ge(IM,we),{zoomIn:b,zoomOut:w,fitView:S}=qd(),C=()=>{b(),a?.()},E=()=>{w(),s?.()},N=()=>{S(o),c?.()},A=()=>{y.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u?.(!x)},R=h==="horizontal"?"horizontal":"vertical";return m.jsxs(eo,{className:Re(["react-flow__controls",R,l]),position:f,style:e,"data-testid":"rf__controls","aria-label":p??_["controls.ariaLabel"],children:[n&&m.jsxs(m.Fragment,{children:[m.jsx(ti,{onClick:C,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:g,children:m.jsx(RM,{})}),m.jsx(ti,{onClick:E,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:v,children:m.jsx(AM,{})})]}),r&&m.jsx(ti,{className:"react-flow__controls-fitview",onClick:N,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:m.jsx(jM,{})}),i&&m.jsx(ti,{className:"react-flow__controls-interactive",onClick:A,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:x?m.jsx(MM,{}):m.jsx(PM,{})}),d]})}$1.displayName="Controls";const TM=j.memo($1);function OM({id:e,x:n,y:r,width:i,height:o,style:a,color:s,strokeColor:c,strokeWidth:u,className:l,borderRadius:d,shapeRendering:f,selected:h,onClick:p}){const{background:y,backgroundColor:x}=a||{},v=s||y||x;return m.jsx("rect",{className:Re(["react-flow__minimap-node",{selected:h},l]),x:n,y:r,rx:d,ry:d,width:i,height:o,style:{fill:v,stroke:c,strokeWidth:u},shapeRendering:f,onClick:p?g=>p(g,e):void 0})}const qM=j.memo(OM),DM=e=>e.nodes.map(n=>n.id),Ko=e=>e instanceof Function?e:()=>e;function zM({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:a=qM,onClick:s}){const c=ge(DM,we),u=Ko(n),l=Ko(e),d=Ko(r),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:c.map(h=>m.jsx($M,{id:h,nodeColorFunc:u,nodeStrokeColorFunc:l,nodeClassNameFunc:d,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:a,onClick:s,shapeRendering:f},h))})}function LM({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:c,onClick:u}){const{node:l,x:d,y:f,width:h,height:p}=ge(y=>{const{internals:x}=y.nodeLookup.get(e),v=x.userNode,{x:g,y:_}=x.positionAbsolute,{width:b,height:w}=It(v);return{node:v,x:g,y:_,width:b,height:w}},we);return!l||l.hidden||!$_(l)?null:m.jsx(c,{x:d,y:f,width:h,height:p,style:l.style,selected:!!l.selected,className:i(l),color:n(l),borderRadius:o,strokeColor:r(l),strokeWidth:a,shapeRendering:s,onClick:u,id:l.id})}const $M=j.memo(LM);var FM=j.memo(zM);const HM=200,BM=150,VM=e=>!e.hidden,GM=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?L_(qr(e.nodeLookup,{filter:VM}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},UM="react-flow__minimap-desc";function F1({style:e,className:n,nodeStrokeColor:r,nodeColor:i,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:c,bgColor:u,maskColor:l,maskStrokeColor:d,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:y,pannable:x=!1,zoomable:v=!1,ariaLabel:g,inversePan:_,zoomStep:b=1,offsetScale:w=5}){const S=Se(),C=j.useRef(null),{boundingRect:E,viewBB:N,rfId:A,panZoom:R,translateExtent:k,flowWidth:P,flowHeight:O,ariaLabelConfig:M}=ge(GM,we),T=e?.width??HM,q=e?.height??BM,B=E.width/T,F=E.height/q,G=Math.max(B,F),V=G*T,K=G*q,W=w*G,D=E.x-(V-E.width)/2-W,I=E.y-(K-E.height)/2-W,z=V+W*2,L=K+W*2,H=`${UM}-${A}`,U=j.useRef(0),Y=j.useRef();U.current=G,j.useEffect(()=>{if(C.current&&R)return Y.current=uj({domNode:C.current,panZoom:R,getTransform:()=>S.getState().transform,getViewScale:()=>U.current}),()=>{Y.current?.destroy()}},[R]),j.useEffect(()=>{Y.current?.update({translateExtent:k,width:P,height:O,inversePan:_,pannable:x,zoomStep:b,zoomable:v})},[x,v,_,b,k,P,O]);const J=p?Q=>{const[ie,re]=Y.current?.pointer(Q)||[0,0];p(Q,{x:ie,y:re})}:void 0,te=y?j.useCallback((Q,ie)=>{const re=S.getState().nodeLookup.get(ie).internals.userNode;y(Q,re)},[]):void 0,ne=g??M["minimap.ariaLabel"];return m.jsx(eo,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*G:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Re(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:T,height:q,viewBox:`${D} ${I} ${z} ${L}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":H,ref:C,onClick:J,children:[ne&&m.jsx("title",{id:H,children:ne}),m.jsx(FM,{onClick:te,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:c}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${D-W},${I-W}h${z+W*2}v${L+W*2}h${-z-W*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}F1.displayName="MiniMap";const WM=j.memo(F1),KM=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,YM={[Hn.Line]:"right",[Hn.Handle]:"bottom-right"};function XM({nodeId:e,position:n,variant:r=Hn.Handle,className:i,style:o=void 0,children:a,color:s,minWidth:c=10,minHeight:u=10,maxWidth:l=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,autoScale:p=!0,shouldResize:y,onResizeStart:x,onResize:v,onResizeEnd:g}){const _=x1(),b=typeof e=="string"?e:_,w=Se(),S=j.useRef(null),C=r===Hn.Handle,E=ge(j.useCallback(KM(C&&p),[C,p]),we),N=j.useRef(null),A=n??YM[r];j.useEffect(()=>{if(!(!S.current||!b))return N.current||(N.current=Sj({domNode:S.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:k,transform:P,snapGrid:O,snapToGrid:M,nodeOrigin:T,domNode:q}=w.getState();return{nodeLookup:k,transform:P,snapGrid:O,snapToGrid:M,nodeOrigin:T,paneDomNode:q}},onChange:(k,P)=>{const{triggerNodeChanges:O,nodeLookup:M,parentLookup:T,nodeOrigin:q}=w.getState(),B=[],F={x:k.x,y:k.y},G=M.get(b);if(G&&G.expandParent&&G.parentId){const V=G.origin??q,K=k.width??G.measured.width??0,W=k.height??G.measured.height??0,D={id:G.id,parentId:G.parentId,rect:{width:K,height:W,...F_({x:k.x??G.position.x,y:k.y??G.position.y},{width:K,height:W},G.parentId,M,V)}},I=Od([D],M,T,q);B.push(...I),F.x=k.x?Math.max(V[0]*K,k.x):void 0,F.y=k.y?Math.max(V[1]*W,k.y):void 0}if(F.x!==void 0&&F.y!==void 0){const V={id:b,type:"position",position:{...F}};B.push(V)}if(k.width!==void 0&&k.height!==void 0){const K={id:b,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:k.width,height:k.height}};B.push(K)}for(const V of P){const K={...V,type:"position"};B.push(K)}O(B)},onEnd:({width:k,height:P})=>{const O={id:b,type:"dimensions",resizing:!1,dimensions:{width:k,height:P}};w.getState().triggerNodeChanges([O])}})),N.current.update({controlPosition:A,boundaries:{minWidth:c,minHeight:u,maxWidth:l,maxHeight:d},keepAspectRatio:f,resizeDirection:h,onResizeStart:x,onResize:v,onResizeEnd:g,shouldResize:y}),()=>{N.current?.destroy()}},[A,c,u,l,d,f,x,v,g,y]);const R=A.split("-");return m.jsx("div",{className:Re(["react-flow__resize-control","nodrag",...R,r,i]),ref:S,style:{...o,scale:E,...s&&{[C?"backgroundColor":"borderColor"]:s}},children:a})}j.memo(XM);function ZM(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),i=r.createElement("base"),o=r.createElement("a");return r.head.appendChild(i),r.body.appendChild(o),n&&(i.href=n),o.href=e,o.href}const JM=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Gt(e){const n=[];for(let r=0,i=e.length;r<i;r++)n.push(e[r]);return n}let xn=null;function H1(e={}){return xn||(e.includeStyleProperties?(xn=e.includeStyleProperties,xn):(xn=Gt(window.getComputedStyle(document.documentElement)),xn))}function Ni(e,n){const i=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return i?parseFloat(i.replace("px","")):0}function QM(e){const n=Ni(e,"border-left-width"),r=Ni(e,"border-right-width");return e.clientWidth+n+r}function eI(e){const n=Ni(e,"border-top-width"),r=Ni(e,"border-bottom-width");return e.clientHeight+n+r}function B1(e,n={}){const r=n.width||QM(e),i=n.height||eI(e);return{width:r,height:i}}function tI(){let e,n;try{n=process}catch{}const r=n&&n.env?n.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ge=16384;function nI(e){(e.width>Ge||e.height>Ge)&&(e.width>Ge&&e.height>Ge?e.width>e.height?(e.height*=Ge/e.width,e.width=Ge):(e.width*=Ge/e.height,e.height=Ge):e.width>Ge?(e.height*=Ge/e.width,e.width=Ge):(e.width*=Ge/e.height,e.height=Ge))}function ki(e){return new Promise((n,r)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>n(i))})},i.onerror=r,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function rI(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function iI(e,n,r){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${r}`),o.setAttribute("viewBox",`0 0 ${n} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),o.appendChild(a),a.appendChild(e),rI(o)}const $e=(e,n)=>{if(e instanceof n)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===n.name||$e(r,n)};function oI(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function aI(e,n){return H1(n).map(r=>{const i=e.getPropertyValue(r),o=e.getPropertyPriority(r);return`${r}: ${i}${o?" !important":""};`}).join(" ")}function sI(e,n,r,i){const o=`.${e}:${n}`,a=r.cssText?oI(r):aI(r,i);return document.createTextNode(`${o}{${a}}`)}function $p(e,n,r,i){const o=window.getComputedStyle(e,r),a=o.getPropertyValue("content");if(a===""||a==="none")return;const s=JM();try{n.className=`${n.className} ${s}`}catch{return}const c=document.createElement("style");c.appendChild(sI(s,r,o,i)),n.appendChild(c)}function cI(e,n,r){$p(e,n,":before",r),$p(e,n,":after",r)}const Fp="application/font-woff",Hp="image/jpeg",uI={woff:Fp,woff2:Fp,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Hp,jpeg:Hp,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function lI(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function zd(e){const n=lI(e).toLowerCase();return uI[n]||""}function fI(e){return e.split(/,/)[1]}function Vf(e){return e.search(/^(data:)/)!==-1}function dI(e,n){return`data:${n};base64,${e}`}async function V1(e,n,r){const i=await fetch(e,n);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise((a,s)=>{const c=new FileReader;c.onerror=s,c.onloadend=()=>{try{a(r({res:i,result:c.result}))}catch(u){s(u)}},c.readAsDataURL(o)})}const Yo={};function hI(e,n,r){let i=e.replace(/\?.*/,"");return r&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),n?`[${n}]${i}`:i}async function Ld(e,n,r){const i=hI(e,n,r.includeQueryParams);if(Yo[i]!=null)return Yo[i];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const a=await V1(e,r.fetchRequestInit,({res:s,result:c})=>(n||(n=s.headers.get("Content-Type")||""),fI(c)));o=dI(a,n)}catch(a){o=r.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;a&&(s=typeof a=="string"?a:a.message),s&&console.warn(s)}return Yo[i]=o,o}async function pI(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):ki(n)}async function gI(e,n){if(e.currentSrc){const a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.clientWidth,a.height=e.clientHeight,s?.drawImage(e,0,0,a.width,a.height);const c=a.toDataURL();return ki(c)}const r=e.poster,i=zd(r),o=await Ld(r,i,n);return ki(o)}async function mI(e,n){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await ro(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function yI(e,n){return $e(e,HTMLCanvasElement)?pI(e):$e(e,HTMLVideoElement)?gI(e,n):$e(e,HTMLIFrameElement)?mI(e,n):e.cloneNode(G1(e))}const vI=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",G1=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function xI(e,n,r){var i,o;if(G1(n))return n;let a=[];return vI(e)&&e.assignedNodes?a=Gt(e.assignedNodes()):$e(e,HTMLIFrameElement)&&(!((i=e.contentDocument)===null||i===void 0)&&i.body)?a=Gt(e.contentDocument.body.childNodes):a=Gt(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),a.length===0||$e(e,HTMLVideoElement)||await a.reduce((s,c)=>s.then(()=>ro(c,r)).then(u=>{u&&n.appendChild(u)}),Promise.resolve()),n}function bI(e,n,r){const i=n.style;if(!i)return;const o=window.getComputedStyle(e);o.cssText?(i.cssText=o.cssText,i.transformOrigin=o.transformOrigin):H1(r).forEach(a=>{let s=o.getPropertyValue(a);a==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),$e(e,HTMLIFrameElement)&&a==="display"&&s==="inline"&&(s="block"),a==="d"&&n.getAttribute("d")&&(s=`path(${n.getAttribute("d")})`),i.setProperty(a,s,o.getPropertyPriority(a))})}function _I(e,n){$e(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),$e(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function wI(e,n){if($e(e,HTMLSelectElement)){const r=n,i=Array.from(r.children).find(o=>e.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function SI(e,n,r){return $e(n,Element)&&(bI(e,n,r),cI(e,n,r),_I(e,n),wI(e,n)),n}async function CI(e,n){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const i={};for(let a=0;a<r.length;a++){const c=r[a].getAttribute("xlink:href");if(c){const u=e.querySelector(c),l=document.querySelector(c);!u&&l&&!i[c]&&(i[c]=await ro(l,n,!0))}}const o=Object.values(i);if(o.length){const a="http://www.w3.org/1999/xhtml",s=document.createElementNS(a,"svg");s.setAttribute("xmlns",a),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const c=document.createElementNS(a,"defs");s.appendChild(c);for(let u=0;u<o.length;u++)c.appendChild(o[u]);e.appendChild(s)}return e}async function ro(e,n,r){return!r&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(i=>yI(i,n)).then(i=>xI(e,i,n)).then(i=>SI(e,i,n)).then(i=>CI(i,n))}const U1=/url\((['"]?)([^'"]+?)\1\)/g,EI=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,NI=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kI(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function RI(e){const n=[];return e.replace(U1,(r,i,o)=>(n.push(o),r)),n.filter(r=>!Vf(r))}async function AI(e,n,r,i,o){try{const a=r?ZM(n,r):n,s=zd(n);let c;return o||(c=await Ld(a,s,i)),e.replace(kI(n),`$1${c}$3`)}catch{}return e}function jI(e,{preferredFontFormat:n}){return n?e.replace(NI,r=>{for(;;){const[i,,o]=EI.exec(r)||[];if(!o)return"";if(o===n)return`src: ${i};`}}):e}function W1(e){return e.search(U1)!==-1}async function K1(e,n,r){if(!W1(e))return e;const i=jI(e,r);return RI(i).reduce((a,s)=>a.then(c=>AI(c,s,n,r)),Promise.resolve(i))}async function bn(e,n,r){var i;const o=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(e);if(o){const a=await K1(o,null,r);return n.style.setProperty(e,a,n.style.getPropertyPriority(e)),!0}return!1}async function PI(e,n){await bn("background",e,n)||await bn("background-image",e,n),await bn("mask",e,n)||await bn("-webkit-mask",e,n)||await bn("mask-image",e,n)||await bn("-webkit-mask-image",e,n)}async function MI(e,n){const r=$e(e,HTMLImageElement);if(!(r&&!Vf(e.src))&&!($e(e,SVGImageElement)&&!Vf(e.href.baseVal)))return;const i=r?e.src:e.href.baseVal,o=await Ld(i,zd(i),n);await new Promise((a,s)=>{e.onload=a,e.onerror=n.onImageErrorHandler?(...u)=>{try{a(n.onImageErrorHandler(...u))}catch(l){s(l)}}:s;const c=e;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),r?(e.srcset="",e.src=o):e.href.baseVal=o})}async function II(e,n){const i=Gt(e.childNodes).map(o=>Y1(o,n));await Promise.all(i).then(()=>e)}async function Y1(e,n){$e(e,Element)&&(await PI(e,n),await MI(e,n),await II(e,n))}function TI(e,n){const{style:r}=e;n.backgroundColor&&(r.backgroundColor=n.backgroundColor),n.width&&(r.width=`${n.width}px`),n.height&&(r.height=`${n.height}px`);const i=n.style;return i!=null&&Object.keys(i).forEach(o=>{r[o]=i[o]}),e}const Bp={};async function Vp(e){let n=Bp[e];if(n!=null)return n;const i=await(await fetch(e)).text();return n={url:e,cssText:i},Bp[e]=n,n}async function Gp(e,n){let r=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async s=>{let c=s.replace(i,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),V1(c,n.fetchRequestInit,({result:u})=>(r=r.replace(s,`url(${u})`),[s,u]))});return Promise.all(a).then(()=>r)}function Up(e){if(e==null)return[];const n=[],r=/(\/\*[\s\S]*?\*\/)/gi;let i=e.replace(r,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=o.exec(i);if(u===null)break;n.push(u[0])}i=i.replace(o,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(s,"gi");for(;;){let u=a.exec(i);if(u===null){if(u=c.exec(i),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;n.push(u[0])}return n}async function OI(e,n){const r=[],i=[];return e.forEach(o=>{if("cssRules"in o)try{Gt(o.cssRules||[]).forEach((a,s)=>{if(a.type===CSSRule.IMPORT_RULE){let c=s+1;const u=a.href,l=Vp(u).then(d=>Gp(d,n)).then(d=>Up(d).forEach(f=>{try{o.insertRule(f,f.startsWith("@import")?c+=1:o.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});i.push(l)}})}catch(a){const s=e.find(c=>c.href==null)||document.styleSheets[0];o.href!=null&&i.push(Vp(o.href).then(c=>Gp(c,n)).then(c=>Up(c).forEach(u=>{s.insertRule(u,s.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(i).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Gt(o.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${o.href}`,a)}}),r))}function qI(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>W1(n.style.getPropertyValue("src")))}async function DI(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Gt(e.ownerDocument.styleSheets),i=await OI(r,n);return qI(i)}function X1(e){return e.trim().replace(/["']/g,"")}function zI(e){const n=new Set;function r(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(a=>{n.add(X1(a))}),Array.from(i.children).forEach(a=>{a instanceof HTMLElement&&r(a)})}return r(e),n}async function LI(e,n){const r=await DI(e,n),i=zI(e);return(await Promise.all(r.filter(a=>i.has(X1(a.style.fontFamily))).map(a=>{const s=a.parentStyleSheet?a.parentStyleSheet.href:null;return K1(a.cssText,s,n)}))).join(`
`)}async function $I(e,n){const r=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await LI(e,n);if(r){const i=document.createElement("style"),o=document.createTextNode(r);i.appendChild(o),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}}async function FI(e,n={}){const{width:r,height:i}=B1(e,n),o=await ro(e,n,!0);return await $I(o,n),await Y1(o,n),TI(o,n),await iI(o,r,i)}async function HI(e,n={}){const{width:r,height:i}=B1(e,n),o=await FI(e,n),a=await ki(o),s=document.createElement("canvas"),c=s.getContext("2d"),u=n.pixelRatio||tI(),l=n.canvasWidth||r,d=n.canvasHeight||i;return s.width=l*u,s.height=d*u,n.skipAutoScale||nI(s),s.style.width=`${l}`,s.style.height=`${d}`,n.backgroundColor&&(c.fillStyle=n.backgroundColor,c.fillRect(0,0,s.width,s.height)),c.drawImage(a,0,0,s.width,s.height),s}async function Z1(e,n={}){return(await HI(e,n)).toDataURL()}function $d(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xo,Wp;function BI(){if(Wp)return Xo;Wp=1;function e(){this.__data__=[],this.size=0}return Xo=e,Xo}var Zo,Kp;function Vn(){if(Kp)return Zo;Kp=1;function e(n,r){return n===r||n!==n&&r!==r}return Zo=e,Zo}var Jo,Yp;function io(){if(Yp)return Jo;Yp=1;var e=Vn();function n(r,i){for(var o=r.length;o--;)if(e(r[o][0],i))return o;return-1}return Jo=n,Jo}var Qo,Xp;function VI(){if(Xp)return Qo;Xp=1;var e=io(),n=Array.prototype,r=n.splice;function i(o){var a=this.__data__,s=e(a,o);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():r.call(a,s,1),--this.size,!0}return Qo=i,Qo}var ea,Zp;function GI(){if(Zp)return ea;Zp=1;var e=io();function n(r){var i=this.__data__,o=e(i,r);return o<0?void 0:i[o][1]}return ea=n,ea}var ta,Jp;function UI(){if(Jp)return ta;Jp=1;var e=io();function n(r){return e(this.__data__,r)>-1}return ta=n,ta}var na,Qp;function WI(){if(Qp)return na;Qp=1;var e=io();function n(r,i){var o=this.__data__,a=e(o,r);return a<0?(++this.size,o.push([r,i])):o[a][1]=i,this}return na=n,na}var ra,eg;function oo(){if(eg)return ra;eg=1;var e=BI(),n=VI(),r=GI(),i=UI(),o=WI();function a(s){var c=-1,u=s==null?0:s.length;for(this.clear();++c<u;){var l=s[c];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,ra=a,ra}var ia,tg;function KI(){if(tg)return ia;tg=1;var e=oo();function n(){this.__data__=new e,this.size=0}return ia=n,ia}var oa,ng;function YI(){if(ng)return oa;ng=1;function e(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i}return oa=e,oa}var aa,rg;function XI(){if(rg)return aa;rg=1;function e(n){return this.__data__.get(n)}return aa=e,aa}var sa,ig;function ZI(){if(ig)return sa;ig=1;function e(n){return this.__data__.has(n)}return sa=e,sa}var ca,og;function J1(){if(og)return ca;og=1;var e=typeof Gr=="object"&&Gr&&Gr.Object===Object&&Gr;return ca=e,ca}var ua,ag;function ht(){if(ag)return ua;ag=1;var e=J1(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return ua=r,ua}var la,sg;function Gn(){if(sg)return la;sg=1;var e=ht(),n=e.Symbol;return la=n,la}var fa,cg;function JI(){if(cg)return fa;cg=1;var e=Gn(),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=e?e.toStringTag:void 0;function a(s){var c=r.call(s,o),u=s[o];try{s[o]=void 0;var l=!0}catch{}var d=i.call(s);return l&&(c?s[o]=u:delete s[o]),d}return fa=a,fa}var da,ug;function QI(){if(ug)return da;ug=1;var e=Object.prototype,n=e.toString;function r(i){return n.call(i)}return da=r,da}var ha,lg;function hn(){if(lg)return ha;lg=1;var e=Gn(),n=JI(),r=QI(),i="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function s(c){return c==null?c===void 0?o:i:a&&a in Object(c)?n(c):r(c)}return ha=s,ha}var pa,fg;function tt(){if(fg)return pa;fg=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return pa=e,pa}var ga,dg;function Lr(){if(dg)return ga;dg=1;var e=hn(),n=tt(),r="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!n(c))return!1;var u=e(c);return u==i||u==o||u==r||u==a}return ga=s,ga}var ma,hg;function eT(){if(hg)return ma;hg=1;var e=ht(),n=e["__core-js_shared__"];return ma=n,ma}var ya,pg;function tT(){if(pg)return ya;pg=1;var e=eT(),n=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function r(i){return!!n&&n in i}return ya=r,ya}var va,gg;function Q1(){if(gg)return va;gg=1;var e=Function.prototype,n=e.toString;function r(i){if(i!=null){try{return n.call(i)}catch{}try{return i+""}catch{}}return""}return va=r,va}var xa,mg;function nT(){if(mg)return xa;mg=1;var e=Lr(),n=tT(),r=tt(),i=Q1(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,u=s.toString,l=c.hasOwnProperty,d=RegExp("^"+u.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||n(h))return!1;var p=e(h)?d:a;return p.test(i(h))}return xa=f,xa}var ba,yg;function rT(){if(yg)return ba;yg=1;function e(n,r){return n?.[r]}return ba=e,ba}var _a,vg;function pn(){if(vg)return _a;vg=1;var e=nT(),n=rT();function r(i,o){var a=n(i,o);return e(a)?a:void 0}return _a=r,_a}var wa,xg;function Fd(){if(xg)return wa;xg=1;var e=pn(),n=ht(),r=e(n,"Map");return wa=r,wa}var Sa,bg;function ao(){if(bg)return Sa;bg=1;var e=pn(),n=e(Object,"create");return Sa=n,Sa}var Ca,_g;function iT(){if(_g)return Ca;_g=1;var e=ao();function n(){this.__data__=e?e(null):{},this.size=0}return Ca=n,Ca}var Ea,wg;function oT(){if(wg)return Ea;wg=1;function e(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}return Ea=e,Ea}var Na,Sg;function aT(){if(Sg)return Na;Sg=1;var e=ao(),n="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function o(a){var s=this.__data__;if(e){var c=s[a];return c===n?void 0:c}return i.call(s,a)?s[a]:void 0}return Na=o,Na}var ka,Cg;function sT(){if(Cg)return ka;Cg=1;var e=ao(),n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;return e?a[o]!==void 0:r.call(a,o)}return ka=i,ka}var Ra,Eg;function cT(){if(Eg)return Ra;Eg=1;var e=ao(),n="__lodash_hash_undefined__";function r(i,o){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&o===void 0?n:o,this}return Ra=r,Ra}var Aa,Ng;function uT(){if(Ng)return Aa;Ng=1;var e=iT(),n=oT(),r=aT(),i=sT(),o=cT();function a(s){var c=-1,u=s==null?0:s.length;for(this.clear();++c<u;){var l=s[c];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Aa=a,Aa}var ja,kg;function lT(){if(kg)return ja;kg=1;var e=uT(),n=oo(),r=Fd();function i(){this.size=0,this.__data__={hash:new e,map:new(r||n),string:new e}}return ja=i,ja}var Pa,Rg;function fT(){if(Rg)return Pa;Rg=1;function e(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}return Pa=e,Pa}var Ma,Ag;function so(){if(Ag)return Ma;Ag=1;var e=fT();function n(r,i){var o=r.__data__;return e(i)?o[typeof i=="string"?"string":"hash"]:o.map}return Ma=n,Ma}var Ia,jg;function dT(){if(jg)return Ia;jg=1;var e=so();function n(r){var i=e(this,r).delete(r);return this.size-=i?1:0,i}return Ia=n,Ia}var Ta,Pg;function hT(){if(Pg)return Ta;Pg=1;var e=so();function n(r){return e(this,r).get(r)}return Ta=n,Ta}var Oa,Mg;function pT(){if(Mg)return Oa;Mg=1;var e=so();function n(r){return e(this,r).has(r)}return Oa=n,Oa}var qa,Ig;function gT(){if(Ig)return qa;Ig=1;var e=so();function n(r,i){var o=e(this,r),a=o.size;return o.set(r,i),this.size+=o.size==a?0:1,this}return qa=n,qa}var Da,Tg;function Hd(){if(Tg)return Da;Tg=1;var e=lT(),n=dT(),r=hT(),i=pT(),o=gT();function a(s){var c=-1,u=s==null?0:s.length;for(this.clear();++c<u;){var l=s[c];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Da=a,Da}var za,Og;function mT(){if(Og)return za;Og=1;var e=oo(),n=Fd(),r=Hd(),i=200;function o(a,s){var c=this.__data__;if(c instanceof e){var u=c.__data__;if(!n||u.length<i-1)return u.push([a,s]),this.size=++c.size,this;c=this.__data__=new r(u)}return c.set(a,s),this.size=c.size,this}return za=o,za}var La,qg;function co(){if(qg)return La;qg=1;var e=oo(),n=KI(),r=YI(),i=XI(),o=ZI(),a=mT();function s(c){var u=this.__data__=new e(c);this.size=u.size}return s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=o,s.prototype.set=a,La=s,La}var $a,Dg;function Bd(){if(Dg)return $a;Dg=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o&&r(n[i],i,n)!==!1;);return n}return $a=e,$a}var Fa,zg;function ew(){if(zg)return Fa;zg=1;var e=pn(),n=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Fa=n,Fa}var Ha,Lg;function uo(){if(Lg)return Ha;Lg=1;var e=ew();function n(r,i,o){i=="__proto__"&&e?e(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o}return Ha=n,Ha}var Ba,$g;function lo(){if($g)return Ba;$g=1;var e=uo(),n=Vn(),r=Object.prototype,i=r.hasOwnProperty;function o(a,s,c){var u=a[s];(!(i.call(a,s)&&n(u,c))||c===void 0&&!(s in a))&&e(a,s,c)}return Ba=o,Ba}var Va,Fg;function $r(){if(Fg)return Va;Fg=1;var e=lo(),n=uo();function r(i,o,a,s){var c=!a;a||(a={});for(var u=-1,l=o.length;++u<l;){var d=o[u],f=s?s(a[d],i[d],d,a,i):void 0;f===void 0&&(f=i[d]),c?n(a,d,f):e(a,d,f)}return a}return Va=r,Va}var Ga,Hg;function yT(){if(Hg)return Ga;Hg=1;function e(n,r){for(var i=-1,o=Array(n);++i<n;)o[i]=r(i);return o}return Ga=e,Ga}var Ua,Bg;function bt(){if(Bg)return Ua;Bg=1;function e(n){return n!=null&&typeof n=="object"}return Ua=e,Ua}var Wa,Vg;function vT(){if(Vg)return Wa;Vg=1;var e=hn(),n=bt(),r="[object Arguments]";function i(o){return n(o)&&e(o)==r}return Wa=i,Wa}var Ka,Gg;function Fr(){if(Gg)return Ka;Gg=1;var e=vT(),n=bt(),r=Object.prototype,i=r.hasOwnProperty,o=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(s){return n(s)&&i.call(s,"callee")&&!o.call(s,"callee")};return Ka=a,Ka}var Ya,Ug;function Ae(){if(Ug)return Ya;Ug=1;var e=Array.isArray;return Ya=e,Ya}var sr={exports:{}},Xa,Wg;function xT(){if(Wg)return Xa;Wg=1;function e(){return!1}return Xa=e,Xa}sr.exports;var Kg;function Un(){return Kg||(Kg=1,(function(e,n){var r=ht(),i=xT(),o=n&&!n.nodeType&&n,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,c=s?r.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||i;e.exports=l})(sr,sr.exports)),sr.exports}var Za,Yg;function fo(){if(Yg)return Za;Yg=1;var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(i,o){var a=typeof i;return o=o??e,!!o&&(a=="number"||a!="symbol"&&n.test(i))&&i>-1&&i%1==0&&i<o}return Za=r,Za}var Ja,Xg;function Vd(){if(Xg)return Ja;Xg=1;var e=9007199254740991;function n(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Ja=n,Ja}var Qa,Zg;function bT(){if(Zg)return Qa;Zg=1;var e=hn(),n=Vd(),r=bt(),i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",u="[object Function]",l="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",y="[object String]",x="[object WeakMap]",v="[object ArrayBuffer]",g="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",E="[object Uint8Array]",N="[object Uint8ClampedArray]",A="[object Uint16Array]",R="[object Uint32Array]",k={};k[_]=k[b]=k[w]=k[S]=k[C]=k[E]=k[N]=k[A]=k[R]=!0,k[i]=k[o]=k[v]=k[a]=k[g]=k[s]=k[c]=k[u]=k[l]=k[d]=k[f]=k[h]=k[p]=k[y]=k[x]=!1;function P(O){return r(O)&&n(O.length)&&!!k[e(O)]}return Qa=P,Qa}var es,Jg;function ho(){if(Jg)return es;Jg=1;function e(n){return function(r){return n(r)}}return es=e,es}var cr={exports:{}};cr.exports;var Qg;function Gd(){return Qg||(Qg=1,(function(e,n){var r=J1(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,c=(function(){try{var u=o&&o.require&&o.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();e.exports=c})(cr,cr.exports)),cr.exports}var ts,em;function Hr(){if(em)return ts;em=1;var e=bT(),n=ho(),r=Gd(),i=r&&r.isTypedArray,o=i?n(i):e;return ts=o,ts}var ns,tm;function tw(){if(tm)return ns;tm=1;var e=yT(),n=Fr(),r=Ae(),i=Un(),o=fo(),a=Hr(),s=Object.prototype,c=s.hasOwnProperty;function u(l,d){var f=r(l),h=!f&&n(l),p=!f&&!h&&i(l),y=!f&&!h&&!p&&a(l),x=f||h||p||y,v=x?e(l.length,String):[],g=v.length;for(var _ in l)(d||c.call(l,_))&&!(x&&(_=="length"||p&&(_=="offset"||_=="parent")||y&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||o(_,g)))&&v.push(_);return v}return ns=u,ns}var rs,nm;function po(){if(nm)return rs;nm=1;var e=Object.prototype;function n(r){var i=r&&r.constructor,o=typeof i=="function"&&i.prototype||e;return r===o}return rs=n,rs}var is,rm;function nw(){if(rm)return is;rm=1;function e(n,r){return function(i){return n(r(i))}}return is=e,is}var os,im;function _T(){if(im)return os;im=1;var e=nw(),n=e(Object.keys,Object);return os=n,os}var as,om;function Ud(){if(om)return as;om=1;var e=po(),n=_T(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!e(a))return n(a);var s=[];for(var c in Object(a))i.call(a,c)&&c!="constructor"&&s.push(c);return s}return as=o,as}var ss,am;function Tt(){if(am)return ss;am=1;var e=Lr(),n=Vd();function r(i){return i!=null&&n(i.length)&&!e(i)}return ss=r,ss}var cs,sm;function Ut(){if(sm)return cs;sm=1;var e=tw(),n=Ud(),r=Tt();function i(o){return r(o)?e(o):n(o)}return cs=i,cs}var us,cm;function wT(){if(cm)return us;cm=1;var e=$r(),n=Ut();function r(i,o){return i&&e(o,n(o),i)}return us=r,us}var ls,um;function ST(){if(um)return ls;um=1;function e(n){var r=[];if(n!=null)for(var i in Object(n))r.push(i);return r}return ls=e,ls}var fs,lm;function CT(){if(lm)return fs;lm=1;var e=tt(),n=po(),r=ST(),i=Object.prototype,o=i.hasOwnProperty;function a(s){if(!e(s))return r(s);var c=n(s),u=[];for(var l in s)l=="constructor"&&(c||!o.call(s,l))||u.push(l);return u}return fs=a,fs}var ds,fm;function gn(){if(fm)return ds;fm=1;var e=tw(),n=CT(),r=Tt();function i(o){return r(o)?e(o,!0):n(o)}return ds=i,ds}var hs,dm;function ET(){if(dm)return hs;dm=1;var e=$r(),n=gn();function r(i,o){return i&&e(o,n(o),i)}return hs=r,hs}var ur={exports:{}};ur.exports;var hm;function rw(){return hm||(hm=1,(function(e,n){var r=ht(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,c=s?s.allocUnsafe:void 0;function u(l,d){if(d)return l.slice();var f=l.length,h=c?c(f):new l.constructor(f);return l.copy(h),h}e.exports=u})(ur,ur.exports)),ur.exports}var ps,pm;function iw(){if(pm)return ps;pm=1;function e(n,r){var i=-1,o=n.length;for(r||(r=Array(o));++i<o;)r[i]=n[i];return r}return ps=e,ps}var gs,gm;function ow(){if(gm)return gs;gm=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=0,s=[];++i<o;){var c=n[i];r(c,i,n)&&(s[a++]=c)}return s}return gs=e,gs}var ms,mm;function aw(){if(mm)return ms;mm=1;function e(){return[]}return ms=e,ms}var ys,ym;function Wd(){if(ym)return ys;ym=1;var e=ow(),n=aw(),r=Object.prototype,i=r.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(s){return s==null?[]:(s=Object(s),e(o(s),function(c){return i.call(s,c)}))}:n;return ys=a,ys}var vs,vm;function NT(){if(vm)return vs;vm=1;var e=$r(),n=Wd();function r(i,o){return e(i,n(i),o)}return vs=r,vs}var xs,xm;function Kd(){if(xm)return xs;xm=1;function e(n,r){for(var i=-1,o=r.length,a=n.length;++i<o;)n[a+i]=r[i];return n}return xs=e,xs}var bs,bm;function go(){if(bm)return bs;bm=1;var e=nw(),n=e(Object.getPrototypeOf,Object);return bs=n,bs}var _s,_m;function sw(){if(_m)return _s;_m=1;var e=Kd(),n=go(),r=Wd(),i=aw(),o=Object.getOwnPropertySymbols,a=o?function(s){for(var c=[];s;)e(c,r(s)),s=n(s);return c}:i;return _s=a,_s}var ws,wm;function kT(){if(wm)return ws;wm=1;var e=$r(),n=sw();function r(i,o){return e(i,n(i),o)}return ws=r,ws}var Ss,Sm;function cw(){if(Sm)return Ss;Sm=1;var e=Kd(),n=Ae();function r(i,o,a){var s=o(i);return n(i)?s:e(s,a(i))}return Ss=r,Ss}var Cs,Cm;function uw(){if(Cm)return Cs;Cm=1;var e=cw(),n=Wd(),r=Ut();function i(o){return e(o,r,n)}return Cs=i,Cs}var Es,Em;function RT(){if(Em)return Es;Em=1;var e=cw(),n=sw(),r=gn();function i(o){return e(o,r,n)}return Es=i,Es}var Ns,Nm;function AT(){if(Nm)return Ns;Nm=1;var e=pn(),n=ht(),r=e(n,"DataView");return Ns=r,Ns}var ks,km;function jT(){if(km)return ks;km=1;var e=pn(),n=ht(),r=e(n,"Promise");return ks=r,ks}var Rs,Rm;function lw(){if(Rm)return Rs;Rm=1;var e=pn(),n=ht(),r=e(n,"Set");return Rs=r,Rs}var As,Am;function PT(){if(Am)return As;Am=1;var e=pn(),n=ht(),r=e(n,"WeakMap");return As=r,As}var js,jm;function Wn(){if(jm)return js;jm=1;var e=AT(),n=Fd(),r=jT(),i=lw(),o=PT(),a=hn(),s=Q1(),c="[object Map]",u="[object Object]",l="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=s(e),y=s(n),x=s(r),v=s(i),g=s(o),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=h||n&&_(new n)!=c||r&&_(r.resolve())!=l||i&&_(new i)!=d||o&&_(new o)!=f)&&(_=function(b){var w=a(b),S=w==u?b.constructor:void 0,C=S?s(S):"";if(C)switch(C){case p:return h;case y:return c;case x:return l;case v:return d;case g:return f}return w}),js=_,js}var Ps,Pm;function MT(){if(Pm)return Ps;Pm=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=i.length,a=new i.constructor(o);return o&&typeof i[0]=="string"&&n.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return Ps=r,Ps}var Ms,Mm;function fw(){if(Mm)return Ms;Mm=1;var e=ht(),n=e.Uint8Array;return Ms=n,Ms}var Is,Im;function Yd(){if(Im)return Is;Im=1;var e=fw();function n(r){var i=new r.constructor(r.byteLength);return new e(i).set(new e(r)),i}return Is=n,Is}var Ts,Tm;function IT(){if(Tm)return Ts;Tm=1;var e=Yd();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}return Ts=n,Ts}var Os,Om;function TT(){if(Om)return Os;Om=1;var e=/\w*$/;function n(r){var i=new r.constructor(r.source,e.exec(r));return i.lastIndex=r.lastIndex,i}return Os=n,Os}var qs,qm;function OT(){if(qm)return qs;qm=1;var e=Gn(),n=e?e.prototype:void 0,r=n?n.valueOf:void 0;function i(o){return r?Object(r.call(o)):{}}return qs=i,qs}var Ds,Dm;function dw(){if(Dm)return Ds;Dm=1;var e=Yd();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}return Ds=n,Ds}var zs,zm;function qT(){if(zm)return zs;zm=1;var e=Yd(),n=IT(),r=TT(),i=OT(),o=dw(),a="[object Boolean]",s="[object Date]",c="[object Map]",u="[object Number]",l="[object RegExp]",d="[object Set]",f="[object String]",h="[object Symbol]",p="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",v="[object Float64Array]",g="[object Int8Array]",_="[object Int16Array]",b="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]";function N(A,R,k){var P=A.constructor;switch(R){case p:return e(A);case a:case s:return new P(+A);case y:return n(A,k);case x:case v:case g:case _:case b:case w:case S:case C:case E:return o(A,k);case c:return new P;case u:case f:return new P(A);case l:return r(A);case d:return new P;case h:return i(A)}}return zs=N,zs}var Ls,Lm;function hw(){if(Lm)return Ls;Lm=1;var e=tt(),n=Object.create,r=(function(){function i(){}return function(o){if(!e(o))return{};if(n)return n(o);i.prototype=o;var a=new i;return i.prototype=void 0,a}})();return Ls=r,Ls}var $s,$m;function pw(){if($m)return $s;$m=1;var e=hw(),n=go(),r=po();function i(o){return typeof o.constructor=="function"&&!r(o)?e(n(o)):{}}return $s=i,$s}var Fs,Fm;function DT(){if(Fm)return Fs;Fm=1;var e=Wn(),n=bt(),r="[object Map]";function i(o){return n(o)&&e(o)==r}return Fs=i,Fs}var Hs,Hm;function zT(){if(Hm)return Hs;Hm=1;var e=DT(),n=ho(),r=Gd(),i=r&&r.isMap,o=i?n(i):e;return Hs=o,Hs}var Bs,Bm;function LT(){if(Bm)return Bs;Bm=1;var e=Wn(),n=bt(),r="[object Set]";function i(o){return n(o)&&e(o)==r}return Bs=i,Bs}var Vs,Vm;function $T(){if(Vm)return Vs;Vm=1;var e=LT(),n=ho(),r=Gd(),i=r&&r.isSet,o=i?n(i):e;return Vs=o,Vs}var Gs,Gm;function gw(){if(Gm)return Gs;Gm=1;var e=co(),n=Bd(),r=lo(),i=wT(),o=ET(),a=rw(),s=iw(),c=NT(),u=kT(),l=uw(),d=RT(),f=Wn(),h=MT(),p=qT(),y=pw(),x=Ae(),v=Un(),g=zT(),_=tt(),b=$T(),w=Ut(),S=gn(),C=1,E=2,N=4,A="[object Arguments]",R="[object Array]",k="[object Boolean]",P="[object Date]",O="[object Error]",M="[object Function]",T="[object GeneratorFunction]",q="[object Map]",B="[object Number]",F="[object Object]",G="[object RegExp]",V="[object Set]",K="[object String]",W="[object Symbol]",D="[object WeakMap]",I="[object ArrayBuffer]",z="[object DataView]",L="[object Float32Array]",H="[object Float64Array]",U="[object Int8Array]",Y="[object Int16Array]",J="[object Int32Array]",te="[object Uint8Array]",ne="[object Uint8ClampedArray]",Q="[object Uint16Array]",ie="[object Uint32Array]",re={};re[A]=re[R]=re[I]=re[z]=re[k]=re[P]=re[L]=re[H]=re[U]=re[Y]=re[J]=re[q]=re[B]=re[F]=re[G]=re[V]=re[K]=re[W]=re[te]=re[ne]=re[Q]=re[ie]=!0,re[O]=re[M]=re[D]=!1;function le(se,X,ee,ce,he,me){var ue,Ie=X&C,Ne=X&E,Pe=X&N;if(ee&&(ue=he?ee(se,ce,he,me):ee(se)),ue!==void 0)return ue;if(!_(se))return se;var Be=x(se);if(Be){if(ue=h(se),!Ie)return s(se,ue)}else{var Xe=f(se),Wt=Xe==M||Xe==T;if(v(se))return a(se,Ie);if(Xe==F||Xe==A||Wt&&!he){if(ue=Ne||Wt?{}:y(se),!Ie)return Ne?u(se,o(ue,se)):c(se,i(ue,se))}else{if(!re[Xe])return he?se:{};ue=p(se,Xe,Ie)}}me||(me=new e);var rt=me.get(se);if(rt)return rt;me.set(se,ue),b(se)?se.forEach(function(Ve){ue.add(le(Ve,X,ee,Ve,se,me))}):g(se)&&se.forEach(function(Ve,_t){ue.set(_t,le(Ve,X,ee,_t,se,me))});var Kt=Pe?Ne?d:l:Ne?S:w,ze=Be?void 0:Kt(se);return n(ze||se,function(Ve,_t){ze&&(_t=Ve,Ve=se[_t]),r(ue,_t,le(Ve,X,ee,_t,se,me))}),ue}return Gs=le,Gs}var Us,Um;function FT(){if(Um)return Us;Um=1;var e=gw(),n=4;function r(i){return e(i,n)}return Us=r,Us}var Ws,Wm;function Xd(){if(Wm)return Ws;Wm=1;function e(n){return function(){return n}}return Ws=e,Ws}var Ks,Km;function HT(){if(Km)return Ks;Km=1;function e(n){return function(r,i,o){for(var a=-1,s=Object(r),c=o(r),u=c.length;u--;){var l=c[n?u:++a];if(i(s[l],l,s)===!1)break}return r}}return Ks=e,Ks}var Ys,Ym;function Zd(){if(Ym)return Ys;Ym=1;var e=HT(),n=e();return Ys=n,Ys}var Xs,Xm;function Jd(){if(Xm)return Xs;Xm=1;var e=Zd(),n=Ut();function r(i,o){return i&&e(i,o,n)}return Xs=r,Xs}var Zs,Zm;function BT(){if(Zm)return Zs;Zm=1;var e=Tt();function n(r,i){return function(o,a){if(o==null)return o;if(!e(o))return r(o,a);for(var s=o.length,c=i?s:-1,u=Object(o);(i?c--:++c<s)&&a(u[c],c,u)!==!1;);return o}}return Zs=n,Zs}var Js,Jm;function mo(){if(Jm)return Js;Jm=1;var e=Jd(),n=BT(),r=n(e);return Js=r,Js}var Qs,Qm;function mn(){if(Qm)return Qs;Qm=1;function e(n){return n}return Qs=e,Qs}var ec,ey;function mw(){if(ey)return ec;ey=1;var e=mn();function n(r){return typeof r=="function"?r:e}return ec=n,ec}var tc,ty;function yw(){if(ty)return tc;ty=1;var e=Bd(),n=mo(),r=mw(),i=Ae();function o(a,s){var c=i(a)?e:n;return c(a,r(s))}return tc=o,tc}var nc,ny;function vw(){return ny||(ny=1,nc=yw()),nc}var rc,ry;function VT(){if(ry)return rc;ry=1;var e=mo();function n(r,i){var o=[];return e(r,function(a,s,c){i(a,s,c)&&o.push(a)}),o}return rc=n,rc}var ic,iy;function GT(){if(iy)return ic;iy=1;var e="__lodash_hash_undefined__";function n(r){return this.__data__.set(r,e),this}return ic=n,ic}var oc,oy;function UT(){if(oy)return oc;oy=1;function e(n){return this.__data__.has(n)}return oc=e,oc}var ac,ay;function xw(){if(ay)return ac;ay=1;var e=Hd(),n=GT(),r=UT();function i(o){var a=-1,s=o==null?0:o.length;for(this.__data__=new e;++a<s;)this.add(o[a])}return i.prototype.add=i.prototype.push=n,i.prototype.has=r,ac=i,ac}var sc,sy;function WT(){if(sy)return sc;sy=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o;)if(r(n[i],i,n))return!0;return!1}return sc=e,sc}var cc,cy;function bw(){if(cy)return cc;cy=1;function e(n,r){return n.has(r)}return cc=e,cc}var uc,uy;function _w(){if(uy)return uc;uy=1;var e=xw(),n=WT(),r=bw(),i=1,o=2;function a(s,c,u,l,d,f){var h=u&i,p=s.length,y=c.length;if(p!=y&&!(h&&y>p))return!1;var x=f.get(s),v=f.get(c);if(x&&v)return x==c&&v==s;var g=-1,_=!0,b=u&o?new e:void 0;for(f.set(s,c),f.set(c,s);++g<p;){var w=s[g],S=c[g];if(l)var C=h?l(S,w,g,c,s,f):l(w,S,g,s,c,f);if(C!==void 0){if(C)continue;_=!1;break}if(b){if(!n(c,function(E,N){if(!r(b,N)&&(w===E||d(w,E,u,l,f)))return b.push(N)})){_=!1;break}}else if(!(w===S||d(w,S,u,l,f))){_=!1;break}}return f.delete(s),f.delete(c),_}return uc=a,uc}var lc,ly;function KT(){if(ly)return lc;ly=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o,a){i[++r]=[a,o]}),i}return lc=e,lc}var fc,fy;function Qd(){if(fy)return fc;fy=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o){i[++r]=o}),i}return fc=e,fc}var dc,dy;function YT(){if(dy)return dc;dy=1;var e=Gn(),n=fw(),r=Vn(),i=_w(),o=KT(),a=Qd(),s=1,c=2,u="[object Boolean]",l="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",y="[object Set]",x="[object String]",v="[object Symbol]",g="[object ArrayBuffer]",_="[object DataView]",b=e?e.prototype:void 0,w=b?b.valueOf:void 0;function S(C,E,N,A,R,k,P){switch(N){case _:if(C.byteLength!=E.byteLength||C.byteOffset!=E.byteOffset)return!1;C=C.buffer,E=E.buffer;case g:return!(C.byteLength!=E.byteLength||!k(new n(C),new n(E)));case u:case l:case h:return r(+C,+E);case d:return C.name==E.name&&C.message==E.message;case p:case x:return C==E+"";case f:var O=o;case y:var M=A&s;if(O||(O=a),C.size!=E.size&&!M)return!1;var T=P.get(C);if(T)return T==E;A|=c,P.set(C,E);var q=i(O(C),O(E),A,R,k,P);return P.delete(C),q;case v:if(w)return w.call(C)==w.call(E)}return!1}return dc=S,dc}var hc,hy;function XT(){if(hy)return hc;hy=1;var e=uw(),n=1,r=Object.prototype,i=r.hasOwnProperty;function o(a,s,c,u,l,d){var f=c&n,h=e(a),p=h.length,y=e(s),x=y.length;if(p!=x&&!f)return!1;for(var v=p;v--;){var g=h[v];if(!(f?g in s:i.call(s,g)))return!1}var _=d.get(a),b=d.get(s);if(_&&b)return _==s&&b==a;var w=!0;d.set(a,s),d.set(s,a);for(var S=f;++v<p;){g=h[v];var C=a[g],E=s[g];if(u)var N=f?u(E,C,g,s,a,d):u(C,E,g,a,s,d);if(!(N===void 0?C===E||l(C,E,c,u,d):N)){w=!1;break}S||(S=g=="constructor")}if(w&&!S){var A=a.constructor,R=s.constructor;A!=R&&"constructor"in a&&"constructor"in s&&!(typeof A=="function"&&A instanceof A&&typeof R=="function"&&R instanceof R)&&(w=!1)}return d.delete(a),d.delete(s),w}return hc=o,hc}var pc,py;function ZT(){if(py)return pc;py=1;var e=co(),n=_w(),r=YT(),i=XT(),o=Wn(),a=Ae(),s=Un(),c=Hr(),u=1,l="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function y(x,v,g,_,b,w){var S=a(x),C=a(v),E=S?d:o(x),N=C?d:o(v);E=E==l?f:E,N=N==l?f:N;var A=E==f,R=N==f,k=E==N;if(k&&s(x)){if(!s(v))return!1;S=!0,A=!1}if(k&&!A)return w||(w=new e),S||c(x)?n(x,v,g,_,b,w):r(x,v,E,g,_,b,w);if(!(g&u)){var P=A&&p.call(x,"__wrapped__"),O=R&&p.call(v,"__wrapped__");if(P||O){var M=P?x.value():x,T=O?v.value():v;return w||(w=new e),b(M,T,g,_,w)}}return k?(w||(w=new e),i(x,v,g,_,b,w)):!1}return pc=y,pc}var gc,gy;function ww(){if(gy)return gc;gy=1;var e=ZT(),n=bt();function r(i,o,a,s,c){return i===o?!0:i==null||o==null||!n(i)&&!n(o)?i!==i&&o!==o:e(i,o,a,s,r,c)}return gc=r,gc}var mc,my;function JT(){if(my)return mc;my=1;var e=co(),n=ww(),r=1,i=2;function o(a,s,c,u){var l=c.length,d=l,f=!u;if(a==null)return!d;for(a=Object(a);l--;){var h=c[l];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++l<d;){h=c[l];var p=h[0],y=a[p],x=h[1];if(f&&h[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(u)var g=u(y,x,p,a,s,v);if(!(g===void 0?n(x,y,r|i,u,v):g))return!1}}return!0}return mc=o,mc}var yc,yy;function Sw(){if(yy)return yc;yy=1;var e=tt();function n(r){return r===r&&!e(r)}return yc=n,yc}var vc,vy;function QT(){if(vy)return vc;vy=1;var e=Sw(),n=Ut();function r(i){for(var o=n(i),a=o.length;a--;){var s=o[a],c=i[s];o[a]=[s,c,e(c)]}return o}return vc=r,vc}var xc,xy;function Cw(){if(xy)return xc;xy=1;function e(n,r){return function(i){return i==null?!1:i[n]===r&&(r!==void 0||n in Object(i))}}return xc=e,xc}var bc,by;function eO(){if(by)return bc;by=1;var e=JT(),n=QT(),r=Cw();function i(o){var a=n(o);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===o||e(s,o,a)}}return bc=i,bc}var _c,_y;function Kn(){if(_y)return _c;_y=1;var e=hn(),n=bt(),r="[object Symbol]";function i(o){return typeof o=="symbol"||n(o)&&e(o)==r}return _c=i,_c}var wc,wy;function eh(){if(wy)return wc;wy=1;var e=Ae(),n=Kn(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(a,s){if(e(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||n(a)?!0:i.test(a)||!r.test(a)||s!=null&&a in Object(s)}return wc=o,wc}var Sc,Sy;function tO(){if(Sy)return Sc;Sy=1;var e=Hd(),n="Expected a function";function r(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError(n);var a=function(){var s=arguments,c=o?o.apply(this,s):s[0],u=a.cache;if(u.has(c))return u.get(c);var l=i.apply(this,s);return a.cache=u.set(c,l)||u,l};return a.cache=new(r.Cache||e),a}return r.Cache=e,Sc=r,Sc}var Cc,Cy;function nO(){if(Cy)return Cc;Cy=1;var e=tO(),n=500;function r(i){var o=e(i,function(s){return a.size===n&&a.clear(),s}),a=o.cache;return o}return Cc=r,Cc}var Ec,Ey;function rO(){if(Ey)return Ec;Ey=1;var e=nO(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(n,function(s,c,u,l){a.push(u?l.replace(r,"$1"):c||s)}),a});return Ec=i,Ec}var Nc,Ny;function yo(){if(Ny)return Nc;Ny=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=Array(o);++i<o;)a[i]=r(n[i],i,n);return a}return Nc=e,Nc}var kc,ky;function iO(){if(ky)return kc;ky=1;var e=Gn(),n=yo(),r=Ae(),i=Kn(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return n(c,s)+"";if(i(c))return a?a.call(c):"";var u=c+"";return u=="0"&&1/c==-1/0?"-0":u}return kc=s,kc}var Rc,Ry;function Ew(){if(Ry)return Rc;Ry=1;var e=iO();function n(r){return r==null?"":e(r)}return Rc=n,Rc}var Ac,Ay;function vo(){if(Ay)return Ac;Ay=1;var e=Ae(),n=eh(),r=rO(),i=Ew();function o(a,s){return e(a)?a:n(a,s)?[a]:r(i(a))}return Ac=o,Ac}var jc,jy;function Br(){if(jy)return jc;jy=1;var e=Kn();function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return jc=n,jc}var Pc,Py;function xo(){if(Py)return Pc;Py=1;var e=vo(),n=Br();function r(i,o){o=e(o,i);for(var a=0,s=o.length;i!=null&&a<s;)i=i[n(o[a++])];return a&&a==s?i:void 0}return Pc=r,Pc}var Mc,My;function oO(){if(My)return Mc;My=1;var e=xo();function n(r,i,o){var a=r==null?void 0:e(r,i);return a===void 0?o:a}return Mc=n,Mc}var Ic,Iy;function aO(){if(Iy)return Ic;Iy=1;function e(n,r){return n!=null&&r in Object(n)}return Ic=e,Ic}var Tc,Ty;function Nw(){if(Ty)return Tc;Ty=1;var e=vo(),n=Fr(),r=Ae(),i=fo(),o=Vd(),a=Br();function s(c,u,l){u=e(u,c);for(var d=-1,f=u.length,h=!1;++d<f;){var p=a(u[d]);if(!(h=c!=null&&l(c,p)))break;c=c[p]}return h||++d!=f?h:(f=c==null?0:c.length,!!f&&o(f)&&i(p,f)&&(r(c)||n(c)))}return Tc=s,Tc}var Oc,Oy;function kw(){if(Oy)return Oc;Oy=1;var e=aO(),n=Nw();function r(i,o){return i!=null&&n(i,o,e)}return Oc=r,Oc}var qc,qy;function sO(){if(qy)return qc;qy=1;var e=ww(),n=oO(),r=kw(),i=eh(),o=Sw(),a=Cw(),s=Br(),c=1,u=2;function l(d,f){return i(d)&&o(f)?a(s(d),f):function(h){var p=n(h,d);return p===void 0&&p===f?r(h,d):e(f,p,c|u)}}return qc=l,qc}var Dc,Dy;function Rw(){if(Dy)return Dc;Dy=1;function e(n){return function(r){return r?.[n]}}return Dc=e,Dc}var zc,zy;function cO(){if(zy)return zc;zy=1;var e=xo();function n(r){return function(i){return e(i,r)}}return zc=n,zc}var Lc,Ly;function uO(){if(Ly)return Lc;Ly=1;var e=Rw(),n=cO(),r=eh(),i=Br();function o(a){return r(a)?e(i(a)):n(a)}return Lc=o,Lc}var $c,$y;function Ot(){if($y)return $c;$y=1;var e=eO(),n=sO(),r=mn(),i=Ae(),o=uO();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?i(s)?n(s[0],s[1]):e(s):o(s)}return $c=a,$c}var Fc,Fy;function Aw(){if(Fy)return Fc;Fy=1;var e=ow(),n=VT(),r=Ot(),i=Ae();function o(a,s){var c=i(a)?e:n;return c(a,r(s,3))}return Fc=o,Fc}var Hc,Hy;function lO(){if(Hy)return Hc;Hy=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i,o){return i!=null&&n.call(i,o)}return Hc=r,Hc}var Bc,By;function jw(){if(By)return Bc;By=1;var e=lO(),n=Nw();function r(i,o){return i!=null&&n(i,o,e)}return Bc=r,Bc}var Vc,Vy;function fO(){if(Vy)return Vc;Vy=1;var e=Ud(),n=Wn(),r=Fr(),i=Ae(),o=Tt(),a=Un(),s=po(),c=Hr(),u="[object Map]",l="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(p){if(p==null)return!0;if(o(p)&&(i(p)||typeof p=="string"||typeof p.splice=="function"||a(p)||c(p)||r(p)))return!p.length;var y=n(p);if(y==u||y==l)return!p.size;if(s(p))return!e(p).length;for(var x in p)if(f.call(p,x))return!1;return!0}return Vc=h,Vc}var Gc,Gy;function Pw(){if(Gy)return Gc;Gy=1;function e(n){return n===void 0}return Gc=e,Gc}var Uc,Uy;function Mw(){if(Uy)return Uc;Uy=1;var e=mo(),n=Tt();function r(i,o){var a=-1,s=n(i)?Array(i.length):[];return e(i,function(c,u,l){s[++a]=o(c,u,l)}),s}return Uc=r,Uc}var Wc,Wy;function Iw(){if(Wy)return Wc;Wy=1;var e=yo(),n=Ot(),r=Mw(),i=Ae();function o(a,s){var c=i(a)?e:r;return c(a,n(s,3))}return Wc=o,Wc}var Kc,Ky;function dO(){if(Ky)return Kc;Ky=1;function e(n,r,i,o){var a=-1,s=n==null?0:n.length;for(o&&s&&(i=n[++a]);++a<s;)i=r(i,n[a],a,n);return i}return Kc=e,Kc}var Yc,Yy;function hO(){if(Yy)return Yc;Yy=1;function e(n,r,i,o,a){return a(n,function(s,c,u){i=o?(o=!1,s):r(i,s,c,u)}),i}return Yc=e,Yc}var Xc,Xy;function Tw(){if(Xy)return Xc;Xy=1;var e=dO(),n=mo(),r=Ot(),i=hO(),o=Ae();function a(s,c,u){var l=o(s)?e:i,d=arguments.length<3;return l(s,r(c,4),u,d,n)}return Xc=a,Xc}var Zc,Zy;function pO(){if(Zy)return Zc;Zy=1;var e=hn(),n=Ae(),r=bt(),i="[object String]";function o(a){return typeof a=="string"||!n(a)&&r(a)&&e(a)==i}return Zc=o,Zc}var Jc,Jy;function gO(){if(Jy)return Jc;Jy=1;var e=Rw(),n=e("length");return Jc=n,Jc}var Qc,Qy;function mO(){if(Qy)return Qc;Qy=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+e+o+a+"]");function u(l){return c.test(l)}return Qc=u,Qc}var eu,ev;function yO(){if(ev)return eu;ev=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="["+e+"]",c="["+o+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+c+"|"+u+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=l+"?",x="["+a+"]?",v="(?:"+p+"(?:"+[d,f,h].join("|")+")"+x+y+")*",g=x+y+v,_="(?:"+[d+c+"?",c,f,h,s].join("|")+")",b=RegExp(u+"(?="+u+")|"+_+g,"g");function w(S){for(var C=b.lastIndex=0;b.test(S);)++C;return C}return eu=w,eu}var tu,tv;function vO(){if(tv)return tu;tv=1;var e=gO(),n=mO(),r=yO();function i(o){return n(o)?r(o):e(o)}return tu=i,tu}var nu,nv;function xO(){if(nv)return nu;nv=1;var e=Ud(),n=Wn(),r=Tt(),i=pO(),o=vO(),a="[object Map]",s="[object Set]";function c(u){if(u==null)return 0;if(r(u))return i(u)?o(u):u.length;var l=n(u);return l==a||l==s?u.size:e(u).length}return nu=c,nu}var ru,rv;function bO(){if(rv)return ru;rv=1;var e=Bd(),n=hw(),r=Jd(),i=Ot(),o=go(),a=Ae(),s=Un(),c=Lr(),u=tt(),l=Hr();function d(f,h,p){var y=a(f),x=y||s(f)||l(f);if(h=i(h,4),p==null){var v=f&&f.constructor;x?p=y?new v:[]:u(f)?p=c(v)?n(o(f)):{}:p={}}return(x?e:r)(f,function(g,_,b){return h(p,g,_,b)}),p}return ru=d,ru}var iu,iv;function _O(){if(iv)return iu;iv=1;var e=Gn(),n=Fr(),r=Ae(),i=e?e.isConcatSpreadable:void 0;function o(a){return r(a)||n(a)||!!(i&&a&&a[i])}return iu=o,iu}var ou,ov;function th(){if(ov)return ou;ov=1;var e=Kd(),n=_O();function r(i,o,a,s,c){var u=-1,l=i.length;for(a||(a=n),c||(c=[]);++u<l;){var d=i[u];o>0&&a(d)?o>1?r(d,o-1,a,s,c):e(c,d):s||(c[c.length]=d)}return c}return ou=r,ou}var au,av;function wO(){if(av)return au;av=1;function e(n,r,i){switch(i.length){case 0:return n.call(r);case 1:return n.call(r,i[0]);case 2:return n.call(r,i[0],i[1]);case 3:return n.call(r,i[0],i[1],i[2])}return n.apply(r,i)}return au=e,au}var su,sv;function Ow(){if(sv)return su;sv=1;var e=wO(),n=Math.max;function r(i,o,a){return o=n(o===void 0?i.length-1:o,0),function(){for(var s=arguments,c=-1,u=n(s.length-o,0),l=Array(u);++c<u;)l[c]=s[o+c];c=-1;for(var d=Array(o+1);++c<o;)d[c]=s[c];return d[o]=a(l),e(i,this,d)}}return su=r,su}var cu,cv;function SO(){if(cv)return cu;cv=1;var e=Xd(),n=ew(),r=mn(),i=n?function(o,a){return n(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return cu=i,cu}var uu,uv;function CO(){if(uv)return uu;uv=1;var e=800,n=16,r=Date.now;function i(o){var a=0,s=0;return function(){var c=r(),u=n-(c-s);if(s=c,u>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return uu=i,uu}var lu,lv;function qw(){if(lv)return lu;lv=1;var e=SO(),n=CO(),r=n(e);return lu=r,lu}var fu,fv;function bo(){if(fv)return fu;fv=1;var e=mn(),n=Ow(),r=qw();function i(o,a){return r(n(o,a,e),o+"")}return fu=i,fu}var du,dv;function Dw(){if(dv)return du;dv=1;function e(n,r,i,o){for(var a=n.length,s=i+(o?1:-1);o?s--:++s<a;)if(r(n[s],s,n))return s;return-1}return du=e,du}var hu,hv;function EO(){if(hv)return hu;hv=1;function e(n){return n!==n}return hu=e,hu}var pu,pv;function NO(){if(pv)return pu;pv=1;function e(n,r,i){for(var o=i-1,a=n.length;++o<a;)if(n[o]===r)return o;return-1}return pu=e,pu}var gu,gv;function kO(){if(gv)return gu;gv=1;var e=Dw(),n=EO(),r=NO();function i(o,a,s){return a===a?r(o,a,s):e(o,n,s)}return gu=i,gu}var mu,mv;function RO(){if(mv)return mu;mv=1;var e=kO();function n(r,i){var o=r==null?0:r.length;return!!o&&e(r,i,0)>-1}return mu=n,mu}var yu,yv;function AO(){if(yv)return yu;yv=1;function e(n,r,i){for(var o=-1,a=n==null?0:n.length;++o<a;)if(i(r,n[o]))return!0;return!1}return yu=e,yu}var vu,vv;function jO(){if(vv)return vu;vv=1;function e(){}return vu=e,vu}var xu,xv;function PO(){if(xv)return xu;xv=1;var e=lw(),n=jO(),r=Qd(),i=1/0,o=e&&1/r(new e([,-0]))[1]==i?function(a){return new e(a)}:n;return xu=o,xu}var bu,bv;function MO(){if(bv)return bu;bv=1;var e=xw(),n=RO(),r=AO(),i=bw(),o=PO(),a=Qd(),s=200;function c(u,l,d){var f=-1,h=n,p=u.length,y=!0,x=[],v=x;if(d)y=!1,h=r;else if(p>=s){var g=l?null:o(u);if(g)return a(g);y=!1,h=i,v=new e}else v=l?[]:x;e:for(;++f<p;){var _=u[f],b=l?l(_):_;if(_=d||_!==0?_:0,y&&b===b){for(var w=v.length;w--;)if(v[w]===b)continue e;l&&v.push(b),x.push(_)}else h(v,b,d)||(v!==x&&v.push(b),x.push(_))}return x}return bu=c,bu}var _u,_v;function zw(){if(_v)return _u;_v=1;var e=Tt(),n=bt();function r(i){return n(i)&&e(i)}return _u=r,_u}var wu,wv;function IO(){if(wv)return wu;wv=1;var e=th(),n=bo(),r=MO(),i=zw(),o=n(function(a){return r(e(a,1,i,!0))});return wu=o,wu}var Su,Sv;function TO(){if(Sv)return Su;Sv=1;var e=yo();function n(r,i){return e(i,function(o){return r[o]})}return Su=n,Su}var Cu,Cv;function Lw(){if(Cv)return Cu;Cv=1;var e=TO(),n=Ut();function r(i){return i==null?[]:e(i,n(i))}return Cu=r,Cu}var Eu,Ev;function nt(){if(Ev)return Eu;Ev=1;var e;if(typeof $d=="function")try{e={clone:FT(),constant:Xd(),each:vw(),filter:Aw(),has:jw(),isArray:Ae(),isEmpty:fO(),isFunction:Lr(),isUndefined:Pw(),keys:Ut(),map:Iw(),reduce:Tw(),size:xO(),transform:bO(),union:IO(),values:Lw()}}catch{}return e||(e=window._),Eu=e,Eu}var Nu,Nv;function nh(){if(Nv)return Nu;Nv=1;var e=nt();Nu=o;var n="\0",r="\0",i="";function o(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(d){return this._label=d,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._in[f])})},o.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._out[f])})},o.prototype.setNodes=function(d,f){var h=arguments,p=this;return e.each(d,function(y){h.length>1?p.setNode(y,f):p.setNode(y)}),this},o.prototype.setNode=function(d,f){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},o.prototype.node=function(d){return this._nodes[d]},o.prototype.hasNode=function(d){return e.has(this._nodes,d)},o.prototype.removeNode=function(d){var f=this;if(e.has(this._nodes,d)){var h=function(p){f.removeEdge(f._edgeObjs[p])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(p){f.setParent(p)}),delete this._children[d]),e.each(e.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},o.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=r;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},o.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},o.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==r)return f}},o.prototype.children=function(d){if(e.isUndefined(d)&&(d=r),this._isCompound){var f=this._children[d];if(f)return e.keys(f)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},o.prototype.predecessors=function(d){var f=this._preds[d];if(f)return e.keys(f)},o.prototype.successors=function(d){var f=this._sucs[d];if(f)return e.keys(f)},o.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return e.union(f,this.successors(d))},o.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},o.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(x,v){d(v)&&f.setNode(v,x)}),e.each(this._edgeObjs,function(x){f.hasNode(x.v)&&f.hasNode(x.w)&&f.setEdge(x,h.edge(x))});var p={};function y(x){var v=h.parent(x);return v===void 0||f.hasNode(v)?(p[x]=v,v):v in p?p[v]:y(v)}return this._isCompound&&e.each(f.nodes(),function(x){f.setParent(x,y(x))}),f},o.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(d,f){var h=this,p=arguments;return e.reduce(d,function(y,x){return p.length>1?h.setEdge(y,x,f):h.setEdge(y,x),x}),this},o.prototype.setEdge=function(){var d,f,h,p,y=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(d=x.v,f=x.w,h=x.name,arguments.length===2&&(p=arguments[1],y=!0)):(d=x,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],y=!0)),d=""+d,f=""+f,e.isUndefined(h)||(h=""+h);var v=c(this._isDirected,d,f,h);if(e.has(this._edgeLabels,v))return y&&(this._edgeLabels[v]=p),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[v]=y?p:this._defaultEdgeLabelFn(d,f,h);var g=u(this._isDirected,d,f,h);return d=g.v,f=g.w,Object.freeze(g),this._edgeObjs[v]=g,a(this._preds[f],d),a(this._sucs[d],f),this._in[f][v]=g,this._out[d][v]=g,this._edgeCount++,this},o.prototype.edge=function(d,f,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):c(this._isDirected,d,f,h);return this._edgeLabels[p]},o.prototype.hasEdge=function(d,f,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):c(this._isDirected,d,f,h);return e.has(this._edgeLabels,p)},o.prototype.removeEdge=function(d,f,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):c(this._isDirected,d,f,h),y=this._edgeObjs[p];return y&&(d=y.v,f=y.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[f],d),s(this._sucs[d],f),delete this._in[f][p],delete this._out[d][p],this._edgeCount--),this},o.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var p=e.values(h);return f?e.filter(p,function(y){return y.v===f}):p}},o.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var p=e.values(h);return f?e.filter(p,function(y){return y.w===f}):p}},o.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function a(d,f){d[f]?d[f]++:d[f]=1}function s(d,f){--d[f]||delete d[f]}function c(d,f,h,p){var y=""+f,x=""+h;if(!d&&y>x){var v=y;y=x,x=v}return y+i+x+i+(e.isUndefined(p)?n:p)}function u(d,f,h,p){var y=""+f,x=""+h;if(!d&&y>x){var v=y;y=x,x=v}var g={v:y,w:x};return p&&(g.name=p),g}function l(d,f){return c(d,f.v,f.w,f.name)}return Nu}var ku,kv;function OO(){return kv||(kv=1,ku="2.1.8"),ku}var Ru,Rv;function qO(){return Rv||(Rv=1,Ru={Graph:nh(),version:OO()}),Ru}var Au,Av;function DO(){if(Av)return Au;Av=1;var e=nt(),n=nh();Au={write:r,read:a};function r(s){var c={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:i(s),edges:o(s)};return e.isUndefined(s.graph())||(c.value=e.clone(s.graph())),c}function i(s){return e.map(s.nodes(),function(c){var u=s.node(c),l=s.parent(c),d={v:c};return e.isUndefined(u)||(d.value=u),e.isUndefined(l)||(d.parent=l),d})}function o(s){return e.map(s.edges(),function(c){var u=s.edge(c),l={v:c.v,w:c.w};return e.isUndefined(c.name)||(l.name=c.name),e.isUndefined(u)||(l.value=u),l})}function a(s){var c=new n(s.options).setGraph(s.value);return e.each(s.nodes,function(u){c.setNode(u.v,u.value),u.parent&&c.setParent(u.v,u.parent)}),e.each(s.edges,function(u){c.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),c}return Au}var ju,jv;function zO(){if(jv)return ju;jv=1;var e=nt();ju=n;function n(r){var i={},o=[],a;function s(c){e.has(i,c)||(i[c]=!0,a.push(c),e.each(r.successors(c),s),e.each(r.predecessors(c),s))}return e.each(r.nodes(),function(c){a=[],s(c),a.length&&o.push(a)}),o}return ju}var Pu,Pv;function $w(){if(Pv)return Pu;Pv=1;var e=nt();Pu=n;function n(){this._arr=[],this._keyIndices={}}return n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(r){return r.key})},n.prototype.has=function(r){return e.has(this._keyIndices,r)},n.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},n.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(r,i){var o=this._keyIndices;if(r=String(r),!e.has(o,r)){var a=this._arr,s=a.length;return o[r]=s,a.push({key:r,priority:i}),this._decrease(s),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},n.prototype.decrease=function(r,i){var o=this._keyIndices[r];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},n.prototype._heapify=function(r){var i=this._arr,o=2*r,a=o+1,s=r;o<i.length&&(s=i[o].priority<i[s].priority?o:s,a<i.length&&(s=i[a].priority<i[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},n.prototype._decrease=function(r){for(var i=this._arr,o=i[r].priority,a;r!==0&&(a=r>>1,!(i[a].priority<o));)this._swap(r,a),r=a},n.prototype._swap=function(r,i){var o=this._arr,a=this._keyIndices,s=o[r],c=o[i];o[r]=c,o[i]=s,a[c.key]=r,a[s.key]=i},Pu}var Mu,Mv;function Fw(){if(Mv)return Mu;Mv=1;var e=nt(),n=$w();Mu=i;var r=e.constant(1);function i(a,s,c,u){return o(a,String(s),c||r,u||function(l){return a.outEdges(l)})}function o(a,s,c,u){var l={},d=new n,f,h,p=function(y){var x=y.v!==f?y.v:y.w,v=l[x],g=c(y),_=h.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+g);_<v.distance&&(v.distance=_,v.predecessor=f,d.decrease(x,_))};for(a.nodes().forEach(function(y){var x=y===s?0:Number.POSITIVE_INFINITY;l[y]={distance:x},d.add(y,x)});d.size()>0&&(f=d.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(p);return l}return Mu}var Iu,Iv;function LO(){if(Iv)return Iu;Iv=1;var e=Fw(),n=nt();Iu=r;function r(i,o,a){return n.transform(i.nodes(),function(s,c){s[c]=e(i,c,o,a)},{})}return Iu}var Tu,Tv;function Hw(){if(Tv)return Tu;Tv=1;var e=nt();Tu=n;function n(r){var i=0,o=[],a={},s=[];function c(u){var l=a[u]={onStack:!0,lowlink:i,index:i++};if(o.push(u),r.successors(u).forEach(function(h){e.has(a,h)?a[h].onStack&&(l.lowlink=Math.min(l.lowlink,a[h].index)):(c(h),l.lowlink=Math.min(l.lowlink,a[h].lowlink))}),l.lowlink===l.index){var d=[],f;do f=o.pop(),a[f].onStack=!1,d.push(f);while(u!==f);s.push(d)}}return r.nodes().forEach(function(u){e.has(a,u)||c(u)}),s}return Tu}var Ou,Ov;function $O(){if(Ov)return Ou;Ov=1;var e=nt(),n=Hw();Ou=r;function r(i){return e.filter(n(i),function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})}return Ou}var qu,qv;function FO(){if(qv)return qu;qv=1;var e=nt();qu=r;var n=e.constant(1);function r(o,a,s){return i(o,a||n,s||function(c){return o.outEdges(c)})}function i(o,a,s){var c={},u=o.nodes();return u.forEach(function(l){c[l]={},c[l][l]={distance:0},u.forEach(function(d){l!==d&&(c[l][d]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(d){var f=d.v===l?d.w:d.v,h=a(d);c[l][f]={distance:h,predecessor:l}})}),u.forEach(function(l){var d=c[l];u.forEach(function(f){var h=c[f];u.forEach(function(p){var y=h[l],x=d[p],v=h[p],g=y.distance+x.distance;g<v.distance&&(v.distance=g,v.predecessor=x.predecessor)})})}),c}return qu}var Du,Dv;function Bw(){if(Dv)return Du;Dv=1;var e=nt();Du=n,n.CycleException=r;function n(i){var o={},a={},s=[];function c(u){if(e.has(a,u))throw new r;e.has(o,u)||(a[u]=!0,o[u]=!0,e.each(i.predecessors(u),c),delete a[u],s.push(u))}if(e.each(i.sinks(),c),e.size(o)!==i.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Du}var zu,zv;function HO(){if(zv)return zu;zv=1;var e=Bw();zu=n;function n(r){try{e(r)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return zu}var Lu,Lv;function Vw(){if(Lv)return Lu;Lv=1;var e=nt();Lu=n;function n(i,o,a){e.isArray(o)||(o=[o]);var s=(i.isDirected()?i.successors:i.neighbors).bind(i),c=[],u={};return e.each(o,function(l){if(!i.hasNode(l))throw new Error("Graph does not have node: "+l);r(i,l,a==="post",u,s,c)}),c}function r(i,o,a,s,c,u){e.has(s,o)||(s[o]=!0,a||u.push(o),e.each(c(o),function(l){r(i,l,a,s,c,u)}),a&&u.push(o))}return Lu}var $u,$v;function BO(){if($v)return $u;$v=1;var e=Vw();$u=n;function n(r,i){return e(r,i,"post")}return $u}var Fu,Fv;function VO(){if(Fv)return Fu;Fv=1;var e=Vw();Fu=n;function n(r,i){return e(r,i,"pre")}return Fu}var Hu,Hv;function GO(){if(Hv)return Hu;Hv=1;var e=nt(),n=nh(),r=$w();Hu=i;function i(o,a){var s=new n,c={},u=new r,l;function d(h){var p=h.v===l?h.w:h.v,y=u.priority(p);if(y!==void 0){var x=a(h);x<y&&(c[p]=l,u.decrease(p,x))}}if(o.nodeCount()===0)return s;e.each(o.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),u.decrease(o.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),e.has(c,l))s.setEdge(l,c[l]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(l).forEach(d)}return s}return Hu}var Bu,Bv;function UO(){return Bv||(Bv=1,Bu={components:zO(),dijkstra:Fw(),dijkstraAll:LO(),findCycles:$O(),floydWarshall:FO(),isAcyclic:HO(),postorder:BO(),preorder:VO(),prim:GO(),tarjan:Hw(),topsort:Bw()}),Bu}var Vu,Vv;function WO(){if(Vv)return Vu;Vv=1;var e=qO();return Vu={Graph:e.Graph,json:DO(),alg:UO(),version:e.version},Vu}var Gu,Gv;function ft(){if(Gv)return Gu;Gv=1;var e;if(typeof $d=="function")try{e=WO()}catch{}return e||(e=window.graphlib),Gu=e,Gu}var Uu,Uv;function KO(){if(Uv)return Uu;Uv=1;var e=gw(),n=1,r=4;function i(o){return e(o,n|r)}return Uu=i,Uu}var Wu,Wv;function _o(){if(Wv)return Wu;Wv=1;var e=Vn(),n=Tt(),r=fo(),i=tt();function o(a,s,c){if(!i(c))return!1;var u=typeof s;return(u=="number"?n(c)&&r(s,c.length):u=="string"&&s in c)?e(c[s],a):!1}return Wu=o,Wu}var Ku,Kv;function YO(){if(Kv)return Ku;Kv=1;var e=bo(),n=Vn(),r=_o(),i=gn(),o=Object.prototype,a=o.hasOwnProperty,s=e(function(c,u){c=Object(c);var l=-1,d=u.length,f=d>2?u[2]:void 0;for(f&&r(u[0],u[1],f)&&(d=1);++l<d;)for(var h=u[l],p=i(h),y=-1,x=p.length;++y<x;){var v=p[y],g=c[v];(g===void 0||n(g,o[v])&&!a.call(c,v))&&(c[v]=h[v])}return c});return Ku=s,Ku}var Yu,Yv;function XO(){if(Yv)return Yu;Yv=1;var e=Ot(),n=Tt(),r=Ut();function i(o){return function(a,s,c){var u=Object(a);if(!n(a)){var l=e(s,3);a=r(a),s=function(f){return l(u[f],f,u)}}var d=o(a,s,c);return d>-1?u[l?a[d]:d]:void 0}}return Yu=i,Yu}var Xu,Xv;function ZO(){if(Xv)return Xu;Xv=1;var e=/\s/;function n(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return Xu=n,Xu}var Zu,Zv;function JO(){if(Zv)return Zu;Zv=1;var e=ZO(),n=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(n,"")}return Zu=r,Zu}var Ju,Jv;function QO(){if(Jv)return Ju;Jv=1;var e=JO(),n=tt(),r=Kn(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return i;if(n(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=n(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=a.test(l);return f||s.test(l)?c(l.slice(2),f?2:8):o.test(l)?i:+l}return Ju=u,Ju}var Qu,Qv;function Gw(){if(Qv)return Qu;Qv=1;var e=QO(),n=1/0,r=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=e(o),o===n||o===-n){var a=o<0?-1:1;return a*r}return o===o?o:0}return Qu=i,Qu}var el,e0;function e3(){if(e0)return el;e0=1;var e=Gw();function n(r){var i=e(r),o=i%1;return i===i?o?i-o:i:0}return el=n,el}var tl,t0;function t3(){if(t0)return tl;t0=1;var e=Dw(),n=Ot(),r=e3(),i=Math.max;function o(a,s,c){var u=a==null?0:a.length;if(!u)return-1;var l=c==null?0:r(c);return l<0&&(l=i(u+l,0)),e(a,n(s,3),l)}return tl=o,tl}var nl,n0;function n3(){if(n0)return nl;n0=1;var e=XO(),n=t3(),r=e(n);return nl=r,nl}var rl,r0;function Uw(){if(r0)return rl;r0=1;var e=th();function n(r){var i=r==null?0:r.length;return i?e(r,1):[]}return rl=n,rl}var il,i0;function r3(){if(i0)return il;i0=1;var e=Zd(),n=mw(),r=gn();function i(o,a){return o==null?o:e(o,n(a),r)}return il=i,il}var ol,o0;function i3(){if(o0)return ol;o0=1;function e(n){var r=n==null?0:n.length;return r?n[r-1]:void 0}return ol=e,ol}var al,a0;function o3(){if(a0)return al;a0=1;var e=uo(),n=Jd(),r=Ot();function i(o,a){var s={};return a=r(a,3),n(o,function(c,u,l){e(s,u,a(c,u,l))}),s}return al=i,al}var sl,s0;function rh(){if(s0)return sl;s0=1;var e=Kn();function n(r,i,o){for(var a=-1,s=r.length;++a<s;){var c=r[a],u=i(c);if(u!=null&&(l===void 0?u===u&&!e(u):o(u,l)))var l=u,d=c}return d}return sl=n,sl}var cl,c0;function a3(){if(c0)return cl;c0=1;function e(n,r){return n>r}return cl=e,cl}var ul,u0;function s3(){if(u0)return ul;u0=1;var e=rh(),n=a3(),r=mn();function i(o){return o&&o.length?e(o,r,n):void 0}return ul=i,ul}var ll,l0;function Ww(){if(l0)return ll;l0=1;var e=uo(),n=Vn();function r(i,o,a){(a!==void 0&&!n(i[o],a)||a===void 0&&!(o in i))&&e(i,o,a)}return ll=r,ll}var fl,f0;function c3(){if(f0)return fl;f0=1;var e=hn(),n=go(),r=bt(),i="[object Object]",o=Function.prototype,a=Object.prototype,s=o.toString,c=a.hasOwnProperty,u=s.call(Object);function l(d){if(!r(d)||e(d)!=i)return!1;var f=n(d);if(f===null)return!0;var h=c.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==u}return fl=l,fl}var dl,d0;function Kw(){if(d0)return dl;d0=1;function e(n,r){if(!(r==="constructor"&&typeof n[r]=="function")&&r!="__proto__")return n[r]}return dl=e,dl}var hl,h0;function u3(){if(h0)return hl;h0=1;var e=$r(),n=gn();function r(i){return e(i,n(i))}return hl=r,hl}var pl,p0;function l3(){if(p0)return pl;p0=1;var e=Ww(),n=rw(),r=dw(),i=iw(),o=pw(),a=Fr(),s=Ae(),c=zw(),u=Un(),l=Lr(),d=tt(),f=c3(),h=Hr(),p=Kw(),y=u3();function x(v,g,_,b,w,S,C){var E=p(v,_),N=p(g,_),A=C.get(N);if(A){e(v,_,A);return}var R=S?S(E,N,_+"",v,g,C):void 0,k=R===void 0;if(k){var P=s(N),O=!P&&u(N),M=!P&&!O&&h(N);R=N,P||O||M?s(E)?R=E:c(E)?R=i(E):O?(k=!1,R=n(N,!0)):M?(k=!1,R=r(N,!0)):R=[]:f(N)||a(N)?(R=E,a(E)?R=y(E):(!d(E)||l(E))&&(R=o(N))):k=!1}k&&(C.set(N,R),w(R,N,b,S,C),C.delete(N)),e(v,_,R)}return pl=x,pl}var gl,g0;function f3(){if(g0)return gl;g0=1;var e=co(),n=Ww(),r=Zd(),i=l3(),o=tt(),a=gn(),s=Kw();function c(u,l,d,f,h){u!==l&&r(l,function(p,y){if(h||(h=new e),o(p))i(u,l,y,d,c,f,h);else{var x=f?f(s(u,y),p,y+"",u,l,h):void 0;x===void 0&&(x=p),n(u,y,x)}},a)}return gl=c,gl}var ml,m0;function d3(){if(m0)return ml;m0=1;var e=bo(),n=_o();function r(i){return e(function(o,a){var s=-1,c=a.length,u=c>1?a[c-1]:void 0,l=c>2?a[2]:void 0;for(u=i.length>3&&typeof u=="function"?(c--,u):void 0,l&&n(a[0],a[1],l)&&(u=c<3?void 0:u,c=1),o=Object(o);++s<c;){var d=a[s];d&&i(o,d,s,u)}return o})}return ml=r,ml}var yl,y0;function h3(){if(y0)return yl;y0=1;var e=f3(),n=d3(),r=n(function(i,o,a){e(i,o,a)});return yl=r,yl}var vl,v0;function Yw(){if(v0)return vl;v0=1;function e(n,r){return n<r}return vl=e,vl}var xl,x0;function p3(){if(x0)return xl;x0=1;var e=rh(),n=Yw(),r=mn();function i(o){return o&&o.length?e(o,r,n):void 0}return xl=i,xl}var bl,b0;function g3(){if(b0)return bl;b0=1;var e=rh(),n=Ot(),r=Yw();function i(o,a){return o&&o.length?e(o,n(a,2),r):void 0}return bl=i,bl}var _l,_0;function m3(){if(_0)return _l;_0=1;var e=ht(),n=function(){return e.Date.now()};return _l=n,_l}var wl,w0;function y3(){if(w0)return wl;w0=1;var e=lo(),n=vo(),r=fo(),i=tt(),o=Br();function a(s,c,u,l){if(!i(s))return s;c=n(c,s);for(var d=-1,f=c.length,h=f-1,p=s;p!=null&&++d<f;){var y=o(c[d]),x=u;if(y==="__proto__"||y==="constructor"||y==="prototype")return s;if(d!=h){var v=p[y];x=l?l(v,y,p):void 0,x===void 0&&(x=i(v)?v:r(c[d+1])?[]:{})}e(p,y,x),p=p[y]}return s}return wl=a,wl}var Sl,S0;function v3(){if(S0)return Sl;S0=1;var e=xo(),n=y3(),r=vo();function i(o,a,s){for(var c=-1,u=a.length,l={};++c<u;){var d=a[c],f=e(o,d);s(f,d)&&n(l,r(d,o),f)}return l}return Sl=i,Sl}var Cl,C0;function x3(){if(C0)return Cl;C0=1;var e=v3(),n=kw();function r(i,o){return e(i,o,function(a,s){return n(i,s)})}return Cl=r,Cl}var El,E0;function b3(){if(E0)return El;E0=1;var e=Uw(),n=Ow(),r=qw();function i(o){return r(n(o,void 0,e),o+"")}return El=i,El}var Nl,N0;function _3(){if(N0)return Nl;N0=1;var e=x3(),n=b3(),r=n(function(i,o){return i==null?{}:e(i,o)});return Nl=r,Nl}var kl,k0;function w3(){if(k0)return kl;k0=1;var e=Math.ceil,n=Math.max;function r(i,o,a,s){for(var c=-1,u=n(e((o-i)/(a||1)),0),l=Array(u);u--;)l[s?u:++c]=i,i+=a;return l}return kl=r,kl}var Rl,R0;function S3(){if(R0)return Rl;R0=1;var e=w3(),n=_o(),r=Gw();function i(o){return function(a,s,c){return c&&typeof c!="number"&&n(a,s,c)&&(s=c=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),c=c===void 0?a<s?1:-1:r(c),e(a,s,c,o)}}return Rl=i,Rl}var Al,A0;function C3(){if(A0)return Al;A0=1;var e=S3(),n=e();return Al=n,Al}var jl,j0;function E3(){if(j0)return jl;j0=1;function e(n,r){var i=n.length;for(n.sort(r);i--;)n[i]=n[i].value;return n}return jl=e,jl}var Pl,P0;function N3(){if(P0)return Pl;P0=1;var e=Kn();function n(r,i){if(r!==i){var o=r!==void 0,a=r===null,s=r===r,c=e(r),u=i!==void 0,l=i===null,d=i===i,f=e(i);if(!l&&!f&&!c&&r>i||c&&u&&d&&!l&&!f||a&&u&&d||!o&&d||!s)return 1;if(!a&&!c&&!f&&r<i||f&&o&&s&&!a&&!c||l&&o&&s||!u&&s||!d)return-1}return 0}return Pl=n,Pl}var Ml,M0;function k3(){if(M0)return Ml;M0=1;var e=N3();function n(r,i,o){for(var a=-1,s=r.criteria,c=i.criteria,u=s.length,l=o.length;++a<u;){var d=e(s[a],c[a]);if(d){if(a>=l)return d;var f=o[a];return d*(f=="desc"?-1:1)}}return r.index-i.index}return Ml=n,Ml}var Il,I0;function R3(){if(I0)return Il;I0=1;var e=yo(),n=xo(),r=Ot(),i=Mw(),o=E3(),a=ho(),s=k3(),c=mn(),u=Ae();function l(d,f,h){f.length?f=e(f,function(x){return u(x)?function(v){return n(v,x.length===1?x[0]:x)}:x}):f=[c];var p=-1;f=e(f,a(r));var y=i(d,function(x,v,g){var _=e(f,function(b){return b(x)});return{criteria:_,index:++p,value:x}});return o(y,function(x,v){return s(x,v,h)})}return Il=l,Il}var Tl,T0;function A3(){if(T0)return Tl;T0=1;var e=th(),n=R3(),r=bo(),i=_o(),o=r(function(a,s){if(a==null)return[];var c=s.length;return c>1&&i(a,s[0],s[1])?s=[]:c>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),n(a,e(s,1),[])});return Tl=o,Tl}var Ol,O0;function j3(){if(O0)return Ol;O0=1;var e=Ew(),n=0;function r(i){var o=++n;return e(i)+o}return Ol=r,Ol}var ql,q0;function P3(){if(q0)return ql;q0=1;function e(n,r,i){for(var o=-1,a=n.length,s=r.length,c={};++o<a;){var u=o<s?r[o]:void 0;i(c,n[o],u)}return c}return ql=e,ql}var Dl,D0;function M3(){if(D0)return Dl;D0=1;var e=lo(),n=P3();function r(i,o){return n(i||[],o||[],e)}return Dl=r,Dl}var zl,z0;function Ce(){if(z0)return zl;z0=1;var e;if(typeof $d=="function")try{e={cloneDeep:KO(),constant:Xd(),defaults:YO(),each:vw(),filter:Aw(),find:n3(),flatten:Uw(),forEach:yw(),forIn:r3(),has:jw(),isUndefined:Pw(),last:i3(),map:Iw(),mapValues:o3(),max:s3(),merge:h3(),min:p3(),minBy:g3(),now:m3(),pick:_3(),range:C3(),reduce:Tw(),sortBy:A3(),uniqueId:j3(),values:Lw(),zipObject:M3()}}catch{}return e||(e=window._),zl=e,zl}var Ll,L0;function I3(){if(L0)return Ll;L0=1,Ll=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,o=i._prev;if(o!==i)return n(o),o},e.prototype.enqueue=function(i){var o=this._sentinel;i._prev&&i._next&&n(i),i._next=o._next,o._next._prev=i,o._next=i,i._prev=o},e.prototype.toString=function(){for(var i=[],o=this._sentinel,a=o._prev;a!==o;)i.push(JSON.stringify(a,r)),a=a._prev;return"["+i.join(", ")+"]"};function n(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function r(i,o){if(i!=="_next"&&i!=="_prev")return o}return Ll}var $l,$0;function T3(){if($0)return $l;$0=1;var e=Ce(),n=ft().Graph,r=I3();$l=o;var i=e.constant(1);function o(l,d){if(l.nodeCount()<=1)return[];var f=c(l,d||i),h=a(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(h,function(p){return l.outEdges(p.v,p.w)}),!0)}function a(l,d,f){for(var h=[],p=d[d.length-1],y=d[0],x;l.nodeCount();){for(;x=y.dequeue();)s(l,d,f,x);for(;x=p.dequeue();)s(l,d,f,x);if(l.nodeCount()){for(var v=d.length-2;v>0;--v)if(x=d[v].dequeue(),x){h=h.concat(s(l,d,f,x,!0));break}}}return h}function s(l,d,f,h,p){var y=p?[]:void 0;return e.forEach(l.inEdges(h.v),function(x){var v=l.edge(x),g=l.node(x.v);p&&y.push({v:x.v,w:x.w}),g.out-=v,u(d,f,g)}),e.forEach(l.outEdges(h.v),function(x){var v=l.edge(x),g=x.w,_=l.node(g);_.in-=v,u(d,f,_)}),l.removeNode(h.v),y}function c(l,d){var f=new n,h=0,p=0;e.forEach(l.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var g=f.edge(v.v,v.w)||0,_=d(v),b=g+_;f.setEdge(v.v,v.w,b),p=Math.max(p,f.node(v.v).out+=_),h=Math.max(h,f.node(v.w).in+=_)});var y=e.range(p+h+3).map(function(){return new r}),x=h+1;return e.forEach(f.nodes(),function(v){u(y,x,f.node(v))}),{graph:f,buckets:y,zeroIdx:x}}function u(l,d,f){f.out?f.in?l[f.out-f.in+d].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return $l}var Fl,F0;function O3(){if(F0)return Fl;F0=1;var e=Ce(),n=T3();Fl={run:r,undo:o};function r(a){var s=a.graph().acyclicer==="greedy"?n(a,c(a)):i(a);e.forEach(s,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function c(u){return function(l){return u.edge(l).weight}}}function i(a){var s=[],c={},u={};function l(d){e.has(u,d)||(u[d]=!0,c[d]=!0,e.forEach(a.outEdges(d),function(f){e.has(c,f.w)?s.push(f):l(f.w)}),delete c[d])}return e.forEach(a.nodes(),l),s}function o(a){e.forEach(a.edges(),function(s){var c=a.edge(s);if(c.reversed){a.removeEdge(s);var u=c.forwardName;delete c.reversed,delete c.forwardName,a.setEdge(s.w,s.v,c,u)}})}return Fl}var Hl,H0;function Fe(){if(H0)return Hl;H0=1;var e=Ce(),n=ft().Graph;Hl={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:c,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:d,addBorderNode:f,maxRank:h,partition:p,time:y,notime:x};function r(v,g,_,b){var w;do w=e.uniqueId(b);while(v.hasNode(w));return _.dummy=g,v.setNode(w,_),w}function i(v){var g=new n().setGraph(v.graph());return e.forEach(v.nodes(),function(_){g.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){var b=g.edge(_.v,_.w)||{weight:0,minlen:1},w=v.edge(_);g.setEdge(_.v,_.w,{weight:b.weight+w.weight,minlen:Math.max(b.minlen,w.minlen)})}),g}function o(v){var g=new n({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(_){v.children(_).length||g.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){g.setEdge(_,v.edge(_))}),g}function a(v){var g=e.map(v.nodes(),function(_){var b={};return e.forEach(v.outEdges(_),function(w){b[w.w]=(b[w.w]||0)+v.edge(w).weight}),b});return e.zipObject(v.nodes(),g)}function s(v){var g=e.map(v.nodes(),function(_){var b={};return e.forEach(v.inEdges(_),function(w){b[w.v]=(b[w.v]||0)+v.edge(w).weight}),b});return e.zipObject(v.nodes(),g)}function c(v,g){var _=v.x,b=v.y,w=g.x-_,S=g.y-b,C=v.width/2,E=v.height/2;if(!w&&!S)throw new Error("Not possible to find intersection inside of the rectangle");var N,A;return Math.abs(S)*C>Math.abs(w)*E?(S<0&&(E=-E),N=E*w/S,A=E):(w<0&&(C=-C),N=C,A=C*S/w),{x:_+N,y:b+A}}function u(v){var g=e.map(e.range(h(v)+1),function(){return[]});return e.forEach(v.nodes(),function(_){var b=v.node(_),w=b.rank;e.isUndefined(w)||(g[w][b.order]=_)}),g}function l(v){var g=e.min(e.map(v.nodes(),function(_){return v.node(_).rank}));e.forEach(v.nodes(),function(_){var b=v.node(_);e.has(b,"rank")&&(b.rank-=g)})}function d(v){var g=e.min(e.map(v.nodes(),function(S){return v.node(S).rank})),_=[];e.forEach(v.nodes(),function(S){var C=v.node(S).rank-g;_[C]||(_[C]=[]),_[C].push(S)});var b=0,w=v.graph().nodeRankFactor;e.forEach(_,function(S,C){e.isUndefined(S)&&C%w!==0?--b:b&&e.forEach(S,function(E){v.node(E).rank+=b})})}function f(v,g,_,b){var w={width:0,height:0};return arguments.length>=4&&(w.rank=_,w.order=b),r(v,"border",w,g)}function h(v){return e.max(e.map(v.nodes(),function(g){var _=v.node(g).rank;if(!e.isUndefined(_))return _}))}function p(v,g){var _={lhs:[],rhs:[]};return e.forEach(v,function(b){g(b)?_.lhs.push(b):_.rhs.push(b)}),_}function y(v,g){var _=e.now();try{return g()}finally{console.log(v+" time: "+(e.now()-_)+"ms")}}function x(v,g){return g()}return Hl}var Bl,B0;function q3(){if(B0)return Bl;B0=1;var e=Ce(),n=Fe();Bl={run:r,undo:o};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){i(a,s)})}function i(a,s){var c=s.v,u=a.node(c).rank,l=s.w,d=a.node(l).rank,f=s.name,h=a.edge(s),p=h.labelRank;if(d!==u+1){a.removeEdge(s);var y,x,v;for(v=0,++u;u<d;++v,++u)h.points=[],x={width:0,height:0,edgeLabel:h,edgeObj:s,rank:u},y=n.addDummyNode(a,"edge",x,"_d"),u===p&&(x.width=h.width,x.height=h.height,x.dummy="edge-label",x.labelpos=h.labelpos),a.setEdge(c,y,{weight:h.weight},f),v===0&&a.graph().dummyChains.push(y),c=y;a.setEdge(c,l,{weight:h.weight},f)}}function o(a){e.forEach(a.graph().dummyChains,function(s){var c=a.node(s),u=c.edgeLabel,l;for(a.setEdge(c.edgeObj,u);c.dummy;)l=a.successors(s)[0],a.removeNode(s),u.points.push({x:c.x,y:c.y}),c.dummy==="edge-label"&&(u.x=c.x,u.y=c.y,u.width=c.width,u.height=c.height),s=l,c=a.node(s)})}return Bl}var Vl,V0;function Ri(){if(V0)return Vl;V0=1;var e=Ce();Vl={longestPath:n,slack:r};function n(i){var o={};function a(s){var c=i.node(s);if(e.has(o,s))return c.rank;o[s]=!0;var u=e.min(e.map(i.outEdges(s),function(l){return a(l.w)-i.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),c.rank=u}e.forEach(i.sources(),a)}function r(i,o){return i.node(o.w).rank-i.node(o.v).rank-i.edge(o).minlen}return Vl}var Gl,G0;function Xw(){if(G0)return Gl;G0=1;var e=Ce(),n=ft().Graph,r=Ri().slack;Gl=i;function i(c){var u=new n({directed:!1}),l=c.nodes()[0],d=c.nodeCount();u.setNode(l,{});for(var f,h;o(u,c)<d;)f=a(u,c),h=u.hasNode(f.v)?r(c,f):-r(c,f),s(u,c,h);return u}function o(c,u){function l(d){e.forEach(u.nodeEdges(d),function(f){var h=f.v,p=d===h?f.w:h;!c.hasNode(p)&&!r(u,f)&&(c.setNode(p,{}),c.setEdge(d,p,{}),l(p))})}return e.forEach(c.nodes(),l),c.nodeCount()}function a(c,u){return e.minBy(u.edges(),function(l){if(c.hasNode(l.v)!==c.hasNode(l.w))return r(u,l)})}function s(c,u,l){e.forEach(c.nodes(),function(d){u.node(d).rank+=l})}return Gl}var Ul,U0;function D3(){if(U0)return Ul;U0=1;var e=Ce(),n=Xw(),r=Ri().slack,i=Ri().longestPath,o=ft().alg.preorder,a=ft().alg.postorder,s=Fe().simplify;Ul=c,c.initLowLimValues=f,c.initCutValues=u,c.calcCutValue=d,c.leaveEdge=p,c.enterEdge=y,c.exchangeEdges=x;function c(b){b=s(b),i(b);var w=n(b);f(w),u(w,b);for(var S,C;S=p(w);)C=y(w,b,S),x(w,b,S,C)}function u(b,w){var S=a(b,b.nodes());S=S.slice(0,S.length-1),e.forEach(S,function(C){l(b,w,C)})}function l(b,w,S){var C=b.node(S),E=C.parent;b.edge(S,E).cutvalue=d(b,w,S)}function d(b,w,S){var C=b.node(S),E=C.parent,N=!0,A=w.edge(S,E),R=0;return A||(N=!1,A=w.edge(E,S)),R=A.weight,e.forEach(w.nodeEdges(S),function(k){var P=k.v===S,O=P?k.w:k.v;if(O!==E){var M=P===N,T=w.edge(k).weight;if(R+=M?T:-T,g(b,S,O)){var q=b.edge(S,O).cutvalue;R+=M?-q:q}}}),R}function f(b,w){arguments.length<2&&(w=b.nodes()[0]),h(b,{},1,w)}function h(b,w,S,C,E){var N=S,A=b.node(C);return w[C]=!0,e.forEach(b.neighbors(C),function(R){e.has(w,R)||(S=h(b,w,S,R,C))}),A.low=N,A.lim=S++,E?A.parent=E:delete A.parent,S}function p(b){return e.find(b.edges(),function(w){return b.edge(w).cutvalue<0})}function y(b,w,S){var C=S.v,E=S.w;w.hasEdge(C,E)||(C=S.w,E=S.v);var N=b.node(C),A=b.node(E),R=N,k=!1;N.lim>A.lim&&(R=A,k=!0);var P=e.filter(w.edges(),function(O){return k===_(b,b.node(O.v),R)&&k!==_(b,b.node(O.w),R)});return e.minBy(P,function(O){return r(w,O)})}function x(b,w,S,C){var E=S.v,N=S.w;b.removeEdge(E,N),b.setEdge(C.v,C.w,{}),f(b),u(b,w),v(b,w)}function v(b,w){var S=e.find(b.nodes(),function(E){return!w.node(E).parent}),C=o(b,S);C=C.slice(1),e.forEach(C,function(E){var N=b.node(E).parent,A=w.edge(E,N),R=!1;A||(A=w.edge(N,E),R=!0),w.node(E).rank=w.node(N).rank+(R?A.minlen:-A.minlen)})}function g(b,w,S){return b.hasEdge(w,S)}function _(b,w,S){return S.low<=w.lim&&w.lim<=S.lim}return Ul}var Wl,W0;function z3(){if(W0)return Wl;W0=1;var e=Ri(),n=e.longestPath,r=Xw(),i=D3();Wl=o;function o(u){switch(u.graph().ranker){case"network-simplex":c(u);break;case"tight-tree":s(u);break;case"longest-path":a(u);break;default:c(u)}}var a=n;function s(u){n(u),r(u)}function c(u){i(u)}return Wl}var Kl,K0;function L3(){if(K0)return Kl;K0=1;var e=Ce();Kl=n;function n(o){var a=i(o);e.forEach(o.graph().dummyChains,function(s){for(var c=o.node(s),u=c.edgeObj,l=r(o,a,u.v,u.w),d=l.path,f=l.lca,h=0,p=d[h],y=!0;s!==u.w;){if(c=o.node(s),y){for(;(p=d[h])!==f&&o.node(p).maxRank<c.rank;)h++;p===f&&(y=!1)}if(!y){for(;h<d.length-1&&o.node(p=d[h+1]).minRank<=c.rank;)h++;p=d[h]}o.setParent(s,p),s=o.successors(s)[0]}})}function r(o,a,s,c){var u=[],l=[],d=Math.min(a[s].low,a[c].low),f=Math.max(a[s].lim,a[c].lim),h,p;h=s;do h=o.parent(h),u.push(h);while(h&&(a[h].low>d||f>a[h].lim));for(p=h,h=c;(h=o.parent(h))!==p;)l.push(h);return{path:u.concat(l.reverse()),lca:p}}function i(o){var a={},s=0;function c(u){var l=s;e.forEach(o.children(u),c),a[u]={low:l,lim:s++}}return e.forEach(o.children(),c),a}return Kl}var Yl,Y0;function $3(){if(Y0)return Yl;Y0=1;var e=Ce(),n=Fe();Yl={run:r,cleanup:s};function r(c){var u=n.addDummyNode(c,"root",{},"_root"),l=o(c),d=e.max(e.values(l))-1,f=2*d+1;c.graph().nestingRoot=u,e.forEach(c.edges(),function(p){c.edge(p).minlen*=f});var h=a(c)+1;e.forEach(c.children(),function(p){i(c,u,f,h,d,l,p)}),c.graph().nodeRankFactor=f}function i(c,u,l,d,f,h,p){var y=c.children(p);if(!y.length){p!==u&&c.setEdge(u,p,{weight:0,minlen:l});return}var x=n.addBorderNode(c,"_bt"),v=n.addBorderNode(c,"_bb"),g=c.node(p);c.setParent(x,p),g.borderTop=x,c.setParent(v,p),g.borderBottom=v,e.forEach(y,function(_){i(c,u,l,d,f,h,_);var b=c.node(_),w=b.borderTop?b.borderTop:_,S=b.borderBottom?b.borderBottom:_,C=b.borderTop?d:2*d,E=w!==S?1:f-h[p]+1;c.setEdge(x,w,{weight:C,minlen:E,nestingEdge:!0}),c.setEdge(S,v,{weight:C,minlen:E,nestingEdge:!0})}),c.parent(p)||c.setEdge(u,x,{weight:0,minlen:f+h[p]})}function o(c){var u={};function l(d,f){var h=c.children(d);h&&h.length&&e.forEach(h,function(p){l(p,f+1)}),u[d]=f}return e.forEach(c.children(),function(d){l(d,1)}),u}function a(c){return e.reduce(c.edges(),function(u,l){return u+c.edge(l).weight},0)}function s(c){var u=c.graph();c.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(c.edges(),function(l){var d=c.edge(l);d.nestingEdge&&c.removeEdge(l)})}return Yl}var Xl,X0;function F3(){if(X0)return Xl;X0=1;var e=Ce(),n=Fe();Xl=r;function r(o){function a(s){var c=o.children(s),u=o.node(s);if(c.length&&e.forEach(c,a),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,d=u.maxRank+1;l<d;++l)i(o,"borderLeft","_bl",s,u,l),i(o,"borderRight","_br",s,u,l)}}e.forEach(o.children(),a)}function i(o,a,s,c,u,l){var d={width:0,height:0,rank:l,borderType:a},f=u[a][l-1],h=n.addDummyNode(o,"border",d,s);u[a][l]=h,o.setParent(h,c),f&&o.setEdge(f,h,{weight:1})}return Xl}var Zl,Z0;function H3(){if(Z0)return Zl;Z0=1;var e=Ce();Zl={adjust:n,undo:r};function n(l){var d=l.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&i(l)}function r(l){var d=l.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&a(l),(d==="lr"||d==="rl")&&(c(l),i(l))}function i(l){e.forEach(l.nodes(),function(d){o(l.node(d))}),e.forEach(l.edges(),function(d){o(l.edge(d))})}function o(l){var d=l.width;l.width=l.height,l.height=d}function a(l){e.forEach(l.nodes(),function(d){s(l.node(d))}),e.forEach(l.edges(),function(d){var f=l.edge(d);e.forEach(f.points,s),e.has(f,"y")&&s(f)})}function s(l){l.y=-l.y}function c(l){e.forEach(l.nodes(),function(d){u(l.node(d))}),e.forEach(l.edges(),function(d){var f=l.edge(d);e.forEach(f.points,u),e.has(f,"x")&&u(f)})}function u(l){var d=l.x;l.x=l.y,l.y=d}return Zl}var Jl,J0;function B3(){if(J0)return Jl;J0=1;var e=Ce();Jl=n;function n(r){var i={},o=e.filter(r.nodes(),function(l){return!r.children(l).length}),a=e.max(e.map(o,function(l){return r.node(l).rank})),s=e.map(e.range(a+1),function(){return[]});function c(l){if(!e.has(i,l)){i[l]=!0;var d=r.node(l);s[d.rank].push(l),e.forEach(r.successors(l),c)}}var u=e.sortBy(o,function(l){return r.node(l).rank});return e.forEach(u,c),s}return Jl}var Ql,Q0;function V3(){if(Q0)return Ql;Q0=1;var e=Ce();Ql=n;function n(i,o){for(var a=0,s=1;s<o.length;++s)a+=r(i,o[s-1],o[s]);return a}function r(i,o,a){for(var s=e.zipObject(a,e.map(a,function(h,p){return p})),c=e.flatten(e.map(o,function(h){return e.sortBy(e.map(i.outEdges(h),function(p){return{pos:s[p.w],weight:i.edge(p).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var d=e.map(new Array(l),function(){return 0}),f=0;return e.forEach(c.forEach(function(h){var p=h.pos+u;d[p]+=h.weight;for(var y=0;p>0;)p%2&&(y+=d[p+1]),p=p-1>>1,d[p]+=h.weight;f+=h.weight*y})),f}return Ql}var ef,ex;function G3(){if(ex)return ef;ex=1;var e=Ce();ef=n;function n(r,i){return e.map(i,function(o){var a=r.inEdges(o);if(a.length){var s=e.reduce(a,function(c,u){var l=r.edge(u),d=r.node(u.v);return{sum:c.sum+l.weight*d.order,weight:c.weight+l.weight}},{sum:0,weight:0});return{v:o,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:o}})}return ef}var tf,tx;function U3(){if(tx)return tf;tx=1;var e=Ce();tf=n;function n(o,a){var s={};e.forEach(o,function(u,l){var d=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(d.barycenter=u.barycenter,d.weight=u.weight)}),e.forEach(a.edges(),function(u){var l=s[u.v],d=s[u.w];!e.isUndefined(l)&&!e.isUndefined(d)&&(d.indegree++,l.out.push(s[u.w]))});var c=e.filter(s,function(u){return!u.indegree});return r(c)}function r(o){var a=[];function s(l){return function(d){d.merged||(e.isUndefined(d.barycenter)||e.isUndefined(l.barycenter)||d.barycenter>=l.barycenter)&&i(l,d)}}function c(l){return function(d){d.in.push(l),--d.indegree===0&&o.push(d)}}for(;o.length;){var u=o.pop();a.push(u),e.forEach(u.in.reverse(),s(u)),e.forEach(u.out,c(u))}return e.map(e.filter(a,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function i(o,a){var s=0,c=0;o.weight&&(s+=o.barycenter*o.weight,c+=o.weight),a.weight&&(s+=a.barycenter*a.weight,c+=a.weight),o.vs=a.vs.concat(o.vs),o.barycenter=s/c,o.weight=c,o.i=Math.min(a.i,o.i),a.merged=!0}return tf}var nf,nx;function W3(){if(nx)return nf;nx=1;var e=Ce(),n=Fe();nf=r;function r(a,s){var c=n.partition(a,function(x){return e.has(x,"barycenter")}),u=c.lhs,l=e.sortBy(c.rhs,function(x){return-x.i}),d=[],f=0,h=0,p=0;u.sort(o(!!s)),p=i(d,l,p),e.forEach(u,function(x){p+=x.vs.length,d.push(x.vs),f+=x.barycenter*x.weight,h+=x.weight,p=i(d,l,p)});var y={vs:e.flatten(d,!0)};return h&&(y.barycenter=f/h,y.weight=h),y}function i(a,s,c){for(var u;s.length&&(u=e.last(s)).i<=c;)s.pop(),a.push(u.vs),c++;return c}function o(a){return function(s,c){return s.barycenter<c.barycenter?-1:s.barycenter>c.barycenter?1:a?c.i-s.i:s.i-c.i}}return nf}var rf,rx;function K3(){if(rx)return rf;rx=1;var e=Ce(),n=G3(),r=U3(),i=W3();rf=o;function o(c,u,l,d){var f=c.children(u),h=c.node(u),p=h?h.borderLeft:void 0,y=h?h.borderRight:void 0,x={};p&&(f=e.filter(f,function(S){return S!==p&&S!==y}));var v=n(c,f);e.forEach(v,function(S){if(c.children(S.v).length){var C=o(c,S.v,l,d);x[S.v]=C,e.has(C,"barycenter")&&s(S,C)}});var g=r(v,l);a(g,x);var _=i(g,d);if(p&&(_.vs=e.flatten([p,_.vs,y],!0),c.predecessors(p).length)){var b=c.node(c.predecessors(p)[0]),w=c.node(c.predecessors(y)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+b.order+w.order)/(_.weight+2),_.weight+=2}return _}function a(c,u){e.forEach(c,function(l){l.vs=e.flatten(l.vs.map(function(d){return u[d]?u[d].vs:d}),!0)})}function s(c,u){e.isUndefined(c.barycenter)?(c.barycenter=u.barycenter,c.weight=u.weight):(c.barycenter=(c.barycenter*c.weight+u.barycenter*u.weight)/(c.weight+u.weight),c.weight+=u.weight)}return rf}var of,ix;function Y3(){if(ix)return of;ix=1;var e=Ce(),n=ft().Graph;of=r;function r(o,a,s){var c=i(o),u=new n({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(l){return o.node(l)});return e.forEach(o.nodes(),function(l){var d=o.node(l),f=o.parent(l);(d.rank===a||d.minRank<=a&&a<=d.maxRank)&&(u.setNode(l),u.setParent(l,f||c),e.forEach(o[s](l),function(h){var p=h.v===l?h.w:h.v,y=u.edge(p,l),x=e.isUndefined(y)?0:y.weight;u.setEdge(p,l,{weight:o.edge(h).weight+x})}),e.has(d,"minRank")&&u.setNode(l,{borderLeft:d.borderLeft[a],borderRight:d.borderRight[a]}))}),u}function i(o){for(var a;o.hasNode(a=e.uniqueId("_root")););return a}return of}var af,ox;function X3(){if(ox)return af;ox=1;var e=Ce();af=n;function n(r,i,o){var a={},s;e.forEach(o,function(c){for(var u=r.parent(c),l,d;u;){if(l=r.parent(u),l?(d=a[l],a[l]=u):(d=s,s=u),d&&d!==u){i.setEdge(d,u);return}u=l}})}return af}var sf,ax;function Z3(){if(ax)return sf;ax=1;var e=Ce(),n=B3(),r=V3(),i=K3(),o=Y3(),a=X3(),s=ft().Graph,c=Fe();sf=u;function u(h){var p=c.maxRank(h),y=l(h,e.range(1,p+1),"inEdges"),x=l(h,e.range(p-1,-1,-1),"outEdges"),v=n(h);f(h,v);for(var g=Number.POSITIVE_INFINITY,_,b=0,w=0;w<4;++b,++w){d(b%2?y:x,b%4>=2),v=c.buildLayerMatrix(h);var S=r(h,v);S<g&&(w=0,_=e.cloneDeep(v),g=S)}f(h,_)}function l(h,p,y){return e.map(p,function(x){return o(h,x,y)})}function d(h,p){var y=new s;e.forEach(h,function(x){var v=x.graph().root,g=i(x,v,y,p);e.forEach(g.vs,function(_,b){x.node(_).order=b}),a(x,y,g.vs)})}function f(h,p){e.forEach(p,function(y){e.forEach(y,function(x,v){h.node(x).order=v})})}return sf}var cf,sx;function J3(){if(sx)return cf;sx=1;var e=Ce(),n=ft().Graph,r=Fe();cf={positionX:y,findType1Conflicts:i,findType2Conflicts:o,addConflict:s,hasConflict:c,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:p};function i(g,_){var b={};function w(S,C){var E=0,N=0,A=S.length,R=e.last(C);return e.forEach(C,function(k,P){var O=a(g,k),M=O?g.node(O).order:A;(O||k===R)&&(e.forEach(C.slice(N,P+1),function(T){e.forEach(g.predecessors(T),function(q){var B=g.node(q),F=B.order;(F<E||M<F)&&!(B.dummy&&g.node(T).dummy)&&s(b,q,T)})}),N=P+1,E=M)}),C}return e.reduce(_,w),b}function o(g,_){var b={};function w(C,E,N,A,R){var k;e.forEach(e.range(E,N),function(P){k=C[P],g.node(k).dummy&&e.forEach(g.predecessors(k),function(O){var M=g.node(O);M.dummy&&(M.order<A||M.order>R)&&s(b,O,k)})})}function S(C,E){var N=-1,A,R=0;return e.forEach(E,function(k,P){if(g.node(k).dummy==="border"){var O=g.predecessors(k);O.length&&(A=g.node(O[0]).order,w(E,R,P,N,A),R=P,N=A)}w(E,R,E.length,A,C.length)}),E}return e.reduce(_,S),b}function a(g,_){if(g.node(_).dummy)return e.find(g.predecessors(_),function(b){return g.node(b).dummy})}function s(g,_,b){if(_>b){var w=_;_=b,b=w}var S=g[_];S||(g[_]=S={}),S[b]=!0}function c(g,_,b){if(_>b){var w=_;_=b,b=w}return e.has(g[_],b)}function u(g,_,b,w){var S={},C={},E={};return e.forEach(_,function(N){e.forEach(N,function(A,R){S[A]=A,C[A]=A,E[A]=R})}),e.forEach(_,function(N){var A=-1;e.forEach(N,function(R){var k=w(R);if(k.length){k=e.sortBy(k,function(q){return E[q]});for(var P=(k.length-1)/2,O=Math.floor(P),M=Math.ceil(P);O<=M;++O){var T=k[O];C[R]===R&&A<E[T]&&!c(b,R,T)&&(C[T]=R,C[R]=S[R]=S[T],A=E[T])}}})}),{root:S,align:C}}function l(g,_,b,w,S){var C={},E=d(g,_,b,S),N=S?"borderLeft":"borderRight";function A(P,O){for(var M=E.nodes(),T=M.pop(),q={};T;)q[T]?P(T):(q[T]=!0,M.push(T),M=M.concat(O(T))),T=M.pop()}function R(P){C[P]=E.inEdges(P).reduce(function(O,M){return Math.max(O,C[M.v]+E.edge(M))},0)}function k(P){var O=E.outEdges(P).reduce(function(T,q){return Math.min(T,C[q.w]-E.edge(q))},Number.POSITIVE_INFINITY),M=g.node(P);O!==Number.POSITIVE_INFINITY&&M.borderType!==N&&(C[P]=Math.max(C[P],O))}return A(R,E.predecessors.bind(E)),A(k,E.successors.bind(E)),e.forEach(w,function(P){C[P]=C[b[P]]}),C}function d(g,_,b,w){var S=new n,C=g.graph(),E=x(C.nodesep,C.edgesep,w);return e.forEach(_,function(N){var A;e.forEach(N,function(R){var k=b[R];if(S.setNode(k),A){var P=b[A],O=S.edge(P,k);S.setEdge(P,k,Math.max(E(g,R,A),O||0))}A=R})}),S}function f(g,_){return e.minBy(e.values(_),function(b){var w=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;return e.forIn(b,function(C,E){var N=v(g,E)/2;w=Math.max(C+N,w),S=Math.min(C-N,S)}),w-S})}function h(g,_){var b=e.values(_),w=e.min(b),S=e.max(b);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(E){var N=C+E,A=g[N],R;if(A!==_){var k=e.values(A);R=E==="l"?w-e.min(k):S-e.max(k),R&&(g[N]=e.mapValues(A,function(P){return P+R}))}})})}function p(g,_){return e.mapValues(g.ul,function(b,w){if(_)return g[_.toLowerCase()][w];var S=e.sortBy(e.map(g,w));return(S[1]+S[2])/2})}function y(g){var _=r.buildLayerMatrix(g),b=e.merge(i(g,_),o(g,_)),w={},S;e.forEach(["u","d"],function(E){S=E==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(N){N==="r"&&(S=e.map(S,function(P){return e.values(P).reverse()}));var A=(E==="u"?g.predecessors:g.successors).bind(g),R=u(g,S,b,A),k=l(g,S,R.root,R.align,N==="r");N==="r"&&(k=e.mapValues(k,function(P){return-P})),w[E+N]=k})});var C=f(g,w);return h(w,C),p(w,g.graph().align)}function x(g,_,b){return function(w,S,C){var E=w.node(S),N=w.node(C),A=0,R;if(A+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":R=-E.width/2;break;case"r":R=E.width/2;break}if(R&&(A+=b?R:-R),R=0,A+=(E.dummy?_:g)/2,A+=(N.dummy?_:g)/2,A+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":R=N.width/2;break;case"r":R=-N.width/2;break}return R&&(A+=b?R:-R),R=0,A}}function v(g,_){return g.node(_).width}return cf}var uf,cx;function Q3(){if(cx)return uf;cx=1;var e=Ce(),n=Fe(),r=J3().positionX;uf=i;function i(a){a=n.asNonCompoundGraph(a),o(a),e.forEach(r(a),function(s,c){a.node(c).x=s})}function o(a){var s=n.buildLayerMatrix(a),c=a.graph().ranksep,u=0;e.forEach(s,function(l){var d=e.max(e.map(l,function(f){return a.node(f).height}));e.forEach(l,function(f){a.node(f).y=u+d/2}),u+=d+c})}return uf}var lf,ux;function e5(){if(ux)return lf;ux=1;var e=Ce(),n=O3(),r=q3(),i=z3(),o=Fe().normalizeRanks,a=L3(),s=Fe().removeEmptyRanks,c=$3(),u=F3(),l=H3(),d=Z3(),f=Q3(),h=Fe(),p=ft().Graph;lf=y;function y(I,z){var L=z&&z.debugTiming?h.time:h.notime;L("layout",function(){var H=L("  buildLayoutGraph",function(){return A(I)});L("  runLayout",function(){x(H,L)}),L("  updateInputGraph",function(){v(I,H)})})}function x(I,z){z("    makeSpaceForEdgeLabels",function(){R(I)}),z("    removeSelfEdges",function(){G(I)}),z("    acyclic",function(){n.run(I)}),z("    nestingGraph.run",function(){c.run(I)}),z("    rank",function(){i(h.asNonCompoundGraph(I))}),z("    injectEdgeLabelProxies",function(){k(I)}),z("    removeEmptyRanks",function(){s(I)}),z("    nestingGraph.cleanup",function(){c.cleanup(I)}),z("    normalizeRanks",function(){o(I)}),z("    assignRankMinMax",function(){P(I)}),z("    removeEdgeLabelProxies",function(){O(I)}),z("    normalize.run",function(){r.run(I)}),z("    parentDummyChains",function(){a(I)}),z("    addBorderSegments",function(){u(I)}),z("    order",function(){d(I)}),z("    insertSelfEdges",function(){V(I)}),z("    adjustCoordinateSystem",function(){l.adjust(I)}),z("    position",function(){f(I)}),z("    positionSelfEdges",function(){K(I)}),z("    removeBorderNodes",function(){F(I)}),z("    normalize.undo",function(){r.undo(I)}),z("    fixupEdgeLabelCoords",function(){q(I)}),z("    undoCoordinateSystem",function(){l.undo(I)}),z("    translateGraph",function(){M(I)}),z("    assignNodeIntersects",function(){T(I)}),z("    reversePoints",function(){B(I)}),z("    acyclic.undo",function(){n.undo(I)})}function v(I,z){e.forEach(I.nodes(),function(L){var H=I.node(L),U=z.node(L);H&&(H.x=U.x,H.y=U.y,z.children(L).length&&(H.width=U.width,H.height=U.height))}),e.forEach(I.edges(),function(L){var H=I.edge(L),U=z.edge(L);H.points=U.points,e.has(U,"x")&&(H.x=U.x,H.y=U.y)}),I.graph().width=z.graph().width,I.graph().height=z.graph().height}var g=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],S={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function A(I){var z=new p({multigraph:!0,compound:!0}),L=D(I.graph());return z.setGraph(e.merge({},_,W(L,g),e.pick(L,b))),e.forEach(I.nodes(),function(H){var U=D(I.node(H));z.setNode(H,e.defaults(W(U,w),S)),z.setParent(H,I.parent(H))}),e.forEach(I.edges(),function(H){var U=D(I.edge(H));z.setEdge(H,e.merge({},E,W(U,C),e.pick(U,N)))}),z}function R(I){var z=I.graph();z.ranksep/=2,e.forEach(I.edges(),function(L){var H=I.edge(L);H.minlen*=2,H.labelpos.toLowerCase()!=="c"&&(z.rankdir==="TB"||z.rankdir==="BT"?H.width+=H.labeloffset:H.height+=H.labeloffset)})}function k(I){e.forEach(I.edges(),function(z){var L=I.edge(z);if(L.width&&L.height){var H=I.node(z.v),U=I.node(z.w),Y={rank:(U.rank-H.rank)/2+H.rank,e:z};h.addDummyNode(I,"edge-proxy",Y,"_ep")}})}function P(I){var z=0;e.forEach(I.nodes(),function(L){var H=I.node(L);H.borderTop&&(H.minRank=I.node(H.borderTop).rank,H.maxRank=I.node(H.borderBottom).rank,z=e.max(z,H.maxRank))}),I.graph().maxRank=z}function O(I){e.forEach(I.nodes(),function(z){var L=I.node(z);L.dummy==="edge-proxy"&&(I.edge(L.e).labelRank=L.rank,I.removeNode(z))})}function M(I){var z=Number.POSITIVE_INFINITY,L=0,H=Number.POSITIVE_INFINITY,U=0,Y=I.graph(),J=Y.marginx||0,te=Y.marginy||0;function ne(Q){var ie=Q.x,re=Q.y,le=Q.width,se=Q.height;z=Math.min(z,ie-le/2),L=Math.max(L,ie+le/2),H=Math.min(H,re-se/2),U=Math.max(U,re+se/2)}e.forEach(I.nodes(),function(Q){ne(I.node(Q))}),e.forEach(I.edges(),function(Q){var ie=I.edge(Q);e.has(ie,"x")&&ne(ie)}),z-=J,H-=te,e.forEach(I.nodes(),function(Q){var ie=I.node(Q);ie.x-=z,ie.y-=H}),e.forEach(I.edges(),function(Q){var ie=I.edge(Q);e.forEach(ie.points,function(re){re.x-=z,re.y-=H}),e.has(ie,"x")&&(ie.x-=z),e.has(ie,"y")&&(ie.y-=H)}),Y.width=L-z+J,Y.height=U-H+te}function T(I){e.forEach(I.edges(),function(z){var L=I.edge(z),H=I.node(z.v),U=I.node(z.w),Y,J;L.points?(Y=L.points[0],J=L.points[L.points.length-1]):(L.points=[],Y=U,J=H),L.points.unshift(h.intersectRect(H,Y)),L.points.push(h.intersectRect(U,J))})}function q(I){e.forEach(I.edges(),function(z){var L=I.edge(z);if(e.has(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function B(I){e.forEach(I.edges(),function(z){var L=I.edge(z);L.reversed&&L.points.reverse()})}function F(I){e.forEach(I.nodes(),function(z){if(I.children(z).length){var L=I.node(z),H=I.node(L.borderTop),U=I.node(L.borderBottom),Y=I.node(e.last(L.borderLeft)),J=I.node(e.last(L.borderRight));L.width=Math.abs(J.x-Y.x),L.height=Math.abs(U.y-H.y),L.x=Y.x+L.width/2,L.y=H.y+L.height/2}}),e.forEach(I.nodes(),function(z){I.node(z).dummy==="border"&&I.removeNode(z)})}function G(I){e.forEach(I.edges(),function(z){if(z.v===z.w){var L=I.node(z.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:z,label:I.edge(z)}),I.removeEdge(z)}})}function V(I){var z=h.buildLayerMatrix(I);e.forEach(z,function(L){var H=0;e.forEach(L,function(U,Y){var J=I.node(U);J.order=Y+H,e.forEach(J.selfEdges,function(te){h.addDummyNode(I,"selfedge",{width:te.label.width,height:te.label.height,rank:J.rank,order:Y+ ++H,e:te.e,label:te.label},"_se")}),delete J.selfEdges})})}function K(I){e.forEach(I.nodes(),function(z){var L=I.node(z);if(L.dummy==="selfedge"){var H=I.node(L.e.v),U=H.x+H.width/2,Y=H.y,J=L.x-U,te=H.height/2;I.setEdge(L.e,L.label),I.removeNode(z),L.label.points=[{x:U+2*J/3,y:Y-te},{x:U+5*J/6,y:Y-te},{x:U+J,y:Y},{x:U+5*J/6,y:Y+te},{x:U+2*J/3,y:Y+te}],L.label.x=L.x,L.label.y=L.y}})}function W(I,z){return e.mapValues(e.pick(I,z),Number)}function D(I){var z={};return e.forEach(I,function(L,H){z[H.toLowerCase()]=L}),z}return lf}var ff,lx;function t5(){if(lx)return ff;lx=1;var e=Ce(),n=Fe(),r=ft().Graph;ff={debugOrdering:i};function i(o){var a=n.buildLayerMatrix(o),s=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(c){s.setNode(c,{label:c}),s.setParent(c,"layer"+o.node(c).rank)}),e.forEach(o.edges(),function(c){s.setEdge(c.v,c.w,{},c.name)}),e.forEach(a,function(c,u){var l="layer"+u;s.setNode(l,{rank:"same"}),e.reduce(c,function(d,f){return s.setEdge(d,f,{style:"invis"}),f})}),s}return ff}var df,fx;function n5(){return fx||(fx=1,df="0.8.5"),df}var hf,dx;function r5(){return dx||(dx=1,hf={graphlib:ft(),layout:e5(),debug:t5(),util:{time:Fe().time,notime:Fe().notime},version:n5()}),hf}var i5=r5();const hx=ad(i5),o5=/^graph\s+(TD|TB|LR|RL|BT)/i,a5=/^\s*(\w+)\["([^"]+)"\]/,s5=/^\s*(\w+)\(["']?([^)"']+)["']?\)/,c5=/^\s*(\w+)\{["']?([^}"']+)["']?\}/,u5=/^\s*(\w+)\s*-->\s*\|([^|]+)\|\s*(\w+)/,l5=/^\s*(\w+)\s*-->\s*(\w+)/,f5=/^\s*(\w+)\s*-->\s*(\w+)\["([^"]+)"\]/;function d5(e){const n=e.split(`
`).map(c=>c.trim()).filter(Boolean);let r="TB";const i=new Map,o=[];let a=0;for(const c of n){const u=c.match(o5);if(u){const x=u[1].toUpperCase();r=x==="LR"||x==="RL"?"LR":"TB";continue}if(/^(subgraph|end|style|class|classDef|linkStyle)\b/i.test(c))continue;const l=c.match(u5);if(l){const[,x,v,g]=l;i.has(x)||i.set(x,x),i.has(g)||i.set(g,g),o.push({id:`e${a++}`,source:x,target:g,label:v.trim()});continue}const d=c.match(f5);if(d){const[,x,v,g]=d;i.has(x)||i.set(x,x),i.set(v,g),o.push({id:`e${a++}`,source:x,target:v});continue}const f=c.match(l5);if(f){const[,x,v]=f;i.has(x)||i.set(x,x),i.has(v)||i.set(v,v),o.push({id:`e${a++}`,source:x,target:v});continue}const h=c.match(a5);if(h){const[,x,v]=h;i.set(x,v);continue}const p=c.match(s5);if(p){const[,x,v]=p;i.set(x,v);continue}const y=c.match(c5);if(y){const[,x,v]=y;i.set(x,v);continue}}return{nodes:Array.from(i.entries()).map(([c,u])=>({id:c,type:"arcade",position:{x:0,y:0},data:{label:u}})),edges:o,direction:r}}function pf(e,n,r="TB"){const i=[`graph ${r}`];for(const o of e){const a=o.data.label||o.id;i.push(`    ${o.id}["${a}"]`)}i.push("");for(const o of n)o.label?i.push(`    ${o.source} -->|${o.label}| ${o.target}`):i.push(`    ${o.source} --> ${o.target}`);return i.join(`
`)}function gf(e,n,r){const{direction:i,nodeWidth:o=180,nodeHeight:a=50,rankSep:s=80,nodeSep:c=40}=r,u=new hx.graphlib.Graph;u.setDefaultEdgeLabel(()=>({})),u.setGraph({rankdir:i,ranksep:s,nodesep:c});for(const l of e)u.setNode(l.id,{width:o,height:a});for(const l of n)u.setEdge(l.source,l.target);return hx.layout(u),e.map(l=>{const d=u.node(l.id);return{...l,position:{x:d.x-o/2,y:d.y-a/2}}})}const h5=[{id:"basic-concept-map",name:"Concept Map",description:"Central concept with labeled branches",category:"concept-map",mermaid:`graph TD
    A["Central Concept"]
    B["Related Idea 1"]
    C["Related Idea 2"]
    D["Related Idea 3"]
    E["Related Idea 4"]
    A -->|"causes"| B
    A -->|"includes"| C
    A -->|"affects"| D
    B -->|"leads to"| E`},{id:"process-flowchart",name:"Process Flowchart",description:"Linear process with decision point",category:"flowchart",mermaid:`graph TD
    A["Start / Input"]
    B["Step 1"]
    C{"Decision?"}
    D["Path A"]
    E["Path B"]
    F["Outcome"]
    A --> B
    B --> C
    C -->|"Yes"| D
    C -->|"No"| E
    D --> F
    E --> F`},{id:"clinical-decision-tree",name:"Clinical Decision Tree",description:"Presentation to diagnosis reasoning",category:"decision-tree",mermaid:`graph TD
    A["Patient Presentation"]
    B{"Key Finding 1?"}
    C{"Key Finding 2?"}
    D["Differential A"]
    E["Differential B"]
    F["Confirm: Test X"]
    G["Confirm: Test Y"]
    A --> B
    B -->|"Present"| D
    B -->|"Absent"| C
    C -->|"Positive"| E
    C -->|"Negative"| D
    D --> F
    E --> G`},{id:"physiological-pathway",name:"Physiological Pathway",description:"Stimulus to response cascade",category:"pathway",mermaid:`graph TD
    A["Stimulus"]
    B["Receptor / Sensor"]
    C["Signal Transduction"]
    D["Effector Response"]
    E["Outcome / Adaptation"]
    F["Feedback Loop"]
    A --> B
    B --> C
    C --> D
    D --> E
    E -->|"negative feedback"| A
    E -->|"modulates"| F
    F --> B`},{id:"compare-contrast",name:"Compare & Contrast",description:"Two concepts with shared and unique features",category:"compare",mermaid:`graph LR
    A["Concept A"]
    B["Shared Feature 1"]
    C["Shared Feature 2"]
    D["Concept B"]
    E["Unique to A"]
    F["Unique to B"]
    A --> B
    D --> B
    A --> C
    D --> C
    A --> E
    D --> F`}],Gf=[{name:"Default",border:"border-secondary",bg:"bg-black/80",text:"text-secondary-foreground",hex:""},{name:"Red",border:"border-red-500",bg:"bg-red-500/10",text:"text-red-400",hex:"#ef4444"},{name:"Blue",border:"border-blue-500",bg:"bg-blue-500/10",text:"text-blue-400",hex:"#3b82f6"},{name:"Green",border:"border-green-500",bg:"bg-green-500/10",text:"text-green-400",hex:"#22c55e"},{name:"Yellow",border:"border-yellow-500",bg:"bg-yellow-500/10",text:"text-yellow-400",hex:"#eab308"},{name:"Purple",border:"border-purple-500",bg:"bg-purple-500/10",text:"text-purple-400",hex:"#a855f7"},{name:"Cyan",border:"border-cyan-400",bg:"bg-cyan-400/10",text:"text-cyan-400",hex:"#22d3ee"},{name:"Orange",border:"border-orange-500",bg:"bg-orange-500/10",text:"text-orange-400",hex:"#f97316"},{name:"Pink",border:"border-pink-500",bg:"bg-pink-500/10",text:"text-pink-400",hex:"#ec4899"}],p5=[{name:"Primary",stroke:"hsl(var(--primary))"},{name:"Red",stroke:"#ef4444"},{name:"Blue",stroke:"#3b82f6"},{name:"Green",stroke:"#22c55e"},{name:"Yellow",stroke:"#eab308"},{name:"Purple",stroke:"#a855f7"},{name:"Cyan",stroke:"#22d3ee"},{name:"Orange",stroke:"#f97316"},{name:"Pink",stroke:"#ec4899"}];function g5({data:e,selected:n}){const r=e.label,i=e.colorIdx||0,o=Gf[i]||Gf[0];return m.jsxs("div",{className:Ke("px-3 py-2 font-terminal text-xs border-2 rounded-none min-w-[100px] text-center",n?"border-primary text-primary ring-1 ring-primary":`${o.border} ${o.text}`,o.bg),children:[m.jsx(Bt,{type:"target",position:oe.Top,className:"!bg-primary !border-primary !w-2 !h-2"}),m.jsx(Bt,{type:"target",position:oe.Left,className:"!bg-primary !border-primary !w-2 !h-2"}),r,m.jsx(Bt,{type:"source",position:oe.Bottom,className:"!bg-primary !border-primary !w-2 !h-2"}),m.jsx(Bt,{type:"source",position:oe.Right,className:"!bg-primary !border-primary !w-2 !h-2"})]})}const m5={arcade:g5},y5={type:"smoothstep",style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:zn.ArrowClosed,color:"hsl(var(--primary))"}};function v5({initialMermaid:e,onSave:n,className:r}){const[i,o,a]=_M([]),[s,c,u]=wM([]),[l,d]=j.useState("TB"),[f,h]=j.useState(!e&&i.length===0),[p,y]=j.useState(e||""),[x,v]=j.useState(0),[g,_]=j.useState(!1),[b,w]=j.useState(null),S=j.useRef(null),{toast:C}=Di();j.useEffect(()=>{if(!g)return;const V=K=>{K.key==="Escape"&&_(!1)};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[g]);const E=j.useCallback(V=>{c(K=>K_(V,K))},[c]),N=j.useCallback(V=>{if(!V.trim())return;const K=d5(V);d(K.direction);const W=gf(K.nodes,K.edges,{direction:K.direction});o(W),c(K.edges),v(K.nodes.length),h(!1)},[o,c]),A=j.useCallback(()=>{const V=gf(i,s,{direction:l});o(V)},[i,s,l,o]),R=j.useCallback(()=>{const V=l==="TB"?"LR":"TB";d(V);const K=gf(i,s,{direction:V});o(K)},[l,i,s,o]),k=j.useCallback(()=>{const V=`N${x+1}`;v(W=>W+1);const K={id:V,type:"arcade",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{label:`New Node ${x+1}`,colorIdx:0}};o(W=>[...W,K])},[x,o]),P=j.useCallback(()=>{o(V=>V.filter(K=>!K.selected)),c(V=>V.filter(K=>!K.selected))},[o,c]),O=j.useCallback(V=>{o(K=>K.map(W=>W.selected?{...W,data:{...W.data,colorIdx:V}}:W)),w(null)},[o]),M=j.useCallback(V=>{c(K=>K.map(W=>W.selected?{...W,style:{...W.style,stroke:V,strokeWidth:2},markerEnd:{type:zn.ArrowClosed,color:V}}:W)),w(null)},[c]),T=j.useCallback(async()=>{if(S.current)try{const V=S.current.querySelector(".react-flow__viewport");if(!V)return;const K=await Z1(V,{backgroundColor:"#000",quality:1}),W=document.createElement("a");W.download="concept-map.png",W.href=K,W.click(),C({title:"PNG exported"})}catch(V){C({title:"Export failed",description:String(V),variant:"destructive"})}},[C]),q=j.useCallback(()=>{const V=pf(i,s,l);navigator.clipboard.writeText(V),C({title:"Mermaid copied to clipboard"})},[i,s,l,C]),B=j.useCallback(async()=>{const V=pf(i,s,l),K=(i[0]?.data?.label||"Untitled").replace(/[/\\?%*:|"<>]/g,"-"),W=`---
type: concept-map
created: ${new Date().toISOString()}
---

# ${K} Concept Map

\`\`\`mermaid
${V}
\`\`\`
`,D=`Concept Maps/${K}.md`;try{await pe.obsidian.saveFile(D,W),C({title:"Saved to vault",description:D}),n?.(V)}catch(I){C({title:"Save failed",description:String(I),variant:"destructive"})}},[i,s,l,C,n]),F=j.useCallback(()=>{h(!0),y(i.length>0?pf(i,s,l):"")},[i,s,l]);return f&&i.length===0?m.jsxs("div",{className:Ke("flex flex-col items-center h-full p-4 gap-3 overflow-auto",r),children:[m.jsx("p",{className:"font-arcade text-[10px] text-primary",children:"CONCEPT MAP EDITOR"}),m.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground",children:"START FROM TEMPLATE"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-md",children:h5.map(V=>m.jsxs("button",{onClick:()=>N(V.mermaid),className:"border-2 border-secondary/50 hover:border-primary p-3 cursor-pointer text-left transition-colors bg-black/40",children:[m.jsx("p",{className:"font-terminal text-[10px] text-primary",children:V.name}),m.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground mt-0.5",children:V.description})]},V.id))}),m.jsx("div",{className:"w-px h-2"}),m.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground",children:"OR PASTE MERMAID CODE"}),m.jsx(kf,{value:p,onChange:V=>y(V.target.value),placeholder:`graph TD
    A["Main Topic"]
    B["Subtopic 1"]
    C["Subtopic 2"]
    A --> B
    A --> C`,className:"w-full max-w-md h-32 font-mono text-xs rounded-none border-secondary bg-black/60"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(fe,{size:"sm",className:"font-terminal text-xs rounded-none",onClick:()=>N(p),disabled:!p.trim(),children:[m.jsx(wh,{className:"w-3 h-3 mr-1"}),"Import"]}),m.jsxs(fe,{size:"sm",variant:"outline",className:"font-terminal text-xs rounded-none",onClick:()=>{h(!1),k()},children:[m.jsx(hi,{className:"w-3 h-3 mr-1"}),"Blank Canvas"]})]})]}):m.jsxs("div",{className:Ke("flex flex-col",g?"fixed inset-0 z-[100010] bg-black":"h-full",r),children:[m.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:F,title:"Back to import",children:m.jsx(mb,{className:"w-3 h-3"})}),m.jsx("div",{className:"w-px h-4 bg-secondary/30"}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:k,title:"Add node",children:m.jsx(hi,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:P,title:"Delete selected",children:m.jsx(yr,{className:"w-3 h-3"})}),m.jsxs("div",{className:"relative",children:[m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>w(b?null:"node"),title:"Color selected",children:m.jsx(zC,{className:"w-3 h-3"})}),b&&m.jsxs("div",{className:"absolute top-full left-0 mt-1 p-2 bg-black border-2 border-primary/50 z-50 space-y-2 min-w-[160px]",children:[m.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground",children:"NODE COLORS"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Gf.map((V,K)=>m.jsx("button",{onClick:()=>O(K),className:Ke("w-5 h-5 border-2 rounded-none",V.border,V.bg),title:V.name},V.name))}),m.jsx("p",{className:"font-terminal text-[9px] text-muted-foreground pt-1",children:"EDGE COLORS"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:p5.map(V=>m.jsx("button",{onClick:()=>M(V.stroke),className:"w-5 h-5 border-2 border-secondary/50 rounded-none",style:{backgroundColor:V.stroke},title:V.name},V.name))})]})]}),m.jsx("div",{className:"w-px h-4 bg-secondary/30"}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:A,title:"Auto layout",children:m.jsx(MC,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:R,title:`Direction: ${l}`,children:l==="TB"?m.jsx(gC,{className:"w-3 h-3"}):m.jsx(dC,{className:"w-3 h-3"})}),m.jsx("div",{className:"w-px h-4 bg-secondary/30"}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:q,title:"Copy Mermaid",children:m.jsx(Li,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:T,title:"Export PNG",children:m.jsx($i,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:B,title:"Save to vault",children:m.jsx(zi,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>_(!g),title:g?"Exit fullscreen":"Fullscreen",children:g?m.jsx(vb,{className:"w-3 h-3"}):m.jsx(yb,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:()=>{h(!0),o([]),c([])},title:"Import Mermaid",children:m.jsx(wh,{className:"w-3 h-3"})}),m.jsxs("span",{className:"ml-auto text-[9px] font-terminal text-muted-foreground",children:[i.length,"N / ",s.length,"E"]})]}),m.jsx("div",{className:"flex-1 min-h-0",ref:S,children:m.jsxs(bM,{nodes:i,edges:s,onNodesChange:a,onEdgesChange:u,onConnect:E,nodeTypes:m5,defaultEdgeOptions:y5,fitView:!0,className:"bg-black/80",proOptions:{hideAttribution:!0},onPaneClick:()=>w(null),children:[m.jsx(kM,{color:"hsl(var(--primary) / 0.1)",gap:20}),m.jsx(TM,{className:"!bg-black !border-primary [&_button]:!bg-black/80 [&_button]:!border-primary/50 [&_button]:!text-primary"}),m.jsx(WM,{className:"!bg-black/80 !border-primary",nodeColor:"hsl(var(--primary))",maskColor:"rgba(0,0,0,0.5)"})]})})]})}function x5(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function b5(e,n,r){return n=R5(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function px(e,n){return S5(e)||x5(e,n)||Zw(e,n)||N5()}function _5(e){return w5(e)||C5(e)||Zw(e)||E5()}function w5(e){if(Array.isArray(e))return Uf(e)}function S5(e){if(Array.isArray(e))return e}function C5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zw(e,n){if(e){if(typeof e=="string")return Uf(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uf(e,n)}}function Uf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}function E5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function R5(e){var n=k5(e,"string");return typeof n=="symbol"?n:String(n)}var A5=function(n,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(_5(Object.entries(n).filter(function(o){var a=px(o,1),s=a[0];return!i.has(s)}).map(function(o){var a=px(o,2),s=a[0],c=a[1];return b5({},s,c)}))))};function Wf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function j5(e){if(Array.isArray(e))return e}function P5(e){if(Array.isArray(e))return Wf(e)}function M5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I5(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function T5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5(e,n){return j5(e)||I5(e,n)||Jw(e,n)||T5()}function gx(e){return P5(e)||M5(e)||Jw(e)||O5()}function Jw(e,n){if(e){if(typeof e=="string")return Wf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wf(e,n):void 0}}function D5(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,i=r===void 0?"div":r,o=n.nodeMapper,a=o===void 0?function(d){return d}:o,s=n.methodNames,c=s===void 0?[]:s,u=n.initPropNames,l=u===void 0?[]:u;return j.forwardRef(function(d,f){var h=j.useRef(),p=j.useMemo(function(){var v=Object.fromEntries(l.filter(function(g){return d.hasOwnProperty(g)}).map(function(g){return[g,d[g]]}));return e(v)},[]);mx(function(){p(a(h.current))},j.useLayoutEffect),mx(function(){return p._destructor instanceof Function?p._destructor:void 0});var y=j.useCallback(function(v){for(var g=arguments.length,_=new Array(g>1?g-1:0),b=1;b<g;b++)_[b-1]=arguments[b];return p[v]instanceof Function?p[v].apply(p,_):void 0},[p]),x=j.useRef({});return Object.keys(A5(d,[].concat(gx(c),gx(l)))).filter(function(v){return x.current[v]!==d[v]}).forEach(function(v){return y(v,d[v])}),x.current=d,j.useImperativeHandle(f,function(){return Object.fromEntries(c.map(function(v){return[v,function(){for(var g=arguments.length,_=new Array(g),b=0;b<g;b++)_[b]=arguments[b];return y.apply(void 0,[v].concat(_))}]}))},[y]),lb.createElement(i,{ref:h})})}function mx(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j.useEffect,r=j.useRef(),i=j.useRef(!1),o=j.useRef(!1),a=j.useState(0),s=q5(a,2);s[0];var c=s[1];i.current&&(o.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),c(function(u){return u+1}),function(){o.current&&r.current&&r.current()}},[])}class yx extends Map{constructor(n,r=$5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,o]of n)this.set(i,o)}get(n){return super.get(vx(this,n))}has(n){return super.has(vx(this,n))}set(n,r){return super.set(z5(this,n),r)}delete(n){return super.delete(L5(this,n))}}function vx({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function z5({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function L5({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function $5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xx(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function bx(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function F5(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var H5=typeof global=="object"&&global&&global.Object===Object&&global,B5=typeof self=="object"&&self&&self.Object===Object&&self,Qw=H5||B5||Function("return this")(),Ai=Qw.Symbol,eS=Object.prototype,V5=eS.hasOwnProperty,G5=eS.toString,Zn=Ai?Ai.toStringTag:void 0;function U5(e){var n=V5.call(e,Zn),r=e[Zn];try{e[Zn]=void 0;var i=!0}catch{}var o=G5.call(e);return i&&(n?e[Zn]=r:delete e[Zn]),o}var W5=Object.prototype,K5=W5.toString;function Y5(e){return K5.call(e)}var X5="[object Null]",Z5="[object Undefined]",_x=Ai?Ai.toStringTag:void 0;function J5(e){return e==null?e===void 0?Z5:X5:_x&&_x in Object(e)?U5(e):Y5(e)}function Q5(e){return e!=null&&typeof e=="object"}var eq="[object Symbol]";function tq(e){return typeof e=="symbol"||Q5(e)&&J5(e)==eq}var nq=/\s/;function rq(e){for(var n=e.length;n--&&nq.test(e.charAt(n)););return n}var iq=/^\s+/;function oq(e){return e&&e.slice(0,rq(e)+1).replace(iq,"")}function ji(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var wx=NaN,aq=/^[-+]0x[0-9a-f]+$/i,sq=/^0b[01]+$/i,cq=/^0o[0-7]+$/i,uq=parseInt;function Sx(e){if(typeof e=="number")return e;if(tq(e))return wx;if(ji(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ji(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=oq(e);var r=sq.test(e);return r||cq.test(e)?uq(e.slice(2),r?2:8):aq.test(e)?wx:+e}var mf=function(){return Qw.Date.now()},lq="Expected a function",fq=Math.max,dq=Math.min;function tS(e,n,r){var i,o,a,s,c,u,l=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(lq);n=Sx(n)||0,ji(r)&&(d=!!r.leading,f="maxWait"in r,a=f?fq(Sx(r.maxWait)||0,n):a,h="trailing"in r?!!r.trailing:h);function p(C){var E=i,N=o;return i=o=void 0,l=C,s=e.apply(N,E),s}function y(C){return l=C,c=setTimeout(g,n),d?p(C):s}function x(C){var E=C-u,N=C-l,A=n-E;return f?dq(A,a-N):A}function v(C){var E=C-u,N=C-l;return u===void 0||E>=n||E<0||f&&N>=a}function g(){var C=mf();if(v(C))return _(C);c=setTimeout(g,x(C))}function _(C){return c=void 0,h&&i?p(C):(i=o=void 0,s)}function b(){c!==void 0&&clearTimeout(c),l=0,i=u=o=c=void 0}function w(){return c===void 0?s:_(mf())}function S(){var C=mf(),E=v(C);if(i=arguments,o=this,u=C,E){if(c===void 0)return y(u);if(f)return clearTimeout(c),c=setTimeout(g,n),p(u)}return c===void 0&&(c=setTimeout(g,n)),s}return S.cancel=b,S.flush=w,S}var hq="Expected a function";function pq(e,n,r){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(hq);return ji(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),tS(e,n,{leading:i,maxWait:n,trailing:o})}var sn=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-sn.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?sn.Bounce.In(e*2)*.5:sn.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),lr=function(){return performance.now()},nS=(function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];(n=s._group)===null||n===void 0||n.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=lr()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],s=!r;a&&a.update(n,s)===!1&&!r&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e})(),Kf={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=Kf.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},rS=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),Yf=new nS,Cx=(function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=sn.Linear.None,this._interpolationFunction=Kf.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=rS.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Yf,Yf.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=lr()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,o,a){for(var s in i){var c=n[s],u=Array.isArray(c),l=u?"array":typeof c,d=!u&&Array.isArray(i[s]);if(!(l==="undefined"||l==="function")){if(d){var f=i[s];if(f.length===0)continue;for(var h=[c],p=0,y=f.length;p<y;p+=1){var x=this._handleRelativeValue(c,f[p]);if(isNaN(x)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(x)}d&&(i[s]=h)}if((l==="object"||u)&&c&&!d){r[s]=u?[]:{};var v=c;for(var g in v)r[s][g]=v[g];o[s]=u?[]:{};var f=i[s];if(!this._isDynamic){var _={};for(var g in f)_[g]=f[g];i[s]=f=_}this._setupProperties(v,r[s],f,o[s],a)}else(typeof r[s]>"u"||a)&&(r[s]=c),u||(r[s]*=1),d?o[s]=i[s].slice().reverse():o[s]=r[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=lr()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=lr()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=sn.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=Kf.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,o;if(n===void 0&&(n=lr()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=n-this._startTime,c=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),u=this._duration+this._repeat*c,l=function(){if(i._duration===0||s>u)return 1;var x=Math.trunc(s/c),v=s-x*c,g=Math.min(v/i._duration,1);return g===0&&s===i._duration?1:g},d=l(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||s>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((s-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,y=this._chainedTweens.length;p<y;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,o){for(var a in i)if(r[a]!==void 0){var s=r[a]||0,c=i[a],u=Array.isArray(n[a]),l=Array.isArray(c),d=!u&&l;d?n[a]=this._interpolationFunction(c,o):typeof c=="object"&&c?this._updateProperties(n[a],s,c,o):(c=this._handleRelativeValue(s,c),typeof c=="number"&&(n[a]=s+(c-s)*o))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e})();rS.nextId;var vt=Yf;vt.getAll.bind(vt);vt.removeAll.bind(vt);vt.add.bind(vt);vt.remove.bind(vt);vt.update.bind(vt);function Ex(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function gq(e){if(Array.isArray(e))return e}function mq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function yq(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function vq(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bq(e,n){return gq(e)||vq(e,n)||_q(e,n)||xq()}function _q(e,n){if(e){if(typeof e=="string")return Ex(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ex(e,n):void 0}}var wq=yq(function e(n,r){var i=r.default,o=i===void 0?null:i,a=r.triggerUpdate,s=a===void 0?!0:a,c=r.onChange,u=c===void 0?function(l,d){}:c;mq(this,e),this.name=n,this.defaultVal=o,this.triggerUpdate=s,this.onChange=u});function ih(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,o=i===void 0?{}:i,a=e.methods,s=a===void 0?{}:a,c=e.aliases,u=c===void 0?{}:c,l=e.init,d=l===void 0?function(){}:l,f=e.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(y){return new wq(y,o[y])});return function y(){for(var x=arguments.length,v=new Array(x),g=0;g<x;g++)v[g]=arguments[g];var _=!!(this instanceof y&&this.constructor),b=_?v.shift():void 0,w=v[0],S=w===void 0?{}:w,C=Object.assign({},r instanceof Function?r(S):r,{initialised:!1}),E={};function N(k){return A(k,S),R(),N}var A=function(P,O){d.call(N,P,C,O),C.initialised=!0},R=tS(function(){C.initialised&&(h.call(N,C,E),E={})},1);return p.forEach(function(k){N[k.name]=P(k);function P(O){var M=O.name,T=O.triggerUpdate,q=T===void 0?!1:T,B=O.onChange,F=B===void 0?function(K,W){}:B,G=O.defaultVal,V=G===void 0?null:G;return function(K){var W=C[M];if(!arguments.length)return W;var D=K===void 0?V:K;return C[M]=D,F.call(N,D,C,W),!E.hasOwnProperty(M)&&(E[M]=W),q&&R(),N}}}),Object.keys(s).forEach(function(k){N[k]=function(){for(var P,O=arguments.length,M=new Array(O),T=0;T<O;T++)M[T]=arguments[T];return(P=s[k]).call.apply(P,[N,C].concat(M))}}),Object.entries(u).forEach(function(k){var P=bq(k,2),O=P[0],M=P[1];return N[O]=N[M]}),N.resetProps=function(){return p.forEach(function(k){N[k.name](k.defaultVal)}),N},N.resetProps(),C._rerender=R,_&&b&&N(b),N}}var ye=(function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}});function Pi(e){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pi(e)}var Sq=/^\s+/,Cq=/\s+$/;function ae(e,n){if(e=e||"",n=n||{},e instanceof ae)return e;if(!(this instanceof ae))return new ae(e,n);var r=Eq(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ae.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,o,a,s,c;return r=n.r/255,i=n.g/255,o=n.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),o<=.03928?c=o/12.92:c=Math.pow((o+.055)/1.055,2.4),.2126*a+.7152*s+.0722*c},setAlpha:function(n){return this._a=iS(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=kx(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=kx(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var n=Nx(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Nx(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(n){return Rx(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return Aq(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Fq[Rx(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+Ax(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(n){var a=ae(n);i="#"+Ax(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,o=this._a<1&&this._a>=0,a=!r&&o&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return a?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return ae(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Iq,arguments)},brighten:function(){return this._applyModification(Tq,arguments)},darken:function(){return this._applyModification(Oq,arguments)},desaturate:function(){return this._applyModification(jq,arguments)},saturate:function(){return this._applyModification(Pq,arguments)},greyscale:function(){return this._applyModification(Mq,arguments)},spin:function(){return this._applyModification(qq,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Lq,arguments)},complement:function(){return this._applyCombination(Dq,arguments)},monochromatic:function(){return this._applyCombination($q,arguments)},splitcomplement:function(){return this._applyCombination(zq,arguments)},triad:function(){return this._applyCombination(jx,[3])},tetrad:function(){return this._applyCombination(jx,[4])}};ae.fromRatio=function(e,n){if(Pi(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=fr(e[i]));e=r}return ae(e,n)};function Eq(e){var n={r:0,g:0,b:0},r=1,i=null,o=null,a=null,s=!1,c=!1;return typeof e=="string"&&(e=Gq(e)),Pi(e)=="object"&&(St(e.r)&&St(e.g)&&St(e.b)?(n=Nq(e.r,e.g,e.b),s=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):St(e.h)&&St(e.s)&&St(e.v)?(i=fr(e.s),o=fr(e.v),n=Rq(e.h,i,o),s=!0,c="hsv"):St(e.h)&&St(e.s)&&St(e.l)&&(i=fr(e.s),a=fr(e.l),n=kq(e.h,i,a),s=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=iS(r),{ok:s,format:e.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function Nq(e,n,r){return{r:be(e,255)*255,g:be(n,255)*255,b:be(r,255)*255}}function Nx(e,n,r){e=be(e,255),n=be(n,255),r=be(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,c=(i+o)/2;if(i==o)a=s=0;else{var u=i-o;switch(s=c>.5?u/(2-i-o):u/(i+o),i){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4;break}a/=6}return{h:a,s,l:c}}function kq(e,n,r){var i,o,a;e=be(e,360),n=be(n,100),r=be(r,100);function s(l,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+(d-l)*6*f:f<1/2?d:f<2/3?l+(d-l)*(2/3-f)*6:l}if(n===0)i=o=a=r;else{var c=r<.5?r*(1+n):r+n-r*n,u=2*r-c;i=s(u,c,e+1/3),o=s(u,c,e),a=s(u,c,e-1/3)}return{r:i*255,g:o*255,b:a*255}}function kx(e,n,r){e=be(e,255),n=be(n,255),r=be(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,c=i,u=i-o;if(s=i===0?0:u/i,i==o)a=0;else{switch(i){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4;break}a/=6}return{h:a,s,v:c}}function Rq(e,n,r){e=be(e,360)*6,n=be(n,100),r=be(r,100);var i=Math.floor(e),o=e-i,a=r*(1-n),s=r*(1-o*n),c=r*(1-(1-o)*n),u=i%6,l=[r,s,a,a,c,r][u],d=[c,r,r,s,a,a][u],f=[a,a,c,r,r,s][u];return{r:l*255,g:d*255,b:f*255}}function Rx(e,n,r,i){var o=[ut(Math.round(e).toString(16)),ut(Math.round(n).toString(16)),ut(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Aq(e,n,r,i,o){var a=[ut(Math.round(e).toString(16)),ut(Math.round(n).toString(16)),ut(Math.round(r).toString(16)),ut(oS(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Ax(e,n,r,i){var o=[ut(oS(i)),ut(Math.round(e).toString(16)),ut(Math.round(n).toString(16)),ut(Math.round(r).toString(16))];return o.join("")}ae.equals=function(e,n){return!e||!n?!1:ae(e).toRgbString()==ae(n).toRgbString()};ae.random=function(){return ae.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function jq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.s-=n/100,r.s=wo(r.s),ae(r)}function Pq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.s+=n/100,r.s=wo(r.s),ae(r)}function Mq(e){return ae(e).desaturate(100)}function Iq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.l+=n/100,r.l=wo(r.l),ae(r)}function Tq(e,n){n=n===0?0:n||10;var r=ae(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),ae(r)}function Oq(e,n){n=n===0?0:n||10;var r=ae(e).toHsl();return r.l-=n/100,r.l=wo(r.l),ae(r)}function qq(e,n){var r=ae(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,ae(r)}function Dq(e){var n=ae(e).toHsl();return n.h=(n.h+180)%360,ae(n)}function jx(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ae(e).toHsl(),i=[ae(e)],o=360/n,a=1;a<n;a++)i.push(ae({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function zq(e){var n=ae(e).toHsl(),r=n.h;return[ae(e),ae({h:(r+72)%360,s:n.s,l:n.l}),ae({h:(r+216)%360,s:n.s,l:n.l})]}function Lq(e,n,r){n=n||6,r=r||30;var i=ae(e).toHsl(),o=360/r,a=[ae(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(ae(i));return a}function $q(e,n){n=n||6;for(var r=ae(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],c=1/n;n--;)s.push(ae({h:i,s:o,v:a})),a=(a+c)%1;return s}ae.mix=function(e,n,r){r=r===0?0:r||50;var i=ae(e).toRgb(),o=ae(n).toRgb(),a=r/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return ae(s)};ae.readability=function(e,n){var r=ae(e),i=ae(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};ae.isReadable=function(e,n,r){var i=ae.readability(e,n),o,a;switch(a=!1,o=Uq(r),o.level+o.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};ae.mostReadable=function(e,n,r){var i=null,o=0,a,s,c,u;r=r||{},s=r.includeFallbackColors,c=r.level,u=r.size;for(var l=0;l<n.length;l++)a=ae.readability(e,n[l]),a>o&&(o=a,i=ae(n[l]));return ae.isReadable(e,i,{level:c,size:u})||!s?i:(r.includeFallbackColors=!1,ae.mostReadable(e,["#fff","#000"],r))};var Xf=ae.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Fq=ae.hexNames=Hq(Xf);function Hq(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function iS(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function be(e,n){Bq(e)&&(e="100%");var r=Vq(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function wo(e){return Math.min(1,Math.max(0,e))}function Ue(e){return parseInt(e,16)}function Bq(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Vq(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ut(e){return e.length==1?"0"+e:""+e}function fr(e){return e<=1&&(e=e*100+"%"),e}function oS(e){return Math.round(parseFloat(e)*255).toString(16)}function Px(e){return Ue(e)/255}var it=(function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function St(e){return!!it.CSS_UNIT.exec(e)}function Gq(e){e=e.replace(Sq,"").replace(Cq,"").toLowerCase();var n=!1;if(Xf[e])e=Xf[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=it.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=it.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=it.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=it.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=it.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=it.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=it.hex8.exec(e))?{r:Ue(r[1]),g:Ue(r[2]),b:Ue(r[3]),a:Px(r[4]),format:n?"name":"hex8"}:(r=it.hex6.exec(e))?{r:Ue(r[1]),g:Ue(r[2]),b:Ue(r[3]),format:n?"name":"hex"}:(r=it.hex4.exec(e))?{r:Ue(r[1]+""+r[1]),g:Ue(r[2]+""+r[2]),b:Ue(r[3]+""+r[3]),a:Px(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=it.hex3.exec(e))?{r:Ue(r[1]+""+r[1]),g:Ue(r[2]+""+r[2]),b:Ue(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function Uq(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function Zf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Wq(e){if(Array.isArray(e))return Zf(e)}function aS(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function Kq(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ze(e,n){return e.get(aS(e,n))}function Mx(e,n,r){Kq(e,n),n.set(e,r)}function Ix(e,n,r){return e.set(aS(e,n),r),r}function Xq(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,nD(i.key),i)}}function Zq(e,n,r){return n&&Xq(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eD(e){return Wq(e)||Jq(e)||rD(e)||Qq()}function tD(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nD(e){var n=tD(e,"string");return typeof n=="symbol"?n:n+""}function rD(e,n){if(e){if(typeof e=="string")return Zf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zf(e,n):void 0}}var iD=123,oD=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},sS=function(n,r,i){return(n<<16)+(r<<8)+i},aD=function(n){var r=ae(n).toRgb(),i=r.r,o=r.g,a=r.b;return sS(i,o,a)},Tx=function(n,r){return n*iD%Math.pow(2,r)},Zt=new WeakMap,Ct=new WeakMap,sD=(function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Yq(this,e),Mx(this,Zt,void 0),Mx(this,Ct,void 0),Ix(Ct,this,n),this.reset()}return Zq(e,[{key:"reset",value:function(){Ix(Zt,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ze(Zt,this).length>=Math.pow(2,24-Ze(Ct,this)))return null;var i=Ze(Zt,this).length,o=Tx(i,Ze(Ct,this)),a=oD(i+(o<<24-Ze(Ct,this)));return Ze(Zt,this).push(r),a}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?aD(r):sS.apply(void 0,eD(r));if(!i)return null;var o=i&Math.pow(2,24-Ze(Ct,this))-1,a=i>>24-Ze(Ct,this)&Math.pow(2,Ze(Ct,this))-1;return Tx(o,Ze(Ct,this))!==a||o>=Ze(Zt,this).length?null:Ze(Zt,this)[o]}}])})(),Vr,_e,cS,uS,en,Ox,lS,fS,dS,oh,Jf,Qf,jr={},hS=[],cD=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,So=Array.isArray;function gt(e,n){for(var r in n)e[r]=n[r];return e}function ah(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function uD(e,n,r){var i,o,a,s={};for(a in n)a=="key"?i=n[a]:a=="ref"?o=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?Vr.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return pr(e,s,i,o,null)}function pr(e,n,r,i,o){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++cS,__i:-1,__u:0};return o==null&&_e.vnode!=null&&_e.vnode(a),a}function Co(e){return e.children}function li(e,n){this.props=e,this.context=n}function Bn(e,n){if(n==null)return e.__?Bn(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Bn(e):null}function pS(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return pS(e)}}function qx(e){(!e.__d&&(e.__d=!0)&&en.push(e)&&!Mi.__r++||Ox!=_e.debounceRendering)&&((Ox=_e.debounceRendering)||lS)(Mi)}function Mi(){for(var e,n,r,i,o,a,s,c=1;en.length;)en.length>c&&en.sort(fS),e=en.shift(),c=en.length,e.__d&&(r=void 0,i=void 0,o=(i=(n=e).__v).__e,a=[],s=[],n.__P&&((r=gt({},i)).__v=i.__v+1,_e.vnode&&_e.vnode(r),sh(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,a,o??Bn(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,yS(a,r,s),i.__e=i.__=null,r.__e!=o&&pS(r)));Mi.__r=0}function gS(e,n,r,i,o,a,s,c,u,l,d){var f,h,p,y,x,v,g,_=i&&i.__k||hS,b=n.length;for(u=lD(r,n,_,u,b),f=0;f<b;f++)(p=r.__k[f])!=null&&(h=p.__i==-1?jr:_[p.__i]||jr,p.__i=f,v=sh(e,p,h,o,a,s,c,u,l,d),y=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&ch(h.ref,null,p),d.push(p.ref,p.__c||y,p)),x==null&&y!=null&&(x=y),(g=!!(4&p.__u))||h.__k===p.__k?u=mS(p,u,e,g):typeof p.type=="function"&&v!==void 0?u=v:y&&(u=y.nextSibling),p.__u&=-7);return r.__e=x,u}function lD(e,n,r,i,o){var a,s,c,u,l,d=r.length,f=d,h=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=n[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=pr(null,s,null,null,null):So(s)?s=e.__k[a]=pr(Co,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[a]=pr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,u=a+h,s.__=e,s.__b=e.__b+1,c=null,(l=s.__i=fD(s,r,u,f))!=-1&&(f--,(c=r[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(o>d?h--:o<d&&h++),typeof s.type!="function"&&(s.__u|=4)):l!=u&&(l==u-1?h--:l==u+1?h++:(l>u?h--:h++,s.__u|=4))):e.__k[a]=null;if(f)for(a=0;a<d;a++)(c=r[a])!=null&&(2&c.__u)==0&&(c.__e==i&&(i=Bn(c)),xS(c,c));return i}function mS(e,n,r,i){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,n=mS(o[a],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=Bn(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function fD(e,n,r,i){var o,a,s,c=e.key,u=e.type,l=n[r],d=l!=null&&(2&l.__u)==0;if(l===null&&c==null||d&&c==l.key&&u==l.type)return r;if(i>(d?1:0)){for(o=r-1,a=r+1;o>=0||a<n.length;)if((l=n[s=o>=0?o--:a++])!=null&&(2&l.__u)==0&&c==l.key&&u==l.type)return s}return-1}function Dx(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||cD.test(n)?r:r+"px"}function ni(e,n,r,i,o){var a,s;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||Dx(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||Dx(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(dS,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=oh,e.addEventListener(n,a?Qf:Jf,a)):e.removeEventListener(n,a?Qf:Jf,a);else{if(o=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function zx(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=oh++;else if(n.t<r.u)return;return r(_e.event?_e.event(n):n)}}}function sh(e,n,r,i,o,a,s,c,u,l){var d,f,h,p,y,x,v,g,_,b,w,S,C,E,N,A,R,k=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),a=[c=n.__e=r.__e]),(d=_e.__b)&&d(n);e:if(typeof k=="function")try{if(g=n.props,_="prototype"in k&&k.prototype.render,b=(d=k.contextType)&&i[d.__c],w=d?b?b.props.value:d.__:i,r.__c?v=(f=n.__c=r.__c).__=f.__E:(_?n.__c=f=new k(g,w):(n.__c=f=new li(g,w),f.constructor=k,f.render=hD),b&&b.sub(f),f.state||(f.state={}),f.__n=i,h=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&k.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=gt({},f.__s)),gt(f.__s,k.getDerivedStateFromProps(g,f.__s))),p=f.props,y=f.state,f.__v=n,h)_&&k.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&k.getDerivedStateFromProps==null&&g!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(g,w),n.__v==r.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(g,f.__s,w)===!1){for(n.__v!=r.__v&&(f.props=g,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(P){P&&(P.__=n)}),S=0;S<f._sb.length;S++)f.__h.push(f._sb[S]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(g,f.__s,w),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,y,x)})}if(f.context=w,f.props=g,f.__P=e,f.__e=!1,C=_e.__r,E=0,_){for(f.state=f.__s,f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),N=0;N<f._sb.length;N++)f.__h.push(f._sb[N]);f._sb=[]}else do f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++E<25);f.state=f.__s,f.getChildContext!=null&&(i=gt(gt({},i),f.getChildContext())),_&&!h&&f.getSnapshotBeforeUpdate!=null&&(x=f.getSnapshotBeforeUpdate(p,y)),A=d,d!=null&&d.type===Co&&d.key==null&&(A=vS(d.props.children)),c=gS(e,So(A)?A:[A],n,r,i,o,a,s,c,u,l),f.base=n.__e,n.__u&=-161,f.__h.length&&s.push(f),v&&(f.__E=f.__=null)}catch(P){if(n.__v=null,u||a!=null)if(P.then){for(n.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,n.__e=c}else{for(R=a.length;R--;)ah(a[R]);ed(n)}else n.__e=r.__e,n.__k=r.__k,P.then||ed(n);_e.__e(P,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=dD(r.__e,n,r,i,o,a,s,u,l);return(d=_e.diffed)&&d(n),128&n.__u?void 0:c}function ed(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ed)}function yS(e,n,r){for(var i=0;i<r.length;i++)ch(r[i],r[++i],r[++i]);_e.__c&&_e.__c(n,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){_e.__e(a,o.__v)}})}function vS(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:So(e)?e.map(vS):gt({},e)}function dD(e,n,r,i,o,a,s,c,u){var l,d,f,h,p,y,x,v=r.props||jr,g=n.props,_=n.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(l=0;l<a.length;l++)if((p=a[l])&&"setAttribute"in p==!!_&&(_?p.localName==_:p.nodeType==3)){e=p,a[l]=null;break}}if(e==null){if(_==null)return document.createTextNode(g);e=document.createElementNS(o,_,g.is&&g),c&&(_e.__m&&_e.__m(n,a),c=!1),a=null}if(_==null)v===g||c&&e.data==g||(e.data=g);else{if(a=a&&Vr.call(e.childNodes),!c&&a!=null)for(v={},l=0;l<e.attributes.length;l++)v[(p=e.attributes[l]).name]=p.value;for(l in v)if(p=v[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=p;else if(!(l in g)){if(l=="value"&&"defaultValue"in g||l=="checked"&&"defaultChecked"in g)continue;ni(e,l,null,p,o)}}for(l in g)p=g[l],l=="children"?h=p:l=="dangerouslySetInnerHTML"?d=p:l=="value"?y=p:l=="checked"?x=p:c&&typeof p!="function"||v[l]===p||ni(e,l,p,v[l],o);if(d)c||f&&(d.__html==f.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),n.__k=[];else if(f&&(e.innerHTML=""),gS(n.type=="template"?e.content:e,So(h)?h:[h],n,r,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&Bn(r,0),c,u),a!=null)for(l=a.length;l--;)ah(a[l]);c||(l="value",_=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[l]||_=="progress"&&!y||_=="option"&&y!=v[l])&&ni(e,l,y,v[l],o),l="checked",x!=null&&x!=e[l]&&ni(e,l,x,v[l],o))}return e}function ch(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(o){_e.__e(o,r)}}function xS(e,n,r){var i,o;if(_e.unmount&&_e.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||ch(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){_e.__e(a,n)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&xS(i[o],n,r||typeof e.type!="function");r||ah(e.__e),e.__c=e.__=e.__e=void 0}function hD(e,n,r){return this.constructor(e,r)}function pD(e,n,r){var i,o,a,s;n==document&&(n=document.documentElement),_e.__&&_e.__(e,n),o=(i=!1)?null:n.__k,a=[],s=[],sh(n,e=n.__k=uD(Co,null,[e]),o||jr,jr,n.namespaceURI,o?null:n.firstChild?Vr.call(n.childNodes):null,a,o?o.__e:n.firstChild,i,s),yS(a,e,s)}function bS(e,n,r){var i,o,a,s,c=gt({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)a=="key"?i=n[a]:a=="ref"?o=n[a]:c[a]=n[a]===void 0&&s!=null?s[a]:n[a];return arguments.length>2&&(c.children=arguments.length>3?Vr.call(arguments,2):r),pr(e.type,c,i||e.key,o||e.ref,null)}Vr=hS.slice,_e={__e:function(e,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(c){e=c}throw e}},cS=0,uS=function(e){return e!=null&&e.constructor===void 0},li.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=gt({},this.state),typeof e=="function"&&(e=e(gt({},r),this.props)),e&&gt(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),qx(this))},li.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qx(this))},li.prototype.render=Co,en=[],lS=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fS=function(e,n){return e.__v.__b-n.__v.__b},Mi.__r=0,dS=/(PointerCapture)$|Capture$/i,oh=0,Jf=zx(!1),Qf=zx(!0);function Lx(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function gD(e){if(Array.isArray(e))return e}function mD(e,n,r){return(n=wD(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function yD(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function vD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $x(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function xD(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?$x(Object(r),!0).forEach(function(i){mD(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$x(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function bD(e,n){return gD(e)||yD(e,n)||SD(e,n)||vD()}function _D(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function wD(e){var n=_D(e,"string");return typeof n=="symbol"?n:n+""}function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ii(e)}function SD(e,n){if(e){if(typeof e=="string")return Lx(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lx(e,n):void 0}}var td=function(n){if(Ii(n)!=="object")return n;var r=bS(n);if(r.props){var i;r.props=xD({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(td):td(r.props.children))}return r},CD=function(n){return uS(bS(n))},ED=function(n,r){delete r.__k,pD(td(n),r)};function ND(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var kD=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;ND(kD);var RD=ih({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,a=o===void 0?{}:o,s=!!n&&Ii(n)==="object"&&!!n.node&&typeof n.node=="function",c=Oe(s?n.node():n);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(l){var d=bD(l,2),f=d[0],h=d[1];return r.tooltipEl.style(f,h)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(u),function(l){r.mouseInside=!0;var d=Qe(l),f=c.node(),h=f.offsetWidth,p=f.offsetHeight,y=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/h*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?p>130&&p-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(y.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):CD(n.content)?(n.tooltipEl.text(""),ED(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function AD(e,n,r){var i,o=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function a(){var s,c=i.length,u,l=0,d=0,f=0;for(s=0;s<c;++s)u=i[s],l+=u.x||0,d+=u.y||0,f+=u.z||0;for(l=(l/c-e)*o,d=(d/c-n)*o,f=(f/c-r)*o,s=0;s<c;++s)u=i[s],l&&(u.x-=l),d&&(u.y-=d),f&&(u.z-=f)}return a.initialize=function(s){i=s},a.x=function(s){return arguments.length?(e=+s,a):e},a.y=function(s){return arguments.length?(n=+s,a):n},a.z=function(s){return arguments.length?(r=+s,a):r},a.strength=function(s){return arguments.length?(o=+s,a):o},a}function jD(e){const n=+this._x.call(null,e);return _S(this.cover(n),n,e)}function _S(e,n,r){if(isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._x1,u,l,d,f,h;if(!o)return e._root=a,e;for(;o.length;)if((d=n>=(u=(s+c)/2))?s=u:c=u,i=o,!(o=o[f=+d]))return i[f]=a,e;if(l=+e._x.call(null,o.data),n===l)return a.next=o,i?i[f]=a:e._root=a,e;do i=i?i[f]=new Array(2):e._root=new Array(2),(d=n>=(u=(s+c)/2))?s=u:c=u;while((f=+d)==(h=+(l>=u)));return i[h]=o,i[f]=a,e}function PD(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,o=-1/0;for(let a=0,s;a<n;++a)isNaN(s=+this._x.call(null,e[a]))||(r[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let a=0;a<n;++a)_S(this,r[a],e[a]);return this}function MD(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,o=this._root,a,s;n>e||e>=r;)switch(s=+(e<n),a=new Array(2),a[s]=o,o=a,i*=2,s){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._x1=r,this}function ID(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function TD(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Pt(e,n,r){this.node=e,this.x0=n,this.x1=r}function OD(e,n){var r,i=this._x0,o,a,s=this._x1,c=[],u=this._root,l,d;for(u&&c.push(new Pt(u,i,s)),n==null?n=1/0:(i=e-n,s=e+n);l=c.pop();)if(!(!(u=l.node)||(o=l.x0)>s||(a=l.x1)<i))if(u.length){var f=(o+a)/2;c.push(new Pt(u[1],f,a),new Pt(u[0],o,f)),(d=+(e>=f))&&(l=c[c.length-1],c[c.length-1]=c[c.length-1-d],c[c.length-1-d]=l)}else{var h=Math.abs(e-+this._x.call(null,u.data));h<n&&(n=h,i=e-h,s=e+h,r=u.data)}return r}function qD(e){if(isNaN(u=+this._x.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._x1,u,l,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=u>=(l=(s+c)/2))?s=l:c=l,n=r,!(r=r[f=+d]))return this;if(!r.length)break;n[f+1&1]&&(i=n,h=f)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[f]=a:delete n[f],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=a,this)}function DD(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function zD(){return this._root}function LD(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function $D(e){var n=[],r,i=this._root,o,a,s;for(i&&n.push(new Pt(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.x1)&&i.length){var c=(a+s)/2;(o=i[1])&&n.push(new Pt(o,c,s)),(o=i[0])&&n.push(new Pt(o,a,c))}return this}function FD(e){var n=[],r=[],i;for(this._root&&n.push(new Pt(this._root,this._x0,this._x1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.x1,u=(s+c)/2;(a=o[0])&&n.push(new Pt(a,s,u)),(a=o[1])&&n.push(new Pt(a,u,c))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function HD(e){return e[0]}function BD(e){return arguments.length?(this._x=e,this):this._x}function wS(e,n){var r=new uh(n??HD,NaN,NaN);return e==null?r:r.addAll(e)}function uh(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function Fx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var He=wS.prototype=uh.prototype;He.copy=function(){var e=new uh(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Fx(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var o=0;o<2;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(2)}):n.target[o]=Fx(i));return e};He.add=jD;He.addAll=PD;He.cover=MD;He.data=ID;He.extent=TD;He.find=OD;He.remove=qD;He.removeAll=DD;He.root=zD;He.size=LD;He.visit=$D;He.visitAfter=FD;He.x=BD;function VD(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return SS(this.cover(n,r),n,r,e)}function SS(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a=e._root,s={data:i},c=e._x0,u=e._y0,l=e._x1,d=e._y1,f,h,p,y,x,v,g,_;if(!a)return e._root=s,e;for(;a.length;)if((x=n>=(f=(c+l)/2))?c=f:l=f,(v=r>=(h=(u+d)/2))?u=h:d=h,o=a,!(a=a[g=v<<1|x]))return o[g]=s,e;if(p=+e._x.call(null,a.data),y=+e._y.call(null,a.data),n===p&&r===y)return s.next=a,o?o[g]=s:e._root=s,e;do o=o?o[g]=new Array(4):e._root=new Array(4),(x=n>=(f=(c+l)/2))?c=f:l=f,(v=r>=(h=(u+d)/2))?u=h:d=h;while((g=v<<1|x)===(_=(y>=h)<<1|p>=f));return o[_]=a,o[g]=s,e}function GD(e){var n,r,i=e.length,o,a,s=new Array(i),c=new Array(i),u=1/0,l=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=o,c[r]=a,o<u&&(u=o),o>d&&(d=o),a<l&&(l=a),a>f&&(f=a));if(u>d||l>f)return this;for(this.cover(u,l).cover(d,f),r=0;r<i;++r)SS(this,s[r],c[r],e[r]);return this}function UD(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s=o-r||1,c=this._root,u,l;r>e||e>=o||i>n||n>=a;)switch(l=(n<i)<<1|e<r,u=new Array(4),u[l]=c,c=u,s*=2,l){case 0:o=r+s,a=i+s;break;case 1:r=o-s,a=i+s;break;case 2:o=r+s,i=a-s;break;case 3:r=o-s,i=a-s;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this}function WD(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function KD(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function qe(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function YD(e,n,r){var i,o=this._x0,a=this._y0,s,c,u,l,d=this._x1,f=this._y1,h=[],p=this._root,y,x;for(p&&h.push(new qe(p,o,a,d,f)),r==null?r=1/0:(o=e-r,a=n-r,d=e+r,f=n+r,r*=r);y=h.pop();)if(!(!(p=y.node)||(s=y.x0)>d||(c=y.y0)>f||(u=y.x1)<o||(l=y.y1)<a))if(p.length){var v=(s+u)/2,g=(c+l)/2;h.push(new qe(p[3],v,g,u,l),new qe(p[2],s,g,v,l),new qe(p[1],v,c,u,g),new qe(p[0],s,c,v,g)),(x=(n>=g)<<1|e>=v)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=y)}else{var _=e-+this._x.call(null,p.data),b=n-+this._y.call(null,p.data),w=_*_+b*b;if(w<r){var S=Math.sqrt(r=w);o=e-S,a=n-S,d=e+S,f=n+S,i=p.data}}return i}function XD(e){if(isNaN(d=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._y0,u=this._x1,l=this._y1,d,f,h,p,y,x,v,g;if(!r)return this;if(r.length)for(;;){if((y=d>=(h=(s+u)/2))?s=h:u=h,(x=f>=(p=(c+l)/2))?c=p:l=p,n=r,!(r=r[v=x<<1|y]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,g=v)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[v]=a:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=a,this)}function ZD(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function JD(){return this._root}function QD(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function ez(e){var n=[],r,i=this._root,o,a,s,c,u;for(i&&n.push(new qe(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,c=r.x1,u=r.y1)&&i.length){var l=(a+c)/2,d=(s+u)/2;(o=i[3])&&n.push(new qe(o,l,d,c,u)),(o=i[2])&&n.push(new qe(o,a,d,l,u)),(o=i[1])&&n.push(new qe(o,l,s,c,d)),(o=i[0])&&n.push(new qe(o,a,s,l,d))}return this}function tz(e){var n=[],r=[],i;for(this._root&&n.push(new qe(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.y0,u=i.x1,l=i.y1,d=(s+u)/2,f=(c+l)/2;(a=o[0])&&n.push(new qe(a,s,c,d,f)),(a=o[1])&&n.push(new qe(a,d,c,u,f)),(a=o[2])&&n.push(new qe(a,s,f,d,l)),(a=o[3])&&n.push(new qe(a,d,f,u,l))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function nz(e){return e[0]}function rz(e){return arguments.length?(this._x=e,this):this._x}function iz(e){return e[1]}function oz(e){return arguments.length?(this._y=e,this):this._y}function CS(e,n,r){var i=new lh(n??nz,r??iz,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function lh(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function Hx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var De=CS.prototype=lh.prototype;De.copy=function(){var e=new lh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Hx(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var o=0;o<4;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(4)}):n.target[o]=Hx(i));return e};De.add=VD;De.addAll=GD;De.cover=UD;De.data=WD;De.extent=KD;De.find=YD;De.remove=XD;De.removeAll=ZD;De.root=JD;De.size=QD;De.visit=ez;De.visitAfter=tz;De.x=rz;De.y=oz;function az(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return ES(this.cover(n,r,i),n,r,i,e)}function ES(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s=e._root,c={data:o},u=e._x0,l=e._y0,d=e._z0,f=e._x1,h=e._y1,p=e._z1,y,x,v,g,_,b,w,S,C,E,N;if(!s)return e._root=c,e;for(;s.length;)if((w=n>=(y=(u+f)/2))?u=y:f=y,(S=r>=(x=(l+h)/2))?l=x:h=x,(C=i>=(v=(d+p)/2))?d=v:p=v,a=s,!(s=s[E=C<<2|S<<1|w]))return a[E]=c,e;if(g=+e._x.call(null,s.data),_=+e._y.call(null,s.data),b=+e._z.call(null,s.data),n===g&&r===_&&i===b)return c.next=s,a?a[E]=c:e._root=c,e;do a=a?a[E]=new Array(8):e._root=new Array(8),(w=n>=(y=(u+f)/2))?u=y:f=y,(S=r>=(x=(l+h)/2))?l=x:h=x,(C=i>=(v=(d+p)/2))?d=v:p=v;while((E=C<<2|S<<1|w)===(N=(b>=v)<<2|(_>=x)<<1|g>=y));return a[N]=s,a[E]=c,e}function sz(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n);let a=1/0,s=1/0,c=1/0,u=-1/0,l=-1/0,d=-1/0;for(let f=0,h,p,y,x;f<n;++f)isNaN(p=+this._x.call(null,h=e[f]))||isNaN(y=+this._y.call(null,h))||isNaN(x=+this._z.call(null,h))||(r[f]=p,i[f]=y,o[f]=x,p<a&&(a=p),p>u&&(u=p),y<s&&(s=y),y>l&&(l=y),x<c&&(c=x),x>d&&(d=x));if(a>u||s>l||c>d)return this;this.cover(a,s,c).cover(u,l,d);for(let f=0;f<n;++f)ES(this,r[f],i[f],o[f],e[f]);return this}function cz(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,c=this._y1,u=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,c=(o=Math.floor(n))+1,u=(a=Math.floor(r))+1;else{for(var l=s-i||1,d=this._root,f,h;i>e||e>=s||o>n||n>=c||a>r||r>=u;)switch(h=(r<a)<<2|(n<o)<<1|e<i,f=new Array(8),f[h]=d,d=f,l*=2,h){case 0:s=i+l,c=o+l,u=a+l;break;case 1:i=s-l,c=o+l,u=a+l;break;case 2:s=i+l,o=c-l,u=a+l;break;case 3:i=s-l,o=c-l,u=a+l;break;case 4:s=i+l,c=o+l,a=u-l;break;case 5:i=s-l,c=o+l,a=u-l;break;case 6:s=i+l,o=c-l,a=u-l;break;case 7:i=s-l,o=c-l,a=u-l;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=c,this._z1=u,this}function uz(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function lz(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function ve(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function fz(e,n,r,i){var o,a=this._x0,s=this._y0,c=this._z0,u,l,d,f,h,p,y=this._x1,x=this._y1,v=this._z1,g=[],_=this._root,b,w;for(_&&g.push(new ve(_,a,s,c,y,x,v)),i==null?i=1/0:(a=e-i,s=n-i,c=r-i,y=e+i,x=n+i,v=r+i,i*=i);b=g.pop();)if(!(!(_=b.node)||(u=b.x0)>y||(l=b.y0)>x||(d=b.z0)>v||(f=b.x1)<a||(h=b.y1)<s||(p=b.z1)<c))if(_.length){var S=(u+f)/2,C=(l+h)/2,E=(d+p)/2;g.push(new ve(_[7],S,C,E,f,h,p),new ve(_[6],u,C,E,S,h,p),new ve(_[5],S,l,E,f,C,p),new ve(_[4],u,l,E,S,C,p),new ve(_[3],S,C,d,f,h,E),new ve(_[2],u,C,d,S,h,E),new ve(_[1],S,l,d,f,C,E),new ve(_[0],u,l,d,S,C,E)),(w=(r>=E)<<2|(n>=C)<<1|e>=S)&&(b=g[g.length-1],g[g.length-1]=g[g.length-1-w],g[g.length-1-w]=b)}else{var N=e-+this._x.call(null,_.data),A=n-+this._y.call(null,_.data),R=r-+this._z.call(null,_.data),k=N*N+A*A+R*R;if(k<i){var P=Math.sqrt(i=k);a=e-P,s=n-P,c=r-P,y=e+P,x=n+P,v=r+P,o=_.data}}return o}const dz=(e,n,r,i,o,a)=>Math.sqrt((e-i)**2+(n-o)**2+(r-a)**2);function hz(e,n,r,i){const o=[],a=e-i,s=n-i,c=r-i,u=e+i,l=n+i,d=r+i;return this.visit((f,h,p,y,x,v,g)=>{if(!f.length)do{const _=f.data;dz(e,n,r,this._x(_),this._y(_),this._z(_))<=i&&o.push(_)}while(f=f.next);return h>u||p>l||y>d||x<a||v<s||g<c}),o}function pz(e){if(isNaN(h=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(y=+this._z.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,c=this._y0,u=this._z0,l=this._x1,d=this._y1,f=this._z1,h,p,y,x,v,g,_,b,w,S,C;if(!r)return this;if(r.length)for(;;){if((_=h>=(x=(s+l)/2))?s=x:l=x,(b=p>=(v=(c+d)/2))?c=v:d=v,(w=y>=(g=(u+f)/2))?u=g:f=g,n=r,!(r=r[S=w<<2|b<<1|_]))return this;if(!r.length)break;(n[S+1&7]||n[S+2&7]||n[S+3&7]||n[S+4&7]||n[S+5&7]||n[S+6&7]||n[S+7&7])&&(i=n,C=S)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[S]=a:delete n[S],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=a,this)}function gz(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function mz(){return this._root}function yz(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function vz(e){var n=[],r,i=this._root,o,a,s,c,u,l,d;for(i&&n.push(new ve(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,c=r.z0,u=r.x1,l=r.y1,d=r.z1)&&i.length){var f=(a+u)/2,h=(s+l)/2,p=(c+d)/2;(o=i[7])&&n.push(new ve(o,f,h,p,u,l,d)),(o=i[6])&&n.push(new ve(o,a,h,p,f,l,d)),(o=i[5])&&n.push(new ve(o,f,s,p,u,h,d)),(o=i[4])&&n.push(new ve(o,a,s,p,f,h,d)),(o=i[3])&&n.push(new ve(o,f,h,c,u,l,p)),(o=i[2])&&n.push(new ve(o,a,h,c,f,l,p)),(o=i[1])&&n.push(new ve(o,f,s,c,u,h,p)),(o=i[0])&&n.push(new ve(o,a,s,c,f,h,p))}return this}function xz(e){var n=[],r=[],i;for(this._root&&n.push(new ve(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,c=i.y0,u=i.z0,l=i.x1,d=i.y1,f=i.z1,h=(s+l)/2,p=(c+d)/2,y=(u+f)/2;(a=o[0])&&n.push(new ve(a,s,c,u,h,p,y)),(a=o[1])&&n.push(new ve(a,h,c,u,l,p,y)),(a=o[2])&&n.push(new ve(a,s,p,u,h,d,y)),(a=o[3])&&n.push(new ve(a,h,p,u,l,d,y)),(a=o[4])&&n.push(new ve(a,s,c,y,h,p,f)),(a=o[5])&&n.push(new ve(a,h,c,y,l,p,f)),(a=o[6])&&n.push(new ve(a,s,p,y,h,d,f)),(a=o[7])&&n.push(new ve(a,h,p,y,l,d,f))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function bz(e){return e[0]}function _z(e){return arguments.length?(this._x=e,this):this._x}function wz(e){return e[1]}function Sz(e){return arguments.length?(this._y=e,this):this._y}function Cz(e){return e[2]}function Ez(e){return arguments.length?(this._z=e,this):this._z}function NS(e,n,r,i){var o=new fh(n??bz,r??wz,i??Cz,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function fh(e,n,r,i,o,a,s,c,u){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=c,this._z1=u,this._root=void 0}function Bx(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Me=NS.prototype=fh.prototype;Me.copy=function(){var e=new fh(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Bx(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var o=0;o<8;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(8)}):n.target[o]=Bx(i));return e};Me.add=az;Me.addAll=sz;Me.cover=cz;Me.data=uz;Me.extent=lz;Me.find=fz;Me.findAllWithinRadius=hz;Me.remove=pz;Me.removeAll=gz;Me.root=mz;Me.size=yz;Me.visit=vz;Me.visitAfter=xz;Me.x=_z;Me.y=Sz;Me.z=Ez;function jt(e){return function(){return e}}function Nt(e){return(e()-.5)*1e-6}function Nz(e){return e.index}function Vx(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function kz(e){var n=Nz,r=h,i,o=jt(30),a,s,c,u,l,d,f=1;e==null&&(e=[]);function h(g){return 1/Math.min(u[g.source.index],u[g.target.index])}function p(g){for(var _=0,b=e.length;_<f;++_)for(var w=0,S,C,E,N=0,A=0,R=0,k,P;w<b;++w)S=e[w],C=S.source,E=S.target,N=E.x+E.vx-C.x-C.vx||Nt(d),c>1&&(A=E.y+E.vy-C.y-C.vy||Nt(d)),c>2&&(R=E.z+E.vz-C.z-C.vz||Nt(d)),k=Math.sqrt(N*N+A*A+R*R),k=(k-a[w])/k*g*i[w],N*=k,A*=k,R*=k,E.vx-=N*(P=l[w]),c>1&&(E.vy-=A*P),c>2&&(E.vz-=R*P),C.vx+=N*(P=1-P),c>1&&(C.vy+=A*P),c>2&&(C.vz+=R*P)}function y(){if(s){var g,_=s.length,b=e.length,w=new Map(s.map((C,E)=>[n(C,E,s),C])),S;for(g=0,u=new Array(_);g<b;++g)S=e[g],S.index=g,typeof S.source!="object"&&(S.source=Vx(w,S.source)),typeof S.target!="object"&&(S.target=Vx(w,S.target)),u[S.source.index]=(u[S.source.index]||0)+1,u[S.target.index]=(u[S.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)S=e[g],l[g]=u[S.source.index]/(u[S.source.index]+u[S.target.index]);i=new Array(b),x(),a=new Array(b),v()}}function x(){if(s)for(var g=0,_=e.length;g<_;++g)i[g]=+r(e[g],g,e)}function v(){if(s)for(var g=0,_=e.length;g<_;++g)a[g]=+o(e[g],g,e)}return p.initialize=function(g,..._){s=g,d=_.find(b=>typeof b=="function")||Math.random,c=_.find(b=>[1,2,3].includes(b))||2,y()},p.links=function(g){return arguments.length?(e=g,y(),p):e},p.id=function(g){return arguments.length?(n=g,p):n},p.iterations=function(g){return arguments.length?(f=+g,p):f},p.strength=function(g){return arguments.length?(r=typeof g=="function"?g:jt(+g),x(),p):r},p.distance=function(g){return arguments.length?(o=typeof g=="function"?g:jt(+g),v(),p):o},p}const Rz=1664525,Az=1013904223,Gx=4294967296;function jz(){let e=1;return()=>(e=(Rz*e+Az)%Gx)/Gx}var Ux=3;function yf(e){return e.x}function Wx(e){return e.y}function Pz(e){return e.z}var Mz=10,Iz=Math.PI*(3-Math.sqrt(5)),Tz=Math.PI*20/(9+Math.sqrt(221));function Oz(e,n){n=n||2;var r=Math.min(Ux,Math.max(1,Math.round(n))),i,o=1,a=.001,s=1-Math.pow(a,1/300),c=0,u=.6,l=new Map,d=Sd(p),f=Mr("tick","end"),h=jz();e==null&&(e=[]);function p(){y(),f.call("tick",i),o<a&&(d.stop(),f.call("end",i))}function y(g){var _,b=e.length,w;g===void 0&&(g=1);for(var S=0;S<g;++S)for(o+=(c-o)*s,l.forEach(function(C){C(o)}),_=0;_<b;++_)w=e[_],w.fx==null?w.x+=w.vx*=u:(w.x=w.fx,w.vx=0),r>1&&(w.fy==null?w.y+=w.vy*=u:(w.y=w.fy,w.vy=0)),r>2&&(w.fz==null?w.z+=w.vz*=u:(w.z=w.fz,w.vz=0));return i}function x(){for(var g=0,_=e.length,b;g<_;++g){if(b=e[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||r>1&&isNaN(b.y)||r>2&&isNaN(b.z)){var w=Mz*(r>2?Math.cbrt(.5+g):r>1?Math.sqrt(.5+g):g),S=g*Iz,C=g*Tz;r===1?b.x=w:r===2?(b.x=w*Math.cos(S),b.y=w*Math.sin(S)):(b.x=w*Math.sin(S)*Math.cos(C),b.y=w*Math.cos(S),b.z=w*Math.sin(S)*Math.sin(C))}(isNaN(b.vx)||r>1&&isNaN(b.vy)||r>2&&isNaN(b.vz))&&(b.vx=0,r>1&&(b.vy=0),r>2&&(b.vz=0))}}function v(g){return g.initialize&&g.initialize(e,h,r),g}return x(),i={tick:y,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(g){return arguments.length?(r=Math.min(Ux,Math.max(1,Math.round(g))),l.forEach(v),i):r},nodes:function(g){return arguments.length?(e=g,x(),l.forEach(v),i):e},alpha:function(g){return arguments.length?(o=+g,i):o},alphaMin:function(g){return arguments.length?(a=+g,i):a},alphaDecay:function(g){return arguments.length?(s=+g,i):+s},alphaTarget:function(g){return arguments.length?(c=+g,i):c},velocityDecay:function(g){return arguments.length?(u=1-g,i):1-u},randomSource:function(g){return arguments.length?(h=g,l.forEach(v),i):h},force:function(g,_){return arguments.length>1?(_==null?l.delete(g):l.set(g,v(_)),i):l.get(g)},find:function(){var g=Array.prototype.slice.call(arguments),_=g.shift()||0,b=(r>1?g.shift():null)||0,w=(r>2?g.shift():null)||0,S=g.shift()||1/0,C=0,E=e.length,N,A,R,k,P,O;for(S*=S,C=0;C<E;++C)P=e[C],N=_-P.x,A=b-(P.y||0),R=w-(P.z||0),k=N*N+A*A+R*R,k<S&&(O=P,S=k);return O},on:function(g,_){return arguments.length>1?(f.on(g,_),i):f.on(g)}}}function qz(){var e,n,r,i,o,a=jt(-30),s,c=1,u=1/0,l=.81;function d(y){var x,v=e.length,g=(n===1?wS(e,yf):n===2?CS(e,yf,Wx):n===3?NS(e,yf,Wx,Pz):null).visitAfter(h);for(o=y,x=0;x<v;++x)r=e[x],g.visit(p)}function f(){if(e){var y,x=e.length,v;for(s=new Array(x),y=0;y<x;++y)v=e[y],s[v.index]=+a(v,y,e)}}function h(y){var x=0,v,g,_=0,b,w,S,C,E=y.length;if(E){for(b=w=S=C=0;C<E;++C)(v=y[C])&&(g=Math.abs(v.value))&&(x+=v.value,_+=g,b+=g*(v.x||0),w+=g*(v.y||0),S+=g*(v.z||0));x*=Math.sqrt(4/E),y.x=b/_,n>1&&(y.y=w/_),n>2&&(y.z=S/_)}else{v=y,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do x+=s[v.data.index];while(v=v.next)}y.value=x}function p(y,x,v,g,_){if(!y.value)return!0;var b=[v,g,_][n-1],w=y.x-r.x,S=n>1?y.y-r.y:0,C=n>2?y.z-r.z:0,E=b-x,N=w*w+S*S+C*C;if(E*E/l<N)return N<u&&(w===0&&(w=Nt(i),N+=w*w),n>1&&S===0&&(S=Nt(i),N+=S*S),n>2&&C===0&&(C=Nt(i),N+=C*C),N<c&&(N=Math.sqrt(c*N)),r.vx+=w*y.value*o/N,n>1&&(r.vy+=S*y.value*o/N),n>2&&(r.vz+=C*y.value*o/N)),!0;if(y.length||N>=u)return;(y.data!==r||y.next)&&(w===0&&(w=Nt(i),N+=w*w),n>1&&S===0&&(S=Nt(i),N+=S*S),n>2&&C===0&&(C=Nt(i),N+=C*C),N<c&&(N=Math.sqrt(c*N)));do y.data!==r&&(E=s[y.data.index]*o/N,r.vx+=w*E,n>1&&(r.vy+=S*E),n>2&&(r.vz+=C*E));while(y=y.next)}return d.initialize=function(y,...x){e=y,i=x.find(v=>typeof v=="function")||Math.random,n=x.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(y){return arguments.length?(a=typeof y=="function"?y:jt(+y),f(),d):a},d.distanceMin=function(y){return arguments.length?(c=y*y,d):Math.sqrt(c)},d.distanceMax=function(y){return arguments.length?(u=y*y,d):Math.sqrt(u)},d.theta=function(y){return arguments.length?(l=y*y,d):Math.sqrt(l)},d}function Dz(e,n,r,i){var o,a,s=jt(.1),c,u;typeof e!="function"&&(e=jt(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function l(f){for(var h=0,p=o.length;h<p;++h){var y=o[h],x=y.x-n||1e-6,v=(y.y||0)-r||1e-6,g=(y.z||0)-i||1e-6,_=Math.sqrt(x*x+v*v+g*g),b=(u[h]-_)*c[h]*f/_;y.vx+=x*b,a>1&&(y.vy+=v*b),a>2&&(y.vz+=g*b)}}function d(){if(o){var f,h=o.length;for(c=new Array(h),u=new Array(h),f=0;f<h;++f)u[f]=+e(o[f],f,o),c[f]=isNaN(u[f])?0:+s(o[f],f,o)}}return l.initialize=function(f,...h){o=f,a=h.find(p=>[1,2,3].includes(p))||2,d()},l.strength=function(f){return arguments.length?(s=typeof f=="function"?f:jt(+f),d(),l):s},l.radius=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),d(),l):e},l.x=function(f){return arguments.length?(n=+f,l):n},l.y=function(f){return arguments.length?(r=+f,l):r},l.z=function(f){return arguments.length?(i=+f,l):i},l}const{abs:Jn,cos:Et,sin:_n,acos:zz,atan2:Qn,sqrt:zt,pow:Je}=Math;function er(e){return e<0?-Je(-e,1/3):Je(e,1/3)}const kS=Math.PI,ri=2*kS,Lt=kS/2,Lz=1e-6,vf=Number.MAX_SAFE_INTEGER||9007199254740991,xf=Number.MIN_SAFE_INTEGER||-9007199254740991,$z={x:0,y:0,z:0},Z={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),zt(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const o=1-e;let a=n;if(i===0)return n[0].t=e,n[0];if(i===1){const c={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(c.z=o*a[0].z+e*a[1].z),c}if(i<4){let c=o*o,u=e*e,l,d,f,h=0;i===2?(a=[a[0],a[1],a[2],$z],l=c,d=o*e*2,f=u):i===3&&(l=c*o,d=c*e*3,f=o*u*3,h=e*u);const p={x:l*a[0].x+d*a[1].x+f*a[2].x+h*a[3].x,y:l*a[0].y+d*a[1].y+f*a[2].y+h*a[3].y,t:e};return r&&(p.z=l*a[0].z+d*a[1].z+f*a[2].z+h*a[3].z),p}const s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let c=0;c<s.length-1;c++)s[c]={x:s[c].x+(s[c+1].x-s[c].x)*e,y:s[c].y+(s[c+1].y-s[c].y)*e},typeof s[c].z<"u"&&(s[c].z=s[c].z+(s[c+1].z-s[c].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){const o=1-e,a=r,s=n;let c=a[0],u=a[1],l=a[2],d=a[3],f;if(c*=o,u*=e,s.length===2)return f=c+u,{x:(c*s[0].x+u*s[1].x)/f,y:(c*s[0].y+u*s[1].y)/f,z:i?(c*s[0].z+u*s[1].z)/f:!1,t:e};if(c*=o,u*=2*o,l*=e*e,s.length===3)return f=c+u+l,{x:(c*s[0].x+u*s[1].x+l*s[2].x)/f,y:(c*s[0].y+u*s[1].y+l*s[2].y)/f,z:i?(c*s[0].z+u*s[1].z+l*s[2].z)/f:!1,t:e};if(c*=o,u*=1.5*o,l*=3*o,d*=e*e*e,s.length===4)return f=c+u+l+d,{x:(c*s[0].x+u*s[1].x+l*s[2].x+d*s[3].x)/f,y:(c*s[0].y+u*s[1].y+l*s[2].y+d*s[3].y)/f,z:i?(c*s[0].z+u*s[1].z+l*s[2].z+d*s[3].z)/f:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){const s=[];for(let c=0,u;c<a;c++)u={x:a*(i[c+1].x-i[c].x),y:a*(i[c+1].y-i[c].y)},n&&(u.z=a*(i[c+1].z-i[c].z)),s.push(u);r.push(s),i=s}return r},between:function(e,n,r){return n<=e&&e<=r||Z.approximately(e,n)||Z.approximately(e,r)},approximately:function(e,n,r){return Jn(e-n)<=(r||Lz)},length:function(e){const r=Z.Tvalues.length;let i=0;for(let o=0,a;o<r;o++)a=.5*Z.Tvalues[o]+.5,i+=Z.Cvalues[o]*Z.arcfn(a,e);return .5*i},map:function(e,n,r,i,o){const a=r-n,s=o-i,c=e-n,u=c/a;return i+s*u},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(Z.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,c=i*s-o*a,u=i*a+o*s;return Qn(c,u)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return zt(r*r+i*i)},closest:function(e,n){let r=Je(2,63),i,o;return e.forEach(function(a,s){o=Z.dist(n,a),o<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=Je(e,n)+Je(1-e,n),i=r-1;return Jn(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=Je(1-e,n),i=Je(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,c){const u=(e*i-n*r)*(o-s)-(e-r)*(o*c-a*s),l=(e*i-n*r)*(a-c)-(n-i)*(o*c-a*s),d=(e-r)*(a-c)-(n-i)*(o-s);return d==0?!1:{x:u/d,y:l/d}},lli4:function(e,n,r,i){const o=e.x,a=e.y,s=n.x,c=n.y,u=r.x,l=r.y,d=i.x,f=i.y;return Z.lli8(o,a,s,c,u,l,d,f)},lli:function(e,n){return Z.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new xe(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=vf,r=vf,i=xf,o=xf;return e.forEach(function(a){const s=a.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!Z.bboxoverlap(n,i))return[];const a=[],s=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(u){u.virtual||c.forEach(function(l){if(l.virtual)return;const d=u.intersects(l,o);d.length>0&&(d.c1=u,d.c2=l,d.s1=e,d.s2=r,a.push(d))})}),a},makeshape:function(e,n,r){const i=n.points.length,o=e.points.length,a=Z.makeline(n.points[i-1],e.points[0]),s=Z.makeline(e.points[o-1],n.points[0]),c={startcap:a,forward:e,back:n,endcap:s,bbox:Z.findbbox([a,e,n,s])};return c.intersections=function(u){return Z.shapeintersections(c,c.bbox,u,u.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=vf,o=xf,a,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,u=r.length;c<u;c++)a=r[c],s=e.get(a),s[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,o=-Qn(n.p2.y-i,n.p2.x-r),a=function(s){return{x:(s.x-r)*Et(o)-(s.y-i)*_n(o),y:(s.x-r)*_n(o)+(s.y-i)*Et(o)}};return e.map(a)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=Z.align(e,n),o=function(E){return 0<=E&&E<=1};if(r===2){const E=i[0].y,N=i[1].y,A=i[2].y,R=E-2*N+A;if(R!==0){const k=-zt(N*N-E*A),P=-E+N,O=-(k+P)/R,M=-(-k+P)/R;return[O,M].filter(o)}else if(N!==A&&R===0)return[(2*N-A)/(2*N-2*A)].filter(o);return[]}const a=i[0].y,s=i[1].y,c=i[2].y,u=i[3].y;let l=-a+3*s-3*c+u,d=3*a-6*s+3*c,f=-3*a+3*s,h=a;if(Z.approximately(l,0)){if(Z.approximately(d,0))return Z.approximately(f,0)?[]:[-h/f].filter(o);const E=zt(f*f-4*d*h),N=2*d;return[(E-f)/N,(-f-E)/N].filter(o)}d/=l,f/=l,h/=l;const p=(3*f-d*d)/3,y=p/3,x=(2*d*d*d-9*d*f+27*h)/27,v=x/2,g=v*v+y*y*y;let _,b,w,S,C;if(g<0){const E=-p/3,N=E*E*E,A=zt(N),R=-x/(2*A),k=R<-1?-1:R>1?1:R,P=zz(k),O=er(A),M=2*O;return w=M*Et(P/3)-d/3,S=M*Et((P+ri)/3)-d/3,C=M*Et((P+2*ri)/3)-d/3,[w,S,C].filter(o)}else{if(g===0)return _=v<0?er(-v):-er(v),w=2*_-d/3,S=-_-d/3,[w,S].filter(o);{const E=zt(g);return _=er(-v+E),b=er(v+E),[_-b-d/3].filter(o)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(o!==0){const a=-zt(r*r-n*i),s=-n+r,c=-(a+s)/o,u=-(-a+s)/o;return[c,u]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,o){let a,s,c,u,l=0,d=0;const f=Z.compute(e,n),h=Z.compute(e,r),p=f.x*f.x+f.y*f.y;if(i?(a=zt(Je(f.y*h.z-h.y*f.z,2)+Je(f.z*h.x-h.z*f.x,2)+Je(f.x*h.y-h.x*f.y,2)),s=Je(p+f.z*f.z,3/2)):(a=f.x*h.y-f.y*h.x,s=Je(p,3/2)),a===0||s===0)return{k:0,r:0};if(l=a/s,d=s/a,!o){const y=Z.curvature(e-.001,n,r,i,!0).k,x=Z.curvature(e+.001,n,r,i,!0).k;u=(x-l+(l-y))/2,c=(Jn(x-l)+Jn(l-y))/2}return{k:l,r:d,dk:u,adk:c}},inflections:function(e){if(e.length<4)return[];const n=Z.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=n[3].x*n[2].y,s=18*(-3*r+2*i+3*o-a),c=18*(3*r-i-3*o),u=18*(o-r);if(Z.approximately(s,0)){if(!Z.approximately(c,0)){let h=-u/c;if(0<=h&&h<=1)return[h]}return[]}const l=2*s;if(Z.approximately(l,0))return[];const d=c*c-4*s*u;if(d<0)return[];const f=Math.sqrt(d);return[(f-c)/l,-(c+f)/l].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let o=0,a,s,c,u;o<i;o++)if(a=r[o],s=e[a].mid,c=n[a].mid,u=(e[a].size+n[a].size)/2,Jn(s-c)>=u)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),o=n.bbox(),a=1e5,s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(n._t1+n._t2)/2|0)/a];let c=e.split(.5),u=n.split(.5),l=[{left:c.left,right:u.left},{left:c.left,right:u.right},{left:c.right,right:u.right},{left:c.right,right:u.left}];l=l.filter(function(f){return Z.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return l.length===0||(l.forEach(function(f){d=d.concat(Z.pairiteration(f.left,f.right,s))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,c=i*Et(Lt)-o*_n(Lt),u=i*_n(Lt)+o*Et(Lt),l=a*Et(Lt)-s*_n(Lt),d=a*_n(Lt)+s*Et(Lt),f=(e.x+n.x)/2,h=(e.y+n.y)/2,p=(n.x+r.x)/2,y=(n.y+r.y)/2,x=f+c,v=h+u,g=p+l,_=y+d,b=Z.lli8(f,h,x,v,p,y,g,_),w=Z.dist(b,e);let S=Qn(e.y-b.y,e.x-b.x),C=Qn(n.y-b.y,n.x-b.x),E=Qn(r.y-b.y,r.x-b.x),N;return S<E?((S>C||C>E)&&(S+=ri),S>E&&(N=E,E=S,S=N)):E<C&&C<S?(N=E,E=S,S=N):E+=ri,b.s=S,b.e=E,b.r=w,b},numberSort:function(e,n){return e-n}};class gr{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return Z.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)Z.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new gr(r)}}const{abs:tr,min:Kx,max:Yx,cos:Fz,sin:Hz,acos:Bz,sqrt:nr}=Math,Vz=Math.PI;class xe{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(y){["x","y","z"].forEach(function(x){typeof y[x]<"u"&&p.push(y[x])})}),r=p}let o=!1;const a=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!o&&(a===9||a===12)||n&&n[0]&&typeof n[0].z<"u",c=this.points=[];for(let p=0,y=s?3:2;p<a;p+=y){var u={x:r[p],y:r[p+1]};s&&(u.z=r[p+2]),c.push(u)}const l=this.order=c.length-1,d=this.dims=["x","y"];s&&d.push("z"),this.dimlen=d.length;const f=Z.align(c,{p1:c[0],p2:c[l]}),h=Z.dist(c[0],c[l]);this._linear=f.reduce((p,y)=>p+tr(y.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new xe(r,r,i);if(o===1)return new xe(n,r,r);const a=xe.getABC(2,n,r,i,o);return new xe(n,a.A,i)}static cubicFromPoints(n,r,i,o,a){typeof o>"u"&&(o=.5);const s=xe.getABC(3,n,r,i,o);typeof a>"u"&&(a=Z.dist(r,s.C));const c=a*(1-o)/o,u=Z.dist(n,i),l=(i.x-n.x)/u,d=(i.y-n.y)/u,f=a*l,h=a*d,p=c*l,y=c*d,x={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+y},g=s.A,_={x:g.x+(x.x-g.x)/(1-o),y:g.y+(x.y-g.y)/(1-o)},b={x:g.x+(v.x-g.x)/o,y:g.y+(v.y-g.y)/o},w={x:n.x+(_.x-n.x)/o,y:n.y+(_.y-n.y)/o},S={x:i.x+(b.x-i.x)/(1-o),y:i.y+(b.y-i.y)/(1-o)};return new xe(n,w,S,i)}static getUtils(){return Z}getUtils(){return xe.getUtils()}static get PolyBezier(){return gr}valueOf(){return this.toString()}toString(){return Z.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let a=1,s=n.length;a<s;a++)o.push(n[a].x),o.push(n[a].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=Z.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=Z.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return Z.length(this.derivative.bind(this))}static getABC(n=2,r,i,o,a=.5){const s=Z.projectionratio(a,n),c=1-s,u={x:s*r.x+c*o.x,y:s*r.y+c*o.y},l=Z.abcratio(a,n);return{A:{x:i.x+(i.x-u.x)/l,y:i.y+(i.y-u.y)/l},B:i,C:u,S:r,E:o}}getABC(n,r){r=r||this.get(n);let i=this.points[0],o=this.points[this.order];return xe.getABC(this.order,i,r,o,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,o;r<n;r++)o=r/(n-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),o=[];for(let a=0,s,c=0;a<i.length;a++)s=i[a],Z.dist(s,n)<r&&(o.push(s),c+=a/i.length);return o.length?t/=o.length:!1}project(n){const r=this.getLUT(),i=r.length-1,o=Z.closest(r,n),a=o.mpos,s=(a-1)/i,c=(a+1)/i,u=.1/i;let l=o.mdist,d=s,f=d,h;l+=1;for(let p;d<c+u;d+=u)h=this.compute(d),p=Z.dist(n,h),p<l&&(l=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=l,h}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?Z.computeWithRatios(n,this.points,this.ratios,this._3d):Z.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let o=1,a,s;o<i;o++)a=n[o],s=n[o-1],r[o]={x:(i-o)/i*a.x+o/i*s.x,y:(i-o)/i*a.y+o/i*s.y};return r[i]=n[i-1],new xe(r)}derivative(n){return Z.compute(n,this.dpoints[0],this._3d)}dderivative(n){return Z.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new xe(Z.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return Z.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Z.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=nr(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),o=nr(r.x*r.x+r.y*r.y+r.z*r.z),a=nr(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=a,i.y/=a,i.z/=a;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},c=nr(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=c,s.y/=c,s.z/=c;const u=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:n,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(n){let r=this.points,i=[],o=[],a=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],this.order===3&&(o[a++]=r[3]);r.length>1;){i=[];for(let s=0,c,u=r.length-1;s<u;s++)c=Z.lerp(n,r[s],r[s+1]),o[a++]=c,i.push(c);r=i}return o}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),o={left:this.order===2?new xe([i[0],i[3],i[5]]):new xe([i[0],i[4],i[7],i[9]]),right:this.order===2?new xe([i[5],i[4],i[2]]):new xe([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=Z.map(0,0,1,this._t1,this._t2),o.left._t2=Z.map(n,0,1,this._t1,this._t2),o.right._t1=Z.map(n,0,1,this._t1,this._t2),o.right._t2=Z.map(1,0,1,this._t1,this._t2),r?(r=Z.map(r,n,1,0,1),o.right.split(r).left):o}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let o=function(s){return s[i]},a=this.dpoints[0].map(o);n[i]=Z.droots(a),this.order===3&&(a=this.dpoints[1].map(o),n[i]=n[i].concat(Z.droots(a))),n[i]=n[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(n[i].sort(Z.numberSort))}).bind(this)),n.values=r.sort(Z.numberSort).filter(function(i,o){return r.indexOf(i)===o}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=Z.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return Z.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),o=this.normal(n),a={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(a.z=i.z+o.z*r),a}if(this._linear){const i=this.normal(0),o=this.points.map(function(a){const s={x:a.x+n*i.x,y:a.y+n*i.y};return a.z&&i.z&&(s.z=a.z+n*i.z),s});return[new xe(o)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const o=Z.angle(this.points[0],this.points[3],this.points[1]),a=Z.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&a<0||o<0&&a>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),tr(Bz(i))<Vz/3}reduce(){let n,r=0,i=0,o=.01,a,s=[],c=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],n=1;n<u.length;n++)i=u[n],a=this.split(r,i),a._t1=r,a._t2=i,s.push(a),r=i;return s.forEach(function(l){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(a=l.split(r,i),!a.simple()){if(i-=o,tr(r-i)<o)return[];a=l.split(r,i),a._t1=Z.map(r,0,1,l._t1,l._t2),a._t2=Z.map(i,0,1,l._t1,l._t2),c.push(a),r=i;break}r<1&&(a=l.split(r,1),a._t1=Z.map(r,0,1,l._t1,l._t2),a._t2=l._t2,c.push(a))}),c}translate(n,r,i){i=typeof i=="number"?i:r;const o=this.order;let a=this.points.map((s,c)=>(1-c/o)*r+c/o*i);return new xe(this.points.map((s,c)=>({x:s.x+n.x*a[c],y:s.y+n.y*a[c]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const s=i?i(0):n,c=i?i(1):n,u=[this.offset(0,10),this.offset(1,10)],l=[],d=Z.lli4(u[0],u[0].c,u[1],u[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=l[f*r]=Z.copy(a[f*r]);h.x+=(f?c:s)*u[f].n.x,h.y+=(f?c:s)*u[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=a[f+1],p={x:h.x-d.x,y:h.y-d.y},y=i?i((f+1)/r):n;i&&!o&&(y=-y);var x=nr(p.x*p.x+p.y*p.y);p.x/=x,p.y/=x,l[f+1]={x:h.x+y*p.x,y:h.y+y*p.y}}}),new xe(l)):([0,1].forEach(f=>{if(r===2&&f)return;const h=l[f*r],p=this.derivative(f),y={x:h.x+p.x,y:h.y+p.y};l[f+1]=Z.lli4(h,y,d,a[f+1])}),new xe(l))}outline(n,r,i,o){if(r=r===void 0?n:r,this._linear){const S=this.normal(0),C=this.points[0],E=this.points[this.points.length-1];let N,A,R;i===void 0&&(i=n,o=r),N={x:C.x+S.x*n,y:C.y+S.y*n},R={x:E.x+S.x*i,y:E.y+S.y*i},A={x:(N.x+R.x)/2,y:(N.y+R.y)/2};const k=[N,A,R];N={x:C.x-S.x*r,y:C.y-S.y*r},R={x:E.x-S.x*o,y:E.y-S.y*o},A={x:(N.x+R.x)/2,y:(N.y+R.y)/2};const P=[R,A,N],O=Z.makeline(P[2],k[0]),M=Z.makeline(k[2],P[0]),T=[O,new xe(k),M,new xe(P)];return new gr(T)}const a=this.reduce(),s=a.length,c=[];let u=[],l,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(S,C,E,N,A){return function(R){const k=N/E,P=(N+A)/E,O=C-S;return Z.map(R,0,1,S+k*O,S+P*O)}}a.forEach(function(S){const C=S.length();h?(c.push(S.scale(p(n,i,f,d,C))),u.push(S.scale(p(-r,-o,f,d,C)))):(c.push(S.scale(n)),u.push(S.scale(-r))),d+=C}),u=u.map(function(S){return l=S.points,l[3]?S.points=[l[3],l[2],l[1],l[0]]:S.points=[l[2],l[1],l[0]],S}).reverse();const y=c[0].points[0],x=c[s-1].points[c[s-1].points.length-1],v=u[s-1].points[u[s-1].points.length-1],g=u[0].points[0],_=Z.makeline(v,y),b=Z.makeline(x,g),w=[_].concat(c).concat([b]).concat(u);return new gr(w)}outlineshapes(n,r,i){r=r||n;const o=this.outline(n,r).curves,a=[];for(let s=1,c=o.length;s<c/2;s++){const u=Z.makeshape(o[s],o[c-s],i);u.startcap.virtual=s>1,u.endcap.virtual=s<c/2-1,a.push(u)}return a}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof xe&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=Kx(n.p1.x,n.p2.x),i=Kx(n.p1.y,n.p2.y),o=Yx(n.p1.x,n.p2.x),a=Yx(n.p1.y,n.p2.y);return Z.roots(this.points,n).filter(s=>{var c=this.get(s);return Z.between(c.x,r,o)&&Z.between(c.y,i,a)})}selfintersects(n){const r=this.reduce(),i=r.length-2,o=[];for(let a=0,s,c,u;a<i;a++)c=r.slice(a,a+1),u=r.slice(a+2),s=this.curveintersects(c,u,n),o.push(...s);return o}curveintersects(n,r,i){const o=[];n.forEach(function(s){r.forEach(function(c){s.overlaps(c)&&o.push({left:s,right:c})})});let a=[];return o.forEach(function(s){const c=Z.pairiteration(s.left,s.right,i);c.length>0&&(a=a.concat(c))}),a}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,o){const a=(o-i)/4,s=this.get(i+a),c=this.get(o-a),u=Z.dist(n,r),l=Z.dist(n,s),d=Z.dist(n,c);return tr(l-u)+tr(d-u)}_iterate(n,r){let i=0,o=1,a;do{a=0,o=1;let s=this.get(i),c,u,l,d,f=!1,h=!1,p,y=o,x=1;do if(h=f,d=l,y=(i+o)/2,c=this.get(y),u=this.get(o),l=Z.getccenter(s,c,u),l.interval={start:i,end:o},f=this._error(l,s,i,o)<=n,p=h&&!f,p||(x=o),f){if(o>=1){if(l.interval.end=x=1,d=l,o>1){let g={x:l.x+l.r*Fz(l.e),y:l.y+l.r*Hz(l.e)};l.e+=Z.angle({x:l.x,y:l.y},g,this.get(1))}break}o=o+(o-i)/2}else o=y;while(!p&&a++<100);if(a>=100)break;d=d||l,r.push(d),i=x}while(o<1);return r}}function nd(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Gz(e){if(Array.isArray(e))return e}function Uz(e){if(Array.isArray(e))return nd(e)}function Wz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kz(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function Yz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(e,n){if(e==null)return{};var r,i,o=Jz(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Jz(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function Qz(e,n){return Gz(e)||Kz(e,n)||RS(e,n)||Yz()}function e4(e){return Uz(e)||Wz(e)||RS(e)||Xz()}function t4(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function n4(e){var n=t4(e,"string");return typeof n=="symbol"?n:n+""}function RS(e,n){if(e){if(typeof e=="string")return nd(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nd(e,n):void 0}}var r4=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),a=e.reduce(function(c,u){var l=c,d=u;return o.forEach(function(f,h){var p=f.keyAccessor,y=f.isProp,x;if(y){var v=d,g=v[p],_=Zz(v,[p].map(n4));x=g,d=_}else x=p(d,h);h+1<o.length?(l.hasOwnProperty(x)||(l[x]={}),l=l[x]):r?(l.hasOwnProperty(x)||(l[x]=[]),l[x].push(d)):l[x]=d}),c},{});r instanceof Function&&(function c(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;l===o.length?Object.keys(u).forEach(function(d){return u[d]=r(u[d])}):Object.values(u).forEach(function(d){return c(d,l+1)})})(a);var s=a;return i&&(s=[],(function c(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];l.length===o.length?s.push({keys:l,vals:u}):Object.entries(u).forEach(function(d){var f=Qz(d,2),h=f[0],p=f[1];return c(p,[].concat(e4(l),[h]))})})(a),n instanceof Array&&n.length===0&&s.length===1&&(s[0].keys=[])),s});function i4(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const Xx=Symbol("implicit");function AS(){var e=new yx,n=[],r=[],i=Xx;function o(a){let s=e.get(a);if(s===void 0){if(i!==Xx)return i;e.set(a,s=n.push(a)-1)}return r[s%r.length]}return o.domain=function(a){if(!arguments.length)return n.slice();n=[],e=new yx;for(const s of a)e.has(s)||e.set(s,n.push(s)-1);return o},o.range=function(a){return arguments.length?(r=Array.from(a),o):r.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.copy=function(){return AS(n,r).unknown(i)},i4.apply(o,arguments),o}function o4(e){for(var n=e.length/6|0,r=new Array(n),i=0;i<n;)r[i]="#"+e.slice(i*6,++i*6);return r}const a4=o4("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function s4(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var c4=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;s4(c4);function rd(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function u4(e){if(Array.isArray(e))return e}function l4(e){if(Array.isArray(e))return rd(e)}function Zx(e,n,r){if(jS())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var o=new(e.bind.apply(e,i));return o}function Pr(e,n,r){return(n=m4(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function jS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jS=function(){return!!e})()}function f4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d4(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(d){l=!0,o=d}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}function h4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jx(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function wn(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Jx(Object(r),!0).forEach(function(i){Pr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jx(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function mr(e,n){return u4(e)||d4(e,n)||PS(e,n)||h4()}function et(e){return l4(e)||f4(e)||PS(e)||p4()}function g4(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function m4(e){var n=g4(e,"string");return typeof n=="symbol"?n:n+""}function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},id(e)}function PS(e,n){if(e){if(typeof e=="string")return rd(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rd(e,n):void 0}}var y4=AS(a4);function Qx(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=y4(n(i))})}function v4(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.nodeFilter,s=a===void 0?function(){return!0}:a,c=o.onLoopError,u=c===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:c,l={};r.forEach(function(p){return l[n(p)]={data:p,out:[],depth:-1,skip:!s(p)}}),i.forEach(function(p){var y=p.source,x=p.target,v=w(y),g=w(x);if(!l.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!l.hasOwnProperty(g))throw"Missing target node with id: ".concat(g);var _=l[v],b=l[g];_.out.push(b);function w(S){return id(S)==="object"?n(S):S}});var d=[];h(Object.values(l));var f=Object.assign.apply(Object,[{}].concat(et(Object.entries(l).filter(function(p){var y=mr(p,2),x=y[1];return!x.skip}).map(function(p){var y=mr(p,2),x=y[0],v=y[1];return Pr({},x,v.depth)}))));return f;function h(p){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var w=p[g];if(y.indexOf(w)!==-1){var S=[].concat(et(y.slice(y.indexOf(w))),[w]).map(function(C){return n(C.data)});return d.some(function(C){return C.length===S.length&&C.every(function(E,N){return E===S[N]})})||(d.push(S),u(S)),1}x>w.depth&&(w.depth=x,h(w.out,[].concat(et(y),[w]),x+(w.skip?0:1)))},g=0,_=p.length;g<_;g++)v()}}var x4=2,Te=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},eb=function(n,r){if(!r.isShadow){var i=ye(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var a=Math.round(Math.abs(i(o)));a?o.__photons=et(Array(a)).map(function(){return{}}):delete o.__photons})}},Ti=ih({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,eb(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Te},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Te},nodeColor:{default:"color",triggerUpdate:!1,onChange:Te},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Te},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Te},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Te},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Te},linkColor:{default:"color",triggerUpdate:!1,onChange:Te},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Te},linkWidth:{default:1,triggerUpdate:!1,onChange:Te},linkCurvature:{default:0,triggerUpdate:!1,onChange:Te},linkCanvasObject:{triggerUpdate:!1,onChange:Te},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Te},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Te},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Te},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Te},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:eb},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),o(),!n.isShadow&&a(),!n.isShadow&&s(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var c=ye(n.nodeVisibility),u=ye(n.nodeVal),l=ye(n.nodeColor),d=ye(n.nodeCanvasObjectMode),f=n.ctx,h=n.isShadow/n.globalScale,p=n.graphData.nodes.filter(c);f.save(),p.forEach(function(y){var x=d(y);if(n.nodeCanvasObject&&(x==="before"||x==="replace")&&(n.nodeCanvasObject(y,f,n.globalScale),x==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,u(y)||1))*n.nodeRelSize+h;f.beginPath(),f.arc(y.x,y.y,v,0,2*Math.PI,!1),f.fillStyle=l(y)||"rgba(31, 120, 180, 0.92)",f.fill(),n.nodeCanvasObject&&x==="after"&&n.nodeCanvasObject(y,n.ctx,n.globalScale)}),f.restore()}function o(){var c=ye(n.linkVisibility),u=ye(n.linkColor),l=ye(n.linkWidth),d=ye(n.linkLineDash),f=ye(n.linkCurvature),h=ye(n.linkCanvasObjectMode),p=n.ctx,y=n.isShadow*2,x=n.graphData.links.filter(c);x.forEach(C);var v=[],g=[],_=x;if(n.linkCanvasObject){var b=[],w=[];x.forEach(function(E){return({before:v,after:g,replace:b}[h(E)]||w).push(E)}),_=[].concat(et(v),g,w),v=v.concat(b)}p.save(),v.forEach(function(E){return n.linkCanvasObject(E,p,n.globalScale)}),p.restore();var S=r4(_,[u,l,d]);p.save(),Object.entries(S).forEach(function(E){var N=mr(E,2),A=N[0],R=N[1],k=!A||A==="undefined"?"rgba(0,0,0,0.15)":A;Object.entries(R).forEach(function(P){var O=mr(P,2),M=O[0],T=O[1],q=(M||1)/n.globalScale+y;Object.entries(T).forEach(function(B){var F=mr(B,2);F[0];var G=F[1],V=d(G[0]);p.beginPath(),G.forEach(function(K){var W=K.source,D=K.target;if(!(!W||!D||!W.hasOwnProperty("x")||!D.hasOwnProperty("x"))){p.moveTo(W.x,W.y);var I=K.__controlPoints;I?p[I.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,et(I).concat([D.x,D.y])):p.lineTo(D.x,D.y)}}),p.strokeStyle=k,p.lineWidth=q,p.setLineDash(V||[]),p.stroke()})})}),p.restore(),p.save(),g.forEach(function(E){return n.linkCanvasObject(E,p,n.globalScale)}),p.restore();function C(E){var N=f(E);if(!N){E.__controlPoints=null;return}var A=E.source,R=E.target;if(!(!A||!R||!A.hasOwnProperty("x")||!R.hasOwnProperty("x"))){var k=Math.sqrt(Math.pow(R.x-A.x,2)+Math.pow(R.y-A.y,2));if(k>0){var P=Math.atan2(R.y-A.y,R.x-A.x),O=k*N,M={x:(A.x+R.x)/2+O*Math.cos(P-Math.PI/2),y:(A.y+R.y)/2+O*Math.sin(P-Math.PI/2)};E.__controlPoints=[M.x,M.y]}else{var T=N*70;E.__controlPoints=[R.x,R.y-T,R.x+T,R.y]}}}}function a(){var c=1.6,u=.2,l=ye(n.linkDirectionalArrowLength),d=ye(n.linkDirectionalArrowRelPos),f=ye(n.linkVisibility),h=ye(n.linkDirectionalArrowColor||n.linkColor),p=ye(n.nodeVal),y=n.ctx;y.save(),n.graphData.links.filter(f).forEach(function(x){var v=l(x);if(!(!v||v<0)){var g=x.source,_=x.target;if(!(!g||!_||!g.hasOwnProperty("x")||!_.hasOwnProperty("x"))){var b=Math.sqrt(Math.max(0,p(g)||1))*n.nodeRelSize,w=Math.sqrt(Math.max(0,p(_)||1))*n.nodeRelSize,S=Math.min(1,Math.max(0,d(x))),C=h(x)||"rgba(0,0,0,0.28)",E=v/c/2,N=x.__controlPoints&&Zx(xe,[g.x,g.y].concat(et(x.__controlPoints),[_.x,_.y])),A=N?function(q){return N.get(q)}:function(q){return{x:g.x+(_.x-g.x)*q||0,y:g.y+(_.y-g.y)*q||0}},R=N?N.length():Math.sqrt(Math.pow(_.x-g.x,2)+Math.pow(_.y-g.y,2)),k=b+v+(R-b-w-v)*S,P=A(k/R),O=A((k-v)/R),M=A((k-v*(1-u))/R),T=Math.atan2(P.y-O.y,P.x-O.x)-Math.PI/2;y.beginPath(),y.moveTo(P.x,P.y),y.lineTo(O.x+E*Math.cos(T),O.y+E*Math.sin(T)),y.lineTo(M.x,M.y),y.lineTo(O.x-E*Math.cos(T),O.y-E*Math.sin(T)),y.fillStyle=C,y.fill()}}}),y.restore()}function s(){var c=ye(n.linkDirectionalParticles),u=ye(n.linkDirectionalParticleSpeed),l=ye(n.linkDirectionalParticleOffset),d=ye(n.linkDirectionalParticleWidth),f=ye(n.linkVisibility),h=ye(n.linkDirectionalParticleColor||n.linkColor),p=n.ctx;p.save(),n.graphData.links.filter(f).forEach(function(y){var x=c(y);if(!(!y.hasOwnProperty("__photons")||!y.__photons.length)){var v=y.source,g=y.target;if(!(!v||!g||!v.hasOwnProperty("x")||!g.hasOwnProperty("x"))){var _=u(y),b=Math.abs(l(y)),w=y.__photons||[],S=Math.max(0,d(y)/2)/Math.sqrt(n.globalScale),C=h(y)||"rgba(0,0,0,0.28)";p.fillStyle=C;var E=y.__controlPoints?Zx(xe,[v.x,v.y].concat(et(y.__controlPoints),[g.x,g.y])):null,N=0,A=!1;w.forEach(function(R){var k=!!R.__singleHop;if(R.hasOwnProperty("__progressRatio")||(R.__progressRatio=k?0:(N+b)/x),!k&&N++,R.__progressRatio+=_,R.__progressRatio>=1)if(!k)R.__progressRatio=R.__progressRatio%1;else{A=!0;return}var P=R.__progressRatio,O=E?E.get(P):{x:v.x+(g.x-v.x)*P||0,y:v.y+(g.y-v.y)*P||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(O.x,O.y,y,p,n.globalScale):(p.beginPath(),p.arc(O.x,O.y,S,0,2*Math.PI,!1),p.fill())}),A&&(y.__photons=y.__photons.filter(function(R){return!R.__singleHop||R.__progressRatio<=1}))}}}),p.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Oz().force("link",kz()).force("charge",qz()).force("center",AD()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&Qx(n.graphData.nodes,ye(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&Qx(n.graphData.links,ye(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(h){h.source=h[n.linkSource],h.target=h[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(h){return h[n.nodeId]}).links(n.graphData.links);var o=n.dagMode&&v4(n.graphData,function(h){return h[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),a=Math.max.apply(Math,et(Object.values(o||[]))),s=n.dagLevelDistance||n.graphData.nodes.length/(a||1)*x4*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return delete h[c]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var u=["rl","bu"].includes(n.dagMode),l=function(p){return(o[p[n.nodeId]]-a/2)*s*(u?-1:1)},d=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return h[d]=l(h)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?Dz(function(h){var p=o[h[n.nodeId]]||-1;return(n.dagMode==="radialin"?a-p:p)*s}).strength(function(h){return n.dagNodeFilter(h)?1:0}):null);for(var f=0;f<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);f++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function MS(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(c,u){r.forEach(function(l){return u[l][a](c)})},triggerUpdate:!1}},linkMethod:function(a){return function(s){for(var c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];var d=[];return r.forEach(function(f){var h=s[f],p=h[a].apply(h,u);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var b4=800,_4=4,w4=5,IS=MS("forceGraph",Ti),S4=MS(["forceGraph","shadowGraph"],Ti),C4=Object.assign.apply(Object,et(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Pr({},e,IS.linkProp(e))})).concat(et(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Pr({},e,S4.linkProp(e))})))),E4=Object.assign.apply(Object,et(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Pr({},e,IS.linkMethod(e))})));function bf(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!n&&!r&&a.getContext("2d").scale(i,i)});var o=ot(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function TS(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function tb(e,n,r){e.save(),TS(e),e.clearRect(0,0,n,r),e.restore()}var N4=ih({props:wn({width:{default:window.innerWidth,onChange:function(n,r){return bf(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return bf(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(o){return(o||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(o){var a=o.type,s=o.objs;s.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(c.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:a,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},C4),aliases:{stopAnimation:"pauseAnimation"},methods:wn({graph2ScreenCoords:function(n,r,i){var o=ot(n.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(n,r,i){var o=ot(n.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(n,r,i,o){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var a=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?n.tweenGroup.add(new Cx(s()).to(a,o).easing(sn.Quadratic.Out).onUpdate(c).start()):c(a),this}return s();function s(){var u=ot(n.canvas);return{x:(n.width/2-u.x)/u.k,y:(n.height/2-u.y)/u.k}}function c(u){var l=u.x,d=u.y;n.zoom.translateTo(n.zoom.__baseElem,l===void 0?s().x:l,d===void 0?s().y:d),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new Cx({k:o()}).to({k:r},i).easing(sn.Quadratic.Out).onUpdate(function(s){var c=s.k;return a(c)}).start()):a(r),this;return o();function o(){return ot(n.canvas).k}function a(s){n.zoom.scaleTo(n.zoom.__baseElem,s),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var c=this.getGraphBbox.apply(this,a);if(c){var u={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},l=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(c.x[1]-c.x[0]),(n.height-i*2)/(c.y[1]-c.y[0])));this.centerAt(u.x,u.y,r),this.zoom(l,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ye(n.nodeVal),o=function(c){return Math.sqrt(Math.max(0,i(c)||1))*n.nodeRelSize},a=n.graphData.nodes.filter(r).map(function(s){return{x:s.x,y:s.y,r:o(s)}});return a.length?{x:[bx(a,function(s){return s.x-s.r}),xx(a,function(s){return s.x+s.r})],y:[bx(a,function(s){return s.y-s.r}),xx(a,function(s){return s.y+s.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},E4),stateInit:function(){return{lastSetZoom:1,zoom:Nd(),forceGraph:new Ti,shadowGraph:new Ti().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new sD,tweenGroup:new nS}},init:function(n,r){var i=this;n.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",n.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var a=r.canvas.getContext("2d"),s=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},u=function(){var f=null,h=window.devicePixelRatio,p=c.x>0&&c.y>0?s.getImageData(c.x*h,c.y*h,1,1):null;return p&&(f=r.colorTracker.lookup(p.data)),f};Oe(r.canvas).call(xd().subject(function(){if(!r.enableNodeDrag)return null;var d=u();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var f=d.subject;f.__initialDragPos={x:f.x,y:f.y,fx:f.fx,fy:f.fy},d.active||(f.fx=f.x,f.fy=f.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var f=d.subject,h=f.__initialDragPos,p=d,y=ot(r.canvas).k,x={x:h.x+(p.x-h.x)/y-f.x,y:h.y+(p.y-h.y)/y-f.y};["x","y"].forEach(function(v){return f["f".concat(v)]=f[v]=h[v]+(p[v]-h[v])/y}),!(!f.__dragged&&w4>=Math.sqrt(F5(["x","y"].map(function(v){return Math.pow(d[v]-h[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,f.__dragged=!0,r.onNodeDrag(f,x))}).on("end",function(d){var f=d.subject,h=f.__initialDragPos,p={x:f.x-h.x,y:f.y-h.y};h.fx===void 0&&(f.fx=void 0),h.fy===void 0&&(f.fy=void 0),delete f.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,p))})),r.zoom(r.zoom.__baseElem=Oe(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||ye(r.enableZoomInteraction)(d))&&(d.type==="wheel"||ye(r.enablePanInteraction)(d))}).on("zoom",function(d){var f=d.transform;[a,s].forEach(function(h){TS(h),h.translate(f.x,f.y),h.scale(f.k,f.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(wn(wn({},f),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(wn(wn({},d.transform),i.centerAt()))}),bf(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){ot(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=_4/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new RD(o),["pointermove","pointerdown"].forEach(function(d){return o.addEventListener(d,function(f){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=f),!r.isPointerDragging&&f.type==="pointermove"&&r.onBackgroundClick&&(f.pressure>0||r.isPointerPressed)&&(f.pointerType==="mouse"||f.movementX===void 0||[f.movementX,f.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var h=p(o);c.x=f.pageX-h.left,c.y=f.pageY-h.top;function p(y){var x=y.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+g,left:x.left+v}}},{passive:!0})}),o.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var f=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var h=r["on".concat(r.hoverObj.type,"Click")];h&&h.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,f);if(d.button===2)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"RightClick")];p&&p.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,f)})}},{passive:!0}),o.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(a),r.shadowGraph(s);var l=pq(function(){tb(s,r.width,r.height),r.shadowGraph.linkWidth(function(f){return ye(r.linkWidth)(f)+r.linkHoverPrecision});var d=ot(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},b4);r.flushShadowCanvas=l.flush,(this._animationCycle=function d(){var f=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(b){return b.__photons&&b.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var h=r.isPointerDragging?null:u();if(h!==r.hoverObj){var p=r.hoverObj,y=p?p.type:null,x=h?h.type:null;if(y&&y!==x){var v=r["on".concat(y,"Hover")];v&&v(null,p.d)}if(x){var g=r["on".concat(x,"Hover")];g&&g(h.d,y===x?p.d:null)}r.tooltip.content(h&&ye(r["".concat(h.type.toLowerCase(),"Label")])(h.d)||null),r.canvas.classList[(h&&r["on".concat(x,"Click")]||!h&&r.onBackgroundClick)&&ye(r.showPointerCursor)(h?.d)?"add":"remove"]("clickable"),r.hoverObj=h}f&&l()}if(f){tb(a,r.width,r.height);var _=ot(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(a,_),r.forceGraph.globalScale(_).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(a,_)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(n){}}),_f={exports:{}},wf,nb;function k4(){if(nb)return wf;nb=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wf=e,wf}var Sf,rb;function R4(){if(rb)return Sf;rb=1;var e=k4();function n(){}function r(){}return r.resetWarningCache=n,Sf=function(){function i(s,c,u,l,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function o(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},Sf}var ib;function A4(){return ib||(ib=1,_f.exports=R4()()),_f.exports}var j4=A4();const $=ad(j4),Eo={width:$.number,height:$.number,graphData:$.shape({nodes:$.arrayOf($.object).isRequired,links:$.arrayOf($.object).isRequired}),backgroundColor:$.string,nodeRelSize:$.number,nodeId:$.string,nodeLabel:$.oneOfType([$.string,$.func]),nodeVal:$.oneOfType([$.number,$.string,$.func]),nodeVisibility:$.oneOfType([$.bool,$.string,$.func]),nodeColor:$.oneOfType([$.string,$.func]),nodeAutoColorBy:$.oneOfType([$.string,$.func]),onNodeHover:$.func,onNodeClick:$.func,linkSource:$.string,linkTarget:$.string,linkLabel:$.oneOfType([$.string,$.func]),linkVisibility:$.oneOfType([$.bool,$.string,$.func]),linkColor:$.oneOfType([$.string,$.func]),linkAutoColorBy:$.oneOfType([$.string,$.func]),linkWidth:$.oneOfType([$.number,$.string,$.func]),linkCurvature:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowLength:$.oneOfType([$.number,$.string,$.func]),linkDirectionalArrowColor:$.oneOfType([$.string,$.func]),linkDirectionalArrowRelPos:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticles:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleSpeed:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleOffset:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleWidth:$.oneOfType([$.number,$.string,$.func]),linkDirectionalParticleColor:$.oneOfType([$.string,$.func]),onLinkHover:$.func,onLinkClick:$.func,dagMode:$.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:$.number,dagNodeFilter:$.func,onDagError:$.func,d3AlphaMin:$.number,d3AlphaDecay:$.number,d3VelocityDecay:$.number,warmupTicks:$.number,cooldownTicks:$.number,cooldownTime:$.number,onEngineTick:$.func,onEngineStop:$.func,getGraphBbox:$.func},OS={zoomToFit:$.func,onNodeRightClick:$.func,onNodeDrag:$.func,onNodeDragEnd:$.func,onLinkRightClick:$.func,linkHoverPrecision:$.number,onBackgroundClick:$.func,onBackgroundRightClick:$.func,showPointerCursor:$.oneOfType([$.bool,$.func]),enablePointerInteraction:$.bool,enableNodeDrag:$.bool},dh={showNavInfo:$.bool,nodeOpacity:$.number,nodeResolution:$.number,nodeThreeObject:$.oneOfType([$.object,$.string,$.func]),nodeThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),nodePositionUpdate:$.func,linkOpacity:$.number,linkResolution:$.number,linkCurveRotation:$.oneOfType([$.number,$.string,$.func]),linkMaterial:$.oneOfType([$.object,$.string,$.func]),linkThreeObject:$.oneOfType([$.object,$.string,$.func]),linkThreeObjectExtend:$.oneOfType([$.bool,$.string,$.func]),linkPositionUpdate:$.func,linkDirectionalArrowResolution:$.number,linkDirectionalParticleResolution:$.number,linkDirectionalParticleThreeObject:$.oneOfType([$.object,$.string,$.func]),forceEngine:$.oneOf(["d3","ngraph"]),ngraphPhysics:$.object,numDimensions:$.oneOf([1,2,3])},P4=Object.assign({},Eo,OS,{linkLineDash:$.oneOfType([$.arrayOf($.number),$.string,$.func]),nodeCanvasObjectMode:$.oneOfType([$.string,$.func]),nodeCanvasObject:$.func,nodePointerAreaPaint:$.func,linkCanvasObjectMode:$.oneOfType([$.string,$.func]),linkCanvasObject:$.func,linkPointerAreaPaint:$.func,linkDirectionalParticleCanvasObject:$.func,autoPauseRedraw:$.bool,minZoom:$.number,maxZoom:$.number,enableZoomInteraction:$.oneOfType([$.bool,$.func]),enablePanInteraction:$.oneOfType([$.bool,$.func]),onZoom:$.func,onZoomEnd:$.func,onRenderFramePre:$.func,onRenderFramePost:$.func});Object.assign({},Eo,OS,dh,{enableNavigationControls:$.bool,controlType:$.oneOf(["trackball","orbit","fly"]),rendererConfig:$.object,extraRenderers:$.arrayOf($.shape({render:$.func.isRequired}))});Object.assign({},Eo,dh,{nodeDesc:$.oneOfType([$.string,$.func]),linkDesc:$.oneOfType([$.string,$.func])});Object.assign({},Eo,dh,{markerAttrs:$.object,yOffset:$.number,glScale:$.number});const No=D5(N4,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});No.displayName="ForceGraph2D";No.propTypes=P4;const qS={"":"#6366f1",School:"#22d3ee",Clinical:"#f472b6",Research:"#a78bfa",Personal:"#34d399"};function ob(e){const n=e.split("/")[0];return qS[n]||"#6366f1"}function M4({onNodeClick:e}){const n=j.useRef(null),r=j.useRef(),[i,o]=j.useState({nodes:[],links:[]}),[a,s]=j.useState(!0),[c,u]=j.useState(null),[l,d]=j.useState(null),[f,h]=j.useState(null),[p,y]=j.useState(1),[x,v]=j.useState(new Set),[g,_]=j.useState(!1);j.useEffect(()=>{const R=n.current;if(!R)return;const k=()=>{const O=R.getBoundingClientRect();d({width:Math.max(1,Math.floor(O.width)-2),height:Math.max(1,Math.floor(O.height)-2)})};k();const P=new ResizeObserver(k);return P.observe(R),()=>P.disconnect()},[]),j.useEffect(()=>{let R=!1;return s(!0),pe.obsidian.getGraph().then(k=>{R||(k.success?o({nodes:k.nodes,links:k.links}):u("Failed to load graph data"),s(!1))}).catch(()=>{R||(u("Network error loading graph"),s(!1))}),()=>{R=!0}},[]);const b=j.useMemo(()=>{const R=new Set;for(const k of i.nodes){const P=k.folder?.split("/")[0]||"(root)";R.add(P)}return Array.from(R).sort()},[i.nodes]);j.useEffect(()=>{b.length>0&&!g&&(_(!0),v(new Set(b)))},[b,g]);const w=j.useMemo(()=>{if(x.size===0||x.size===b.length)return i;const R=new Set,k=i.nodes.filter(O=>{const M=O.folder?.split("/")[0]||"(root)",T=x.has(M);return T&&R.add(O.id),T}),P=i.links.filter(O=>{const M=typeof O.source=="string"?O.source:O.source.id,T=typeof O.target=="string"?O.target:O.target.id;return R.has(M)&&R.has(T)});return{nodes:k,links:P}},[i,x,b.length]),S=R=>{v(k=>{const P=new Set(k);return P.has(R)?P.delete(R):P.add(R),P})},C=j.useCallback(R=>{e?.(R.name)},[e]),E=j.useCallback(R=>{const k=Math.max(.1,Math.min(10,R));y(k);const P=r.current;P?.zoom&&P.zoom(k,200)},[]),N=j.useCallback((R,k,P)=>{const O=R.name,M=Math.max(10/P,2),T=Math.max(4,3+w.links.filter(F=>(typeof F.source=="string"?F.source:F.source.id)===R.id||(typeof F.target=="string"?F.target:F.target.id)===R.id).length*.5),q=ob(R.folder),B=f?.id===R.id;k.beginPath(),k.arc(R.x||0,R.y||0,T,0,2*Math.PI),k.fillStyle=B?"#ffffff":q,k.fill(),(B||P>1.5)&&(k.font=`${M}px monospace`,k.textAlign="center",k.textBaseline="top",k.fillStyle="rgba(255,255,255,0.9)",k.fillText(O,R.x||0,(R.y||0)+T+2))},[w.links,f]),A=!a&&!c&&l;return m.jsxs("div",{className:"flex h-full",children:[m.jsx("div",{className:"w-[180px] shrink-0 border-r border-secondary/30 bg-black/60",children:m.jsx(nn,{className:"h-full",children:m.jsxs("div",{className:"p-3 space-y-3",children:[m.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"FOLDERS"}),m.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[m.jsx(Ht,{checked:x.size===b.length,onCheckedChange:R=>{v(R?new Set(b):new Set)},className:"border-primary data-[state=checked]:bg-primary"}),m.jsx("span",{className:"font-terminal text-xs text-primary",children:"All Folders"})]}),b.map(R=>m.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[m.jsx(Ht,{checked:x.has(R),onCheckedChange:()=>S(R),className:"border-primary data-[state=checked]:bg-primary"}),m.jsx("span",{className:"font-terminal text-xs truncate",style:{color:ob(R==="(root)"?"":R)},children:R})]},R)),m.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[m.jsx("div",{className:"font-arcade text-[10px] text-muted-foreground mb-1",children:"COLORS"}),Object.entries(qS).filter(([R])=>R).map(([R,k])=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:k}}),m.jsx("span",{className:"font-terminal text-[10px]",style:{color:k},children:R})]},R))]}),m.jsxs("div",{className:"pt-2 border-t border-secondary/30 font-terminal text-[10px] text-muted-foreground",children:[m.jsxs("div",{children:["Notes: ",w.nodes.length]}),m.jsxs("div",{children:["Links: ",w.links.length]})]})]})})}),m.jsxs("div",{ref:n,className:"flex-1 relative bg-black/80 rounded border border-primary/30 overflow-hidden",children:[a&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-terminal z-10",children:m.jsx("div",{className:"animate-pulse",children:"SCANNING VAULT CONNECTIONS..."})}),c&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-400 font-terminal z-10",children:c}),A&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"absolute top-2 left-2 right-2 z-10 flex items-center justify-between pointer-events-none",children:[m.jsx("div",{className:"flex items-center gap-2 pointer-events-auto",children:m.jsx("button",{onClick:()=>{r.current?.zoomToFit?.(400,40),setTimeout(()=>{const R=r.current;R?.zoom&&y(R.zoom())},450)},className:"px-2 py-0.5 text-xs font-terminal bg-primary/20 border border-primary/40 text-primary hover:bg-primary/30 rounded-none",children:"CENTER"})}),m.jsxs("div",{className:"flex items-center gap-1.5 pointer-events-auto bg-black/70 border border-primary/30 rounded-none px-2 py-1",children:[m.jsx("button",{onClick:()=>E(p/1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"-"}),m.jsx("input",{type:"range",min:-2.3,max:2.3,step:.01,value:Math.log(p),onChange:R=>E(Math.exp(parseFloat(R.target.value))),className:"w-24 h-1 accent-primary cursor-pointer"}),m.jsx("button",{onClick:()=>E(p*1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"+"}),m.jsxs("span",{className:"text-[10px] font-terminal text-primary/50 w-8 text-right",children:[Math.round(p*100),"%"]})]})]}),m.jsx(No,{ref:r,graphData:w,width:l.width,height:l.height,nodeCanvasObject:N,nodePointerAreaPaint:(R,k,P)=>{P.beginPath(),P.arc(R.x||0,R.y||0,6,0,2*Math.PI),P.fillStyle=k,P.fill()},onNodeClick:C,onNodeHover:R=>h(R),onZoom:({k:R})=>y(R),linkColor:()=>"rgba(99, 102, 241, 0.15)",linkWidth:.5,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.02,d3VelocityDecay:.3})]})]})]})}const I4={course:"#22d3ee",module:"#facc15",lo:"#4ade80"},T4={course:"rgba(34,211,238,0.15)",module:"rgba(250,204,21,0.12)",lo:"rgba(74,222,128,0.08)"};function O4(){const e=j.useRef(null),n=j.useRef(null),r=j.useRef(!1),[i,o]=j.useState(null),[a,s]=j.useState(new Set),[c,u]=j.useState(new Set),[l,d]=j.useState(!0),[f,h]=j.useState(null),{data:p=[]}=ke({queryKey:["courses"],queryFn:()=>pe.courses.getActive()}),y=p.map(N=>N.id).sort(),{data:x=[]}=ke({queryKey:["modules","all",y],queryFn:async()=>(await Promise.all(p.map(A=>pe.modules.getByCourse(A.id)))).flat(),enabled:p.length>0}),{data:v=[]}=ke({queryKey:["learningObjectives","all",y,l],queryFn:async()=>(await Promise.all(p.map(A=>pe.learningObjectives.getByCourse(A.id)))).flat(),enabled:p.length>0&&l});j.useEffect(()=>{const N=e.current;if(!N)return;const A=()=>{const k=N.getBoundingClientRect();o({width:Math.max(1,Math.floor(k.width)-2),height:Math.max(1,Math.floor(k.height)-2)})};A();const R=new ResizeObserver(A);return R.observe(N),()=>R.disconnect()},[]),j.useEffect(()=>{p.length>0&&!r.current&&(r.current=!0,s(new Set(p.map(N=>N.id))))},[p]);const g=j.useMemo(()=>{const N=[],A=[],R=new Map;for(const P of x){const O=R.get(P.courseId)??[];O.push(P),R.set(P.courseId,O)}const k=new Map;for(const P of v){const O=k.get(P.moduleId)??[];O.push(P),k.set(P.moduleId,O)}for(const P of p){if(!a.has(P.id))continue;const O=`course-${P.id}`;N.push({id:O,name:P.name,type:"course"});const M=R.get(P.id)??[];for(const T of M){if(c.size>0&&!c.has(T.id))continue;const q=`module-${T.id}`;if(N.push({id:q,name:T.name,type:"module"}),A.push({source:O,target:q}),l){const B=k.get(T.id)??[];for(const F of B){const G=`lo-${F.id}`;N.push({id:G,name:`${F.loCode}: ${F.title}`,type:"lo"}),A.push({source:q,target:G})}}}}return{nodes:N,links:A}},[p,x,v,a,c,l]),_=N=>{s(A=>{const R=new Set(A);return R.has(N)?R.delete(N):R.add(N),R})},b=N=>{u(A=>{const R=new Set(A);return R.has(N)?R.delete(N):R.add(N),R})},w=j.useCallback((N,A,R)=>{const k=I4[N.type]||"#6366f1",P=T4[N.type]||"rgba(99,102,241,0.1)",O=f===N.id,M=N.x||0,T=N.y||0,q=N.type==="course"?14:N.type==="module"?11:9,B=Math.max(q/R,2);A.font=`${N.type==="course"?"bold ":""}${B}px monospace`;const F=N.type==="lo"?50:35,G=N.name.length>F?N.name.slice(0,F)+"...":N.name,V=A.measureText(G).width,K=8/R,W=5/R,D=V+K*2,I=B+W*2,z=4/R;A.beginPath(),A.roundRect(M-D/2,T-I/2,D,I,z),A.fillStyle=O?k:P,A.fill(),A.strokeStyle=O?"#ffffff":k,A.lineWidth=(N.type==="course"?2:1)/R,A.stroke(),A.textAlign="center",A.textBaseline="middle",A.fillStyle=O?"#000000":k,A.fillText(G,M,T)},[f]),S=j.useCallback((N,A,R,k)=>{const P=N.x||0,O=N.y||0,T=(N.type==="course"?60:N.type==="module"?45:30)/k;R.fillStyle=A,R.fillRect(P-T/2,O-T/2,T,T)},[]),C=j.useCallback((N,A,R)=>{const k=N.source,P=N.target;if(!k||!P)return;const O=k.x||0,M=k.y||0,T=P.x||0,q=P.y||0,B=(O+T)/2,F=(M+q)/2,G=T-O,V=q-M,K=B-V*.15,W=F+G*.15;A.beginPath(),A.moveTo(O,M),A.quadraticCurveTo(K,W,T,q),A.strokeStyle="rgba(148, 163, 184, 0.25)",A.lineWidth=Math.max(1.5/R,.3),A.stroke()},[]),E=x.filter(N=>a.has(N.courseId));return m.jsxs("div",{className:"flex h-full",children:[m.jsx("div",{className:"w-[220px] shrink-0 border-r border-secondary/30 bg-black/60",children:m.jsx(nn,{className:"h-full",children:m.jsxs("div",{className:"p-3 space-y-4",children:[m.jsxs("div",{children:[m.jsx("div",{className:"font-arcade text-[10px] text-primary mb-2",children:"COURSES"}),p.map(N=>m.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[m.jsx(Ht,{checked:a.has(N.id),onCheckedChange:()=>_(N.id),className:"border-cyan-500 data-[state=checked]:bg-cyan-500"}),m.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:N.name})]},N.id))]}),E.length>0&&m.jsxs("div",{children:[m.jsx("div",{className:"font-arcade text-[10px] text-yellow-400 mb-2",children:"MODULES"}),m.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer mb-1",children:[m.jsx(Ht,{checked:c.size===0,onCheckedChange:()=>u(new Set),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),m.jsx("span",{className:"font-terminal text-xs text-yellow-200",children:"All Modules"})]}),E.map(N=>m.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[m.jsx(Ht,{checked:c.size===0||c.has(N.id),onCheckedChange:()=>b(N.id),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),m.jsx("span",{className:"font-terminal text-[10px] text-yellow-100 truncate",children:N.name})]},N.id))]}),m.jsx("div",{children:m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx(Ht,{checked:l,onCheckedChange:N=>d(!!N),className:"border-green-500 data-[state=checked]:bg-green-500"}),m.jsx("span",{className:"font-terminal text-xs text-green-300",children:"Show Learning Objectives"})]})}),m.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[m.jsx("div",{className:"font-arcade text-[10px] text-muted-foreground mb-1",children:"LEGEND"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-sm border-2 border-cyan-400 bg-cyan-400/15"}),m.jsx("span",{className:"font-terminal text-[10px] text-cyan-300",children:"Course"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-sm border border-yellow-400 bg-yellow-400/12"}),m.jsx("span",{className:"font-terminal text-[10px] text-yellow-300",children:"Module"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-sm border border-green-400 bg-green-400/8"}),m.jsx("span",{className:"font-terminal text-[10px] text-green-300",children:"Learning Objective"})]})]}),m.jsxs("div",{className:"pt-2 border-t border-secondary/30 font-terminal text-[10px] text-muted-foreground",children:[m.jsxs("div",{children:["Nodes: ",g.nodes.length]}),m.jsxs("div",{children:["Links: ",g.links.length]})]})]})})}),m.jsxs("div",{ref:e,className:"flex-1 relative bg-black/80 overflow-hidden",children:[i&&g.nodes.length>0&&m.jsx(No,{ref:n,graphData:g,width:i.width,height:i.height,dagMode:"lr",dagLevelDistance:120,nodeCanvasObject:w,nodePointerAreaPaint:S,linkCanvasObject:C,onNodeHover:N=>h(N?.id??null),linkColor:()=>"transparent",linkWidth:0,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.025,d3VelocityDecay:.35}),g.nodes.length===0&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-terminal text-xs text-muted-foreground",children:"Select courses to build mind map"})]})]})}class q4 extends j.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(n){return{error:n.message}}render(){return this.state.error?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2 p-4",children:[m.jsx("p",{className:"font-arcade text-xs text-red-400",children:"GRAPH RENDER ERROR"}),m.jsx("p",{className:"font-terminal text-xs text-muted-foreground text-center",children:this.state.error}),m.jsx("button",{className:"font-terminal text-sm text-primary underline",onClick:()=>this.setState({error:null}),children:"Try again"})]}):this.props.children}}function D4(){const[e,n]=j.useState("concept"),r=[{id:"concept",label:"Concept Map"},{id:"vault",label:"Vault Graph"},{id:"mindmap",label:"Mind Map"}];return m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsx("div",{className:"flex items-center gap-1 px-3 py-1.5 border-b border-secondary/30 bg-black/40 shrink-0",children:r.map(i=>m.jsx("button",{onClick:()=>n(i.id),className:`px-2.5 py-1 font-terminal text-xs transition-colors ${e===i.id?"bg-primary/20 text-primary border border-primary/40":"text-muted-foreground hover:text-foreground border border-transparent"}`,children:i.label},i.id))}),m.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:m.jsxs(q4,{children:[e==="concept"&&m.jsx(v5,{}),e==="vault"&&m.jsx(M4,{}),e==="mindmap"&&m.jsx(O4,{})]})})]})}const Cf={title:"Untitled Comparison",columns:["Concept A","Concept B"],rows:[{feature:"Feature 1",values:["",""],isKey:!1},{feature:"Feature 2",values:["",""],isKey:!1},{feature:"Feature 3",values:["",""],isKey:!1}]};function ab(e){const n=`| Feature | ${e.columns.join(" | ")} |`,r=`|${"----|".repeat(e.columns.length+1)}`,i=e.rows.map(o=>`| ${o.isKey?`**${o.feature}**`:o.feature} | ${o.values.join(" | ")} |`);return[n,r,...i].join(`
`)}function z4({className:e}){const[n,r]=j.useState(()=>({...Cf,columns:[...Cf.columns],rows:Cf.rows.map(g=>({...g,values:[...g.values]}))})),i=j.useRef(null),{toast:o}=Di(),a=j.useCallback(g=>{r(_=>({..._,title:g}))},[]),s=j.useCallback((g,_)=>{r(b=>{const w=[...b.columns];return w[g]=_,{...b,columns:w}})},[]),c=j.useCallback((g,_)=>{r(b=>{const w=b.rows.map((S,C)=>C===g?{...S,feature:_}:S);return{...b,rows:w}})},[]),u=j.useCallback((g,_,b)=>{r(w=>{const S=w.rows.map((C,E)=>{if(E!==g)return C;const N=[...C.values];return N[_]=b,{...C,values:N}});return{...w,rows:S}})},[]),l=j.useCallback(g=>{r(_=>{const b=_.rows.map((w,S)=>S===g?{...w,isKey:!w.isKey}:w);return{..._,rows:b}})},[]),d=j.useCallback(()=>{r(g=>{if(g.columns.length>=4)return g;const _=[...g.columns,`Concept ${g.columns.length+1}`],b=g.rows.map(w=>({...w,values:[...w.values,""]}));return{...g,columns:_,rows:b}})},[]),f=j.useCallback(g=>{r(_=>{if(_.columns.length<=2)return _;const b=_.columns.filter((S,C)=>C!==g),w=_.rows.map(S=>({...S,values:S.values.filter((C,E)=>E!==g)}));return{..._,columns:b,rows:w}})},[]),h=j.useCallback(()=>{r(g=>({...g,rows:[...g.rows,{feature:`Feature ${g.rows.length+1}`,values:g.columns.map(()=>""),isKey:!1}]}))},[]),p=j.useCallback(g=>{r(_=>_.rows.length<=1?_:{..._,rows:_.rows.filter((b,w)=>w!==g)})},[]),y=j.useCallback(()=>{const g=ab(n);navigator.clipboard.writeText(g),o({title:"Markdown copied to clipboard"})},[n,o]),x=j.useCallback(async()=>{if(i.current)try{const g=await Z1(i.current,{backgroundColor:"#000",quality:1}),_=document.createElement("a");_.download=`${n.title.replace(/[/\\?%*:|"<>]/g,"-")}.png`,_.href=g,_.click(),o({title:"PNG exported"})}catch(g){o({title:"Export failed",description:String(g),variant:"destructive"})}},[n.title,o]),v=j.useCallback(async()=>{const g=ab(n),_=n.title.replace(/[/\\?%*:|"<>]/g,"-"),b=`---
type: comparison-table
created: ${new Date().toISOString()}
---

# ${n.title}

${g}
`,w=`Comparison Tables/${_}.md`;try{await pe.obsidian.saveFile(w,b),o({title:"Saved to vault",description:w})}catch(S){o({title:"Save failed",description:String(S),variant:"destructive"})}},[n,o]);return m.jsxs("div",{className:Ke("flex flex-col h-full",e),children:[m.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[m.jsxs(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:d,disabled:n.columns.length>=4,title:"Add column",children:[m.jsx(bC,{className:"w-3 h-3"}),m.jsx(hi,{className:"w-2 h-2"})]}),m.jsxs(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:h,title:"Add row",children:[m.jsx($C,{className:"w-3 h-3"}),m.jsx(hi,{className:"w-2 h-2"})]}),m.jsx("div",{className:"w-px h-4 bg-secondary/30"}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:y,title:"Copy markdown",children:m.jsx(wC,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:x,title:"Export PNG",children:m.jsx($i,{className:"w-3 h-3"})}),m.jsx(fe,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-[9px] font-terminal",onClick:v,title:"Save to vault",children:m.jsx(zi,{className:"w-3 h-3"})}),m.jsxs("span",{className:"ml-auto text-[9px] font-terminal text-muted-foreground",children:[n.columns.length,"C / ",n.rows.length,"R"]})]}),m.jsx("div",{className:"px-2 py-1 border-b border-secondary/20",children:m.jsx(Cn,{value:n.title,onChange:g=>a(g.target.value),className:"h-6 text-xs font-arcade bg-transparent border-none px-1 text-primary focus-visible:ring-0",placeholder:"Table title..."})}),m.jsx("div",{className:"flex-1 overflow-auto p-2",children:m.jsxs("div",{ref:i,className:"bg-black/80 border-2 border-primary/50",children:[m.jsxs("div",{className:"flex border-b-2 border-primary/50",children:[m.jsx("div",{className:"w-28 shrink-0 p-1 border-r border-secondary/30 bg-black/60",children:m.jsx("span",{className:"font-arcade text-[9px] text-muted-foreground",children:"FEATURE"})}),n.columns.map((g,_)=>m.jsxs("div",{className:"flex-1 min-w-[100px] p-1 border-r border-secondary/30 bg-black/60 flex items-center gap-1",children:[m.jsx(Cn,{value:g,onChange:b=>s(_,b.target.value),className:"h-5 text-[10px] font-arcade bg-transparent border-none px-0 text-primary focus-visible:ring-0 flex-1"}),n.columns.length>2&&m.jsx("button",{onClick:()=>f(_),className:"text-muted-foreground hover:text-destructive shrink-0",children:m.jsx(yr,{className:"w-2.5 h-2.5"})})]},_))]}),n.rows.map((g,_)=>m.jsxs("div",{className:Ke("flex border-b border-secondary/20",g.isKey&&"border-l-2 border-l-primary"),children:[m.jsxs("div",{className:"w-28 shrink-0 p-1 border-r border-secondary/30 flex items-center gap-1",children:[m.jsx("button",{onClick:()=>l(_),className:Ke("shrink-0",g.isKey?"text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),title:"Toggle key feature",children:m.jsx(U2,{className:"w-2.5 h-2.5",fill:g.isKey?"currentColor":"none"})}),m.jsx(Cn,{value:g.feature,onChange:b=>c(_,b.target.value),className:Ke("h-5 text-[10px] font-terminal bg-transparent border-none px-0 focus-visible:ring-0 flex-1",g.isKey?"text-primary font-bold":"text-secondary-foreground")}),n.rows.length>1&&m.jsx("button",{onClick:()=>p(_),className:"text-muted-foreground hover:text-destructive shrink-0",children:m.jsx(yr,{className:"w-2.5 h-2.5"})})]}),g.values.map((b,w)=>m.jsx("div",{className:"flex-1 min-w-[100px] p-1 border-r border-secondary/30",children:m.jsx(Cn,{value:b,onChange:S=>u(_,w,S.target.value),className:"h-5 text-[10px] font-terminal bg-transparent border-none px-0 text-secondary-foreground focus-visible:ring-0",placeholder:"..."})},w))]},_))]})})]})}function L4({totalCards:e,compact:n}){const[r,i]=j.useState(new Set),[o,a]=j.useState(null),[s,c]=j.useState({front:"",back:"",deckName:""}),u=qi(),{toast:l}=Di(),{data:d,isLoading:f,refetch:h}=ke({queryKey:["anki","status"],queryFn:pe.anki.getStatus,refetchInterval:3e4}),{data:p}=ke({queryKey:["anki","due"],queryFn:pe.anki.getDue,enabled:d?.connected===!0}),{data:y=[],refetch:x}=ke({queryKey:["anki","drafts"],queryFn:pe.anki.getDrafts}),v=y.filter(N=>N.status==="pending"),g=Rt({mutationFn:pe.anki.sync,onSuccess:N=>{u.invalidateQueries({queryKey:["anki"]}),x(),l({title:"Anki sync complete",description:N.output||"Cards synced successfully"})},onError:N=>{l({title:"Anki sync failed",description:N.message,variant:"destructive"})}}),_=Rt({mutationFn:N=>pe.anki.approveDraft(N),onSuccess:()=>x()}),b=Rt({mutationFn:N=>pe.anki.deleteDraft(N),onMutate:async N=>{await u.cancelQueries({queryKey:["anki","drafts"]});const A=u.getQueryData(["anki","drafts"]);return u.setQueryData(["anki","drafts"],R=>R?R.filter(k=>k.id!==N):[]),{prev:A}},onError:(N,A,R)=>{R?.prev&&u.setQueryData(["anki","drafts"],R.prev)},onSettled:()=>x()}),w=Rt({mutationFn:({id:N,data:A})=>pe.anki.updateDraft(N,A),onSuccess:()=>{x(),a(null)}}),S=N=>{a(N.id),c({front:N.front,back:N.back,deckName:N.deckName})},C=()=>{o!==null&&w.mutate({id:o,data:s})},E=m.jsx("div",{className:n?"p-3 space-y-3":"p-4 space-y-3",children:f?m.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Checking Anki..."}):d?.connected?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-4 font-terminal text-xs",children:[m.jsx(di,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500",children:"Connected"}),m.jsxs("span",{className:"text-muted-foreground",children:["Cards: ",m.jsx("span",{className:"text-primary font-arcade",children:e})]}),m.jsxs("span",{className:"text-muted-foreground",children:["Due: ",m.jsx("span",{className:"text-secondary font-arcade",children:p?.dueCount||0})]}),m.jsxs("span",{className:"text-muted-foreground",children:["Reviewed: ",m.jsx("span",{className:"font-arcade",children:d.reviewedToday||0})]}),m.jsxs("span",{className:"text-muted-foreground",children:["Decks: ",m.jsx("span",{className:"font-arcade",children:d.decks?.length||0})]})]}),m.jsxs("div",{className:"pt-2 flex gap-2",children:[m.jsxs(fe,{size:"sm",variant:"outline",className:"flex-1 font-terminal text-xs",onClick:()=>h(),children:[m.jsx(Ao,{className:"w-3 h-3 mr-1"}),"Refresh"]}),m.jsxs(fe,{size:"sm",className:"flex-1 font-terminal text-xs bg-secondary hover:bg-secondary/80",onClick:()=>g.mutate(),disabled:g.isPending,children:[g.isPending?m.jsx(gb,{className:"w-3 h-3 mr-1 animate-spin"}):m.jsx(Ao,{className:"w-3 h-3 mr-1"}),g.isPending?"Syncing...":"Sync Cards"]})]}),g.isError&&m.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/30 text-red-400 font-terminal text-[10px]",children:[m.jsx("span",{className:"font-arcade",children:"SYNC ERROR:"})," ",g.error?.message||"Unknown error",m.jsx(fe,{size:"sm",variant:"outline",className:"ml-2 h-5 px-2 text-[10px] font-terminal border-red-500/50 text-red-400",onClick:()=>g.mutate(),disabled:g.isPending,children:"Retry"})]}),v.length>0&&m.jsxs("div",{className:"pt-3 border-t border-secondary/30",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("span",{className:"font-arcade text-[10px] text-yellow-400",children:["PENDING CARDS (",v.length,")"]}),m.jsx("div",{className:"flex gap-1",children:m.jsx(fe,{size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>{r.size===v.length?i(new Set):i(new Set(v.map(N=>N.id)))},children:r.size===v.length?"None":"All"})})]}),r.size>0&&m.jsxs("div",{className:"flex gap-1 mb-2",children:[m.jsxs(fe,{size:"sm",className:"h-6 px-2 text-[10px] font-terminal bg-green-600 hover:bg-green-700",onClick:()=>{r.forEach(N=>_.mutate(N)),i(new Set)},children:[m.jsx(Ro,{className:"w-3 h-3 mr-1"}),"Approve (",r.size,")"]}),m.jsxs(fe,{size:"sm",variant:"destructive",className:"h-6 px-2 text-[10px] font-terminal",onClick:()=>{r.forEach(N=>b.mutate(N)),i(new Set)},children:[m.jsx(yr,{className:"w-3 h-3 mr-1"}),"Delete (",r.size,")"]})]}),m.jsx(nn,{className:"h-[140px]",children:m.jsx("div",{className:"space-y-2",children:v.map(N=>m.jsx("div",{className:`p-2 bg-black/40 border text-xs ${r.has(N.id)?"border-primary":"border-secondary/30"}`,children:m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx(Ht,{checked:r.has(N.id),onCheckedChange:A=>{const R=new Set(r);A?R.add(N.id):R.delete(N.id),i(R)},className:"mt-1 border-secondary data-[state=checked]:bg-primary"}),m.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[m.jsx("div",{className:"font-terminal text-primary truncate",children:N.front}),m.jsx("div",{className:"font-terminal text-muted-foreground mt-1 truncate",children:N.back}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx(di,{variant:"outline",className:"text-[9px] border-blue-500/50 text-blue-400 shrink-0",children:N.deckName}),m.jsx(fe,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>S(N),title:"Edit card",children:m.jsx(fi,{className:"w-3 h-3"})}),m.jsx(fe,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-green-500/50 text-green-400 hover:bg-green-500/20",onClick:()=>_.mutate(N.id),title:"Approve card",children:m.jsx(Ro,{className:"w-3 h-3"})}),m.jsx(fe,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>b.mutate(N.id),title:"Delete card",children:m.jsx(yr,{className:"w-3 h-3"})})]})]})]})},N.id))})})]})]}):m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx("p",{className:"font-terminal text-xs text-red-400",children:d?.error||"Anki not connected"}),m.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Anki with AnkiConnect plugin"}),m.jsxs(fe,{size:"sm",variant:"outline",className:"font-terminal text-xs",onClick:()=>h(),children:[m.jsx(Ao,{className:"w-3 h-3 mr-1"}),"Retry"]})]})});return m.jsxs(m.Fragment,{children:[n?E:m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-3",children:[m.jsx(vr,{className:"w-4 h-4"}),"ANKI INTEGRATION",d?.connected?m.jsx(Ro,{className:"w-3 h-3 text-green-500 ml-auto"}):m.jsx(Ef,{className:"w-3 h-3 text-red-500 ml-auto"})]})}),m.jsx(Rn,{className:"p-0",children:E})]}),m.jsx(sd,{open:o!==null,onOpenChange:N=>{N||a(null)},children:m.jsxs(cd,{"data-modal":"brain-edit-draft",className:"bg-black border-2 border-primary rounded-none max-w-lg translate-y-0",style:{zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},children:[m.jsxs(ud,{children:[m.jsxs(ld,{className:"font-arcade text-primary flex items-center gap-2",children:[m.jsx(fi,{className:"w-5 h-5"}),"EDIT CARD"]}),m.jsx(fd,{className:"font-terminal text-muted-foreground",children:"Edit card content and select target deck"})]}),m.jsxs("div",{className:"space-y-4 font-terminal",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Front (Question)"}),m.jsx(kf,{value:s.front,onChange:N=>c(A=>({...A,front:N.target.value})),placeholder:"Card front...",className:"rounded-none border-secondary min-h-[80px]"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Back (Answer)"}),m.jsx(kf,{value:s.back,onChange:N=>c(A=>({...A,back:N.target.value})),placeholder:"Card back...",className:"rounded-none border-secondary min-h-[80px]"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Target Deck"}),m.jsxs(J2,{value:s.deckName,onValueChange:N=>c(A=>({...A,deckName:N})),children:[m.jsx(Q2,{className:"rounded-none border-secondary",children:m.jsx(eC,{placeholder:"Select deck"})}),m.jsxs(tC,{className:"rounded-none border-secondary bg-black max-h-[200px]",children:[m.jsx(Yt,{value:"PT::EBP",children:"PT::EBP (Evidence Based Practice)"}),m.jsx(Yt,{value:"PT::ExPhys",children:"PT::ExPhys (Exercise Physiology)"}),m.jsx(Yt,{value:"PT::MS1",children:"PT::MS1 (Movement Science 1)"}),m.jsx(Yt,{value:"PT::Neuro",children:"PT::Neuro (Neuroscience)"}),m.jsx(Yt,{value:"PT::TI",children:"PT::TI (Therapeutic Intervention)"}),m.jsx(Yt,{value:"PT::General",children:"PT::General"}),d?.decks?.filter(N=>!N.startsWith("PT::")).map(N=>m.jsx(Yt,{value:N,children:N},N))]})]}),m.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:["Current: ",m.jsx("span",{className:"text-blue-400",children:s.deckName})]})]})]}),m.jsxs(H2,{className:"gap-2",children:[m.jsxs(fe,{variant:"outline",onClick:()=>a(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[m.jsx(Ef,{className:"w-4 h-4 mr-2"}),"Cancel"]}),m.jsxs(fe,{onClick:C,disabled:w.isPending,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[m.jsx(zi,{className:"w-4 h-4 mr-2"}),w.isPending?"Saving...":"Save"]})]})]})})]})}const $4=[{id:"edit",label:"EDIT",icon:fi},{id:"chat",label:"CHAT",icon:pb},{id:"graph",label:"GRAPH",icon:qC},{id:"table",label:"TABLE",icon:HC},{id:"anki",label:"ANKI",icon:vr}];function sb({workspace:e}){return m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsx("div",{className:"flex items-center gap-0 border-b border-primary/40 bg-black/40 shrink-0",children:$4.map(n=>{const r=n.icon,i=e.mainMode===n.id;return m.jsxs("button",{onClick:()=>e.setMainMode(n.id),className:`flex items-center gap-1.5 px-3 py-1.5 font-arcade text-xs transition-colors ${i?"bg-primary text-black":"text-muted-foreground hover:text-foreground"}`,children:[m.jsx(r,{className:"w-3.5 h-3.5"}),n.label,n.id==="anki"&&e.pendingDrafts.length>0&&m.jsx("span",{className:"ml-1 px-1 py-0 text-xs bg-secondary text-black font-arcade",children:e.pendingDrafts.length})]},n.id)})}),m.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden",children:[e.mainMode==="edit"&&m.jsx(UE,{workspace:e}),e.mainMode==="chat"&&m.jsx(GE,{embedded:!0}),e.mainMode==="graph"&&m.jsx(D4,{}),e.mainMode==="table"&&m.jsx(z4,{}),e.mainMode==="anki"&&m.jsx(L4,{totalCards:e.metrics?.totalCards||0,compact:!0})]})]})}function F4(){const[e,n]=j.useState(""),[r,i]=j.useState(null),[o,a]=j.useState("auto"),[s,c]=j.useState([]),u=qi(),{toast:l}=Di(),{data:d=[]}=ke({queryKey:["sessions"],queryFn:pe.sessions.getAll}),f=d.slice().sort((x,v)=>{const g=x.date||x.createdAt||"";return(v.date||v.createdAt||"").localeCompare(g)}).slice(0,20),h=Rt({mutationFn:()=>pe.planner.generate(),onSuccess:x=>{l({title:"Planner tasks generated",description:`${x.tasks_created} review tasks created`}),u.invalidateQueries({queryKey:["planner","queue"]})},onError:x=>{l({title:"Failed to generate tasks",description:x.message,variant:"destructive"})}}),p=Rt({mutationFn:async()=>{if(!r)throw new Error("Select a session first");let x;try{x=JSON.parse(e)}catch{throw new Error("Invalid JSON  check syntax")}let v=o;if(v==="auto"){const b=Object.keys(x),w=["source_lock","plan_of_attack","frameworks_used","buckets","confusables_interleaved","anki_cards","glossary","exit_ticket_blurt","exit_ticket_muddiest","exit_ticket_next_action","retrospective_status","spaced_reviews","next_session","errors_by_type","errors_by_severity","error_patterns","spacing_algorithm","rsr_adaptive_adjustment","adaptive_multipliers"];v=b.some(S=>w.includes(S))?"enhanced":"tracker"}const g=v==="tracker"?x:void 0,_=v==="enhanced"?x:void 0;return pe.brain.ingestSessionJson(r,g,_)},onSuccess:x=>{l({title:"JSON ingested",description:`${x.fields_updated} fields updated on session #${x.session_id}`}),u.invalidateQueries({queryKey:["sessions"]}),u.invalidateQueries({queryKey:["brain","metrics"]}),l({title:"Next step: Generate planner tasks?",description:"Create review tasks from weak anchors",duration:1e4,action:m.jsx(fe,{size:"sm",onClick:()=>h.mutate(),disabled:h.isPending,className:"bg-primary text-black hover:bg-primary/80",children:h.isPending?"Generating...":"Generate Now"})}),n(""),c([])},onError:x=>{l({title:"Ingestion failed",description:x.message,variant:"destructive"})}});function y(){const x=[];if(r||x.push("Select a session"),!e.trim())x.push("Paste JSON first");else try{const v=JSON.parse(e);(typeof v!="object"||Array.isArray(v))&&x.push("JSON must be an object, not array"),v.schema_version&&v.schema_version!=="9.4"&&x.push(`Expected schema_version 9.4, got ${v.schema_version}`)}catch{x.push("Invalid JSON syntax")}return c(x),x.length===0}return m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 bg-primary inline-block"}),"SESSION_JSON_INGEST"]})}),m.jsxs(Rn,{className:"p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"TARGET SESSION"}),m.jsxs("select",{value:r??"",onChange:x=>i(x.target.value?Number(x.target.value):null),className:"w-full bg-black border border-primary/50 text-white font-terminal text-xs p-2 rounded-none focus:border-primary outline-none",children:[m.jsx("option",{value:"",children:"-- select session --"}),f.map(x=>m.jsxs("option",{value:x.id,children:["#",x.id," | ",x.date?.slice(0,10)||"?"," | ",x.topic||x.mainTopic||"Untitled"," | ",x.mode||"?"]},x.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"JSON TYPE"}),m.jsx("div",{className:"flex gap-2",children:["auto","tracker","enhanced"].map(x=>m.jsx("button",{onClick:()=>a(x),className:`px-3 py-1 font-arcade text-xs rounded-none border ${o===x?"bg-primary text-black border-primary":"border-primary/30 text-muted-foreground hover:text-white"}`,children:x.toUpperCase()},x))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"PASTE TRACKER OR ENHANCED JSON"}),m.jsx("textarea",{value:e,onChange:x=>n(x.target.value),placeholder:'{"schema_version": "9.4", "topic": "...", "mode": "Core", ...}',rows:10,className:"w-full bg-black border border-primary/50 text-green-400 font-terminal text-xs p-2 rounded-none focus:border-primary outline-none resize-y"})]}),s.length>0&&m.jsx("div",{className:"border border-red-500/50 bg-red-500/10 p-2 font-terminal text-xs text-red-400 space-y-1",children:s.map((x,v)=>m.jsxs("div",{children:["- ",x]},v))}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{y()&&p.mutate()},disabled:p.isPending,className:"px-4 py-2 bg-primary text-black font-arcade text-xs rounded-none hover:bg-primary/80 disabled:opacity-50",children:p.isPending?"INGESTING...":"INGEST"}),m.jsx("button",{onClick:y,className:"px-4 py-2 border border-primary/50 text-primary font-arcade text-xs rounded-none hover:bg-primary/10",children:"VALIDATE"}),m.jsx("button",{onClick:()=>{n(""),c([])},className:"px-4 py-2 border border-primary/30 text-muted-foreground font-arcade text-xs rounded-none hover:text-white",children:"CLEAR"})]})]})]})}const H4=`You are extracting a course schedule for ingestion.

Return ONLY a valid JSON object with NO additional text, NO markdown code blocks, NO explanation.

Structure:
{
  "name": "Course Name (e.g. Anatomy & Physiology II)",
  "term": {
    "startDate": "2026-01-05",
    "endDate": "2026-04-24",
    "timezone": "America/Chicago"
  },
  "events": [
    {
      "type": "class" | "lecture" | "reading" | "topic" | "assignment" | "quiz" | "exam" | "assessment",
      "title": "string",
      "date": "YYYY-MM-DD",
      "dueDate": "YYYY-MM-DD | null",
      "startTime": "HH:MM | null",
      "endTime": "HH:MM | null",
      "daysOfWeek": ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],
      "delivery": "in_person" | "virtual_sync" | "virtual_async" | "hybrid",
      "assessmentType": "EA | null",
      "moduleName": "Module 1: ... | null",
      "notes": "string | null"
    }
  ]
}

Rules:
1. Include ALL schedule items: class meetings, assignments, quizzes, exams, readings, virtual activities, and learning assessments (EA).
2. For repeating class meetings, set daysOfWeek + startTime/endTime, and include term start/end.
3. For one-off items, set date or dueDate.
4. Do NOT include a "modules" array  schedule only.
5. Return ONLY the JSON object, nothing else.

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,B4=`You are extracting course module structure for ingestion.

Return ONLY a valid JSON object with NO additional text, NO markdown code blocks, NO explanation.

Structure:
{
  "modules": [
    {
      "name": "Module 1: Topic Name",
      "orderIndex": 1,
      "topics": ["Topic A", "Topic B"],
      "readings": ["Chapter 1", "Article X"],
      "assessments": ["Quiz 1", "Exam 1"]
    }
  ]
}

Rules:
1. Include ALL modules/units with their topics, readings, and assessments.
2. orderIndex should be sequential starting at 1.
3. Do NOT include dates or events  structure only.
4. Return ONLY the JSON object, nothing else.

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,V4=`I need you to extract learning objectives from my course material.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "loCode": "string",
  "title": "string"
}

Rules:
1. loCode: Preserve original numbering if present, or create sequential "1", "2", "3"...
2. title: Keep the objective text exactly as written
3. Return ONLY the JSON array, nothing else

Here are my learning objectives:

[PASTE YOUR LOs BELOW]`,G4=`I need you to convert my study session notes into WRAP format.

WRAP format has 4 sections:

Section A: Obsidian Notes
- Main concepts and insights from the session
- Key points to remember

Section B: Anki Cards
- Format: "front: [question]" on one line, "back: [answer]" on next line
- Create cards for important facts and concepts

Section C: Spaced Schedule
- R1=tomorrow
- R2=3d
- R3=1w
- R4=2w

Section D: JSON Logs
\`\`\`json
{
  "merged": {
    "topic": "[main topic]",
    "mode": "Core",
    "duration_minutes": [number],
    "understanding": [1-5],
    "retention": [1-5]
  }
}
\`\`\`

Return ONLY the WRAP formatted content, NO additional text or explanation.

Here are my study notes:

[PASTE YOUR NOTES BELOW]`;function U4(){const e=qi(),[n,r]=j.useState(null),[i,o]=j.useState(null),[a,s]=j.useState("schedule"),[c,u]=j.useState(""),[l,d]=j.useState(""),[f,h]=j.useState(""),[p,y]=j.useState(""),[x,v]=j.useState(null),[g,_]=j.useState(null),[b,w]=j.useState(null),[S,C]=j.useState(null),[E,N]=j.useState(null),[A,R]=j.useState(null),{data:k=[]}=ke({queryKey:["courses"],queryFn:()=>pe.courses.getActive()}),{data:P=[]}=ke({queryKey:["modules",n],queryFn:()=>n?pe.modules.getByCourse(n):Promise.resolve([]),enabled:!!n}),{data:O=[]}=ke({queryKey:["learningObjectives",n],queryFn:()=>n?pe.learningObjectives.getByCourse(n):Promise.resolve([]),enabled:!!n}),M=D=>{const I=D.trim();if(!I)return"";const z=I.match(/```json\s*([\s\S]*?)```/i)||I.match(/```\s*([\s\S]*?)```/i),L=z?z[1].trim():I,H=L.indexOf("["),U=L.lastIndexOf("]"),Y=L.indexOf("{"),J=L.lastIndexOf("}");return H!==-1&&U!==-1&&U>H&&(Y===-1||H<Y)?L.slice(H,U+1).trim():Y!==-1&&J!==-1&&J>Y?L.slice(Y,J+1).trim():L},T=D=>{navigator.clipboard.writeText(D)},q=Rt({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const z={...JSON.parse(M(D)),modules:[]};return pe.syllabus.importBulk(n,z)},onSuccess:D=>{e.invalidateQueries({queryKey:["scheduleEvents"]}),u(""),N(null),w({type:"success",message:`Imported: ${D.eventsCreated} events (${D.classMeetingsExpanded} class meetings expanded)`}),v(null)},onError:D=>{w({type:"error",message:D.message||"Failed to import schedule"})}}),B=Rt({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const I=JSON.parse(M(D)),z=I.modules||I;return pe.modules.createBulk(n,z)},onSuccess:()=>{e.invalidateQueries({queryKey:["modules"]}),d(""),R(null),C({type:"success",message:"Modules imported successfully"}),v(null)},onError:D=>{C({type:"error",message:D.message||"Failed to import modules"})}}),F=Rt({mutationFn:async D=>{if(!n)throw new Error("Select a course first");const I=JSON.parse(M(D));return pe.learningObjectives.createBulk(n,i,I)},onSuccess:()=>{e.invalidateQueries({queryKey:["learningObjectives"]}),h(""),v(null)},onError:D=>{v(D.message||"Failed to import LOs")}}),G=D=>{const I=[];try{const z=M(D);if(!z){N({isValid:!1,errors:["No JSON found"]});return}const L=JSON.parse(z);(!L||typeof L!="object")&&I.push("JSON must be an object"),(!L.name||typeof L.name!="string")&&I.push("Missing 'name' field"),!L.term||typeof L.term!="object"?I.push("Missing 'term' object"):(L.term.startDate||I.push("term.startDate is required"),L.term.endDate||I.push("term.endDate is required")),Array.isArray(L.events)||I.push("Missing 'events' array"),I.length===0?N({isValid:!0,errors:[],preview:{courseName:L.name,eventCount:L.events.length,startDate:L.term?.startDate,endDate:L.term?.endDate}}):N({isValid:!1,errors:I})}catch(z){N({isValid:!1,errors:[`Invalid JSON: ${z.message}`]})}},V=D=>{const I=[];try{const z=M(D);if(!z){R({isValid:!1,errors:["No JSON found"]});return}const L=JSON.parse(z),H=L.modules||(Array.isArray(L)?L:null);Array.isArray(H)?H.length===0&&I.push("modules array is empty"):I.push("Missing 'modules' array"),I.length===0?R({isValid:!0,errors:[],preview:{moduleCount:H.length}}):R({isValid:!1,errors:I})}catch(z){R({isValid:!1,errors:[`Invalid JSON: ${z.message}`]})}},K=async()=>{try{_(null);const D=await pe.brain.ingest(p,"pasted_wrap.md");D.sessionSaved?(_({type:"success",message:`Session saved! ID: ${D.sessionId}, Cards: ${D.cardsCreated||0}`}),y("")):_({type:"error",message:D.errors?.join(", ")||D.message})}catch(D){_({type:"error",message:D.message||"Failed to ingest"})}},W=[{key:"schedule",label:"SCHEDULE",icon:m.jsx(_h,{className:"w-3.5 h-3.5"})},{key:"modules",label:"MODULES",icon:m.jsx(vr,{className:"w-3.5 h-3.5"})},{key:"objectives",label:"OBJECTIVES",icon:m.jsx(Nf,{className:"w-3.5 h-3.5"})}];return m.jsxs("div",{className:"space-y-6 p-4",children:[m.jsx(F4,{}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),m.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:n||"",onChange:D=>{r(D.target.value?parseInt(D.target.value):null),o(null)},children:[m.jsx("option",{value:"",children:"-- Select Course --"}),k.map(D=>m.jsx("option",{value:D.id,children:D.name},D.id))]})]}),!n&&m.jsx("p",{className:"text-center text-muted-foreground font-terminal text-sm py-8",children:"Select a course above to begin ingestion."}),n&&m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none mb-6",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-2",children:[m.jsx(Y2,{className:"w-4 h-4"}),"WRAP SESSION INGESTION"]})}),m.jsxs(Rn,{className:"p-4",children:[g&&m.jsx("div",{className:`mb-4 p-3 rounded-none font-terminal text-sm ${g.type==="success"?"bg-green-900/30 border border-green-500 text-green-400":"bg-red-900/30 border border-red-500 text-red-400"}`,children:g.message}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("button",{onClick:()=>T(G4),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),m.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Use ChatGPT to convert your notes to WRAP format, then paste or upload below:"}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Paste WRAP Content"}),m.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-48 font-terminal text-sm",placeholder:"Paste your WRAP session here...",value:p,onChange:D=>{y(D.target.value),_(null)}})]}),m.jsx("button",{onClick:K,disabled:!p,className:"bg-primary hover:bg-primary/80 disabled:opacity-50 px-6 py-3 rounded-none font-arcade text-sm w-full",type:"button",children:"INGEST WRAP SESSION"})]})]})]}),n&&x&&m.jsx("div",{className:"bg-destructive/20 border border-destructive rounded-none p-3 text-destructive font-terminal",children:x}),n&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex border-b border-primary/50",children:W.map(D=>m.jsxs("button",{onClick:()=>s(D.key),className:`flex items-center gap-1.5 px-4 py-2 font-arcade text-xs border-b-2 transition-colors ${a===D.key?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-primary/70"}`,type:"button",children:[D.icon,D.label]},D.key))}),a==="schedule"&&m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-2",children:[m.jsx(_h,{className:"w-4 h-4"}),"SCHEDULE IMPORT"]})}),m.jsxs(Rn,{className:"p-4 space-y-4",children:[m.jsx("button",{onClick:()=>T(H4),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),m.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (schedule JSON) below:"}),m.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-40 font-terminal text-sm",placeholder:'{"name":"...","term":{...},"events":[...]}',value:c,onChange:D=>{u(D.target.value),w(null),D.target.value.trim()?G(D.target.value):N(null)}}),E&&!E.isValid&&m.jsxs("div",{className:"p-2 border border-red-500 bg-red-900/30 rounded-none font-terminal text-xs text-red-400",children:[m.jsx("div",{className:"font-bold mb-1",children:"Validation Errors:"}),E.errors.map((D,I)=>m.jsxs("div",{children:[" ",D]},I))]}),E?.isValid&&E.preview&&m.jsxs("div",{className:"p-3 border border-primary bg-primary/10 rounded-none font-terminal text-xs text-primary",children:[m.jsx("div",{className:"font-bold mb-2",children:"Valid JSON Preview:"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Course:"})," ",E.preview.courseName]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Events:"})," ",E.preview.eventCount]}),E.preview.startDate&&m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Start:"})," ",E.preview.startDate]}),E.preview.endDate&&m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"End:"})," ",E.preview.endDate]})]})]}),m.jsx("button",{onClick:()=>q.mutate(c),disabled:!E?.isValid||q.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:q.isPending?"Importing...":"Import Schedule"}),b&&m.jsx("div",{className:`p-2 border font-terminal text-xs ${b.type==="success"?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:b.message})]})]}),a==="modules"&&m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-2",children:[m.jsx(vr,{className:"w-4 h-4"}),"MODULES IMPORT"]})}),m.jsxs(Rn,{className:"p-4 space-y-4",children:[m.jsx("button",{onClick:()=>T(B4),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),m.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (modules JSON) below:"}),m.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-40 font-terminal text-sm",placeholder:'{"modules":[{"name":"Module 1: ...","orderIndex":1,"topics":[...],"readings":[...],"assessments":[...]}]}',value:l,onChange:D=>{d(D.target.value),C(null),D.target.value.trim()?V(D.target.value):R(null)}}),A&&!A.isValid&&m.jsxs("div",{className:"p-2 border border-red-500 bg-red-900/30 rounded-none font-terminal text-xs text-red-400",children:[m.jsx("div",{className:"font-bold mb-1",children:"Validation Errors:"}),A.errors.map((D,I)=>m.jsxs("div",{children:[" ",D]},I))]}),A?.isValid&&A.preview&&m.jsxs("div",{className:"p-3 border border-primary bg-primary/10 rounded-none font-terminal text-xs text-primary",children:[m.jsx("div",{className:"font-bold mb-2",children:"Valid JSON Preview:"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Modules:"})," ",A.preview.moduleCount]})]}),m.jsx("button",{onClick:()=>B.mutate(l),disabled:!A?.isValid||B.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:B.isPending?"Importing...":"Import Modules"}),S&&m.jsx("div",{className:`p-2 border font-terminal text-xs ${S.type==="success"?"border-green-500 text-green-400":"border-red-500 text-red-400"}`,children:S.message})]})]}),a==="objectives"&&m.jsxs(En,{className:"bg-black/40 border-2 border-primary rounded-none",children:[m.jsx(Nn,{className:"border-b border-primary/50 p-4",children:m.jsxs(kn,{className:"font-arcade text-sm flex items-center gap-2",children:[m.jsx(Nf,{className:"w-4 h-4"}),"LEARNING OBJECTIVES IMPORT"]})}),m.jsxs(Rn,{className:"p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs mb-1 font-terminal text-muted-foreground",children:"Target Module (optional)"}),m.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:i||"",onChange:D=>o(D.target.value?parseInt(D.target.value):null),children:[m.jsx("option",{value:"",children:"-- No Module (Course-level) --"}),P.map(D=>m.jsx("option",{value:D.id,children:D.name},D.id))]})]}),m.jsx("button",{onClick:()=>T(V4),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal",type:"button",children:"Copy Prompt for ChatGPT"}),m.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),m.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"loCode": "1.1", "title": "Define..."}]',value:f,onChange:D=>h(D.target.value)}),m.jsx("button",{onClick:()=>F.mutate(f),disabled:!f||F.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none font-terminal text-xs",type:"button",children:F.isPending?"Importing...":"Import LOs"}),O.length>0&&m.jsxs("div",{children:[m.jsxs("h4",{className:"font-terminal text-xs mb-2",children:["Current LOs (",O.length,")"]}),m.jsx("div",{className:"max-h-48 overflow-y-auto",children:O.map(D=>m.jsxs("div",{className:"text-xs py-1 border-b border-secondary/30 font-terminal",children:[m.jsx("span",{className:"text-primary",children:D.loCode}),": ",D.title,m.jsx("span",{className:`ml-2 text-[10px] px-1 rounded ${D.status==="solid"?"bg-green-600":D.status==="in_progress"?"bg-yellow-600":D.status==="need_review"?"bg-orange-600":"bg-gray-600"}`,children:D.status})]},D.id))})]})]})]})]})]})}function W4({workspace:e}){return m.jsx(sd,{open:e.importOpen,onOpenChange:e.setImportOpen,children:m.jsxs(cd,{"data-modal":"brain-import",className:"max-w-2xl bg-black border-2 border-primary rounded-none",children:[m.jsxs(ud,{children:[m.jsxs(ld,{className:"font-arcade text-sm text-primary flex items-center gap-2",children:[m.jsx($i,{className:"w-4 h-4"}),"IMPORT / INGEST"]}),m.jsx(fd,{className:"font-terminal text-xs text-muted-foreground",children:"Import study materials, JSON session data, or documents into the system."})]}),m.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:m.jsx(U4,{})})]})})}function hL(){const e=bE(),[n,r]=j.useState("main");return m.jsx(B2,{children:m.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] min-w-0 overflow-hidden",children:[m.jsx(_E,{workspace:e}),m.jsx("div",{className:"hidden lg:flex flex-1 min-h-0",children:m.jsxs(mE,{direction:"horizontal",autoSaveId:"brain-workspace",className:"h-full",children:[m.jsx(Ph,{defaultSize:20,minSize:12,maxSize:35,children:m.jsx("div",{className:"h-full border-r border-primary/30 bg-black/30",children:m.jsx(Ih,{workspace:e})})}),m.jsx(yE,{withHandle:!0}),m.jsx(Ph,{defaultSize:80,minSize:50,children:m.jsx("div",{className:"h-full",children:m.jsx(sb,{workspace:e})})})]})}),m.jsxs("div",{className:"flex flex-col flex-1 min-h-0 lg:hidden",children:[m.jsxs("div",{className:"flex-1 min-h-0 overflow-auto",children:[n==="vault"&&m.jsx(Ih,{workspace:e}),n==="main"&&m.jsx(sb,{workspace:e})]}),m.jsxs("div",{className:"flex items-center border-t-2 border-primary/50 bg-black/80 shrink-0",children:[m.jsxs("button",{onClick:()=>r("vault"),className:`flex-1 flex flex-col items-center gap-0.5 py-2 text-xs font-terminal transition-colors ${n==="vault"?"text-primary":"text-muted-foreground"}`,children:[m.jsx(db,{className:"w-4 h-4"}),"Vault"]}),m.jsxs("button",{onClick:()=>r("main"),className:`flex-1 flex flex-col items-center gap-0.5 py-2 text-xs font-terminal transition-colors ${n==="main"?"text-primary":"text-muted-foreground"}`,children:[m.jsx(fi,{className:"w-4 h-4"}),"Content"]})]})]}),m.jsx(W4,{workspace:e})]})})}export{hL as default};
