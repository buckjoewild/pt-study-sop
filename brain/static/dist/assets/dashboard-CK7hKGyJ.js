import{c as ke,j as e,r as o,u as Xe,a as Zt,b as p,d as Jt,e as es}from"./index-BlH4N9SF.js";import{c as Ze,R as ts,W as ss,C as as,T as rs,D as ns,a as Je,P as os,O as ls,b as ds,d as et,u as j,e as g,L as is,B as x,f as P,g as ve,h as F,i as R,j as K,k as L,I as u,l as ze,m as X,n as cs,o as us,G as ms,S as xs,p as i}from"./layout-CyFBZq2i.js";import{C as w,a as A,b as S,B as ps,c as k}from"./badge-tLzo0yaC.js";import{S as Z,a as J,b as ee,c as te,d as h}from"./select-BJB_fsFe.js";import{C as De}from"./circle-Bt4hpRNx.js";import{P as hs}from"./play-CwFT02hJ.js";import{P as se}from"./plus-DhC5DqLI.js";import{C as gs}from"./clock-ClxkzypL.js";import{t as Ge,d as fs,C as ys,i as Ce,a as ae,f as He,b as we,c as We}from"./isTomorrow-BGV00WMP.js";import{C as bs}from"./index-C1mkEUBN.js";import{C as Ve}from"./circle-check-BVhToXQT.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],js=ke("flame",Ns);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Ds=ke("list-todo",vs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ye=ke("triangle-alert",Cs);function ws(s,a,{checkForDefaultPrevented:r=!0}={}){return function(d){if(s?.(d),r===!1||!d.defaultPrevented)return a?.(d)}}var ks=Symbol("radix.slottable");function As(s){const a=({children:r})=>e.jsx(e.Fragment,{children:r});return a.displayName=`${s}.Slottable`,a.__radixId=ks,a}var tt="AlertDialog",[Ss]=Zt(tt,[Ze]),v=Ze(),st=s=>{const{__scopeAlertDialog:a,...r}=s,l=v(a);return e.jsx(ts,{...l,...r,modal:!0})};st.displayName=tt;var Ts="AlertDialogTrigger",Es=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=v(r);return e.jsx(ds,{...d,...l,ref:a})});Es.displayName=Ts;var _s="AlertDialogPortal",at=s=>{const{__scopeAlertDialog:a,...r}=s,l=v(a);return e.jsx(os,{...l,...r})};at.displayName=_s;var Is="AlertDialogOverlay",rt=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=v(r);return e.jsx(ls,{...d,...l,ref:a})});rt.displayName=Is;var M="AlertDialogContent",[Ms,Os]=Ss(M),qs=As("AlertDialogContent"),nt=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:l,...d}=s,f=v(r),m=o.useRef(null),D=Xe(a,m),T=o.useRef(null);return e.jsx(ss,{contentName:M,titleName:ot,docsSlug:"alert-dialog",children:e.jsx(Ms,{scope:r,cancelRef:T,children:e.jsxs(as,{role:"alertdialog",...f,...d,ref:D,onOpenAutoFocus:ws(d.onOpenAutoFocus,y=>{y.preventDefault(),T.current?.focus({preventScroll:!0})}),onPointerDownOutside:y=>y.preventDefault(),onInteractOutside:y=>y.preventDefault(),children:[e.jsx(qs,{children:l}),e.jsx(Fs,{contentRef:m})]})})})});nt.displayName=M;var ot="AlertDialogTitle",lt=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=v(r);return e.jsx(rs,{...d,...l,ref:a})});lt.displayName=ot;var dt="AlertDialogDescription",it=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=v(r);return e.jsx(ns,{...d,...l,ref:a})});it.displayName=dt;var Ps="AlertDialogAction",ct=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=v(r);return e.jsx(Je,{...d,...l,ref:a})});ct.displayName=Ps;var ut="AlertDialogCancel",mt=o.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,{cancelRef:d}=Os(ut,r),f=v(r),m=Xe(a,d);return e.jsx(Je,{...f,...l,ref:m})});mt.displayName=ut;var Fs=({contentRef:s})=>{const a=`\`${M}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${M}\` by passing a \`${dt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${M}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},Rs=st,Ks=at,xt=rt,pt=nt,ht=ct,gt=mt,ft=lt,yt=it;const Ls=Rs,$s=({children:s})=>e.jsx(Ks,{container:typeof document<"u"?document.body:void 0,children:s}),bt=o.forwardRef(({className:s,...a},r)=>e.jsx(xt,{className:p("fixed inset-0 dialog-overlay bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));bt.displayName=xt.displayName;const Nt=o.forwardRef(({className:s,...a},r)=>e.jsxs($s,{children:[e.jsx(bt,{}),e.jsx(pt,{ref:r,className:p("fixed dialog-center grid w-full max-w-lg max-h-[90vh] gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",s),...a})]}));Nt.displayName=pt.displayName;const jt=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",s),...a});jt.displayName="AlertDialogHeader";const vt=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});vt.displayName="AlertDialogFooter";const Dt=o.forwardRef(({className:s,...a},r)=>e.jsx(ft,{ref:r,className:p("text-lg font-semibold",s),...a}));Dt.displayName=ft.displayName;const Ct=o.forwardRef(({className:s,...a},r)=>e.jsx(yt,{ref:r,className:p("text-sm text-muted-foreground",s),...a}));Ct.displayName=yt.displayName;const wt=o.forwardRef(({className:s,...a},r)=>e.jsx(ht,{ref:r,className:p(et(),s),...a}));wt.displayName=ht.displayName;const kt=o.forwardRef(({className:s,...a},r)=>e.jsx(gt,{ref:r,className:p(et({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));kt.displayName=gt.displayName;function Qs(s,a){const r=Ge(s),l=Ge(a),d=Be(r,l),f=Math.abs(fs(r,l));r.setDate(r.getDate()-d*f);const m=+(Be(r,l)===-d),D=d*(f-m);return D===0?0:D}function Be(s,a){const r=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return r<0?-1:r>0?1:r}function ea(){const s=Jt(),{toast:a}=es(),[r,l]=o.useState(""),[d,f]=o.useState(!1),[m,D]=o.useState(""),[T,y]=o.useState(""),[Ae,re]=o.useState(!1),[ne,oe]=o.useState(null),[$,Q]=o.useState(""),[Se,U]=o.useState(""),[z,le]=o.useState(null),E={zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},[At,de]=o.useState(0),[Te,St]=o.useState(!1),[G,Ee]=o.useState(""),[ie,H]=o.useState(null),[O,ce]=o.useState(""),[W,ue]=o.useState(""),[_,me]=o.useState(""),[V,xe]=o.useState("none"),[Tt,_e]=o.useState(!1),[pe,Et]=o.useState("all"),[c,I]=o.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:_t}=j({queryKey:["study-wheel","current"],queryFn:i.studyWheel.getCurrentCourse}),{data:C=[]}=j({queryKey:["courses","active"],queryFn:i.courses.getActive}),{data:Ie=[]}=j({queryKey:["sessions","today"],queryFn:i.todaySessions.get}),{data:It}=j({queryKey:["streak"],queryFn:i.streak.get}),{data:Me=[]}=j({queryKey:["weakness-queue"],queryFn:i.weaknessQueue.get}),{data:he=[]}=j({queryKey:["academic-deadlines"],queryFn:i.academicDeadlines.getAll}),{data:ge=[]}=j({queryKey:["planner-queue"],queryFn:i.planner.getQueue}),{data:b=[]}=j({queryKey:["google-task-lists"],queryFn:i.googleTasks.getLists}),{data:Mt=[]}=j({queryKey:["google-tasks"],queryFn:i.googleTasks.getAll});o.useEffect(()=>{if(Te||!b.length)return;const t=b.findIndex(n=>n.title?.toLowerCase().includes("school"));t>=0&&de(t),St(!0)},[b,Te]);const Oe=g({mutationFn:({courseId:t,mins:n})=>i.studyWheel.completeSession(t,n),onSuccess:()=>{s.invalidateQueries({queryKey:["study-wheel"]}),s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["sessions"]}),s.invalidateQueries({queryKey:["streak"]}),l(""),f(!1),a({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{a({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),fe=g({mutationFn:({name:t,code:n})=>i.courses.create({name:t,code:n,active:!0,position:C.length}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),D(""),y(""),re(!1),a({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{a({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),qe=g({mutationFn:({id:t,name:n,code:N})=>i.courses.update(t,{name:n,code:N}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),oe(null),Q(""),U(""),a({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{a({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),Ot=g({mutationFn:t=>i.courses.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["courses","active"]}),s.invalidateQueries({queryKey:["study-wheel","current"]}),s.invalidateQueries({queryKey:["study-wheel"]}),a({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:t=>{console.error("Delete failed:",t),a({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),Pe=g({mutationFn:t=>i.googleTasks.update(t.id,t.listId,{status:t.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),Fe=g({mutationFn:t=>i.googleTasks.create(t.listId,{title:t.title,status:"needsAction"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),Ee("")}}),Re=g({mutationFn:t=>i.googleTasks.update(t.task.id,t.task.listId,t.data),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),H(null),ce(""),ue(""),me(""),xe("none")}}),Ke=g({mutationFn:t=>i.googleTasks.delete(t.id,t.listId),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),ye=g({mutationFn:t=>i.academicDeadlines.create(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),_e(!1),I({title:"",course:"",type:"assignment",dueDate:"",notes:""}),a({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{a({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),qt=g({mutationFn:t=>i.academicDeadlines.toggleComplete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]})}}),Pt=g({mutationFn:t=>i.academicDeadlines.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),a({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),Y=_t?.currentCourse,Ft=Ie.reduce((t,n)=>t+(n.minutes||0),0),Le=Ie.length,be=Le>0,Rt=()=>{!Y||!r||parseInt(r)<1||Oe.mutate({courseId:Y.id,mins:parseInt(r)})},$e=()=>{m.trim()&&fe.mutate({name:m.trim(),code:T.trim()||void 0})},Kt=()=>{!ne||!$.trim()||qe.mutate({id:ne.id,name:$.trim(),code:Se.trim()||null})},Lt=()=>{z&&(Ot.mutate(z.id),le(null))},$t=t=>{oe(t),Q(t.name),U(t.code??"")},Qt=()=>{!c.title?.trim()||!c.dueDate||ye.mutate(c)},Ut=t=>{const n=new Date(t);if(!we(n))return"unknown";if(Ce(n)&&!ae(n))return"overdue";if(ae(n))return"today";if(We(n))return"tomorrow";const N=Qs(n,new Date);return N<=3?"soon":N<=7?"week":"later"},zt=t=>{switch(t){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},Gt=t=>{switch(t){case"overdue":return"border-red-500 bg-red-500/20 text-red-400";case"today":return"border-orange-500 bg-orange-500/20 text-orange-400";case"tomorrow":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"soon":return"border-secondary bg-secondary/20 text-muted-foreground";default:return"border-secondary/30 text-muted-foreground"}},Qe={};C.forEach(t=>{Qe[String(t.id)]=t.name});const B=t=>t?/^\d+$/.test(t)?Qe[t]||"":t:"",Ht=[...new Set([...he.map(t=>B(t.course)).filter(Boolean),...C.map(t=>t.name)])].sort(),Wt=[...he].filter(t=>pe==="all"||B(t.course)===pe).sort((t,n)=>t.completed!==n.completed?t.completed?1:-1:new Date(t.dueDate).getTime()-new Date(n.dueDate).getTime()),q=b[At],Ne=q?Mt.filter(t=>t.listId===q.id):[],Vt=Ne.filter(t=>t.status!=="completed"),je=Ne.filter(t=>t.status==="completed"),Ue=()=>{!G.trim()||!q||Fe.mutate({listId:q.id,title:G.trim()})},Yt=()=>{if(!ie||!O.trim())return;const t={title:O.trim()};W&&(t.notes=W),_&&(t.due=new Date(_).toISOString()),Re.mutate({task:ie,data:t}),V!=="none"&&_&&ye.mutate({title:O.trim(),type:V,dueDate:_,course:"",notes:W||""})},Bt=t=>{H(t),ce(t.title),ue(t.notes||""),me(t.due?t.due.split("T")[0]:""),xe("none")},Xt=t=>{if(!t)return null;const n=new Date(t);return we(n)?ae(n)?"Today":We(n)?"Tomorrow":Ce(n)?"Overdue":He(n,"MMM d"):null};return e.jsx(is,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs(w,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(A,{className:"p-3 border-b border-secondary/50",children:e.jsxs(S,{className:"font-arcade text-xs flex items-center justify-between",children:[e.jsx("span",{children:"TODAY'S FOCUS"}),e.jsxs(ps,{variant:"outline",className:"rounded-none text-[9px]",children:[ge.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).length," tasks"]})]})}),e.jsxs(k,{className:"p-4",children:[ge.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No tasks due today"}):e.jsx("ul",{className:"space-y-2 mb-4",children:ge.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).slice(0,3).map(t=>e.jsxs("li",{className:"font-terminal text-xs flex items-center gap-2",children:[e.jsx(De,{className:"w-2 h-2 text-primary"}),e.jsx("span",{className:"truncate",children:t.anchor_text||t.notes||"Untitled task"})]},t.id))}),e.jsx(x,{variant:"outline",size:"sm",className:"w-full rounded-none font-arcade text-xs border-primary",onClick:()=>window.location.href="/brain",children:"Open Brain â†’"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-rows-[auto]",children:[e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(A,{className:"border-b border-primary/50 p-4",children:e.jsxs(S,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-4 h-4"}),"STUDY_WHEEL"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-3 py-1","data-testid":"streak-display",children:[e.jsx(js,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-arcade text-sm text-white","data-testid":"text-streak",children:It?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground",children:"DAY STREAK"})]})]})}),e.jsx(k,{className:"p-4",children:C.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(P,{open:Ae,onOpenChange:re,children:[e.jsx(ve,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(F,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:E,children:[e.jsxs(R,{children:[e.jsx(K,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(L,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(u,{placeholder:"Course name (e.g., Anatomy)",value:m,onChange:t=>D(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(u,{placeholder:"Course number (e.g., PHTH 5301)",value:T,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code"}),e.jsx(x,{onClick:$e,disabled:!m.trim()||fe.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-2xl text-primary","data-testid":"text-current-course",children:Y?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[C.map((t,n)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${n===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:n===0?"scale(1.02)":`scale(${1-n*.02})`,opacity:n===0?1:Math.max(.4,1-n*.15)},"data-testid":`wheel-course-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${n===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:n+1}),e.jsx("span",{className:`font-terminal ${n===0?"text-primary font-bold":"text-muted-foreground"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>$t({id:t.id,name:t.name,code:t.code}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${t.id}`,children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>le({id:t.id,name:t.name}),className:"p-1 hover:text-red-500 transition-colors text-muted-foreground","data-testid":`button-delete-course-${t.id}`,children:e.jsx(X,{className:"w-4 h-4"})})]})]},t.id)),e.jsxs(P,{open:Ae,onOpenChange:re,children:[e.jsx(ve,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(F,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:E,children:[e.jsxs(R,{children:[e.jsx(K,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(L,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(u,{placeholder:"Course name (e.g., Anatomy)",value:m,onChange:t=>D(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(u,{placeholder:"Course number (e.g., PHTH 5301)",value:T,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code-inline"}),e.jsx(x,{onClick:$e,disabled:!m.trim()||fe.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(P,{open:!!ne,onOpenChange:t=>{t||(oe(null),Q(""),U(""))},children:e.jsxs(F,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:E,children:[e.jsxs(R,{children:[e.jsx(K,{className:"font-arcade",children:"EDIT_COURSE"}),e.jsx(L,{className:"sr-only",children:"Modify the course details."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(u,{placeholder:"Course name",value:$,onChange:t=>Q(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(u,{placeholder:"Course number (e.g., PHTH 5301)",value:Se,onChange:t=>U(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-code"}),e.jsx(x,{onClick:Kt,disabled:!$.trim()||qe.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(Ls,{open:!!z,onOpenChange:t=>!t&&le(null),children:e.jsxs(Nt,{className:"bg-black border-2 border-red-500 rounded-none translate-y-0",style:E,children:[e.jsxs(jt,{children:[e.jsx(Dt,{className:"font-arcade text-red-500",children:"DELETE_COURSE"}),e.jsxs(Ct,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:z?.name}),"? This action cannot be undone."]})]}),e.jsxs(vt,{className:"gap-2",children:[e.jsx(kt,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(wt,{onClick:Lt,className:"rounded-none bg-red-500 hover:bg-red-600 font-arcade text-xs text-white",children:"DELETE"})]})]})}),d?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{type:"number",min:"1",value:r,onChange:t=>l(t.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{variant:"outline",onClick:()=>{f(!1),l("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(x,{onClick:Rt,disabled:!r||parseInt(r)<1||Oe.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(x,{onClick:()=>f(!0),className:"w-full rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80 shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.5)] transition-shadow",disabled:!Y,"data-testid":"button-start-session",children:[e.jsx(cs,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(A,{className:"border-b border-primary/50 p-4",children:e.jsxs(S,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(k,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:Le})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:Ft})]}),e.jsx("div",{className:`p-2 border ${be?"border-green-500/50 bg-green-500/10":"border-orange-500/50 bg-orange-500/10"}`,children:e.jsx("span",{className:`font-terminal text-xs ${be?"text-green-400":"text-orange-400"}`,"data-testid":"text-today-status",children:be?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(A,{className:"border-b border-primary/50 p-4",children:e.jsxs(S,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(us,{className:"w-4 h-4"}),"COURSES"]})}),e.jsx(k,{className:"p-4 max-h-64 overflow-y-auto",children:C.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:C.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${t.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white font-bold","data-testid":`course-sessions-${t.id}`,children:t.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:p("font-bold",t.totalMinutes>0?"text-green-400":"text-muted-foreground"),"data-testid":`course-minutes-${t.id}`,children:t.totalMinutes})," min"]})]})]},t.id))})})]}),e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(A,{className:"border-b border-primary/50 p-4",children:e.jsxs(S,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),"TASKS"]}),b.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>de(t=>(t-1+b.length)%b.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(ys,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-white bg-secondary/40 border border-secondary/60 px-2 py-0.5 min-w-[80px] text-center",children:q?.title||"Tasks"}),e.jsx("button",{onClick:()=>de(t=>(t+1)%b.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(bs,{className:"w-4 h-4"})})]})]})}),e.jsx(k,{className:"p-4",children:b.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{placeholder:"Add task...",value:G,onChange:t=>Ee(t.target.value),onKeyDown:t=>t.key==="Enter"&&Ue(),className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(x,{size:"sm",onClick:Ue,disabled:!G.trim()||Fe.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(se,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"max-h-52 overflow-y-auto pr-1",children:Ne.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[Vt.map(t=>{const n=Xt(t.due),N=t.due&&Ce(new Date(t.due))&&!ae(new Date(t.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>Pe.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(De,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:t.title}),(n||t.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n&&e.jsx("span",{className:p("font-terminal text-xs",N?"text-red-400":"text-muted-foreground"),children:n}),t.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:t.notes})]})]}),e.jsx("button",{onClick:()=>Bt(t),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(ze,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Ke.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(X,{className:"w-3 h-3"})})]},t.id)}),je.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",je.length,")"]}),je.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>Pe.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded-none",children:e.jsx(Ve,{className:"w-4 h-4 text-green-500"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:t.title}),e.jsx("button",{onClick:()=>Ke.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(X,{className:"w-3 h-3"})})]},t.id))]})]})})]})})]}),e.jsx(P,{open:!!ie,onOpenChange:t=>!t&&H(null),children:e.jsxs(F,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:E,children:[e.jsxs(R,{children:[e.jsx(K,{className:"font-arcade",children:"EDIT_TASK"}),e.jsx(L,{className:"sr-only",children:"Edit the selected task."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(u,{placeholder:"Task title",value:O,onChange:t=>ce(t.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(u,{placeholder:"Add notes...",value:W,onChange:t=>ue(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(u,{type:"date",value:_,onChange:t=>me(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(Z,{value:V,onValueChange:t=>xe(t),children:[e.jsx(J,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ee,{placeholder:"Select type"})}),e.jsxs(te,{className:"bg-black border-secondary rounded-none",children:[e.jsx(h,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(h,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(h,{value:"quiz",children:"â“ QUIZ"}),e.jsx(h,{value:"exam",children:"ðŸ“ EXAM"})]})]}),V!=="none"&&!_&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>H(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(x,{onClick:Yt,disabled:!O.trim()||Re.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsxs(A,{className:"border-b border-primary/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(S,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4"}),"DEADLINES"]}),e.jsxs(P,{open:Tt,onOpenChange:_e,children:[e.jsx(ve,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",className:"rounded-none border-primary hover:bg-primary/20 font-arcade text-[10px] h-7 px-2",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(F,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:E,children:[e.jsxs(R,{children:[e.jsx(K,{className:"font-arcade",children:"ADD_DEADLINE"}),e.jsx(L,{className:"sr-only",children:"Add a new academic deadline."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(u,{placeholder:"Title (e.g., Midterm Exam)",value:c.title,onChange:t=>I({...c,title:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(Z,{value:c.type,onValueChange:t=>I({...c,type:t}),children:[e.jsx(J,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ee,{placeholder:"Select type"})}),e.jsxs(te,{className:"bg-black border-secondary rounded-none",children:[e.jsx(h,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(h,{value:"quiz",children:"â“ Quiz"}),e.jsx(h,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(h,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsxs(Z,{value:c.course||"none",onValueChange:t=>I({...c,course:t==="none"?"":t}),children:[e.jsx(J,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ee,{placeholder:"Select course"})}),e.jsxs(te,{className:"bg-black border-secondary rounded-none",children:[e.jsx(h,{value:"none",children:"No course"}),C.map(t=>e.jsx(h,{value:t.name,children:t.name},t.id))]})]}),e.jsx(u,{type:"date",value:c.dueDate,onChange:t=>I({...c,dueDate:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(u,{placeholder:"Notes (optional)",value:c.notes,onChange:t=>I({...c,notes:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(x,{onClick:Qt,disabled:!c.title?.trim()||!c.dueDate||ye.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsxs(Z,{value:pe,onValueChange:Et,children:[e.jsx(J,{className:"rounded-none border-secondary bg-black/60 font-terminal text-xs h-7 w-full pl-3 pr-7",children:e.jsx(ee,{})}),e.jsxs(te,{className:"bg-black border-secondary rounded-none min-w-[200px]",children:[e.jsx(h,{value:"all",children:"ALL COURSES"}),Ht.map(t=>e.jsx(h,{value:t,children:t},t))]})]})]}),e.jsx(k,{className:"p-4 max-h-72 overflow-y-auto",children:he.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(xs,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:Wt.map(t=>{const n=Ut(t.dueDate),N=new Date(t.dueDate);return e.jsxs("div",{className:p("flex items-center gap-3 p-3 border transition-all",t.completed?"border-secondary/20 opacity-50":Gt(n)),children:[e.jsx("button",{onClick:()=>qt.mutate(t.id),className:"flex-shrink-0 p-0.5",children:t.completed?e.jsx(Ve,{className:"w-6 h-6 text-green-500"}):e.jsx(De,{className:"w-6 h-6 text-primary/70 hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:zt(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:p("font-terminal text-sm",t.completed&&"line-through"),children:t.title}),B(t.course)&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:B(t.course)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:p("px-2 py-1 font-terminal text-xs font-bold text-white",t.completed?"bg-secondary/50":n==="overdue"?"bg-red-600":n==="today"?"bg-orange-600":n==="tomorrow"?"bg-yellow-600":n==="soon"?"bg-red-800":"bg-red-900"),children:we(N)?He(N,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>Pt.mutate(t.id),className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",children:e.jsx(X,{className:"w-4 h-4"})})]})]},t.id)})})})})]}),Me.length>0?e.jsxs(w,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(A,{className:"border-b border-primary/50 p-4",children:e.jsxs(S,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(k,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Me.map(t=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${t.id}`,children:[t.topic,t.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.reason,")"]})]},t.id))})})]}):e.jsx(w,{className:"bg-black/40 border border-secondary/30 rounded-none md:col-span-2",children:e.jsxs(k,{className:"p-3 flex items-center justify-center gap-2",children:[e.jsx(Ye,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"No flagged weaknesses â€” topics you struggle with will appear here."})]})})]})]})})}export{ea as default};
