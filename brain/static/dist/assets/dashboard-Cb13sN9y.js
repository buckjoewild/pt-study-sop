import{c as we,u as js,a as Ns,r as n,j as e,b as q}from"./index-BUIwUX8F.js";import{u as p,a as m,L as vs,B as Cs,b as c,D as M,c as je,d as I,e as F,f as O,g as K,I as i,P as $e,T as V,C as ws,h as ks,G as Ds,S as Ss,i as o}from"./index-CI-pkP5c.js";import{C as f,a as N,b as v,c as b}from"./card-CiPNYABD.js";import{S as W,a as Y,b as B,c as X,d as u}from"./select-CZs2jYK9.js";import{C as Ne,A as Ts,a as Es,b as As,c as qs,d as Ms,e as Is,f as Fs,g as Os}from"./alert-dialog-D4lA7qiP.js";import{P as Ks}from"./play--VsxNp4P.js";import{P as Z,C as _s,i as ve,a as J,b as ze}from"./isTomorrow-BTsrUAba.js";import{C as Ls}from"./clock-BTWhxgiL.js";import{B as Qs,C as Ge}from"./circle-check-PuNvWTWr.js";import{t as He,d as Ps,f as Re,i as Ce}from"./format-D7m0hUtg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],$s=we("flame",Us);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Gs=we("list-todo",zs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ve=we("triangle-alert",Hs);function Rs(a,r){const d=He(a),j=He(r),T=We(d,j),C=Math.abs(Ps(d,j));d.setDate(d.getDate()-T*C);const g=+(We(d,j)===-T),w=T*(C-g);return w===0?0:w}function We(a,r){const d=a.getFullYear()-r.getFullYear()||a.getMonth()-r.getMonth()||a.getDate()-r.getDate()||a.getHours()-r.getHours()||a.getMinutes()-r.getMinutes()||a.getSeconds()-r.getSeconds()||a.getMilliseconds()-r.getMilliseconds();return d<0?-1:d>0?1:d}function at(){const a=js(),{toast:r}=Ns(),[d,j]=n.useState(""),[T,C]=n.useState(!1),[g,w]=n.useState(""),[ee,se]=n.useState(""),[ke,te]=n.useState(!1),[ae,re]=n.useState(null),[_,L]=n.useState(""),[De,Q]=n.useState(""),[P,ne]=n.useState(null),k={zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},[Ye,oe]=n.useState(0),[Se,Be]=n.useState(!1),[U,Te]=n.useState(""),[de,$]=n.useState(null),[E,le]=n.useState(""),[z,ie]=n.useState(""),[D,ce]=n.useState(""),[G,ue]=n.useState("none"),[Xe,Ee]=n.useState(!1),[me,Ze]=n.useState("all"),[l,S]=n.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:Je}=p({queryKey:["study-wheel","current"],queryFn:o.studyWheel.getCurrentCourse}),{data:y=[]}=p({queryKey:["courses","active"],queryFn:o.courses.getActive}),{data:Ae=[]}=p({queryKey:["sessions","today"],queryFn:o.todaySessions.get}),{data:es}=p({queryKey:["streak"],queryFn:o.streak.get}),{data:qe=[]}=p({queryKey:["weakness-queue"],queryFn:o.weaknessQueue.get}),{data:xe=[]}=p({queryKey:["academic-deadlines"],queryFn:o.academicDeadlines.getAll}),{data:he=[]}=p({queryKey:["planner-queue"],queryFn:o.planner.getQueue}),{data:x=[]}=p({queryKey:["google-task-lists"],queryFn:o.googleTasks.getLists}),{data:ss=[]}=p({queryKey:["google-tasks"],queryFn:o.googleTasks.getAll});n.useEffect(()=>{if(Se||!x.length)return;const s=x.findIndex(t=>t.title?.toLowerCase().includes("school"));s>=0&&oe(s),Be(!0)},[x,Se]);const Me=m({mutationFn:({courseId:s,mins:t})=>o.studyWheel.completeSession(s,t),onSuccess:()=>{a.invalidateQueries({queryKey:["study-wheel"]}),a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["sessions"]}),a.invalidateQueries({queryKey:["streak"]}),j(""),C(!1),r({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{r({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),pe=m({mutationFn:({name:s,code:t})=>o.courses.create({name:s,code:t,active:!0,position:y.length}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["study-wheel"]}),w(""),se(""),te(!1),r({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{r({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),Ie=m({mutationFn:({id:s,name:t,code:h})=>o.courses.update(s,{name:t,code:h}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["study-wheel"]}),re(null),L(""),Q(""),r({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{r({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),ts=m({mutationFn:s=>o.courses.delete(s),onSuccess:()=>{a.invalidateQueries({queryKey:["courses","active"]}),a.invalidateQueries({queryKey:["study-wheel","current"]}),a.invalidateQueries({queryKey:["study-wheel"]}),r({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:s=>{console.error("Delete failed:",s),r({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),Fe=m({mutationFn:s=>o.googleTasks.update(s.id,s.listId,{status:s.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]})}}),Oe=m({mutationFn:s=>o.googleTasks.create(s.listId,{title:s.title,status:"needsAction"}),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]}),Te("")}}),Ke=m({mutationFn:s=>o.googleTasks.update(s.task.id,s.task.listId,s.data),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]}),$(null),le(""),ie(""),ce(""),ue("none")}}),_e=m({mutationFn:s=>o.googleTasks.delete(s.id,s.listId),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]})}}),ge=m({mutationFn:s=>o.academicDeadlines.create(s),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]}),Ee(!1),S({title:"",course:"",type:"assignment",dueDate:"",notes:""}),r({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{r({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),as=m({mutationFn:s=>o.academicDeadlines.toggleComplete(s),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]})}}),rs=m({mutationFn:s=>o.academicDeadlines.delete(s),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]}),r({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),H=Je?.currentCourse,ns=Ae.reduce((s,t)=>s+(t.minutes||0),0),Le=Ae.length,ye=Le>0,os=()=>{!H||!d||parseInt(d)<1||Me.mutate({courseId:H.id,mins:parseInt(d)})},Qe=()=>{g.trim()&&pe.mutate({name:g.trim(),code:ee.trim()||void 0})},ds=()=>{!ae||!_.trim()||Ie.mutate({id:ae.id,name:_.trim(),code:De.trim()||null})},ls=()=>{P&&(ts.mutate(P.id),ne(null))},is=s=>{re(s),L(s.name),Q(s.code??"")},cs=()=>{!l.title?.trim()||!l.dueDate||ge.mutate(l)},us=s=>{const t=new Date(s);if(!Ce(t))return"unknown";if(ve(t)&&!J(t))return"overdue";if(J(t))return"today";if(ze(t))return"tomorrow";const h=Rs(t,new Date);return h<=3?"soon":h<=7?"week":"later"},ms=s=>{switch(s){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},xs=s=>{switch(s){case"overdue":return"border-red-500 bg-red-500/20 text-red-400";case"today":return"border-orange-500 bg-orange-500/20 text-orange-400";case"tomorrow":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"soon":return"border-blue-500 bg-blue-500/20 text-blue-400";default:return"border-secondary/30 text-muted-foreground"}},Pe={};y.forEach(s=>{Pe[String(s.id)]=s.name});const R=s=>s?/^\d+$/.test(s)?Pe[s]||"":s:"",hs=[...new Set([...xe.map(s=>R(s.course)).filter(Boolean),...y.map(s=>s.name)])].sort(),ps=[...xe].filter(s=>me==="all"||R(s.course)===me).sort((s,t)=>s.completed!==t.completed?s.completed?1:-1:new Date(s.dueDate).getTime()-new Date(t.dueDate).getTime()),A=x[Ye],fe=A?ss.filter(s=>s.listId===A.id):[],gs=fe.filter(s=>s.status!=="completed"),be=fe.filter(s=>s.status==="completed"),Ue=()=>{!U.trim()||!A||Oe.mutate({listId:A.id,title:U.trim()})},ys=()=>{if(!de||!E.trim())return;const s={title:E.trim()};z&&(s.notes=z),D&&(s.due=new Date(D).toISOString()),Ke.mutate({task:de,data:s}),G!=="none"&&D&&ge.mutate({title:E.trim(),type:G,dueDate:D,course:"",notes:z||""})},fs=s=>{$(s),le(s.title),ie(s.notes||""),ce(s.due?s.due.split("T")[0]:""),ue("none")},bs=s=>{if(!s)return null;const t=new Date(s);return Ce(t)?J(t)?"Today":ze(t)?"Tomorrow":ve(t)?"Overdue":Re(t,"MMM d"):null};return e.jsx(vs,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs(f,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(N,{className:"p-3 border-b border-secondary/50",children:e.jsxs(v,{className:"font-arcade text-xs flex items-center justify-between",children:[e.jsx("span",{children:"TODAY'S FOCUS"}),e.jsxs(Cs,{variant:"outline",className:"rounded-none text-[9px]",children:[he.filter(s=>s.scheduled_date&&s.scheduled_date<=new Date().toISOString().slice(0,10)).length," tasks"]})]})}),e.jsxs(b,{className:"p-4",children:[he.filter(s=>s.scheduled_date&&s.scheduled_date<=new Date().toISOString().slice(0,10)).length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No tasks due today"}):e.jsx("ul",{className:"space-y-2 mb-4",children:he.filter(s=>s.scheduled_date&&s.scheduled_date<=new Date().toISOString().slice(0,10)).slice(0,3).map(s=>e.jsxs("li",{className:"font-terminal text-xs flex items-center gap-2",children:[e.jsx(Ne,{className:"w-2 h-2 text-primary"}),e.jsx("span",{className:"truncate",children:s.anchor_text||s.notes||"Untitled task"})]},s.id))}),e.jsx(c,{variant:"outline",size:"sm",className:"w-full rounded-none font-arcade text-xs border-primary",onClick:()=>window.location.href="/brain",children:"Open Brain â†’"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-rows-[auto]",children:[e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(N,{className:"border-b border-primary/50 p-4",children:e.jsxs(v,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),"STUDY_WHEEL"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-3 py-1","data-testid":"streak-display",children:[e.jsx($s,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-arcade text-sm text-white","data-testid":"text-streak",children:es?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground",children:"DAY STREAK"})]})]})}),e.jsx(b,{className:"p-4",children:y.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(M,{open:ke,onOpenChange:te,children:[e.jsx(je,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(I,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:k,children:[e.jsxs(F,{children:[e.jsx(O,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(K,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(i,{placeholder:"Course name (e.g., Anatomy)",value:g,onChange:s=>w(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(i,{placeholder:"Course number (e.g., PHTH 5301)",value:ee,onChange:s=>se(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code"}),e.jsx(c,{onClick:Qe,disabled:!g.trim()||pe.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-2xl text-primary","data-testid":"text-current-course",children:H?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[y.map((s,t)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${t===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:t===0?"scale(1.02)":`scale(${1-t*.02})`,opacity:t===0?1:Math.max(.4,1-t*.15)},"data-testid":`wheel-course-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${t===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:t+1}),e.jsx("span",{className:`font-terminal ${t===0?"text-primary font-bold":"text-muted-foreground"}`,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>is({id:s.id,name:s.name,code:s.code}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${s.id}`,children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ne({id:s.id,name:s.name}),className:"p-1 hover:text-red-500 transition-colors text-muted-foreground","data-testid":`button-delete-course-${s.id}`,children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id)),e.jsxs(M,{open:ke,onOpenChange:te,children:[e.jsx(je,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(I,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:k,children:[e.jsxs(F,{children:[e.jsx(O,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(K,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(i,{placeholder:"Course name (e.g., Anatomy)",value:g,onChange:s=>w(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(i,{placeholder:"Course number (e.g., PHTH 5301)",value:ee,onChange:s=>se(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code-inline"}),e.jsx(c,{onClick:Qe,disabled:!g.trim()||pe.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(M,{open:!!ae,onOpenChange:s=>{s||(re(null),L(""),Q(""))},children:e.jsxs(I,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:k,children:[e.jsxs(F,{children:[e.jsx(O,{className:"font-arcade",children:"EDIT_COURSE"}),e.jsx(K,{className:"sr-only",children:"Modify the course details."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(i,{placeholder:"Course name",value:_,onChange:s=>L(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(i,{placeholder:"Course number (e.g., PHTH 5301)",value:De,onChange:s=>Q(s.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-code"}),e.jsx(c,{onClick:ds,disabled:!_.trim()||Ie.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(Ts,{open:!!P,onOpenChange:s=>!s&&ne(null),children:e.jsxs(Es,{className:"bg-black border-2 border-red-500 rounded-none translate-y-0",style:k,children:[e.jsxs(As,{children:[e.jsx(qs,{className:"font-arcade text-red-500",children:"DELETE_COURSE"}),e.jsxs(Ms,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:P?.name}),"? This action cannot be undone."]})]}),e.jsxs(Is,{className:"gap-2",children:[e.jsx(Fs,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(Os,{onClick:ls,className:"rounded-none bg-red-500 hover:bg-red-600 font-arcade text-xs text-white",children:"DELETE"})]})]})}),T?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{type:"number",min:"1",value:d,onChange:s=>j(s.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{variant:"outline",onClick:()=>{C(!1),j("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(c,{onClick:os,disabled:!d||parseInt(d)<1||Me.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(c,{onClick:()=>C(!0),className:"w-full rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80 shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.5)] transition-shadow",disabled:!H,"data-testid":"button-start-session",children:[e.jsx(ws,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(N,{className:"border-b border-primary/50 p-4",children:e.jsxs(v,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ls,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(b,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:Le})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:ns})]}),e.jsx("div",{className:`p-2 border ${ye?"border-green-500/50 bg-green-500/10":"border-orange-500/50 bg-orange-500/10"}`,children:e.jsx("span",{className:`font-terminal text-xs ${ye?"text-green-400":"text-orange-400"}`,"data-testid":"text-today-status",children:ye?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(N,{className:"border-b border-primary/50 p-4",children:e.jsxs(v,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"COURSES"]})}),e.jsx(b,{className:"p-4 max-h-64 overflow-y-auto",children:y.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:y.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${s.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white font-bold","data-testid":`course-sessions-${s.id}`,children:s.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:q("font-bold",s.totalMinutes>0?"text-green-400":"text-muted-foreground"),"data-testid":`course-minutes-${s.id}`,children:s.totalMinutes})," min"]})]})]},s.id))})})]}),e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(N,{className:"border-b border-primary/50 p-4",children:e.jsxs(v,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"w-4 h-4"}),"TASKS"]}),x.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>oe(s=>(s-1+x.length)%x.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-white bg-secondary/40 border border-secondary/60 px-2 py-0.5 min-w-[80px] text-center",children:A?.title||"Tasks"}),e.jsx("button",{onClick:()=>oe(s=>(s+1)%x.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(ks,{className:"w-4 h-4"})})]})]})}),e.jsx(b,{className:"p-4",children:x.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{placeholder:"Add task...",value:U,onChange:s=>Te(s.target.value),onKeyDown:s=>s.key==="Enter"&&Ue(),className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(c,{size:"sm",onClick:Ue,disabled:!U.trim()||Oe.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(Z,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"max-h-52 overflow-y-auto pr-1",children:fe.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[gs.map(s=>{const t=bs(s.due),h=s.due&&ve(new Date(s.due))&&!J(new Date(s.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>Fe.mutate(s),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(Ne,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:s.title}),(t||s.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t&&e.jsx("span",{className:q("font-terminal text-xs",h?"text-red-400":"text-muted-foreground"),children:t}),s.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:s.notes})]})]}),e.jsx("button",{onClick:()=>fs(s),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx($e,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>_e.mutate(s),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(V,{className:"w-3 h-3"})})]},s.id)}),be.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",be.length,")"]}),be.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>Fe.mutate(s),className:"flex-shrink-0 p-0.5 hover:bg-green-500/20 rounded",children:e.jsx(Ge,{className:"w-4 h-4 text-green-500"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:s.title}),e.jsx("button",{onClick:()=>_e.mutate(s),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(V,{className:"w-3 h-3"})})]},s.id))]})]})})]})})]}),e.jsx(M,{open:!!de,onOpenChange:s=>!s&&$(null),children:e.jsxs(I,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:k,children:[e.jsxs(F,{children:[e.jsx(O,{className:"font-arcade",children:"EDIT_TASK"}),e.jsx(K,{className:"sr-only",children:"Edit the selected task."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(i,{placeholder:"Task title",value:E,onChange:s=>le(s.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(i,{placeholder:"Add notes...",value:z,onChange:s=>ie(s.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(i,{type:"date",value:D,onChange:s=>ce(s.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(W,{value:G,onValueChange:s=>ue(s),children:[e.jsx(Y,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(B,{placeholder:"Select type"})}),e.jsxs(X,{className:"bg-black border-secondary rounded-none",children:[e.jsx(u,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(u,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(u,{value:"quiz",children:"â“ QUIZ"}),e.jsx(u,{value:"exam",children:"ðŸ“ EXAM"})]})]}),G!=="none"&&!D&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>$(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(c,{onClick:ys,disabled:!E.trim()||Ke.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsxs(N,{className:"border-b border-primary/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),"DEADLINES"]}),e.jsxs(M,{open:Xe,onOpenChange:Ee,children:[e.jsx(je,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"rounded-none border-primary hover:bg-primary/20 font-arcade text-[10px] h-7 px-2",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(I,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:k,children:[e.jsxs(F,{children:[e.jsx(O,{className:"font-arcade",children:"ADD_DEADLINE"}),e.jsx(K,{className:"sr-only",children:"Add a new academic deadline."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(i,{placeholder:"Title (e.g., Midterm Exam)",value:l.title,onChange:s=>S({...l,title:s.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(W,{value:l.type,onValueChange:s=>S({...l,type:s}),children:[e.jsx(Y,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(B,{placeholder:"Select type"})}),e.jsxs(X,{className:"bg-black border-secondary rounded-none",children:[e.jsx(u,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(u,{value:"quiz",children:"â“ Quiz"}),e.jsx(u,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(u,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsxs(W,{value:l.course||"none",onValueChange:s=>S({...l,course:s==="none"?"":s}),children:[e.jsx(Y,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(B,{placeholder:"Select course"})}),e.jsxs(X,{className:"bg-black border-secondary rounded-none",children:[e.jsx(u,{value:"none",children:"No course"}),y.map(s=>e.jsx(u,{value:s.name,children:s.name},s.id))]})]}),e.jsx(i,{type:"date",value:l.dueDate,onChange:s=>S({...l,dueDate:s.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(i,{placeholder:"Notes (optional)",value:l.notes,onChange:s=>S({...l,notes:s.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(c,{onClick:cs,disabled:!l.title?.trim()||!l.dueDate||ge.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsxs(W,{value:me,onValueChange:Ze,children:[e.jsx(Y,{className:"rounded-none border-secondary bg-black/60 font-terminal text-xs h-7 w-full pl-3 pr-7",children:e.jsx(B,{})}),e.jsxs(X,{className:"bg-black border-secondary rounded-none min-w-[200px]",children:[e.jsx(u,{value:"all",children:"ALL COURSES"}),hs.map(s=>e.jsx(u,{value:s,children:s},s))]})]})]}),e.jsx(b,{className:"p-4 max-h-72 overflow-y-auto",children:xe.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(Ss,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:ps.map(s=>{const t=us(s.dueDate),h=new Date(s.dueDate);return e.jsxs("div",{className:q("flex items-center gap-3 p-3 border transition-all",s.completed?"border-secondary/20 opacity-50":xs(t)),children:[e.jsx("button",{onClick:()=>as.mutate(s.id),className:"flex-shrink-0 p-0.5",children:s.completed?e.jsx(Ge,{className:"w-6 h-6 text-green-500"}):e.jsx(Ne,{className:"w-6 h-6 text-primary/70 hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:ms(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:q("font-terminal text-sm",s.completed&&"line-through"),children:s.title}),R(s.course)&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:R(s.course)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:q("px-2 py-1 font-terminal text-xs font-bold text-white",s.completed?"bg-secondary/50":t==="overdue"?"bg-red-600":t==="today"?"bg-orange-600":t==="tomorrow"?"bg-yellow-600":t==="soon"?"bg-red-800":"bg-red-900"),children:Ce(h)?Re(h,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>rs.mutate(s.id),className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id)})})})})]}),qe.length>0?e.jsxs(f,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(N,{className:"border-b border-primary/50 p-4",children:e.jsxs(v,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(b,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:qe.map(s=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${s.id}`,children:[s.topic,s.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",s.reason,")"]})]},s.id))})})]}):e.jsx(f,{className:"bg-black/40 border border-secondary/30 rounded-none md:col-span-2",children:e.jsxs(b,{className:"p-3 flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"No flagged weaknesses â€” topics you struggle with will appear here."})]})})]})]})})}export{at as default};
