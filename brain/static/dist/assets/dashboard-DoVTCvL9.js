import{c as R,u as dt,a as lt,r as o,j as e,b as U}from"./index-BKhgCidP.js";import{u as h,a as u,L as it,D as A,b as le,B as i,c as q,d as M,e as I,I as c,P as Te,T as $,C as ct,f as ut,G as mt,S as xt,g as n}from"./layout-3Jhlq5xU.js";import{C as v,a as C,b as k,c as D}from"./card-Bbcg7BWA.js";import{S as Se,a as Ee,b as Ae,c as qe,d as p,B as ht}from"./select-Vy4Wgjan.js";import{A as pt,a as gt,b as yt,c as ft,d as bt,e as jt,f as Nt,g as vt,T as Ct}from"./alert-dialog-Bmc4mXyN.js";import{P as z,C as kt,i as ie,a as G,b as Me}from"./isTomorrow-DyNp9uZT.js";import{C as Dt}from"./clock-DQ4hpdwr.js";import{B as wt}from"./book-open-CbSzwptJ.js";import{C as Ie}from"./circle-check-BHyE32V7.js";import{t as Ke,d as Tt,f as Fe,i as ce}from"./format-D7m0hUtg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oe=R("circle",St);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],At=R("flame",Et);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Mt=R("list-todo",qt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Kt=R("play",It);function Ft(a,r){const d=Ke(a),g=Ke(r),w=Le(d,g),f=Math.abs(Tt(d,g));d.setDate(d.getDate()-w*f);const x=+(Le(d,g)===-w),b=w*(f-x);return b===0?0:b}function Le(a,r){const d=a.getFullYear()-r.getFullYear()||a.getMonth()-r.getMonth()||a.getDate()-r.getDate()||a.getHours()-r.getHours()||a.getMinutes()-r.getMinutes()||a.getSeconds()-r.getSeconds()||a.getMilliseconds()-r.getMilliseconds();return d<0?-1:d>0?1:d}function Yt(){const a=dt(),{toast:r}=lt(),[d,g]=o.useState(""),[w,f]=o.useState(!1),[x,b]=o.useState(""),[ue,Y]=o.useState(!1),[W,B]=o.useState(null),[K,H]=o.useState(""),[F,V]=o.useState(null),[Qe,X]=o.useState(0),[me,_e]=o.useState(!1),[O,xe]=o.useState(""),[Z,L]=o.useState(null),[T,J]=o.useState(""),[Q,ee]=o.useState(""),[j,te]=o.useState(""),[_,se]=o.useState("none"),[Pe,he]=o.useState(!1),[l,N]=o.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:Ue}=h({queryKey:["study-wheel","current"],queryFn:n.studyWheel.getCurrentCourse}),{data:S=[]}=h({queryKey:["courses","active"],queryFn:n.courses.getActive}),{data:pe=[]}=h({queryKey:["sessions","today"],queryFn:n.todaySessions.get}),{data:$e}=h({queryKey:["streak"],queryFn:n.streak.get}),{data:ge=[]}=h({queryKey:["weakness-queue"],queryFn:n.weaknessQueue.get}),{data:ye=[]}=h({queryKey:["academic-deadlines"],queryFn:n.academicDeadlines.getAll}),{data:m=[]}=h({queryKey:["google-task-lists"],queryFn:n.googleTasks.getLists}),{data:ze=[]}=h({queryKey:["google-tasks"],queryFn:n.googleTasks.getAll});o.useEffect(()=>{if(me||!m.length)return;const t=m.findIndex(s=>s.title?.toLowerCase().includes("school"));t>=0&&X(t),_e(!0)},[m,me]);const fe=u({mutationFn:({courseId:t,mins:s})=>n.studyWheel.completeSession(t,s),onSuccess:()=>{a.invalidateQueries({queryKey:["study-wheel"]}),a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["sessions"]}),a.invalidateQueries({queryKey:["streak"]}),g(""),f(!1),r({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{r({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),ae=u({mutationFn:t=>n.courses.create({name:t,active:!0,position:S.length}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["study-wheel"]}),b(""),Y(!1),r({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{r({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),be=u({mutationFn:({id:t,name:s})=>n.courses.update(t,{name:s}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),a.invalidateQueries({queryKey:["study-wheel"]}),B(null),H(""),r({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{r({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),Ge=u({mutationFn:t=>n.courses.delete(t),onSuccess:()=>{a.invalidateQueries({queryKey:["courses","active"]}),a.invalidateQueries({queryKey:["study-wheel","current"]}),a.invalidateQueries({queryKey:["study-wheel"]}),r({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:t=>{console.error("Delete failed:",t),r({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),je=u({mutationFn:t=>n.googleTasks.update(t.id,t.listId,{status:t.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]})}}),Ne=u({mutationFn:t=>n.googleTasks.create(t.listId,{title:t.title,status:"needsAction"}),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]}),xe("")}}),ve=u({mutationFn:t=>n.googleTasks.update(t.task.id,t.task.listId,t.data),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]}),L(null),J(""),ee(""),te(""),se("none")}}),Ce=u({mutationFn:t=>n.googleTasks.delete(t.id,t.listId),onSuccess:()=>{a.invalidateQueries({queryKey:["google-tasks"]})}}),re=u({mutationFn:t=>n.academicDeadlines.create(t),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]}),he(!1),N({title:"",course:"",type:"assignment",dueDate:"",notes:""}),r({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{r({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),Re=u({mutationFn:t=>n.academicDeadlines.toggleComplete(t),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]})}}),Ye=u({mutationFn:t=>n.academicDeadlines.delete(t),onSuccess:()=>{a.invalidateQueries({queryKey:["academic-deadlines"]}),r({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),P=Ue?.currentCourse,We=pe.reduce((t,s)=>t+(s.minutes||0),0),ke=pe.length,ne=ke>0,Be=()=>{!P||!d||parseInt(d)<1||fe.mutate({courseId:P.id,mins:parseInt(d)})},De=()=>{x.trim()&&ae.mutate(x.trim())},He=()=>{!W||!K.trim()||be.mutate({id:W.id,name:K.trim()})},Ve=()=>{F&&(Ge.mutate(F.id),V(null))},Xe=t=>{B(t),H(t.name)},Ze=()=>{!l.title?.trim()||!l.dueDate||re.mutate(l)},Je=t=>{const s=new Date(t);if(!ce(s))return"unknown";if(ie(s)&&!G(s))return"overdue";if(G(s))return"today";if(Me(s))return"tomorrow";const y=Ft(s,new Date);return y<=3?"soon":y<=7?"week":"later"},et=t=>{switch(t){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},tt=t=>{switch(t){case"overdue":return"border-red-500 bg-red-500/20 text-red-400";case"today":return"border-orange-500 bg-orange-500/20 text-orange-400";case"tomorrow":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"soon":return"border-blue-500 bg-blue-500/20 text-blue-400";default:return"border-secondary/30 text-muted-foreground"}},st=[...ye].sort((t,s)=>t.completed!==s.completed?t.completed?1:-1:new Date(t.dueDate).getTime()-new Date(s.dueDate).getTime()),E=m[Qe],oe=E?ze.filter(t=>t.listId===E.id):[],at=oe.filter(t=>t.status!=="completed"),de=oe.filter(t=>t.status==="completed"),we=()=>{!O.trim()||!E||Ne.mutate({listId:E.id,title:O.trim()})},rt=()=>{if(!Z||!T.trim())return;const t={title:T.trim()};Q&&(t.notes=Q),j&&(t.due=new Date(j).toISOString()),ve.mutate({task:Z,data:t}),_!=="none"&&j&&re.mutate({title:T.trim(),type:_,dueDate:j,course:"",notes:Q||""})},nt=t=>{L(t),J(t.title),ee(t.notes||""),te(t.due?t.due.split("T")[0]:""),se("none")},ot=t=>{if(!t)return null;const s=new Date(t);return ce(s)?G(s)?"Today":Me(s)?"Tomorrow":ie(s)?"Overdue":Fe(s,"MMM d"):null};return e.jsx(it,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"font-arcade text-xl text-primary",children:"STUDY_CONTROL"}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-4 py-2","data-testid":"streak-display",children:[e.jsx(At,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"font-arcade text-lg text-white","data-testid":"text-streak",children:$e?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"DAY STREAK"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(v,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(C,{className:"border-b border-primary/50 p-4",children:e.jsxs(k,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"STUDY_WHEEL"]})}),e.jsx(D,{className:"p-6",children:S.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(A,{open:ue,onOpenChange:Y,children:[e.jsx(le,{asChild:!0,children:e.jsxs(i,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(q,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(M,{children:e.jsx(I,{className:"font-arcade",children:"ADD_NEW_COURSE"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(c,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>b(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(i,{onClick:De,disabled:!x.trim()||ae.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-3xl text-primary","data-testid":"text-current-course",children:P?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[S.map((t,s)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${s===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:s===0?"scale(1.02)":`scale(${1-s*.02})`,opacity:s===0?1:Math.max(.4,1-s*.15)},"data-testid":`wheel-course-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${s===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:s+1}),e.jsx("span",{className:`font-terminal ${s===0?"text-primary font-bold":"text-muted-foreground"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Xe({id:t.id,name:t.name}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${t.id}`,children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>V({id:t.id,name:t.name}),className:"p-1 hover:text-red-500 transition-colors text-muted-foreground","data-testid":`button-delete-course-${t.id}`,children:e.jsx($,{className:"w-4 h-4"})})]})]},t.id)),e.jsxs(A,{open:ue,onOpenChange:Y,children:[e.jsx(le,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(q,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(M,{children:e.jsx(I,{className:"font-arcade",children:"ADD_NEW_COURSE"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(c,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>b(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(i,{onClick:De,disabled:!x.trim()||ae.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(A,{open:!!W,onOpenChange:t=>!t&&B(null),children:e.jsxs(q,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(M,{children:e.jsx(I,{className:"font-arcade",children:"EDIT_COURSE"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(c,{placeholder:"Course name",value:K,onChange:t=>H(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(i,{onClick:He,disabled:!K.trim()||be.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(pt,{open:!!F,onOpenChange:t=>!t&&V(null),children:e.jsxs(gt,{className:"bg-black border-2 border-red-500 rounded-none",children:[e.jsxs(yt,{children:[e.jsx(ft,{className:"font-arcade text-red-500",children:"DELETE_COURSE"}),e.jsxs(bt,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:F?.name}),"? This action cannot be undone."]})]}),e.jsxs(jt,{className:"gap-2",children:[e.jsx(Nt,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(vt,{onClick:Ve,className:"rounded-none bg-red-500 hover:bg-red-600 font-arcade text-xs text-white",children:"DELETE"})]})]})}),w?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{type:"number",min:"1",value:d,onChange:t=>g(t.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(i,{variant:"outline",onClick:()=>{f(!1),g("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(i,{onClick:Be,disabled:!d||parseInt(d)<1||fe.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"flex justify-center",children:e.jsxs(i,{onClick:()=>f(!0),className:"rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80",disabled:!P,"data-testid":"button-start-session",children:[e.jsx(ct,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(v,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(C,{className:"border-b border-secondary p-4",children:e.jsxs(k,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(D,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:ke})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:We})]}),e.jsx("div",{className:`p-3 border ${ne?"border-green-500/50 bg-green-500/10":"border-orange-500/50 bg-orange-500/10"}`,children:e.jsx("span",{className:`font-terminal text-sm ${ne?"text-green-400":"text-orange-400"}`,"data-testid":"text-today-status",children:ne?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(v,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(C,{className:"border-b border-secondary p-4",children:e.jsxs(k,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4"}),"COURSE_SUMMARY"]})}),e.jsx(D,{className:"p-4 max-h-64 overflow-y-auto",children:S.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:S.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${t.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white","data-testid":`course-sessions-${t.id}`,children:t.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-primary","data-testid":`course-minutes-${t.id}`,children:t.totalMinutes})," min"]})]})]},t.id))})})]}),e.jsxs(v,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(C,{className:"border-b border-secondary p-4",children:e.jsxs(k,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-primary"}),"TASKS"]}),m.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>X(t=>(t-1+m.length)%m.length),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(kt,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground min-w-[80px] text-center",children:E?.title||"Tasks"}),e.jsx("button",{onClick:()=>X(t=>(t+1)%m.length),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(ut,{className:"w-4 h-4"})})]})]})}),e.jsx(D,{className:"p-4",children:m.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{placeholder:"Add task...",value:O,onChange:t=>xe(t.target.value),onKeyDown:t=>t.key==="Enter"&&we(),className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(i,{size:"sm",onClick:we,disabled:!O.trim()||Ne.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(z,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"h-52 overflow-y-auto pr-1",children:oe.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[at.map(t=>{const s=ot(t.due),y=t.due&&ie(new Date(t.due))&&!G(new Date(t.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>je.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(Oe,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:t.title}),(s||t.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s&&e.jsx("span",{className:U("font-terminal text-xs",y?"text-red-400":"text-muted-foreground"),children:s}),t.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:t.notes})]})]}),e.jsx("button",{onClick:()=>nt(t),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(Te,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Ce.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx($,{className:"w-3 h-3"})})]},t.id)}),de.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",de.length,")"]}),de.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>je.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-green-500/20 rounded",children:e.jsx(Ie,{className:"w-4 h-4 text-green-500"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:t.title}),e.jsx("button",{onClick:()=>Ce.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{className:"w-3 h-3"})})]},t.id))]})]})})]})})]}),e.jsx(A,{open:!!Z,onOpenChange:t=>!t&&L(null),children:e.jsxs(q,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(M,{children:e.jsx(I,{className:"font-arcade",children:"EDIT_TASK"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(c,{placeholder:"Task title",value:T,onChange:t=>J(t.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(c,{placeholder:"Add notes...",value:Q,onChange:t=>ee(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(c,{type:"date",value:j,onChange:t=>te(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(Se,{value:_,onValueChange:t=>se(t),children:[e.jsx(Ee,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(Ae,{placeholder:"Select type"})}),e.jsxs(qe,{className:"bg-black border-secondary rounded-none",children:[e.jsx(p,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(p,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(p,{value:"quiz",children:"â“ QUIZ"}),e.jsx(p,{value:"exam",children:"ðŸ“ EXAM"})]})]}),_!=="none"&&!j&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",onClick:()=>L(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(i,{onClick:rt,disabled:!T.trim()||ve.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(v,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsxs(C,{className:"border-b border-primary/50 p-4 flex flex-row items-center justify-between",children:[e.jsxs(k,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4"}),"ACADEMIC_DEADLINES"]}),e.jsxs(A,{open:Pe,onOpenChange:he,children:[e.jsx(le,{asChild:!0,children:e.jsxs(i,{variant:"outline",size:"sm",className:"rounded-none border-primary font-arcade text-xs",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(q,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(M,{children:e.jsx(I,{className:"font-arcade",children:"ADD_DEADLINE"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(c,{placeholder:"Title (e.g., Midterm Exam)",value:l.title,onChange:t=>N({...l,title:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(Se,{value:l.type,onValueChange:t=>N({...l,type:t}),children:[e.jsx(Ee,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(Ae,{placeholder:"Select type"})}),e.jsxs(qe,{className:"bg-black border-secondary rounded-none",children:[e.jsx(p,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(p,{value:"quiz",children:"â“ Quiz"}),e.jsx(p,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(p,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsx(c,{placeholder:"Course (optional)",value:l.course,onChange:t=>N({...l,course:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(c,{type:"date",value:l.dueDate,onChange:t=>N({...l,dueDate:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(c,{placeholder:"Notes (optional)",value:l.notes,onChange:t=>N({...l,notes:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(i,{onClick:Ze,disabled:!l.title?.trim()||!l.dueDate||re.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsx(D,{className:"p-4",children:ye.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(xt,{className:"max-h-80",children:e.jsx("div",{className:"space-y-2",children:st.map(t=>{const s=Je(t.dueDate),y=new Date(t.dueDate);return e.jsxs("div",{className:U("flex items-center gap-3 p-3 border transition-all",t.completed?"border-secondary/20 opacity-50":tt(s)),children:[e.jsx("button",{onClick:()=>Re.mutate(t.id),className:"flex-shrink-0",children:t.completed?e.jsx(Ie,{className:"w-5 h-5 text-green-500"}):e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:et(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:U("font-terminal text-sm",t.completed&&"line-through"),children:t.title}),t.course&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:t.course})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(ht,{variant:"outline",className:U("rounded-none font-terminal text-xs",!t.completed&&s==="overdue"&&"border-red-500 text-red-400",!t.completed&&s==="today"&&"border-orange-500 text-orange-400",!t.completed&&s==="tomorrow"&&"border-yellow-500 text-yellow-400"),children:ce(y)?Fe(y,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>Ye.mutate(t.id),className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",children:e.jsx($,{className:"w-4 h-4"})})]})]},t.id)})})})})]}),e.jsxs(v,{className:"bg-black/40 border-2 border-secondary rounded-none md:col-span-2",children:[e.jsx(C,{className:"border-b border-secondary p-4",children:e.jsxs(k,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(D,{className:"p-4",children:ge.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No flagged topics. Topics you struggle with will appear here."}):e.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map(t=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${t.id}`,children:[t.topic,t.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.reason,")"]})]},t.id))})})]})]})]})})}export{Yt as default};
