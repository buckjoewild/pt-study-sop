import{c as A,j as e,r as c,X as B,a as ae,u as ne}from"./index-C79Y5ZgH.js";import{z as re,B as C,D as O,c as K,e as q,k as F,u as E,a as v,L as ie,F as oe,I as S,g as b}from"./index-Dh__Bh7q.js";import{S as T,a as M,b as R,c as L,d as w}from"./select-CjlFxpc-.js";import{C as le}from"./clock-SxOHk0F3.js";import{A as de}from"./arrow-right-B5fuKrdm.js";import{P as I}from"./plus-DPryQHrv.js";import{T as ce}from"./trending-up-CSzahAJh.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],H=A("chart-column",me);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ue=A("link-2",xe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],k=A("star",he);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ge=A("zap",pe),fe={activate:"border-yellow-500 bg-yellow-500/10",map:"border-blue-500 bg-blue-500/10",encode:"border-purple-500 bg-purple-500/10",retrieve:"border-red-500 bg-red-500/10",connect:"border-green-500 bg-green-500/10",consolidate:"border-gray-500 bg-gray-500/10"},ye={activate:"bg-yellow-500/20 text-yellow-400",map:"bg-blue-500/20 text-blue-400",encode:"bg-purple-500/20 text-purple-400",retrieve:"bg-red-500/20 text-red-400",connect:"bg-green-500/20 text-green-400",consolidate:"bg-gray-500/20 text-gray-400"},be={low:"text-green-400",medium:"text-yellow-400",high:"text-red-400"};function D({block:a,compact:u,onClick:d,draggable:i,onDragStart:o}){const l=fe[a.category]||"border-secondary bg-secondary/10",s=ye[a.category]||"bg-secondary/20 text-muted-foreground",m=be[a.energy_cost]||"text-muted-foreground";return u?e.jsx("div",{className:`border-2 ${l} p-2 rounded-none cursor-pointer hover:opacity-80 transition-opacity`,onClick:d,draggable:i,onDragStart:o,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-terminal text-xs truncate",children:a.name}),e.jsx("span",{className:`text-[9px] font-arcade px-1 py-0.5 rounded-none ${s}`,children:a.category.toUpperCase()})]})}):e.jsxs("div",{className:`border-2 ${l} p-3 rounded-none cursor-pointer hover:opacity-80 transition-opacity`,onClick:d,draggable:i,onDragStart:o,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-arcade text-xs",children:a.name}),e.jsx("span",{className:`text-[9px] font-arcade px-1.5 py-0.5 rounded-none ${s}`,children:a.category.toUpperCase()})]}),a.description&&e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground font-terminal",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),a.default_duration_min,"m"]}),e.jsxs("span",{className:`flex items-center gap-1 ${m}`,children:[e.jsx(ge,{className:"w-3 h-3"}),a.energy_cost]}),a.best_stage&&e.jsx("span",{className:"text-primary/60",children:a.best_stage.replace("_"," ")})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.tags.slice(0,4).map(h=>e.jsx("span",{className:"text-[9px] font-terminal bg-secondary/30 px-1 py-0.5 text-muted-foreground",children:h},h))})]})}function je({chain:a,allBlocks:u,onSave:d,readOnly:i}){const[o,l]=c.useState(a.block_ids||[]),[s,m]=c.useState(!1),h=new Map(u.map(n=>[n.id,n])),f=o.map(n=>h.get(n)).filter(Boolean),p=n=>{const r=[...o];r.splice(n,1),l(r),d(r)},j=n=>{const r=[...o,n];l(r),d(r),m(!1)},g=n=>{if(n===0)return;const r=[...o];[r[n-1],r[n]]=[r[n],r[n-1]],l(r),d(r)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-arcade text-xs text-primary",children:"CHAIN BLOCKS"}),e.jsxs("span",{className:"text-[10px] font-terminal text-muted-foreground",children:["(",f.length," blocks)"]})]}),f.length===0&&e.jsx("div",{className:"border-2 border-dashed border-secondary p-4 text-center",children:e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No blocks in this chain yet"})}),e.jsx("div",{className:"space-y-2",children:f.map((n,r)=>e.jsxs("div",{className:"flex items-center gap-2",children:[!i&&e.jsx("button",{className:"text-muted-foreground hover:text-primary cursor-grab",onClick:()=>g(r),title:"Move up",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx(D,{block:n,compact:!0})}),r<f.length-1&&e.jsx(de,{className:"w-3 h-3 text-primary/40 shrink-0"}),!i&&e.jsx("button",{className:"text-muted-foreground hover:text-red-400",onClick:()=>p(r),children:e.jsx(B,{className:"w-3 h-3"})})]},`${n.id}-${r}`))}),!i&&e.jsx("div",{children:s?e.jsxs("div",{className:"border-2 border-primary/30 bg-black/50 p-3 space-y-2 max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-arcade text-[10px] text-primary",children:"ADD BLOCK"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(B,{className:"w-3 h-3 text-muted-foreground"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:u.map(n=>e.jsx(D,{block:n,compact:!0,onClick:()=>j(n.id)},n.id))})]}):e.jsxs(C,{variant:"outline",size:"sm",className:"w-full rounded-none border-2 border-dashed border-secondary font-arcade text-xs",onClick:()=>m(!0),children:[e.jsx(I,{className:"w-3 h-3 mr-1"})," ADD BLOCK"]})})]})}const Ne={activate:"bg-yellow-500",map:"bg-blue-500",encode:"bg-purple-500",retrieve:"bg-red-500",connect:"bg-green-500",consolidate:"bg-gray-500"};function ve({data:a}){const{block_stats:u,chain_stats:d,recent_ratings:i}=a,o=u.filter(s=>s.usage_count>0),l=d.filter(s=>s.usage_count>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-secondary bg-black/40 p-4 rounded-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-arcade text-xs text-primary",children:"BLOCK EFFECTIVENESS"})]}),o.length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No ratings yet. Rate methods after study sessions to see analytics."}):e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-terminal text-xs w-32 truncate",children:s.name}),e.jsx("div",{className:"flex-1 h-4 bg-secondary/20 rounded-none overflow-hidden",children:e.jsx("div",{className:`h-full ${Ne[s.category]||"bg-primary"}`,style:{width:`${(s.avg_effectiveness??0)/5*100}%`}})}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground w-8 text-right",children:s.avg_effectiveness??"—"}),e.jsxs("span",{className:"font-terminal text-[10px] text-muted-foreground w-6 text-right",children:["(",s.usage_count,")"]})]},s.id))})]}),e.jsxs("div",{className:"border-2 border-secondary bg-black/40 p-4 rounded-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ce,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-arcade text-xs text-primary",children:"CHAIN COMPARISON"})]}),l.length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No chain ratings yet."}):e.jsx("div",{className:"space-y-2",children:l.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-terminal text-xs w-40 truncate",children:s.name}),e.jsx("div",{className:"flex-1 h-4 bg-secondary/20 rounded-none overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${(s.avg_effectiveness??0)/5*100}%`}})}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground w-8 text-right",children:s.avg_effectiveness??"—"})]},s.id))})]}),e.jsxs("div",{className:"border-2 border-secondary bg-black/40 p-4 rounded-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(k,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-arcade text-xs text-primary",children:"RECENT RATINGS"})]}),i.length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No ratings recorded yet."}):e.jsx("div",{className:"space-y-2",children:i.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between border border-secondary/50 p-2 rounded-none",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-terminal text-xs",children:s.method_name||s.chain_name||"Unknown"}),s.notes&&e.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground mt-0.5 truncate max-w-[200px]",children:s.notes})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-terminal",children:[e.jsxs("span",{children:["E:",s.effectiveness,"/5"]}),e.jsxs("span",{children:["G:",s.engagement,"/5"]})]})]},s.id))})]})]})}function z({value:a,onChange:u,label:d}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"font-arcade text-[10px] text-muted-foreground",children:d}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>u(i),className:"p-0.5 hover:scale-110 transition-transform",children:e.jsx(k,{className:`w-5 h-5 ${i<=a?"text-primary fill-primary":"text-secondary"}`})},i))})]})}function Ce({open:a,onClose:u,onSubmit:d,targetName:i,targetType:o}){const[l,s]=c.useState(0),[m,h]=c.useState(0),[f,p]=c.useState(""),j=()=>{l===0||m===0||(d({effectiveness:l,engagement:m,notes:f}),s(0),h(0),p(""),u())};return e.jsx(O,{open:a,onOpenChange:g=>!g&&u(),children:e.jsxs(K,{className:"bg-black border-2 border-primary rounded-none max-w-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(q,{className:"font-arcade text-xs text-primary",children:["RATE ",o.toUpperCase()]}),e.jsx("button",{onClick:u,children:e.jsx(B,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"font-terminal text-sm",children:i}),e.jsx(z,{value:l,onChange:s,label:"EFFECTIVENESS (did it help you learn?)"}),e.jsx(z,{value:m,onChange:h,label:"ENGAGEMENT (did it hold your focus?)"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-arcade text-[10px] text-muted-foreground",children:"NOTES (optional)"}),e.jsx(F,{value:f,onChange:g=>p(g.target.value),placeholder:"What worked? What didn't?",className:"h-16 bg-secondary/20 border-2 border-secondary font-terminal text-sm rounded-none resize-none mt-1"})]}),e.jsx(C,{className:"w-full font-arcade rounded-none text-xs",onClick:j,disabled:l===0||m===0,children:"SUBMIT RATING"})]})]})})}const we=["all","activate","map","encode","retrieve","connect","consolidate"],Se=[{id:"library",label:"LIBRARY",icon:oe},{id:"chains",label:"CHAINS",icon:ue},{id:"analytics",label:"ANALYTICS",icon:H}];function Ie(){const[a,u]=c.useState("library"),[d,i]=c.useState("all"),[o,l]=c.useState(""),[s,m]=c.useState(!1),[h,f]=c.useState(!1),[p,j]=c.useState(null),[g,n]=c.useState(null),{toast:r}=ae(),y=ne(),{data:x=[],isLoading:$}=E({queryKey:["methods"],queryFn:()=>b.methods.getAll()}),{data:_=[],isLoading:U}=E({queryKey:["chains"],queryFn:()=>b.chains.getAll()}),{data:Q,isLoading:P}=E({queryKey:["methods-analytics"],queryFn:()=>b.methods.analytics(),enabled:a==="analytics"}),V=v({mutationFn:b.methods.create,onSuccess:()=>{y.invalidateQueries({queryKey:["methods"]}),y.invalidateQueries({queryKey:["methods-analytics"]}),m(!1),r({title:"Method block created"})}}),Y=v({mutationFn:b.methods.delete,onSuccess:()=>{y.invalidateQueries({queryKey:["methods"]}),y.invalidateQueries({queryKey:["methods-analytics"]}),r({title:"Method block deleted"})}}),W=v({mutationFn:b.chains.create,onSuccess:()=>{y.invalidateQueries({queryKey:["chains"]}),y.invalidateQueries({queryKey:["methods-analytics"]}),f(!1),r({title:"Chain created"})}}),X=v({mutationFn:({id:t,data:N})=>b.chains.update(t,N),onSuccess:()=>{y.invalidateQueries({queryKey:["chains"]}),r({title:"Chain updated"})}}),Z=v({mutationFn:b.chains.delete,onSuccess:()=>{y.invalidateQueries({queryKey:["chains"]}),y.invalidateQueries({queryKey:["methods-analytics"]}),j(null),r({title:"Chain deleted"})}}),J=v({mutationFn:({id:t,data:N})=>b.methods.rate(t,N),onSuccess:()=>{y.invalidateQueries({queryKey:["methods-analytics"]}),r({title:"Rating submitted"})}}),ee=v({mutationFn:({id:t,data:N})=>b.chains.rate(t,N),onSuccess:()=>{y.invalidateQueries({queryKey:["methods-analytics"]}),r({title:"Rating submitted"})}}),G=x.filter(t=>!(d!=="all"&&t.category!==d||o&&!t.name.toLowerCase().includes(o.toLowerCase()))),te=async t=>{const N=await b.chains.getOne(t.id);j(N)},se=t=>{g&&(g.type==="method"?J.mutate({id:g.id,data:t}):ee.mutate({id:g.id,data:t}))};return e.jsx(ie,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"font-arcade text-lg text-primary",children:"METHOD_LIBRARY"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Composable study methods — build, chain, rate, optimize"})]})}),e.jsx("div",{className:"flex gap-1 border-b-2 border-secondary pb-0",children:Se.map(t=>e.jsxs("button",{onClick:()=>u(t.id),className:`flex items-center gap-1.5 px-3 py-2 font-arcade text-[10px] border-b-2 -mb-[2px] transition-colors ${a===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-primary/60"}`,children:[e.jsx(t.icon,{className:"w-3 h-3"}),t.label]},t.id))}),a==="library"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(S,{placeholder:"Search methods...",value:o,onChange:t=>l(t.target.value),className:"w-48 h-8 rounded-none border-2 border-secondary bg-black/40 font-terminal text-xs"}),e.jsx("div",{className:"flex gap-1",children:we.map(t=>e.jsx("button",{onClick:()=>i(t),className:`px-2 py-1 font-arcade text-[9px] border rounded-none transition-colors ${d===t?"border-primary bg-primary/20 text-primary":"border-secondary text-muted-foreground hover:border-primary/40"}`,children:t.toUpperCase()},t))}),e.jsxs(C,{variant:"outline",size:"sm",className:"ml-auto rounded-none border-2 font-arcade text-[10px] h-8",onClick:()=>m(!0),children:[e.jsx(I,{className:"w-3 h-3 mr-1"})," ADD BLOCK"]})]}),$?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Loading methods..."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:G.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx(D,{block:t}),e.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[e.jsx("button",{className:"p-1 bg-black/80 border border-primary/40 hover:border-primary",onClick:()=>n({id:t.id,name:t.name,type:"method"}),title:"Rate",children:e.jsx(k,{className:"w-3 h-3 text-primary"})}),e.jsx("button",{className:"p-1 bg-black/80 border border-red-500/40 hover:border-red-500 text-red-400",onClick:()=>{confirm(`Delete "${t.name}"?`)&&Y.mutate(t.id)},title:"Delete",children:e.jsx("span",{className:"text-[10px]",children:"×"})})]})]},t.id))}),!$&&G.length===0&&e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground text-center py-8",children:["No methods found. ",d!=="all"?"Try a different category.":"Add your first method block."]})]}),a==="chains"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-arcade text-xs text-muted-foreground",children:[_.length," CHAINS (",_.filter(t=>t.is_template).length," templates)"]}),e.jsxs(C,{variant:"outline",size:"sm",className:"rounded-none border-2 font-arcade text-[10px] h-8",onClick:()=>f(!0),children:[e.jsx(I,{className:"w-3 h-3 mr-1"})," NEW CHAIN"]})]}),U?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Loading chains..."}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx("div",{className:"space-y-2",children:_.map(t=>e.jsxs("div",{onClick:()=>te(t),className:`border-2 p-3 rounded-none cursor-pointer transition-colors ${p?.id===t.id?"border-primary bg-primary/10":"border-secondary hover:border-primary/40"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-arcade text-xs",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.is_template?e.jsx("span",{className:"text-[9px] font-arcade bg-primary/20 text-primary px-1.5 py-0.5",children:"TEMPLATE"}):null,e.jsx("button",{className:"p-0.5 hover:text-primary",onClick:N=>{N.stopPropagation(),n({id:t.id,name:t.name,type:"chain"})},children:e.jsx(k,{className:"w-3 h-3"})})]})]}),t.description&&e.jsx("p",{className:"font-terminal text-xs text-muted-foreground line-clamp-1",children:t.description}),e.jsx("div",{className:"flex gap-1 mt-1.5",children:(t.block_ids||[]).length>0&&e.jsxs("span",{className:"text-[9px] font-terminal text-muted-foreground",children:[(t.block_ids||[]).length," blocks"]})})]},t.id))}),e.jsx("div",{className:"border-2 border-secondary bg-black/40 p-4 rounded-none",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-arcade text-sm text-primary",children:p.name}),!p.is_template&&e.jsx(C,{variant:"ghost",size:"sm",className:"text-red-400 rounded-none text-[10px] font-arcade h-6",onClick:()=>{confirm(`Delete chain "${p.name}"?`)&&Z.mutate(p.id)},children:"DELETE"})]}),p.description&&e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:p.description}),e.jsx(je,{chain:p,allBlocks:x,readOnly:!!p.is_template,onSave:t=>{X.mutate({id:p.id,data:{block_ids:t}})}})]}):e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Select a chain to view or edit"})})})]})]}),a==="analytics"&&e.jsx("div",{children:P?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Loading analytics..."}):Q?e.jsx(ve,{data:Q}):e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Failed to load analytics."})}),e.jsx(ke,{open:s,onClose:()=>m(!1),onSubmit:t=>V.mutate(t)}),e.jsx(Ae,{open:h,onClose:()=>f(!1),onSubmit:t=>W.mutate(t)}),g&&e.jsx(Ce,{open:!!g,onClose:()=>n(null),onSubmit:se,targetName:g.name,targetType:g.type})]})})}function ke({open:a,onClose:u,onSubmit:d}){const[i,o]=c.useState(""),[l,s]=c.useState("activate"),[m,h]=c.useState(""),[f,p]=c.useState(5),[j,g]=c.useState("medium"),[n,r]=c.useState(""),y=()=>{i.trim()&&(d({name:i.trim(),category:l,description:m.trim()||null,default_duration_min:f,energy_cost:j,best_stage:n||null,tags:[]}),o(""),h(""))};return e.jsx(O,{open:a,onOpenChange:x=>!x&&u(),children:e.jsxs(K,{className:"bg-black border-2 border-primary rounded-none max-w-md",children:[e.jsx(q,{className:"font-arcade text-xs text-primary",children:"NEW METHOD BLOCK"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsx(S,{placeholder:"Method name",value:i,onChange:x=>o(x.target.value),className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm"}),e.jsxs(T,{value:l,onValueChange:s,children:[e.jsx(M,{className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm",children:e.jsx(R,{})}),e.jsx(L,{className:"bg-black border-2 border-primary rounded-none",children:["activate","map","encode","retrieve","connect","consolidate"].map(x=>e.jsx(w,{value:x,className:"font-terminal text-sm",children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),e.jsx(F,{placeholder:"Description (optional)",value:m,onChange:x=>h(x.target.value),className:"h-16 rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm resize-none"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-arcade text-[9px] text-muted-foreground",children:"DURATION"}),e.jsx(S,{type:"number",value:f,onChange:x=>p(Number(x.target.value)),className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-arcade text-[9px] text-muted-foreground",children:"ENERGY"}),e.jsxs(T,{value:j,onValueChange:g,children:[e.jsx(M,{className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-xs",children:e.jsx(R,{})}),e.jsx(L,{className:"bg-black border-2 border-primary rounded-none",children:["low","medium","high"].map(x=>e.jsx(w,{value:x,className:"font-terminal text-sm",children:x},x))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-arcade text-[9px] text-muted-foreground",children:"BEST STAGE"}),e.jsxs(T,{value:n,onValueChange:r,children:[e.jsx(M,{className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-xs",children:e.jsx(R,{placeholder:"Any"})}),e.jsxs(L,{className:"bg-black border-2 border-primary rounded-none",children:[e.jsx(w,{value:"first_exposure",className:"font-terminal text-sm",children:"First Exposure"}),e.jsx(w,{value:"review",className:"font-terminal text-sm",children:"Review"}),e.jsx(w,{value:"exam_prep",className:"font-terminal text-sm",children:"Exam Prep"}),e.jsx(w,{value:"consolidation",className:"font-terminal text-sm",children:"Consolidation"})]})]})]})]}),e.jsx(C,{className:"w-full font-arcade rounded-none text-xs",onClick:y,disabled:!i.trim(),children:"CREATE BLOCK"})]})]})})}function Ae({open:a,onClose:u,onSubmit:d}){const[i,o]=c.useState(""),[l,s]=c.useState(""),m=()=>{i.trim()&&(d({name:i.trim(),description:l.trim()||null,block_ids:[],context_tags:{},is_template:0}),o(""),s(""))};return e.jsx(O,{open:a,onOpenChange:h=>!h&&u(),children:e.jsxs(K,{className:"bg-black border-2 border-primary rounded-none max-w-md",children:[e.jsx(q,{className:"font-arcade text-xs text-primary",children:"NEW CHAIN"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsx(S,{placeholder:"Chain name",value:i,onChange:h=>o(h.target.value),className:"rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm"}),e.jsx(F,{placeholder:"Description (optional)",value:l,onChange:h=>s(h.target.value),className:"h-16 rounded-none border-2 border-secondary bg-black/40 font-terminal text-sm resize-none"}),e.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground",children:"Add blocks to the chain after creating it."}),e.jsx(C,{className:"w-full font-arcade rounded-none text-xs",onClick:m,disabled:!i.trim(),children:"CREATE CHAIN"})]})]})})}export{Ie as default};
