import{c as q,r as c,R as xe,d as fe,f as he,j as e,P as $,g as qe,m as $e,k as Ke,b as k,u as Ve}from"./index-YP2cgbTz.js";import{h as pe,i as be,u as _,a as Ge,L as Be,k as te,B as re,f as ae,S as L,n as ne,g as A}from"./layout-8Z_bp1KC.js";import{C as j,a as y,b as E,c as w}from"./card-DuwihTJ3.js";import{e as He,B as R,S as ze,a as Ye,b as Qe,c as We,d as Y}from"./select-GF0O1_lA.js";import{R as oe}from"./refresh-cw-CkWNDBe5.js";import{a as ce,S as Je}from"./send-tbK1lT4E.js";import{B as ie,C as Xe}from"./circle-check-3D_IetYa.js";import{C as G}from"./circle-alert-CK81E-ck.js";import{F as Ze}from"./file-text-D2t-ndiv.js";import{C as es}from"./clock-iaV-9J7d.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],le=q("circle-question-mark",ss);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rs=q("circle-x",ts);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],de=q("history",as);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ue=q("lightbulb",ns);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cs=q("message-square",os);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],me=q("trending-up",is);function X(t,a,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return a?.(i)}}function U(t,a,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return a?.(i)}}var ls=xe[" useInsertionEffect ".trim().toString()]||fe;function ds({prop:t,defaultProp:a,onChange:r=()=>{},caller:o}){const[i,d,m]=us({defaultProp:a,onChange:r}),u=t!==void 0,g=u?t:i;{const n=c.useRef(t!==void 0);c.useEffect(()=>{const l=n.current;l!==u&&console.warn(`${o} is changing from ${l?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),n.current=u},[u,o])}const f=c.useCallback(n=>{if(u){const l=ms(n)?n(t):n;l!==t&&m.current?.(l)}else d(n)},[u,t,d,m]);return[g,f]}function us({defaultProp:t,onChange:a}){const[r,o]=c.useState(t),i=c.useRef(r),d=c.useRef(a);return ls(()=>{d.current=a},[a]),c.useEffect(()=>{i.current!==r&&(d.current?.(r),i.current=r)},[r,i]),[r,o,d]}function ms(t){return typeof t=="function"}var Z="rovingFocusGroup.onEntryFocus",xs={bubbles:!1,cancelable:!0},B="RovingFocusGroup",[ee,ge,fs]=He(B),[hs,Ne]=he(B,[fs]),[ps,bs]=hs(B),ve=c.forwardRef((t,a)=>e.jsx(ee.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ee.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(gs,{...t,ref:a})})}));ve.displayName=B;var gs=c.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:i=!1,dir:d,currentTabStopId:m,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:g,onEntryFocus:f,preventScrollOnEntryFocus:n=!1,...l}=t,h=c.useRef(null),I=qe(a,h),O=be(d),[P,p]=ds({prop:m,defaultProp:u??null,onChange:g,caller:B}),[S,K]=c.useState(!1),v=$e(f),T=ge(r),C=c.useRef(!1),[D,M]=c.useState(0);return c.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Z,v),()=>N.removeEventListener(Z,v)},[v]),e.jsx(ps,{scope:r,orientation:o,dir:O,loop:i,currentTabStopId:P,onItemFocus:c.useCallback(N=>p(N),[p]),onItemShiftTab:c.useCallback(()=>K(!0),[]),onFocusableItemAdd:c.useCallback(()=>M(N=>N+1),[]),onFocusableItemRemove:c.useCallback(()=>M(N=>N-1),[]),children:e.jsx($.div,{tabIndex:S||D===0?-1:0,"data-orientation":o,...l,ref:I,style:{outline:"none",...t.style},onMouseDown:U(t.onMouseDown,()=>{C.current=!0}),onFocus:U(t.onFocus,N=>{const W=!C.current;if(N.target===N.currentTarget&&W&&!S){const H=new CustomEvent(Z,xs);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const V=T().filter(b=>b.focusable),z=V.find(b=>b.active),J=V.find(b=>b.id===P),x=[z,J,...V].filter(Boolean).map(b=>b.ref.current);Ee(x,n)}}C.current=!1}),onBlur:U(t.onBlur,()=>K(!1))})})}),je="RovingFocusGroupItem",ye=c.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:i=!1,tabStopId:d,children:m,...u}=t,g=pe(),f=d||g,n=bs(je,r),l=n.currentTabStopId===f,h=ge(r),{onFocusableItemAdd:I,onFocusableItemRemove:O,currentTabStopId:P}=n;return c.useEffect(()=>{if(o)return I(),()=>O()},[o,I,O]),e.jsx(ee.ItemSlot,{scope:r,id:f,focusable:o,active:i,children:e.jsx($.span,{tabIndex:l?0:-1,"data-orientation":n.orientation,...u,ref:a,onMouseDown:U(t.onMouseDown,p=>{o?n.onItemFocus(f):p.preventDefault()}),onFocus:U(t.onFocus,()=>n.onItemFocus(f)),onKeyDown:U(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){n.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const S=js(p,n.orientation,n.dir);if(S!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=h().filter(T=>T.focusable).map(T=>T.ref.current);if(S==="last")v.reverse();else if(S==="prev"||S==="next"){S==="prev"&&v.reverse();const T=v.indexOf(p.currentTarget);v=n.loop?ys(v,T+1):v.slice(T+1)}setTimeout(()=>Ee(v))}}),children:typeof m=="function"?m({isCurrentTabStop:l,hasTabStop:P!=null}):m})})});ye.displayName=je;var Ns={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vs(t,a){return a!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function js(t,a,r){const o=vs(t.key,r);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ns[o]}function Ee(t,a=!1){const r=document.activeElement;for(const o of t)if(o===r||(o.focus({preventScroll:a}),document.activeElement!==r))return}function ys(t,a){return t.map((r,o)=>t[(a+o)%t.length])}var Es=ve,ws=ye,Rs=xe[" useInsertionEffect ".trim().toString()]||fe;function Ss({prop:t,defaultProp:a,onChange:r=()=>{},caller:o}){const[i,d,m]=Ts({defaultProp:a,onChange:r}),u=t!==void 0,g=u?t:i;{const n=c.useRef(t!==void 0);c.useEffect(()=>{const l=n.current;l!==u&&console.warn(`${o} is changing from ${l?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),n.current=u},[u,o])}const f=c.useCallback(n=>{if(u){const l=Is(n)?n(t):n;l!==t&&m.current?.(l)}else d(n)},[u,t,d,m]);return[g,f]}function Ts({defaultProp:t,onChange:a}){const[r,o]=c.useState(t),i=c.useRef(r),d=c.useRef(a);return Rs(()=>{d.current=a},[a]),c.useEffect(()=>{i.current!==r&&(d.current?.(r),i.current=r)},[r,i]),[r,o,d]}function Is(t){return typeof t=="function"}var Q="Tabs",[Cs]=he(Q,[Ne]),we=Ne(),[As,se]=Cs(Q),Re=c.forwardRef((t,a)=>{const{__scopeTabs:r,value:o,onValueChange:i,defaultValue:d,orientation:m="horizontal",dir:u,activationMode:g="automatic",...f}=t,n=be(u),[l,h]=Ss({prop:o,onChange:i,defaultProp:d??"",caller:Q});return e.jsx(As,{scope:r,baseId:pe(),value:l,onValueChange:h,orientation:m,dir:n,activationMode:g,children:e.jsx($.div,{dir:n,"data-orientation":m,...f,ref:a})})});Re.displayName=Q;var Se="TabsList",Te=c.forwardRef((t,a)=>{const{__scopeTabs:r,loop:o=!0,...i}=t,d=se(Se,r),m=we(r);return e.jsx(Es,{asChild:!0,...m,orientation:d.orientation,dir:d.dir,loop:o,children:e.jsx($.div,{role:"tablist","aria-orientation":d.orientation,...i,ref:a})})});Te.displayName=Se;var Ie="TabsTrigger",Ce=c.forwardRef((t,a)=>{const{__scopeTabs:r,value:o,disabled:i=!1,...d}=t,m=se(Ie,r),u=we(r),g=De(m.baseId,o),f=Fe(m.baseId,o),n=o===m.value;return e.jsx(ws,{asChild:!0,...u,focusable:!i,active:n,children:e.jsx($.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":f,"data-state":n?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:g,...d,ref:a,onMouseDown:X(t.onMouseDown,l=>{!i&&l.button===0&&l.ctrlKey===!1?m.onValueChange(o):l.preventDefault()}),onKeyDown:X(t.onKeyDown,l=>{[" ","Enter"].includes(l.key)&&m.onValueChange(o)}),onFocus:X(t.onFocus,()=>{const l=m.activationMode!=="manual";!n&&!i&&l&&m.onValueChange(o)})})})});Ce.displayName=Ie;var Ae="TabsContent",ke=c.forwardRef((t,a)=>{const{__scopeTabs:r,value:o,forceMount:i,children:d,...m}=t,u=se(Ae,r),g=De(u.baseId,o),f=Fe(u.baseId,o),n=o===u.value,l=c.useRef(n);return c.useEffect(()=>{const h=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Ke,{present:i||n,children:({present:h})=>e.jsx($.div,{"data-state":n?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":g,hidden:!h,id:f,tabIndex:0,...m,ref:a,style:{...t.style,animationDuration:l.current?"0s":void 0},children:h&&d})})});ke.displayName=Ae;function De(t,a){return`${t}-trigger-${a}`}function Fe(t,a){return`${t}-content-${a}`}var ks=Re,Oe=Te,Pe=Ce,Me=ke;const Ds=ks,_e=c.forwardRef(({className:t,...a},r)=>e.jsx(Oe,{ref:r,className:k("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...a}));_e.displayName=Oe.displayName;const Le=c.forwardRef(({className:t,...a},r)=>e.jsx(Pe,{ref:r,className:k("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...a}));Le.displayName=Pe.displayName;const F=c.forwardRef(({className:t,...a},r)=>e.jsx(Me,{ref:r,className:k("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a}));F.displayName=Me.displayName;function Vs(){const t=Ve(),[a,r]=c.useState("summary"),[o,i]=c.useState([]),[d,m]=c.useState(""),[u,g]=c.useState(!1),f=c.useRef(null),{data:n=[]}=_({queryKey:["sessions"],queryFn:A.sessions.getAll}),{data:l=[]}=_({queryKey:["courses"],queryFn:A.courses.getAll}),{data:h=[]}=_({queryKey:["proposals"],queryFn:A.proposals.getAll}),{data:I=[]}=_({queryKey:["scholar-questions"],queryFn:A.scholar.getQuestions}),{data:O=[]}=_({queryKey:["scholar-findings"],queryFn:A.scholar.getFindings}),{data:P=[]}=_({queryKey:["scholar-tutor-audit"],queryFn:A.scholar.getTutorAudit}),p=Ge({mutationFn:({id:s,data:x})=>A.proposals.update(s,x),onSuccess:()=>{t.invalidateQueries({queryKey:["proposals"]})}});c.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[o]);const S=n.slice(0,20),K=n.reduce((s,x)=>s+(x.minutes||0),0),v=n.length>0?Math.round(K/n.length):0,T=n.filter(s=>{const x=new Date(s.date),b=new Date;return b.setDate(b.getDate()-7),x>=b}).length,C=l.filter(s=>(s.totalSessions||0)<3),D=n.filter(s=>s.confusions&&s.confusions.length>0).flatMap(s=>s.confusions||[]),M=n.filter(s=>s.issues&&s.issues.length>0).flatMap(s=>s.issues||[]),N=async()=>{if(!d.trim())return;const s=d.trim();i(x=>[...x,{role:"user",content:s}]),m(""),g(!0);try{const x=await A.scholar.chat(s);i(b=>[...b,{role:"assistant",content:x.response}])}catch{i(b=>[...b,{role:"assistant",content:"Error processing your question. Please try again."}])}finally{g(!1)}},W=I,H=P,V=O,z=s=>{switch(s){case"APPROVED":return"bg-primary/20 text-primary border-primary";case"REJECTED":return"bg-secondary/40 text-muted-foreground border-secondary";case"IMPLEMENTED":return"bg-white/20 text-white border-white";default:return"bg-secondary/20 text-secondary-foreground border-secondary"}},J=s=>{switch(s){case"HIGH":return"text-primary border-primary";case"MED":return"text-white border-white";default:return"text-muted-foreground border-muted-foreground"}};return e.jsx(Be,{children:e.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-6 h-6 text-primary"}),e.jsx("h1",{className:"font-arcade text-lg text-primary",children:"SCHOLAR"}),e.jsx(R,{variant:"outline",className:"rounded-none text-[10px] font-terminal border-primary/50",children:"READ ONLY ADVISORY"})]}),e.jsxs(re,{variant:"outline",size:"sm",className:"rounded-none font-arcade text-xs border-secondary",onClick:()=>t.invalidateQueries(),"data-testid":"button-refresh-data",children:[e.jsx(oe,{className:"w-3 h-3 mr-2"})," REFRESH DATA"]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(Ds,{value:a,onValueChange:r,className:"h-full flex flex-col",children:[e.jsx(_e,{className:"bg-black/60 border border-secondary rounded-none p-1 shrink-0 w-full justify-start overflow-x-auto",children:[{id:"summary",label:"SUMMARY",icon:me},{id:"audit",label:"TUTOR AUDIT",icon:ce},{id:"pipeline",label:"QUESTIONS",icon:le},{id:"evidence",label:"EVIDENCE",icon:ie},{id:"proposals",label:"PROPOSALS",icon:ue},{id:"history",label:"HISTORY",icon:de}].map(s=>e.jsxs(Le,{value:s.id,className:"rounded-none font-arcade text-[10px] data-[state=active]:bg-primary data-[state=active]:text-black px-3","data-testid":`tab-${s.id}`,children:[e.jsx(s.icon,{className:"w-3 h-3 mr-1"}),s.label]},s.id))}),e.jsx(F,{value:"summary",className:"flex-1 overflow-hidden mt-4",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 h-full",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 overflow-auto pr-2",children:[e.jsxs(j,{className:"bg-black/40 border-2 border-primary/50 rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-primary/30",children:e.jsxs(E,{className:"font-arcade text-xs text-primary flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"})," STUDY HEALTH OVERVIEW"]})}),e.jsx(w,{className:"p-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-2xl text-primary",children:n.length}),e.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground",children:"TOTAL SESSIONS"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-2xl text-white",children:T}),e.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground",children:"THIS WEEK"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-arcade text-2xl text-secondary",children:[v,"m"]}),e.jsx("div",{className:"font-terminal text-[10px] text-muted-foreground",children:"AVG/SESSION"})]})]})})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-white/30 rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-white/20",children:e.jsxs(E,{className:"font-arcade text-xs text-white flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"})," WHAT APPEARS TO BE WORKING"]})}),e.jsxs(w,{className:"p-4",children:[e.jsx("ul",{className:"space-y-2 font-terminal text-sm",children:l.filter(s=>(s.totalSessions||0)>=3).length>0?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-primary shrink-0 mt-0.5"}),e.jsxs("span",{children:[l.filter(s=>(s.totalSessions||0)>=3).length," courses have consistent study activity"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-primary shrink-0 mt-0.5"}),e.jsx("span",{children:"Round-robin rotation ensuring balanced coverage"})]})]}):e.jsx("li",{className:"text-muted-foreground",children:"Insufficient data - need more sessions to identify patterns"})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-secondary/30",children:e.jsxs(R,{variant:"outline",className:"rounded-none text-[9px] border-secondary",children:["CONFIDENCE: ",n.length>10?"MEDIUM":"LOW"," (based on ",n.length," sessions)"]})})]})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-destructive/50 rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-destructive/30",children:e.jsxs(E,{className:"font-arcade text-xs text-destructive flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"})," POTENTIAL CONCERNS"]})}),e.jsx(w,{className:"p-4",children:e.jsxs("ul",{className:"space-y-2 font-terminal text-sm",children:[C.length>0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-destructive shrink-0 mt-0.5"}),e.jsxs("span",{children:[C.length," courses with low activity: ",C.map(s=>s.name).join(", ")]})]}),D.length>0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-destructive shrink-0 mt-0.5"}),e.jsxs("span",{children:[D.length," unresolved confusions logged"]})]}),M.length>0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-destructive shrink-0 mt-0.5"}),e.jsxs("span",{children:[M.length," session issues flagged"]})]}),C.length===0&&D.length===0&&M.length===0&&e.jsx("li",{className:"text-muted-foreground",children:"No significant concerns identified"})]})})]})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none flex flex-col h-full",children:[e.jsx(y,{className:"p-3 border-b border-secondary shrink-0",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"})," ASK SCHOLAR"]})}),e.jsxs(w,{className:"p-0 flex-1 flex flex-col overflow-hidden",children:[e.jsx(L,{className:"flex-1 p-3",children:e.jsxs("div",{className:"space-y-3",children:[o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(te,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Ask questions about your study data, patterns, or get recommendations."})]}),o.map((s,x)=>e.jsx("div",{className:k("p-2 rounded-sm font-terminal text-xs",s.role==="user"?"bg-primary/20 text-primary ml-8":"bg-secondary/20 text-white mr-8"),children:s.content},x)),u&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground font-terminal text-xs",children:[e.jsx(oe,{className:"w-3 h-3 animate-spin"}),"Analyzing Brain data..."]}),e.jsx("div",{ref:f})]})}),e.jsx("div",{className:"p-2 border-t border-secondary shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:d,onChange:s=>m(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),N())},placeholder:"Ask about your study patterns...",className:"rounded-none bg-black border-secondary text-xs min-h-[60px] resize-none","data-testid":"input-scholar-chat"}),e.jsx(re,{size:"icon",className:"rounded-none bg-primary text-black h-[60px] w-10",onClick:N,disabled:u,"data-testid":"button-send-chat",children:e.jsx(Je,{className:"w-4 h-4"})})]})})]})]})]})}),e.jsx(F,{value:"audit",className:"flex-1 overflow-auto mt-4",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"})," TUTOR BEHAVIOR AUDIT"]})}),e.jsxs(w,{className:"p-4 space-y-4",children:[e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mb-4",children:"Post-session analysis of Tutor interactions. No live Tutor access."}),[{q:"Was the Tutor source-aligned?",status:"pending"},{q:"Was cognitive load appropriate?",status:"concern"},{q:"Were confusions resolved or deferred?",status:"ok"},{q:"Did explanations correlate with outcomes?",status:"pending"}].map((s,x)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/40 border border-secondary/50",children:[e.jsx("span",{className:"font-terminal text-xs",children:s.q}),e.jsx(R,{variant:"outline",className:k("rounded-none text-[9px]",s.status==="ok"?"border-primary text-primary":s.status==="concern"?"border-destructive text-destructive":"border-secondary text-secondary-foreground"),children:s.status.toUpperCase()})]},x))]})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"})," RECURRENT ISSUES"]})}),e.jsx(w,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:H.map((s,x)=>e.jsxs("div",{className:"p-3 bg-black/40 border border-secondary/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-terminal text-sm",children:s.issue??"Unknown issue"}),e.jsxs(R,{variant:"outline",className:"rounded-none text-[9px] border-primary text-primary",children:["x",s.frequency??0]})]}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:(s.courses||[]).map((b,Ue)=>e.jsx(R,{variant:"secondary",className:"rounded-none text-[8px]",children:b},Ue))})]},x))})})]})]})}),e.jsx(F,{value:"pipeline",className:"flex-1 overflow-auto mt-4",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"})," QUESTION RESOLUTION PIPELINE"]})}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"space-y-2 font-terminal text-xs text-muted-foreground mb-4",children:[e.jsx("p",{children:"1. Generate question from identified issue"}),e.jsx("p",{children:"2. Attempt answer using Brain data"}),e.jsx("p",{children:"3. If insufficient, research learning science"}),e.jsx("p",{children:"4. If still unresolved, escalate to user"})]}),e.jsx("div",{className:"space-y-3",children:[{stage:"Identified",count:5},{stage:"Brain Analysis",count:3},{stage:"Research",count:1},{stage:"User Escalation",count:2}].map((s,x)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary/60"}),e.jsx("span",{className:"font-terminal text-sm flex-1",children:s.stage}),e.jsx(R,{variant:"outline",className:"rounded-none",children:s.count})]},x))})]})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-primary/50 rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-primary/30",children:e.jsxs(E,{className:"font-arcade text-xs text-primary flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"})," OPEN QUESTIONS (YOUR INPUT NEEDED)"]})}),e.jsx(w,{className:"p-4",children:e.jsx(L,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-4",children:W.map(s=>e.jsxs("div",{className:"p-3 bg-primary/5 border border-primary/30",children:[e.jsx("p",{className:"font-terminal text-sm mb-3",children:s.question}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground shrink-0",children:"Context:"}),e.jsx("span",{children:s.context})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground shrink-0",children:"Data Gap:"}),e.jsx("span",{children:s.dataInsufficient})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground shrink-0",children:"Research:"}),e.jsx("span",{children:s.researchAttempted})]})]}),e.jsx("div",{className:"mt-3 pt-2 border-t border-primary/20",children:e.jsx(ne,{placeholder:"Your response...",className:"rounded-none bg-black border-secondary text-xs min-h-[60px]","data-testid":`input-question-response-${s.id}`})})]},s.id))})})})]})]})}),e.jsx(F,{value:"evidence",className:"flex-1 overflow-auto mt-4",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"})," OBSERVED DATA (from Brain)"]})}),e.jsx(w,{className:"p-4",children:e.jsx(L,{className:"h-[400px]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-black/40 border border-secondary/50",children:[e.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"SESSION DISTRIBUTION"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 font-terminal text-xs",children:l.map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-muted-foreground",children:[s.totalSessions||0," sessions"]})]},s.id))})]}),e.jsxs("div",{className:"p-3 bg-black/40 border border-secondary/50",children:[e.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"CONFUSION LOG"}),e.jsx("div",{className:"space-y-1 font-terminal text-xs",children:D.length>0?D.slice(0,5).map((s,x)=>e.jsxs("div",{className:"text-muted-foreground",children:["â€¢ ",s]},x)):e.jsx("div",{className:"text-muted-foreground",children:"No confusions logged"})})]}),e.jsxs("div",{className:"p-3 bg-black/40 border border-secondary/50",children:[e.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"RECENT SESSIONS"}),e.jsx("div",{className:"space-y-1 font-terminal text-xs",children:S.slice(0,5).map((s,x)=>e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:s.topic||"Untitled"}),e.jsxs("span",{children:[s.minutes||0,"m"]})]},x))})]})]})})})]}),e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"})," RESEARCH INTERPRETATION"]})}),e.jsxs(w,{className:"p-4",children:[e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mb-4",children:"Learning science findings relevant to your study patterns."}),e.jsx(L,{className:"h-[350px]",children:e.jsx("div",{className:"space-y-4",children:V.map((s,x)=>e.jsxs("div",{className:"p-3 bg-black/40 border border-secondary/50",children:[e.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:s.topic??s.title}),e.jsx("p",{className:"font-terminal text-xs mb-2",children:s.summary??s.content}),e.jsx("div",{className:"flex justify-between text-[10px] text-muted-foreground",children:e.jsxs("span",{children:["Source: ",s.source]})}),e.jsx("div",{className:"mt-2 pt-2 border-t border-secondary/30",children:e.jsxs("span",{className:"text-[10px] text-primary",children:["Relevance: ",s.relevance??"n/a"]})})]},x))})})]})]})]})}),e.jsx(F,{value:"proposals",className:"flex-1 overflow-auto mt-4",children:e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsxs(y,{className:"p-3 border-b border-secondary",children:[e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"})," IMPROVEMENT PROPOSALS"]}),e.jsx("p",{className:"font-terminal text-[10px] text-muted-foreground mt-1",children:"No auto-implementation. All changes require user approval."})]}),e.jsx(w,{className:"p-4",children:e.jsx(L,{className:"h-[500px]",children:e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground font-terminal text-sm",children:"No proposals yet. Scholar will generate proposals based on Brain analysis."}):h.filter(s=>s.status!=="REJECTED").map(s=>e.jsxs("div",{className:"p-4 bg-black/40 border border-secondary/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:s.proposalId}),e.jsx("h4",{className:"font-terminal text-sm mt-1",children:s.summary})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{variant:"outline",className:k("rounded-none text-[9px]",J(s.priority||"MED")),children:s.priority||"MED"})})]}),s.targetSystem&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Target: "}),e.jsx(R,{variant:"secondary",className:"rounded-none text-[9px]",children:s.targetSystem})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-secondary/30",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",className:"rounded-none text-[9px] border-secondary",children:"Confidence: MED"}),e.jsx(R,{variant:"outline",className:"rounded-none text-[9px] border-secondary",children:"Risk: LOW"})]}),e.jsxs(ze,{value:s.status||"DRAFT",onValueChange:x=>p.mutate({id:s.id,data:{status:x}}),children:[e.jsx(Ye,{className:k("rounded-none w-28 h-7 text-[10px]",z(s.status||"DRAFT")),"data-testid":`select-proposal-status-${s.id}`,children:e.jsx(Qe,{})}),e.jsxs(We,{className:"rounded-none bg-black border-primary",children:[e.jsx(Y,{value:"DRAFT",children:"PROPOSED"}),e.jsx(Y,{value:"APPROVED",children:"APPROVED"}),e.jsx(Y,{value:"REJECTED",children:"REJECTED"}),e.jsx(Y,{value:"IMPLEMENTED",children:"IMPLEMENTED"})]})]})]})]},s.id))})})})]})}),e.jsx(F,{value:"history",className:"flex-1 overflow-auto mt-4",children:e.jsxs(j,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(y,{className:"p-3 border-b border-secondary",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"})," PROPOSAL HISTORY (READ ONLY)"]})}),e.jsx(w,{className:"p-4",children:e.jsx(L,{className:"h-[500px]",children:e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground font-terminal text-sm",children:"No proposal history yet."}):h.map(s=>e.jsxs("div",{className:"flex items-center p-3 bg-black/40 border border-secondary/50 font-terminal text-sm","data-testid":`history-proposal-${s.id}`,children:[e.jsx("div",{className:"w-20 font-mono text-xs text-muted-foreground",children:s.proposalId}),e.jsx("div",{className:"flex-1 truncate",children:s.summary}),e.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[e.jsx(R,{variant:"outline",className:k("rounded-none text-[9px]",z(s.status||"DRAFT")),children:s.status||"DRAFT"}),e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[e.jsx(es,{className:"w-3 h-3 inline mr-1"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]})]})]},s.id))})})})]})})]})})]})})}export{Vs as default};
